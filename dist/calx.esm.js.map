{"version":3,"file":"calx.esm.js","mappings":"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","sources":["webpack:///./node_modules/lodash/_getAllKeys.js","webpack:///./node_modules/lodash/_ListCache.js","webpack:///./node_modules/lodash/_listCacheDelete.js","webpack:///./node_modules/lodash/memoize.js","webpack:///./node_modules/chevrotain/lib/src/parse/exceptions_public.js","webpack:///./node_modules/chevrotain/lib/src/scan/lexer_public.js","webpack:///./node_modules/lodash/_nativeKeysIn.js","webpack:///./node_modules/lodash/_baseIsEqual.js","webpack:///./node_modules/lodash/_mapCacheGet.js","webpack:///./node_modules/lodash/isLength.js","webpack:///./node_modules/lodash/_mapToArray.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/lodash/_isIndex.js","webpack:///./node_modules/lodash/_getValue.js","webpack:///./node_modules/chevrotain/lib/src/scan/reg_exp_parser.js","webpack:///./node_modules/lodash/_baseHas.js","webpack:///./node_modules/chevrotain/lib/src/scan/lexer_errors_public.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/checks.js","webpack:///./node_modules/lodash/_baseValues.js","webpack:///./node_modules/lodash/property.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/context_assist.js","webpack:///./node_modules/lodash/hasIn.js","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/lodash/_equalObjects.js","webpack:///./node_modules/lodash/_arrayLikeKeys.js","webpack:///./node_modules/lodash/_isStrictComparable.js","webpack:///./node_modules/lodash/_getMatchData.js","webpack:///./node_modules/lodash/reduce.js","webpack:///./node_modules/chevrotain/lib/src/parse/errors_public.js","webpack:///./node_modules/lodash/_arrayReduce.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lodash/head.js","webpack:///./node_modules/lodash/_baseSome.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/lexer_adapter.js","webpack:///./node_modules/lodash/_stackDelete.js","webpack:///./node_modules/lodash/_stackSet.js","webpack:///./node_modules/lodash/_createAssigner.js","webpack:///./node_modules/lodash/_apply.js","webpack:///./node_modules/lodash/_nativeCreate.js","webpack:///./node_modules/lodash/_asciiToArray.js","webpack:///./node_modules/lodash/pickBy.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/recognizer_api.js","webpack:///./node_modules/lodash/_listCacheSet.js","webpack:///./node_modules/lodash/_setCacheAdd.js","webpack:///./node_modules/chevrotain/lib/src/api.js","webpack:///./node_modules/lodash/_stackClear.js","webpack:///./node_modules/lodash/_baseIsRegExp.js","webpack:///./node_modules/lodash/has.js","webpack:///./node_modules/lodash/_setCacheHas.js","webpack:///./node_modules/lodash/toInteger.js","webpack:///./node_modules/lodash/_Hash.js","webpack:///./node_modules/@chevrotain/utils/lib/src/timer.js","webpack:///./node_modules/lodash/indexOf.js","webpack:///./node_modules/lodash/_castPath.js","webpack:///./node_modules/lodash/_copyObject.js","webpack:///./node_modules/lodash/_baseIsMatch.js","webpack:///./node_modules/lodash/_trimmedEndIndex.js","webpack:///./node_modules/lodash/_stringToPath.js","webpack:///./node_modules/lodash/_shortOut.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/isFunction.js","webpack:///./src/Calx/Cell/CellEvent.ts","webpack:///./node_modules/lodash/_cloneTypedArray.js","webpack:///./node_modules/lodash/_equalByTag.js","webpack:///./node_modules/lodash/_createAggregator.js","webpack:///./node_modules/lodash/_createFind.js","webpack:///./node_modules/lodash/groupBy.js","webpack:///./node_modules/lodash/_hashClear.js","webpack:///./node_modules/lodash/_unicodeToArray.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/looksahead.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/perf_tracer.js","webpack:///./node_modules/lodash/isEmpty.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/first.js","webpack:///./node_modules/lodash/_baseGetAllKeys.js","webpack:///./node_modules/lodash/isUndefined.js","webpack:///./node_modules/lodash/_memoizeCapped.js","webpack:///./node_modules/lodash/_copySymbols.js","webpack:///./node_modules/@chevrotain/utils/lib/src/print.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/gast_recorder.js","webpack:///./node_modules/lodash/some.js","webpack:///./node_modules/lodash/isArguments.js","webpack:///./node_modules/lodash/_baseAggregator.js","webpack:///./node_modules/regexp-to-ast/lib/regexp-to-ast.js","webpack:///./node_modules/lodash/_createCaseFirst.js","webpack:///./node_modules/lodash/_baseFindIndex.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/lodash/clone.js","webpack:///./node_modules/lodash/_getMapData.js","webpack:///./node_modules/lodash/_hashHas.js","webpack:///./node_modules/lodash/_Promise.js","webpack:///./node_modules/lodash/_setToString.js","webpack:///./node_modules/lodash/_baseKeysIn.js","webpack:///./node_modules/lodash/_mapCacheSet.js","webpack:///./node_modules/lodash/_copyArray.js","webpack:///./node_modules/lodash/_mapCacheClear.js","webpack:///./node_modules/chevrotain/lib/src/scan/tokens.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/rest.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_cloneRegExp.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./node_modules/lodash/toString.js","webpack:///./node_modules/lodash/_defineProperty.js","webpack:///./node_modules/@chevrotain/cst-dts-gen/lib/src/api.js","webpack:///./node_modules/lodash/_cloneBuffer.js","webpack:///./node_modules/lodash/stubArray.js","webpack:///./node_modules/lodash/_getAllKeysIn.js","webpack:///./node_modules/lodash/_baseAssignValue.js","webpack:///./node_modules/lodash/uniq.js","webpack:///./node_modules/@chevrotain/gast/lib/src/api.js","webpack:///./node_modules/chevrotain/lib_esm/api_esm.mjs","webpack:///./src/Calx/Parser/Chevrotain/Tokens.ts","webpack:///./src/Calx/Parser/Chevrotain/Parser.ts","webpack:///./src/Calx/Cell/ErrorType.ts","webpack:///./src/Calx/Cell/ArrayResult.ts","webpack:///./src/Calx/Parser/Chevrotain/Interpreter.ts","webpack:///./src/Calx/Range.ts","webpack:///./src/Calx/Sheet/SheetEvent.ts","webpack:///./src/Calx/Cell/DataType.ts","webpack:///./src/Calx/Utility/DateUtil.ts","webpack:///./src/Calx/Cell.ts","webpack:///./src/Calx/Sheet/CellRegistry.ts","webpack:///./src/Calx/Utility/Utility.ts","webpack:///./src/Calx/Sheet.ts","webpack:///./node_modules/@formulajs/formulajs/lib/esm/index.mjs","webpack:///./src/Calx/Formula/FormulaJSWrapper.ts","webpack:///./src/Calx/Parser/SharedContext.ts","webpack:///./src/Calx/Workbook/NameManager.ts","webpack:///./src/Calx/Utility/Comparator.ts","webpack:///./src/Calx/Workbook.ts","webpack:///./src/Calx.ts","webpack:///./node_modules/lodash/identity.js","webpack:///./node_modules/@chevrotain/gast/lib/src/helpers.js","webpack:///./node_modules/lodash/_stackGet.js","webpack:///./node_modules/lodash/_nativeKeys.js","webpack:///./node_modules/lodash/isBuffer.js","webpack:///./node_modules/lodash/_MapCache.js","webpack:///./node_modules/lodash/_baseMatches.js","webpack:///./node_modules/lodash/compact.js","webpack:///./node_modules/lodash/isArrayLikeObject.js","webpack:///./node_modules/lodash/_listCacheClear.js","webpack:///./node_modules/lodash/_arrayEach.js","webpack:///./node_modules/lodash/_cloneSymbol.js","webpack:///./node_modules/lodash/drop.js","webpack:///./node_modules/lodash/_baseEvery.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/lodash/_baseAssignIn.js","webpack:///./node_modules/lodash/_hashDelete.js","webpack:///./node_modules/lodash/_stringToArray.js","webpack:///./node_modules/lodash/_baseDifference.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/resolver.js","webpack:///./node_modules/lodash/_arrayAggregator.js","webpack:///./node_modules/lodash/noop.js","webpack:///./node_modules/lodash/_castFunction.js","webpack:///./node_modules/@chevrotain/gast/lib/src/visitor.js","webpack:///./node_modules/lodash/_baseTrim.js","webpack:///./node_modules/lodash/_isKeyable.js","webpack:///./node_modules/lodash/_setToArray.js","webpack:///./node_modules/lodash/_arraySome.js","webpack:///./node_modules/lodash/_overArg.js","webpack:///./node_modules/lodash/isSymbol.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/interpreter.js","webpack:///./node_modules/lodash/_mapCacheHas.js","webpack:///./node_modules/lodash/_createSet.js","webpack:///./node_modules/lodash/_arrayPush.js","webpack:///./node_modules/chevrotain/lib/src/lang/lang_extensions.js","webpack:///./node_modules/lodash/_getSymbols.js","webpack:///./node_modules/lodash/defaults.js","webpack:///./node_modules/lodash/findIndex.js","webpack:///./node_modules/lodash/_baseAssign.js","webpack:///./node_modules/lodash/_listCacheGet.js","webpack:///./node_modules/bessel/bessel.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/lodash/isArrayLike.js","webpack:///./node_modules/lodash/_baseIsTypedArray.js","webpack:///./node_modules/chevrotain/lib/src/version.js","webpack:///./node_modules/lodash/_arrayMap.js","webpack:///./node_modules/chevrotain/lib/src/parse/constants.js","webpack:///./node_modules/lodash/isString.js","webpack:///./node_modules/chevrotain/lib/src/scan/lexer.js","webpack:///./node_modules/lodash/_baseIsNative.js","webpack:///./node_modules/lodash/_baseMap.js","webpack:///./node_modules/lodash/_baseSlice.js","webpack:///./node_modules/lodash/eq.js","webpack:///./node_modules/lodash/_arrayIncludes.js","webpack:///./node_modules/lodash/map.js","webpack:///./node_modules/lodash/_baseIteratee.js","webpack:///./node_modules/lodash/_baseIsNaN.js","webpack:///./node_modules/lodash/_coreJsData.js","webpack:///./node_modules/lodash/_isPrototype.js","webpack:///./node_modules/lodash/_initCloneObject.js","webpack:///./node_modules/lodash/_baseReduce.js","webpack:///./node_modules/lodash/_DataView.js","webpack:///./src/Calx/Utility/EventDispatcher.ts","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/llk_lookahead.js","webpack:///./node_modules/lodash/_hashSet.js","webpack:///./node_modules/lodash/_baseUniq.js","webpack:///./node_modules/lodash/upperFirst.js","webpack:///./node_modules/lodash/_getTag.js","webpack:///./node_modules/lodash/values.js","webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/lodash/_equalArrays.js","webpack:///./node_modules/lodash/keys.js","webpack:///./node_modules/lodash/flatten.js","webpack:///./node_modules/chevrotain/lib/src/diagrams/render_public.js","webpack:///./node_modules/lodash/_nodeUtil.js","webpack:///./node_modules/lodash/_assocIndexOf.js","webpack:///./node_modules/lodash/_baseIsSet.js","webpack:///./node_modules/@chevrotain/cst-dts-gen/lib/src/model.js","webpack:///./node_modules/lodash/negate.js","webpack:///./node_modules/lodash/_getNative.js","webpack:///./node_modules/lodash/_baseIndexOf.js","webpack:///./node_modules/lodash/assign.js","webpack:///./node_modules/lodash/_cloneDataView.js","webpack:///./node_modules/lodash/first.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/follow.js","webpack:///./node_modules/lodash/_initCloneArray.js","webpack:///./node_modules/chevrotain/lib/src/scan/reg_exp.js","webpack:///./node_modules/lodash/difference.js","webpack:///./node_modules/@chevrotain/utils/lib/src/to-fast-properties.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/parser.js","webpack:///./node_modules/lodash/_getSymbolsIn.js","webpack:///./node_modules/@chevrotain/cst-dts-gen/lib/src/generate.js","webpack:///./node_modules/lodash/isArray.js","webpack:///./node_modules/lodash/_Set.js","webpack:///./node_modules/lodash/_assignValue.js","webpack:///./node_modules/jstat/dist/jstat.js","webpack:///./node_modules/lodash/_baseFilter.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./node_modules/lodash/_hashGet.js","webpack:///./node_modules/lodash/_overRest.js","webpack:///./node_modules/lodash/_isIterateeCall.js","webpack:///./node_modules/lodash/_strictIndexOf.js","webpack:///./node_modules/chevrotain/lib/src/parse/cst/cst.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/keys.js","webpack:///./node_modules/lodash/_baseIsEqualDeep.js","webpack:///./node_modules/lodash/isTypedArray.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/utils/apply_mixins.js","webpack:///./node_modules/lodash/_matchesStrictComparable.js","webpack:///./node_modules/lodash/_initCloneByTag.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/recognizer_engine.js","webpack:///./node_modules/lodash/_Stack.js","webpack:///./node_modules/lodash/_baseProperty.js","webpack:///./node_modules/lodash/keysIn.js","webpack:///./node_modules/lodash/_basePropertyDeep.js","webpack:///./node_modules/lodash/_arrayEvery.js","webpack:///./node_modules/lodash/_isMasked.js","webpack:///./node_modules/lodash/_baseUnary.js","webpack:///./node_modules/lodash/flatMap.js","webpack:///./node_modules/lodash/find.js","webpack:///./node_modules/lodash/constant.js","webpack:///./node_modules/lodash/toFinite.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./node_modules/lodash/_baseGet.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/tree_builder.js","webpack:///./node_modules/lodash/_toSource.js","webpack:///./node_modules/lodash/_baseIsArguments.js","webpack:///./node_modules/lodash/dropRight.js","webpack:///./node_modules/lodash/_baseToString.js","webpack:///./node_modules/lodash/filter.js","webpack:///./node_modules/lodash/_mapCacheDelete.js","webpack:///./node_modules/lodash/isMap.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/error_handler.js","webpack:///./node_modules/lodash/_toKey.js","webpack:///./node_modules/lodash/_Uint8Array.js","webpack:///./node_modules/lodash/_baseMatchesProperty.js","webpack:///./node_modules/lodash/_baseHasIn.js","webpack:///./node_modules/lodash/reject.js","webpack:///./node_modules/lodash/last.js","webpack:///./node_modules/lodash/_baseTimes.js","webpack:///./node_modules/lodash/get.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/recoverable.js","webpack:///./node_modules/lodash/_Map.js","webpack:///./node_modules/lodash/_WeakMap.js","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./src/Calx/Workbook/DependencyTree.ts","webpack:///./src/Calx/Workbook/DependencyBuilder.ts","webpack:///./node_modules/lodash/isSet.js","webpack:///./node_modules/@chevrotain/gast/lib/src/model.js","webpack:///./node_modules/lodash/_isKey.js","webpack:///./node_modules/lodash/_listCacheHas.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/lookahead.js","webpack:///./node_modules/lodash/_castSlice.js","webpack:///./node_modules/lodash/_SetCache.js","webpack:///./node_modules/lodash/_getPrototype.js","webpack:///./node_modules/@chevrotain/utils/lib/src/api.js","webpack:///./node_modules/lodash/_copySymbolsIn.js","webpack:///./node_modules/lodash/_baseKeys.js","webpack:///./node_modules/lodash/_baseIsMap.js","webpack:///./node_modules/lodash/_cacheHas.js","webpack:///./node_modules/lodash/_baseRest.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/_hasPath.js","webpack:///./node_modules/lodash/_baseCreate.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/toNumber.js","webpack:///./node_modules/chevrotain/lib/src/scan/tokens_public.js","webpack:///./node_modules/lodash/_baseSetToString.js","webpack:///./node_modules/lodash/isRegExp.js","webpack:///./node_modules/lodash/_cloneArrayBuffer.js","webpack:///./node_modules/chevrotain/lib/src/parse/cst/cst_visitor.js","webpack:///./node_modules/lodash/_hasUnicode.js","webpack:///./node_modules/lodash/every.js","webpack:///./node_modules/lodash/forEach.js","webpack:///./node_modules/lodash/_arrayFilter.js","webpack:///./node_modules/lodash/_stackHas.js","webpack:///./node_modules/lodash/includes.js","webpack:///./node_modules/lodash/_arrayIncludesWith.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/gast/gast_resolver_public.js","webpack:///./node_modules/lodash/stubFalse.js","webpack:///./node_modules/lodash/_baseClone.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/startup"],"sourcesContent":["var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EarlyExitException = exports.NotAllInputParsedException = exports.NoViableAltException = exports.MismatchedTokenException = exports.isRecognitionException = void 0;\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar MISMATCHED_TOKEN_EXCEPTION = \"MismatchedTokenException\";\nvar NO_VIABLE_ALT_EXCEPTION = \"NoViableAltException\";\nvar EARLY_EXIT_EXCEPTION = \"EarlyExitException\";\nvar NOT_ALL_INPUT_PARSED_EXCEPTION = \"NotAllInputParsedException\";\nvar RECOGNITION_EXCEPTION_NAMES = [\n    MISMATCHED_TOKEN_EXCEPTION,\n    NO_VIABLE_ALT_EXCEPTION,\n    EARLY_EXIT_EXCEPTION,\n    NOT_ALL_INPUT_PARSED_EXCEPTION\n];\nObject.freeze(RECOGNITION_EXCEPTION_NAMES);\n// hacks to bypass no support for custom Errors in javascript/typescript\nfunction isRecognitionException(error) {\n    // can't do instanceof on hacked custom js exceptions\n    return (0, includes_1.default)(RECOGNITION_EXCEPTION_NAMES, error.name);\n}\nexports.isRecognitionException = isRecognitionException;\nvar RecognitionException = /** @class */ (function (_super) {\n    __extends(RecognitionException, _super);\n    function RecognitionException(message, token) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        _this.token = token;\n        _this.resyncedTokens = [];\n        // fix prototype chain when typescript target is ES5\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        /* istanbul ignore next - V8 workaround to remove constructor from stacktrace when typescript target is ES5 */\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(_this, _this.constructor);\n        }\n        return _this;\n    }\n    return RecognitionException;\n}(Error));\nvar MismatchedTokenException = /** @class */ (function (_super) {\n    __extends(MismatchedTokenException, _super);\n    function MismatchedTokenException(message, token, previousToken) {\n        var _this = _super.call(this, message, token) || this;\n        _this.previousToken = previousToken;\n        _this.name = MISMATCHED_TOKEN_EXCEPTION;\n        return _this;\n    }\n    return MismatchedTokenException;\n}(RecognitionException));\nexports.MismatchedTokenException = MismatchedTokenException;\nvar NoViableAltException = /** @class */ (function (_super) {\n    __extends(NoViableAltException, _super);\n    function NoViableAltException(message, token, previousToken) {\n        var _this = _super.call(this, message, token) || this;\n        _this.previousToken = previousToken;\n        _this.name = NO_VIABLE_ALT_EXCEPTION;\n        return _this;\n    }\n    return NoViableAltException;\n}(RecognitionException));\nexports.NoViableAltException = NoViableAltException;\nvar NotAllInputParsedException = /** @class */ (function (_super) {\n    __extends(NotAllInputParsedException, _super);\n    function NotAllInputParsedException(message, token) {\n        var _this = _super.call(this, message, token) || this;\n        _this.name = NOT_ALL_INPUT_PARSED_EXCEPTION;\n        return _this;\n    }\n    return NotAllInputParsedException;\n}(RecognitionException));\nexports.NotAllInputParsedException = NotAllInputParsedException;\nvar EarlyExitException = /** @class */ (function (_super) {\n    __extends(EarlyExitException, _super);\n    function EarlyExitException(message, token, previousToken) {\n        var _this = _super.call(this, message, token) || this;\n        _this.previousToken = previousToken;\n        _this.name = EARLY_EXIT_EXCEPTION;\n        return _this;\n    }\n    return EarlyExitException;\n}(RecognitionException));\nexports.EarlyExitException = EarlyExitException;\n//# sourceMappingURL=exceptions_public.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Lexer = exports.LexerDefinitionErrorType = void 0;\nvar lexer_1 = require(\"./lexer\");\nvar noop_1 = __importDefault(require(\"lodash/noop\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar last_1 = __importDefault(require(\"lodash/last\"));\nvar reject_1 = __importDefault(require(\"lodash/reject\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar keys_1 = __importDefault(require(\"lodash/keys\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar identity_1 = __importDefault(require(\"lodash/identity\"));\nvar assign_1 = __importDefault(require(\"lodash/assign\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar tokens_1 = require(\"./tokens\");\nvar lexer_errors_public_1 = require(\"./lexer_errors_public\");\nvar reg_exp_parser_1 = require(\"./reg_exp_parser\");\nvar LexerDefinitionErrorType;\n(function (LexerDefinitionErrorType) {\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MISSING_PATTERN\"] = 0] = \"MISSING_PATTERN\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"INVALID_PATTERN\"] = 1] = \"INVALID_PATTERN\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"EOI_ANCHOR_FOUND\"] = 2] = \"EOI_ANCHOR_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"UNSUPPORTED_FLAGS_FOUND\"] = 3] = \"UNSUPPORTED_FLAGS_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"DUPLICATE_PATTERNS_FOUND\"] = 4] = \"DUPLICATE_PATTERNS_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"INVALID_GROUP_TYPE_FOUND\"] = 5] = \"INVALID_GROUP_TYPE_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"PUSH_MODE_DOES_NOT_EXIST\"] = 6] = \"PUSH_MODE_DOES_NOT_EXIST\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE\"] = 7] = \"MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY\"] = 8] = \"MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST\"] = 9] = \"MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED\"] = 10] = \"LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"SOI_ANCHOR_FOUND\"] = 11] = \"SOI_ANCHOR_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"EMPTY_MATCH_PATTERN\"] = 12] = \"EMPTY_MATCH_PATTERN\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"NO_LINE_BREAKS_FLAGS\"] = 13] = \"NO_LINE_BREAKS_FLAGS\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"UNREACHABLE_PATTERN\"] = 14] = \"UNREACHABLE_PATTERN\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"IDENTIFY_TERMINATOR\"] = 15] = \"IDENTIFY_TERMINATOR\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"CUSTOM_LINE_BREAK\"] = 16] = \"CUSTOM_LINE_BREAK\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE\"] = 17] = \"MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE\";\n})(LexerDefinitionErrorType = exports.LexerDefinitionErrorType || (exports.LexerDefinitionErrorType = {}));\nvar DEFAULT_LEXER_CONFIG = {\n    deferDefinitionErrorsHandling: false,\n    positionTracking: \"full\",\n    lineTerminatorsPattern: /\\n|\\r\\n?/g,\n    lineTerminatorCharacters: [\"\\n\", \"\\r\"],\n    ensureOptimizations: false,\n    safeMode: false,\n    errorMessageProvider: lexer_errors_public_1.defaultLexerErrorProvider,\n    traceInitPerf: false,\n    skipValidations: false,\n    recoveryEnabled: true\n};\nObject.freeze(DEFAULT_LEXER_CONFIG);\nvar Lexer = /** @class */ (function () {\n    function Lexer(lexerDefinition, config) {\n        if (config === void 0) { config = DEFAULT_LEXER_CONFIG; }\n        var _this = this;\n        this.lexerDefinition = lexerDefinition;\n        this.lexerDefinitionErrors = [];\n        this.lexerDefinitionWarning = [];\n        this.patternIdxToConfig = {};\n        this.charCodeToPatternIdxToConfig = {};\n        this.modes = [];\n        this.emptyGroups = {};\n        this.trackStartLines = true;\n        this.trackEndLines = true;\n        this.hasCustom = false;\n        this.canModeBeOptimized = {};\n        // Duplicated from the parser's perf trace trait to allow future extraction\n        // of the lexer to a separate package.\n        this.TRACE_INIT = function (phaseDesc, phaseImpl) {\n            // No need to optimize this using NOOP pattern because\n            // It is not called in a hot spot...\n            if (_this.traceInitPerf === true) {\n                _this.traceInitIndent++;\n                var indent = new Array(_this.traceInitIndent + 1).join(\"\\t\");\n                if (_this.traceInitIndent < _this.traceInitMaxIdent) {\n                    console.log(\"\".concat(indent, \"--> <\").concat(phaseDesc, \">\"));\n                }\n                var _a = (0, utils_1.timer)(phaseImpl), time = _a.time, value = _a.value;\n                /* istanbul ignore next - Difficult to reproduce specific performance behavior (>10ms) in tests */\n                var traceMethod = time > 10 ? console.warn : console.log;\n                if (_this.traceInitIndent < _this.traceInitMaxIdent) {\n                    traceMethod(\"\".concat(indent, \"<-- <\").concat(phaseDesc, \"> time: \").concat(time, \"ms\"));\n                }\n                _this.traceInitIndent--;\n                return value;\n            }\n            else {\n                return phaseImpl();\n            }\n        };\n        if (typeof config === \"boolean\") {\n            throw Error(\"The second argument to the Lexer constructor is now an ILexerConfig Object.\\n\" +\n                \"a boolean 2nd argument is no longer supported\");\n        }\n        // todo: defaults func?\n        this.config = (0, assign_1.default)({}, DEFAULT_LEXER_CONFIG, config);\n        var traceInitVal = this.config.traceInitPerf;\n        if (traceInitVal === true) {\n            this.traceInitMaxIdent = Infinity;\n            this.traceInitPerf = true;\n        }\n        else if (typeof traceInitVal === \"number\") {\n            this.traceInitMaxIdent = traceInitVal;\n            this.traceInitPerf = true;\n        }\n        this.traceInitIndent = -1;\n        this.TRACE_INIT(\"Lexer Constructor\", function () {\n            var actualDefinition;\n            var hasOnlySingleMode = true;\n            _this.TRACE_INIT(\"Lexer Config handling\", function () {\n                if (_this.config.lineTerminatorsPattern ===\n                    DEFAULT_LEXER_CONFIG.lineTerminatorsPattern) {\n                    // optimized built-in implementation for the defaults definition of lineTerminators\n                    _this.config.lineTerminatorsPattern = lexer_1.LineTerminatorOptimizedTester;\n                }\n                else {\n                    if (_this.config.lineTerminatorCharacters ===\n                        DEFAULT_LEXER_CONFIG.lineTerminatorCharacters) {\n                        throw Error(\"Error: Missing <lineTerminatorCharacters> property on the Lexer config.\\n\" +\n                            \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS\");\n                    }\n                }\n                if (config.safeMode && config.ensureOptimizations) {\n                    throw Error('\"safeMode\" and \"ensureOptimizations\" flags are mutually exclusive.');\n                }\n                _this.trackStartLines = /full|onlyStart/i.test(_this.config.positionTracking);\n                _this.trackEndLines = /full/i.test(_this.config.positionTracking);\n                // Convert SingleModeLexerDefinition into a IMultiModeLexerDefinition.\n                if ((0, isArray_1.default)(lexerDefinition)) {\n                    actualDefinition = {\n                        modes: { defaultMode: (0, clone_1.default)(lexerDefinition) },\n                        defaultMode: lexer_1.DEFAULT_MODE\n                    };\n                }\n                else {\n                    // no conversion needed, input should already be a IMultiModeLexerDefinition\n                    hasOnlySingleMode = false;\n                    actualDefinition = (0, clone_1.default)(lexerDefinition);\n                }\n            });\n            if (_this.config.skipValidations === false) {\n                _this.TRACE_INIT(\"performRuntimeChecks\", function () {\n                    _this.lexerDefinitionErrors = _this.lexerDefinitionErrors.concat((0, lexer_1.performRuntimeChecks)(actualDefinition, _this.trackStartLines, _this.config.lineTerminatorCharacters));\n                });\n                _this.TRACE_INIT(\"performWarningRuntimeChecks\", function () {\n                    _this.lexerDefinitionWarning = _this.lexerDefinitionWarning.concat((0, lexer_1.performWarningRuntimeChecks)(actualDefinition, _this.trackStartLines, _this.config.lineTerminatorCharacters));\n                });\n            }\n            // for extra robustness to avoid throwing an none informative error message\n            actualDefinition.modes = actualDefinition.modes\n                ? actualDefinition.modes\n                : {};\n            // an error of undefined TokenTypes will be detected in \"performRuntimeChecks\" above.\n            // this transformation is to increase robustness in the case of partially invalid lexer definition.\n            (0, forEach_1.default)(actualDefinition.modes, function (currModeValue, currModeName) {\n                actualDefinition.modes[currModeName] = (0, reject_1.default)(currModeValue, function (currTokType) { return (0, isUndefined_1.default)(currTokType); });\n            });\n            var allModeNames = (0, keys_1.default)(actualDefinition.modes);\n            (0, forEach_1.default)(actualDefinition.modes, function (currModDef, currModName) {\n                _this.TRACE_INIT(\"Mode: <\".concat(currModName, \"> processing\"), function () {\n                    _this.modes.push(currModName);\n                    if (_this.config.skipValidations === false) {\n                        _this.TRACE_INIT(\"validatePatterns\", function () {\n                            _this.lexerDefinitionErrors = _this.lexerDefinitionErrors.concat((0, lexer_1.validatePatterns)(currModDef, allModeNames));\n                        });\n                    }\n                    // If definition errors were encountered, the analysis phase may fail unexpectedly/\n                    // Considering a lexer with definition errors may never be used, there is no point\n                    // to performing the analysis anyhow...\n                    if ((0, isEmpty_1.default)(_this.lexerDefinitionErrors)) {\n                        (0, tokens_1.augmentTokenTypes)(currModDef);\n                        var currAnalyzeResult_1;\n                        _this.TRACE_INIT(\"analyzeTokenTypes\", function () {\n                            currAnalyzeResult_1 = (0, lexer_1.analyzeTokenTypes)(currModDef, {\n                                lineTerminatorCharacters: _this.config.lineTerminatorCharacters,\n                                positionTracking: config.positionTracking,\n                                ensureOptimizations: config.ensureOptimizations,\n                                safeMode: config.safeMode,\n                                tracer: _this.TRACE_INIT\n                            });\n                        });\n                        _this.patternIdxToConfig[currModName] =\n                            currAnalyzeResult_1.patternIdxToConfig;\n                        _this.charCodeToPatternIdxToConfig[currModName] =\n                            currAnalyzeResult_1.charCodeToPatternIdxToConfig;\n                        _this.emptyGroups = (0, assign_1.default)({}, _this.emptyGroups, currAnalyzeResult_1.emptyGroups);\n                        _this.hasCustom = currAnalyzeResult_1.hasCustom || _this.hasCustom;\n                        _this.canModeBeOptimized[currModName] =\n                            currAnalyzeResult_1.canBeOptimized;\n                    }\n                });\n            });\n            _this.defaultMode = actualDefinition.defaultMode;\n            if (!(0, isEmpty_1.default)(_this.lexerDefinitionErrors) &&\n                !_this.config.deferDefinitionErrorsHandling) {\n                var allErrMessages = (0, map_1.default)(_this.lexerDefinitionErrors, function (error) {\n                    return error.message;\n                });\n                var allErrMessagesString = allErrMessages.join(\"-----------------------\\n\");\n                throw new Error(\"Errors detected in definition of Lexer:\\n\" + allErrMessagesString);\n            }\n            // Only print warning if there are no errors, This will avoid pl\n            (0, forEach_1.default)(_this.lexerDefinitionWarning, function (warningDescriptor) {\n                (0, utils_1.PRINT_WARNING)(warningDescriptor.message);\n            });\n            _this.TRACE_INIT(\"Choosing sub-methods implementations\", function () {\n                // Choose the relevant internal implementations for this specific parser.\n                // These implementations should be in-lined by the JavaScript engine\n                // to provide optimal performance in each scenario.\n                if (lexer_1.SUPPORT_STICKY) {\n                    _this.chopInput = identity_1.default;\n                    _this.match = _this.matchWithTest;\n                }\n                else {\n                    _this.updateLastIndex = noop_1.default;\n                    _this.match = _this.matchWithExec;\n                }\n                if (hasOnlySingleMode) {\n                    _this.handleModes = noop_1.default;\n                }\n                if (_this.trackStartLines === false) {\n                    _this.computeNewColumn = identity_1.default;\n                }\n                if (_this.trackEndLines === false) {\n                    _this.updateTokenEndLineColumnLocation = noop_1.default;\n                }\n                if (/full/i.test(_this.config.positionTracking)) {\n                    _this.createTokenInstance = _this.createFullToken;\n                }\n                else if (/onlyStart/i.test(_this.config.positionTracking)) {\n                    _this.createTokenInstance = _this.createStartOnlyToken;\n                }\n                else if (/onlyOffset/i.test(_this.config.positionTracking)) {\n                    _this.createTokenInstance = _this.createOffsetOnlyToken;\n                }\n                else {\n                    throw Error(\"Invalid <positionTracking> config option: \\\"\".concat(_this.config.positionTracking, \"\\\"\"));\n                }\n                if (_this.hasCustom) {\n                    _this.addToken = _this.addTokenUsingPush;\n                    _this.handlePayload = _this.handlePayloadWithCustom;\n                }\n                else {\n                    _this.addToken = _this.addTokenUsingMemberAccess;\n                    _this.handlePayload = _this.handlePayloadNoCustom;\n                }\n            });\n            _this.TRACE_INIT(\"Failed Optimization Warnings\", function () {\n                var unOptimizedModes = (0, reduce_1.default)(_this.canModeBeOptimized, function (cannotBeOptimized, canBeOptimized, modeName) {\n                    if (canBeOptimized === false) {\n                        cannotBeOptimized.push(modeName);\n                    }\n                    return cannotBeOptimized;\n                }, []);\n                if (config.ensureOptimizations && !(0, isEmpty_1.default)(unOptimizedModes)) {\n                    throw Error(\"Lexer Modes: < \".concat(unOptimizedModes.join(\", \"), \" > cannot be optimized.\\n\") +\n                        '\\t Disable the \"ensureOptimizations\" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\\n' +\n                        \"\\t Or inspect the console log for details on how to resolve these issues.\");\n                }\n            });\n            _this.TRACE_INIT(\"clearRegExpParserCache\", function () {\n                (0, reg_exp_parser_1.clearRegExpParserCache)();\n            });\n            _this.TRACE_INIT(\"toFastProperties\", function () {\n                (0, utils_1.toFastProperties)(_this);\n            });\n        });\n    }\n    Lexer.prototype.tokenize = function (text, initialMode) {\n        if (initialMode === void 0) { initialMode = this.defaultMode; }\n        if (!(0, isEmpty_1.default)(this.lexerDefinitionErrors)) {\n            var allErrMessages = (0, map_1.default)(this.lexerDefinitionErrors, function (error) {\n                return error.message;\n            });\n            var allErrMessagesString = allErrMessages.join(\"-----------------------\\n\");\n            throw new Error(\"Unable to Tokenize because Errors detected in definition of Lexer:\\n\" +\n                allErrMessagesString);\n        }\n        return this.tokenizeInternal(text, initialMode);\n    };\n    // There is quite a bit of duplication between this and \"tokenizeInternalLazy\"\n    // This is intentional due to performance considerations.\n    // this method also used quite a bit of `!` none null assertions because it is too optimized\n    // for `tsc` to always understand it is \"safe\"\n    Lexer.prototype.tokenizeInternal = function (text, initialMode) {\n        var _this = this;\n        var i, j, k, matchAltImage, longerAlt, matchedImage, payload, altPayload, imageLength, group, tokType, newToken, errLength, droppedChar, msg, match;\n        var orgText = text;\n        var orgLength = orgText.length;\n        var offset = 0;\n        var matchedTokensIndex = 0;\n        // initializing the tokensArray to the \"guessed\" size.\n        // guessing too little will still reduce the number of array re-sizes on pushes.\n        // guessing too large (Tested by guessing x4 too large) may cost a bit more of memory\n        // but would still have a faster runtime by avoiding (All but one) array resizing.\n        var guessedNumberOfTokens = this.hasCustom\n            ? 0 // will break custom token pattern APIs the matchedTokens array will contain undefined elements.\n            : Math.floor(text.length / 10);\n        var matchedTokens = new Array(guessedNumberOfTokens);\n        var errors = [];\n        var line = this.trackStartLines ? 1 : undefined;\n        var column = this.trackStartLines ? 1 : undefined;\n        var groups = (0, lexer_1.cloneEmptyGroups)(this.emptyGroups);\n        var trackLines = this.trackStartLines;\n        var lineTerminatorPattern = this.config.lineTerminatorsPattern;\n        var currModePatternsLength = 0;\n        var patternIdxToConfig = [];\n        var currCharCodeToPatternIdxToConfig = [];\n        var modeStack = [];\n        var emptyArray = [];\n        Object.freeze(emptyArray);\n        var getPossiblePatterns;\n        function getPossiblePatternsSlow() {\n            return patternIdxToConfig;\n        }\n        function getPossiblePatternsOptimized(charCode) {\n            var optimizedCharIdx = (0, lexer_1.charCodeToOptimizedIndex)(charCode);\n            var possiblePatterns = currCharCodeToPatternIdxToConfig[optimizedCharIdx];\n            if (possiblePatterns === undefined) {\n                return emptyArray;\n            }\n            else {\n                return possiblePatterns;\n            }\n        }\n        var pop_mode = function (popToken) {\n            // TODO: perhaps avoid this error in the edge case there is no more input?\n            if (modeStack.length === 1 &&\n                // if we have both a POP_MODE and a PUSH_MODE this is in-fact a \"transition\"\n                // So no error should occur.\n                popToken.tokenType.PUSH_MODE === undefined) {\n                // if we try to pop the last mode there lexer will no longer have ANY mode.\n                // thus the pop is ignored, an error will be created and the lexer will continue parsing in the previous mode.\n                var msg_1 = _this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(popToken);\n                errors.push({\n                    offset: popToken.startOffset,\n                    line: popToken.startLine,\n                    column: popToken.startColumn,\n                    length: popToken.image.length,\n                    message: msg_1\n                });\n            }\n            else {\n                modeStack.pop();\n                var newMode = (0, last_1.default)(modeStack);\n                patternIdxToConfig = _this.patternIdxToConfig[newMode];\n                currCharCodeToPatternIdxToConfig =\n                    _this.charCodeToPatternIdxToConfig[newMode];\n                currModePatternsLength = patternIdxToConfig.length;\n                var modeCanBeOptimized = _this.canModeBeOptimized[newMode] && _this.config.safeMode === false;\n                if (currCharCodeToPatternIdxToConfig && modeCanBeOptimized) {\n                    getPossiblePatterns = getPossiblePatternsOptimized;\n                }\n                else {\n                    getPossiblePatterns = getPossiblePatternsSlow;\n                }\n            }\n        };\n        function push_mode(newMode) {\n            modeStack.push(newMode);\n            currCharCodeToPatternIdxToConfig =\n                this.charCodeToPatternIdxToConfig[newMode];\n            patternIdxToConfig = this.patternIdxToConfig[newMode];\n            currModePatternsLength = patternIdxToConfig.length;\n            currModePatternsLength = patternIdxToConfig.length;\n            var modeCanBeOptimized = this.canModeBeOptimized[newMode] && this.config.safeMode === false;\n            if (currCharCodeToPatternIdxToConfig && modeCanBeOptimized) {\n                getPossiblePatterns = getPossiblePatternsOptimized;\n            }\n            else {\n                getPossiblePatterns = getPossiblePatternsSlow;\n            }\n        }\n        // this pattern seems to avoid a V8 de-optimization, although that de-optimization does not\n        // seem to matter performance wise.\n        push_mode.call(this, initialMode);\n        var currConfig;\n        var recoveryEnabled = this.config.recoveryEnabled;\n        while (offset < orgLength) {\n            matchedImage = null;\n            var nextCharCode = orgText.charCodeAt(offset);\n            var chosenPatternIdxToConfig = getPossiblePatterns(nextCharCode);\n            var chosenPatternsLength = chosenPatternIdxToConfig.length;\n            for (i = 0; i < chosenPatternsLength; i++) {\n                currConfig = chosenPatternIdxToConfig[i];\n                var currPattern = currConfig.pattern;\n                payload = null;\n                // manually in-lined because > 600 chars won't be in-lined in V8\n                var singleCharCode = currConfig.short;\n                if (singleCharCode !== false) {\n                    if (nextCharCode === singleCharCode) {\n                        // single character string\n                        matchedImage = currPattern;\n                    }\n                }\n                else if (currConfig.isCustom === true) {\n                    match = currPattern.exec(orgText, offset, matchedTokens, groups);\n                    if (match !== null) {\n                        matchedImage = match[0];\n                        if (match.payload !== undefined) {\n                            payload = match.payload;\n                        }\n                    }\n                    else {\n                        matchedImage = null;\n                    }\n                }\n                else {\n                    this.updateLastIndex(currPattern, offset);\n                    matchedImage = this.match(currPattern, text, offset);\n                }\n                if (matchedImage !== null) {\n                    // even though this pattern matched we must try a another longer alternative.\n                    // this can be used to prioritize keywords over identifiers\n                    longerAlt = currConfig.longerAlt;\n                    if (longerAlt !== undefined) {\n                        // TODO: micro optimize, avoid extra prop access\n                        // by saving/linking longerAlt on the original config?\n                        var longerAltLength = longerAlt.length;\n                        for (k = 0; k < longerAltLength; k++) {\n                            var longerAltConfig = patternIdxToConfig[longerAlt[k]];\n                            var longerAltPattern = longerAltConfig.pattern;\n                            altPayload = null;\n                            // single Char can never be a longer alt so no need to test it.\n                            // manually in-lined because > 600 chars won't be in-lined in V8\n                            if (longerAltConfig.isCustom === true) {\n                                match = longerAltPattern.exec(orgText, offset, matchedTokens, groups);\n                                if (match !== null) {\n                                    matchAltImage = match[0];\n                                    if (match.payload !== undefined) {\n                                        altPayload = match.payload;\n                                    }\n                                }\n                                else {\n                                    matchAltImage = null;\n                                }\n                            }\n                            else {\n                                this.updateLastIndex(longerAltPattern, offset);\n                                matchAltImage = this.match(longerAltPattern, text, offset);\n                            }\n                            if (matchAltImage && matchAltImage.length > matchedImage.length) {\n                                matchedImage = matchAltImage;\n                                payload = altPayload;\n                                currConfig = longerAltConfig;\n                                // Exit the loop early after matching one of the longer alternatives\n                                // The first matched alternative takes precedence\n                                break;\n                            }\n                        }\n                    }\n                    break;\n                }\n            }\n            // successful match\n            if (matchedImage !== null) {\n                imageLength = matchedImage.length;\n                group = currConfig.group;\n                if (group !== undefined) {\n                    tokType = currConfig.tokenTypeIdx;\n                    // TODO: \"offset + imageLength\" and the new column may be computed twice in case of \"full\" location information inside\n                    // createFullToken method\n                    newToken = this.createTokenInstance(matchedImage, offset, tokType, currConfig.tokenType, line, column, imageLength);\n                    this.handlePayload(newToken, payload);\n                    // TODO: optimize NOOP in case there are no special groups?\n                    if (group === false) {\n                        matchedTokensIndex = this.addToken(matchedTokens, matchedTokensIndex, newToken);\n                    }\n                    else {\n                        groups[group].push(newToken);\n                    }\n                }\n                text = this.chopInput(text, imageLength);\n                offset = offset + imageLength;\n                // TODO: with newlines the column may be assigned twice\n                column = this.computeNewColumn(column, imageLength);\n                if (trackLines === true && currConfig.canLineTerminator === true) {\n                    var numOfLTsInMatch = 0;\n                    var foundTerminator = void 0;\n                    var lastLTEndOffset = void 0;\n                    lineTerminatorPattern.lastIndex = 0;\n                    do {\n                        foundTerminator = lineTerminatorPattern.test(matchedImage);\n                        if (foundTerminator === true) {\n                            lastLTEndOffset = lineTerminatorPattern.lastIndex - 1;\n                            numOfLTsInMatch++;\n                        }\n                    } while (foundTerminator === true);\n                    if (numOfLTsInMatch !== 0) {\n                        line = line + numOfLTsInMatch;\n                        column = imageLength - lastLTEndOffset;\n                        this.updateTokenEndLineColumnLocation(newToken, group, lastLTEndOffset, numOfLTsInMatch, line, column, imageLength);\n                    }\n                }\n                // will be NOOP if no modes present\n                this.handleModes(currConfig, pop_mode, push_mode, newToken);\n            }\n            else {\n                // error recovery, drop characters until we identify a valid token's start point\n                var errorStartOffset = offset;\n                var errorLine = line;\n                var errorColumn = column;\n                var foundResyncPoint = recoveryEnabled === false;\n                while (foundResyncPoint === false && offset < orgLength) {\n                    // Identity Func (when sticky flag is enabled)\n                    text = this.chopInput(text, 1);\n                    offset++;\n                    for (j = 0; j < currModePatternsLength; j++) {\n                        var currConfig_1 = patternIdxToConfig[j];\n                        var currPattern = currConfig_1.pattern;\n                        // manually in-lined because > 600 chars won't be in-lined in V8\n                        var singleCharCode = currConfig_1.short;\n                        if (singleCharCode !== false) {\n                            if (orgText.charCodeAt(offset) === singleCharCode) {\n                                // single character string\n                                foundResyncPoint = true;\n                            }\n                        }\n                        else if (currConfig_1.isCustom === true) {\n                            foundResyncPoint =\n                                currPattern.exec(orgText, offset, matchedTokens, groups) !== null;\n                        }\n                        else {\n                            this.updateLastIndex(currPattern, offset);\n                            foundResyncPoint = currPattern.exec(text) !== null;\n                        }\n                        if (foundResyncPoint === true) {\n                            break;\n                        }\n                    }\n                }\n                errLength = offset - errorStartOffset;\n                // at this point we either re-synced or reached the end of the input text\n                msg = this.config.errorMessageProvider.buildUnexpectedCharactersMessage(orgText, errorStartOffset, errLength, errorLine, errorColumn);\n                errors.push({\n                    offset: errorStartOffset,\n                    line: errorLine,\n                    column: errorColumn,\n                    length: errLength,\n                    message: msg\n                });\n                if (recoveryEnabled === false) {\n                    break;\n                }\n            }\n        }\n        // if we do have custom patterns which push directly into the\n        // TODO: custom tokens should not push directly??\n        if (!this.hasCustom) {\n            // if we guessed a too large size for the tokens array this will shrink it to the right size.\n            matchedTokens.length = matchedTokensIndex;\n        }\n        return {\n            tokens: matchedTokens,\n            groups: groups,\n            errors: errors\n        };\n    };\n    Lexer.prototype.handleModes = function (config, pop_mode, push_mode, newToken) {\n        if (config.pop === true) {\n            // need to save the PUSH_MODE property as if the mode is popped\n            // patternIdxToPopMode is updated to reflect the new mode after popping the stack\n            var pushMode = config.push;\n            pop_mode(newToken);\n            if (pushMode !== undefined) {\n                push_mode.call(this, pushMode);\n            }\n        }\n        else if (config.push !== undefined) {\n            push_mode.call(this, config.push);\n        }\n    };\n    Lexer.prototype.chopInput = function (text, length) {\n        return text.substring(length);\n    };\n    Lexer.prototype.updateLastIndex = function (regExp, newLastIndex) {\n        regExp.lastIndex = newLastIndex;\n    };\n    // TODO: decrease this under 600 characters? inspect stripping comments option in TSC compiler\n    Lexer.prototype.updateTokenEndLineColumnLocation = function (newToken, group, lastLTIdx, numOfLTsInMatch, line, column, imageLength) {\n        var lastCharIsLT, fixForEndingInLT;\n        if (group !== undefined) {\n            // a none skipped multi line Token, need to update endLine/endColumn\n            lastCharIsLT = lastLTIdx === imageLength - 1;\n            fixForEndingInLT = lastCharIsLT ? -1 : 0;\n            if (!(numOfLTsInMatch === 1 && lastCharIsLT === true)) {\n                // if a token ends in a LT that last LT only affects the line numbering of following Tokens\n                newToken.endLine = line + fixForEndingInLT;\n                // the last LT in a token does not affect the endColumn either as the [columnStart ... columnEnd)\n                // inclusive to exclusive range.\n                newToken.endColumn = column - 1 + -fixForEndingInLT;\n            }\n            // else single LT in the last character of a token, no need to modify the endLine/EndColumn\n        }\n    };\n    Lexer.prototype.computeNewColumn = function (oldColumn, imageLength) {\n        return oldColumn + imageLength;\n    };\n    Lexer.prototype.createOffsetOnlyToken = function (image, startOffset, tokenTypeIdx, tokenType) {\n        return {\n            image: image,\n            startOffset: startOffset,\n            tokenTypeIdx: tokenTypeIdx,\n            tokenType: tokenType\n        };\n    };\n    Lexer.prototype.createStartOnlyToken = function (image, startOffset, tokenTypeIdx, tokenType, startLine, startColumn) {\n        return {\n            image: image,\n            startOffset: startOffset,\n            startLine: startLine,\n            startColumn: startColumn,\n            tokenTypeIdx: tokenTypeIdx,\n            tokenType: tokenType\n        };\n    };\n    Lexer.prototype.createFullToken = function (image, startOffset, tokenTypeIdx, tokenType, startLine, startColumn, imageLength) {\n        return {\n            image: image,\n            startOffset: startOffset,\n            endOffset: startOffset + imageLength - 1,\n            startLine: startLine,\n            endLine: startLine,\n            startColumn: startColumn,\n            endColumn: startColumn + imageLength - 1,\n            tokenTypeIdx: tokenTypeIdx,\n            tokenType: tokenType\n        };\n    };\n    Lexer.prototype.addTokenUsingPush = function (tokenVector, index, tokenToAdd) {\n        tokenVector.push(tokenToAdd);\n        return index;\n    };\n    Lexer.prototype.addTokenUsingMemberAccess = function (tokenVector, index, tokenToAdd) {\n        tokenVector[index] = tokenToAdd;\n        index++;\n        return index;\n    };\n    Lexer.prototype.handlePayloadNoCustom = function (token, payload) { };\n    Lexer.prototype.handlePayloadWithCustom = function (token, payload) {\n        if (payload !== null) {\n            token.payload = payload;\n        }\n    };\n    Lexer.prototype.matchWithTest = function (pattern, text, offset) {\n        var found = pattern.test(text);\n        if (found === true) {\n            return text.substring(offset, pattern.lastIndex);\n        }\n        return null;\n    };\n    Lexer.prototype.matchWithExec = function (pattern, text) {\n        var regExpArray = pattern.exec(text);\n        return regExpArray !== null ? regExpArray[0] : null;\n    };\n    Lexer.SKIPPED = \"This marks a skipped Token pattern, this means each token identified by it will\" +\n        \"be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.\";\n    Lexer.NA = /NOT_APPLICABLE/;\n    return Lexer;\n}());\nexports.Lexer = Lexer;\n//# sourceMappingURL=lexer_public.js.map","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clearRegExpParserCache = exports.getRegExpAst = void 0;\nvar regexp_to_ast_1 = require(\"regexp-to-ast\");\nvar regExpAstCache = {};\nvar regExpParser = new regexp_to_ast_1.RegExpParser();\nfunction getRegExpAst(regExp) {\n    var regExpStr = regExp.toString();\n    if (regExpAstCache.hasOwnProperty(regExpStr)) {\n        return regExpAstCache[regExpStr];\n    }\n    else {\n        var regExpAst = regExpParser.pattern(regExpStr);\n        regExpAstCache[regExpStr] = regExpAst;\n        return regExpAst;\n    }\n}\nexports.getRegExpAst = getRegExpAst;\nfunction clearRegExpParserCache() {\n    regExpAstCache = {};\n}\nexports.clearRegExpParserCache = clearRegExpParserCache;\n//# sourceMappingURL=reg_exp_parser.js.map","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nmodule.exports = baseHas;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultLexerErrorProvider = void 0;\nexports.defaultLexerErrorProvider = {\n    buildUnableToPopLexerModeMessage: function (token) {\n        return \"Unable to pop Lexer Mode after encountering Token ->\".concat(token.image, \"<- The Mode Stack is empty\");\n    },\n    buildUnexpectedCharactersMessage: function (fullText, startOffset, length, line, column) {\n        return (\"unexpected character: ->\".concat(fullText.charAt(startOffset), \"<- at offset: \").concat(startOffset, \",\") + \" skipped \".concat(length, \" characters.\"));\n    }\n};\n//# sourceMappingURL=lexer_errors_public.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkPrefixAlternativesAmbiguities = exports.validateSomeNonEmptyLookaheadPath = exports.validateTooManyAlts = exports.RepetitionCollector = exports.validateAmbiguousAlternationAlternatives = exports.validateEmptyOrAlternative = exports.getFirstNoneTerminal = exports.validateNoLeftRecursion = exports.validateRuleIsOverridden = exports.validateRuleDoesNotAlreadyExist = exports.OccurrenceValidationCollector = exports.identifyProductionForDuplicates = exports.validateGrammar = exports.validateLookahead = void 0;\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar drop_1 = __importDefault(require(\"lodash/drop\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar filter_1 = __importDefault(require(\"lodash/filter\"));\nvar reject_1 = __importDefault(require(\"lodash/reject\"));\nvar difference_1 = __importDefault(require(\"lodash/difference\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar groupBy_1 = __importDefault(require(\"lodash/groupBy\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar pickBy_1 = __importDefault(require(\"lodash/pickBy\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar flatMap_1 = __importDefault(require(\"lodash/flatMap\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar parser_1 = require(\"../parser/parser\");\nvar gast_1 = require(\"@chevrotain/gast\");\nvar lookahead_1 = require(\"./lookahead\");\nvar interpreter_1 = require(\"./interpreter\");\nvar gast_2 = require(\"@chevrotain/gast\");\nvar gast_3 = require(\"@chevrotain/gast\");\nvar dropRight_1 = __importDefault(require(\"lodash/dropRight\"));\nvar compact_1 = __importDefault(require(\"lodash/compact\"));\nvar tokens_1 = require(\"../../scan/tokens\");\nfunction validateLookahead(options) {\n    var lookaheadValidationErrorMessages = options.lookaheadStrategy.validate({\n        rules: options.rules,\n        tokenTypes: options.tokenTypes,\n        grammarName: options.grammarName\n    });\n    return (0, map_1.default)(lookaheadValidationErrorMessages, function (errorMessage) { return (__assign({ type: parser_1.ParserDefinitionErrorType.CUSTOM_LOOKAHEAD_VALIDATION }, errorMessage)); });\n}\nexports.validateLookahead = validateLookahead;\nfunction validateGrammar(topLevels, tokenTypes, errMsgProvider, grammarName) {\n    var duplicateErrors = (0, flatMap_1.default)(topLevels, function (currTopLevel) { return validateDuplicateProductions(currTopLevel, errMsgProvider); });\n    var termsNamespaceConflictErrors = checkTerminalAndNoneTerminalsNameSpace(topLevels, tokenTypes, errMsgProvider);\n    var tooManyAltsErrors = (0, flatMap_1.default)(topLevels, function (curRule) {\n        return validateTooManyAlts(curRule, errMsgProvider);\n    });\n    var duplicateRulesError = (0, flatMap_1.default)(topLevels, function (curRule) {\n        return validateRuleDoesNotAlreadyExist(curRule, topLevels, grammarName, errMsgProvider);\n    });\n    return duplicateErrors.concat(termsNamespaceConflictErrors, tooManyAltsErrors, duplicateRulesError);\n}\nexports.validateGrammar = validateGrammar;\nfunction validateDuplicateProductions(topLevelRule, errMsgProvider) {\n    var collectorVisitor = new OccurrenceValidationCollector();\n    topLevelRule.accept(collectorVisitor);\n    var allRuleProductions = collectorVisitor.allProductions;\n    var productionGroups = (0, groupBy_1.default)(allRuleProductions, identifyProductionForDuplicates);\n    var duplicates = (0, pickBy_1.default)(productionGroups, function (currGroup) {\n        return currGroup.length > 1;\n    });\n    var errors = (0, map_1.default)((0, values_1.default)(duplicates), function (currDuplicates) {\n        var firstProd = (0, first_1.default)(currDuplicates);\n        var msg = errMsgProvider.buildDuplicateFoundError(topLevelRule, currDuplicates);\n        var dslName = (0, gast_1.getProductionDslName)(firstProd);\n        var defError = {\n            message: msg,\n            type: parser_1.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,\n            ruleName: topLevelRule.name,\n            dslName: dslName,\n            occurrence: firstProd.idx\n        };\n        var param = getExtraProductionArgument(firstProd);\n        if (param) {\n            defError.parameter = param;\n        }\n        return defError;\n    });\n    return errors;\n}\nfunction identifyProductionForDuplicates(prod) {\n    return \"\".concat((0, gast_1.getProductionDslName)(prod), \"_#_\").concat(prod.idx, \"_#_\").concat(getExtraProductionArgument(prod));\n}\nexports.identifyProductionForDuplicates = identifyProductionForDuplicates;\nfunction getExtraProductionArgument(prod) {\n    if (prod instanceof gast_2.Terminal) {\n        return prod.terminalType.name;\n    }\n    else if (prod instanceof gast_2.NonTerminal) {\n        return prod.nonTerminalName;\n    }\n    else {\n        return \"\";\n    }\n}\nvar OccurrenceValidationCollector = /** @class */ (function (_super) {\n    __extends(OccurrenceValidationCollector, _super);\n    function OccurrenceValidationCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allProductions = [];\n        return _this;\n    }\n    OccurrenceValidationCollector.prototype.visitNonTerminal = function (subrule) {\n        this.allProductions.push(subrule);\n    };\n    OccurrenceValidationCollector.prototype.visitOption = function (option) {\n        this.allProductions.push(option);\n    };\n    OccurrenceValidationCollector.prototype.visitRepetitionWithSeparator = function (manySep) {\n        this.allProductions.push(manySep);\n    };\n    OccurrenceValidationCollector.prototype.visitRepetitionMandatory = function (atLeastOne) {\n        this.allProductions.push(atLeastOne);\n    };\n    OccurrenceValidationCollector.prototype.visitRepetitionMandatoryWithSeparator = function (atLeastOneSep) {\n        this.allProductions.push(atLeastOneSep);\n    };\n    OccurrenceValidationCollector.prototype.visitRepetition = function (many) {\n        this.allProductions.push(many);\n    };\n    OccurrenceValidationCollector.prototype.visitAlternation = function (or) {\n        this.allProductions.push(or);\n    };\n    OccurrenceValidationCollector.prototype.visitTerminal = function (terminal) {\n        this.allProductions.push(terminal);\n    };\n    return OccurrenceValidationCollector;\n}(gast_3.GAstVisitor));\nexports.OccurrenceValidationCollector = OccurrenceValidationCollector;\nfunction validateRuleDoesNotAlreadyExist(rule, allRules, className, errMsgProvider) {\n    var errors = [];\n    var occurrences = (0, reduce_1.default)(allRules, function (result, curRule) {\n        if (curRule.name === rule.name) {\n            return result + 1;\n        }\n        return result;\n    }, 0);\n    if (occurrences > 1) {\n        var errMsg = errMsgProvider.buildDuplicateRuleNameError({\n            topLevelRule: rule,\n            grammarName: className\n        });\n        errors.push({\n            message: errMsg,\n            type: parser_1.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,\n            ruleName: rule.name\n        });\n    }\n    return errors;\n}\nexports.validateRuleDoesNotAlreadyExist = validateRuleDoesNotAlreadyExist;\n// TODO: is there anyway to get only the rule names of rules inherited from the super grammars?\n// This is not part of the IGrammarErrorProvider because the validation cannot be performed on\n// The grammar structure, only at runtime.\nfunction validateRuleIsOverridden(ruleName, definedRulesNames, className) {\n    var errors = [];\n    var errMsg;\n    if (!(0, includes_1.default)(definedRulesNames, ruleName)) {\n        errMsg =\n            \"Invalid rule override, rule: ->\".concat(ruleName, \"<- cannot be overridden in the grammar: ->\").concat(className, \"<-\") +\n                \"as it is not defined in any of the super grammars \";\n        errors.push({\n            message: errMsg,\n            type: parser_1.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,\n            ruleName: ruleName\n        });\n    }\n    return errors;\n}\nexports.validateRuleIsOverridden = validateRuleIsOverridden;\nfunction validateNoLeftRecursion(topRule, currRule, errMsgProvider, path) {\n    if (path === void 0) { path = []; }\n    var errors = [];\n    var nextNonTerminals = getFirstNoneTerminal(currRule.definition);\n    if ((0, isEmpty_1.default)(nextNonTerminals)) {\n        return [];\n    }\n    else {\n        var ruleName = topRule.name;\n        var foundLeftRecursion = (0, includes_1.default)(nextNonTerminals, topRule);\n        if (foundLeftRecursion) {\n            errors.push({\n                message: errMsgProvider.buildLeftRecursionError({\n                    topLevelRule: topRule,\n                    leftRecursionPath: path\n                }),\n                type: parser_1.ParserDefinitionErrorType.LEFT_RECURSION,\n                ruleName: ruleName\n            });\n        }\n        // we are only looking for cyclic paths leading back to the specific topRule\n        // other cyclic paths are ignored, we still need this difference to avoid infinite loops...\n        var validNextSteps = (0, difference_1.default)(nextNonTerminals, path.concat([topRule]));\n        var errorsFromNextSteps = (0, flatMap_1.default)(validNextSteps, function (currRefRule) {\n            var newPath = (0, clone_1.default)(path);\n            newPath.push(currRefRule);\n            return validateNoLeftRecursion(topRule, currRefRule, errMsgProvider, newPath);\n        });\n        return errors.concat(errorsFromNextSteps);\n    }\n}\nexports.validateNoLeftRecursion = validateNoLeftRecursion;\nfunction getFirstNoneTerminal(definition) {\n    var result = [];\n    if ((0, isEmpty_1.default)(definition)) {\n        return result;\n    }\n    var firstProd = (0, first_1.default)(definition);\n    /* istanbul ignore else */\n    if (firstProd instanceof gast_2.NonTerminal) {\n        result.push(firstProd.referencedRule);\n    }\n    else if (firstProd instanceof gast_2.Alternative ||\n        firstProd instanceof gast_2.Option ||\n        firstProd instanceof gast_2.RepetitionMandatory ||\n        firstProd instanceof gast_2.RepetitionMandatoryWithSeparator ||\n        firstProd instanceof gast_2.RepetitionWithSeparator ||\n        firstProd instanceof gast_2.Repetition) {\n        result = result.concat(getFirstNoneTerminal(firstProd.definition));\n    }\n    else if (firstProd instanceof gast_2.Alternation) {\n        // each sub definition in alternation is a FLAT\n        result = (0, flatten_1.default)((0, map_1.default)(firstProd.definition, function (currSubDef) {\n            return getFirstNoneTerminal(currSubDef.definition);\n        }));\n    }\n    else if (firstProd instanceof gast_2.Terminal) {\n        // nothing to see, move along\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n    var isFirstOptional = (0, gast_1.isOptionalProd)(firstProd);\n    var hasMore = definition.length > 1;\n    if (isFirstOptional && hasMore) {\n        var rest = (0, drop_1.default)(definition);\n        return result.concat(getFirstNoneTerminal(rest));\n    }\n    else {\n        return result;\n    }\n}\nexports.getFirstNoneTerminal = getFirstNoneTerminal;\nvar OrCollector = /** @class */ (function (_super) {\n    __extends(OrCollector, _super);\n    function OrCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.alternations = [];\n        return _this;\n    }\n    OrCollector.prototype.visitAlternation = function (node) {\n        this.alternations.push(node);\n    };\n    return OrCollector;\n}(gast_3.GAstVisitor));\nfunction validateEmptyOrAlternative(topLevelRule, errMsgProvider) {\n    var orCollector = new OrCollector();\n    topLevelRule.accept(orCollector);\n    var ors = orCollector.alternations;\n    var errors = (0, flatMap_1.default)(ors, function (currOr) {\n        var exceptLast = (0, dropRight_1.default)(currOr.definition);\n        return (0, flatMap_1.default)(exceptLast, function (currAlternative, currAltIdx) {\n            var possibleFirstInAlt = (0, interpreter_1.nextPossibleTokensAfter)([currAlternative], [], tokens_1.tokenStructuredMatcher, 1);\n            if ((0, isEmpty_1.default)(possibleFirstInAlt)) {\n                return [\n                    {\n                        message: errMsgProvider.buildEmptyAlternationError({\n                            topLevelRule: topLevelRule,\n                            alternation: currOr,\n                            emptyChoiceIdx: currAltIdx\n                        }),\n                        type: parser_1.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,\n                        ruleName: topLevelRule.name,\n                        occurrence: currOr.idx,\n                        alternative: currAltIdx + 1\n                    }\n                ];\n            }\n            else {\n                return [];\n            }\n        });\n    });\n    return errors;\n}\nexports.validateEmptyOrAlternative = validateEmptyOrAlternative;\nfunction validateAmbiguousAlternationAlternatives(topLevelRule, globalMaxLookahead, errMsgProvider) {\n    var orCollector = new OrCollector();\n    topLevelRule.accept(orCollector);\n    var ors = orCollector.alternations;\n    // New Handling of ignoring ambiguities\n    // - https://github.com/chevrotain/chevrotain/issues/869\n    ors = (0, reject_1.default)(ors, function (currOr) { return currOr.ignoreAmbiguities === true; });\n    var errors = (0, flatMap_1.default)(ors, function (currOr) {\n        var currOccurrence = currOr.idx;\n        var actualMaxLookahead = currOr.maxLookahead || globalMaxLookahead;\n        var alternatives = (0, lookahead_1.getLookaheadPathsForOr)(currOccurrence, topLevelRule, actualMaxLookahead, currOr);\n        var altsAmbiguityErrors = checkAlternativesAmbiguities(alternatives, currOr, topLevelRule, errMsgProvider);\n        var altsPrefixAmbiguityErrors = checkPrefixAlternativesAmbiguities(alternatives, currOr, topLevelRule, errMsgProvider);\n        return altsAmbiguityErrors.concat(altsPrefixAmbiguityErrors);\n    });\n    return errors;\n}\nexports.validateAmbiguousAlternationAlternatives = validateAmbiguousAlternationAlternatives;\nvar RepetitionCollector = /** @class */ (function (_super) {\n    __extends(RepetitionCollector, _super);\n    function RepetitionCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allProductions = [];\n        return _this;\n    }\n    RepetitionCollector.prototype.visitRepetitionWithSeparator = function (manySep) {\n        this.allProductions.push(manySep);\n    };\n    RepetitionCollector.prototype.visitRepetitionMandatory = function (atLeastOne) {\n        this.allProductions.push(atLeastOne);\n    };\n    RepetitionCollector.prototype.visitRepetitionMandatoryWithSeparator = function (atLeastOneSep) {\n        this.allProductions.push(atLeastOneSep);\n    };\n    RepetitionCollector.prototype.visitRepetition = function (many) {\n        this.allProductions.push(many);\n    };\n    return RepetitionCollector;\n}(gast_3.GAstVisitor));\nexports.RepetitionCollector = RepetitionCollector;\nfunction validateTooManyAlts(topLevelRule, errMsgProvider) {\n    var orCollector = new OrCollector();\n    topLevelRule.accept(orCollector);\n    var ors = orCollector.alternations;\n    var errors = (0, flatMap_1.default)(ors, function (currOr) {\n        if (currOr.definition.length > 255) {\n            return [\n                {\n                    message: errMsgProvider.buildTooManyAlternativesError({\n                        topLevelRule: topLevelRule,\n                        alternation: currOr\n                    }),\n                    type: parser_1.ParserDefinitionErrorType.TOO_MANY_ALTS,\n                    ruleName: topLevelRule.name,\n                    occurrence: currOr.idx\n                }\n            ];\n        }\n        else {\n            return [];\n        }\n    });\n    return errors;\n}\nexports.validateTooManyAlts = validateTooManyAlts;\nfunction validateSomeNonEmptyLookaheadPath(topLevelRules, maxLookahead, errMsgProvider) {\n    var errors = [];\n    (0, forEach_1.default)(topLevelRules, function (currTopRule) {\n        var collectorVisitor = new RepetitionCollector();\n        currTopRule.accept(collectorVisitor);\n        var allRuleProductions = collectorVisitor.allProductions;\n        (0, forEach_1.default)(allRuleProductions, function (currProd) {\n            var prodType = (0, lookahead_1.getProdType)(currProd);\n            var actualMaxLookahead = currProd.maxLookahead || maxLookahead;\n            var currOccurrence = currProd.idx;\n            var paths = (0, lookahead_1.getLookaheadPathsForOptionalProd)(currOccurrence, currTopRule, prodType, actualMaxLookahead);\n            var pathsInsideProduction = paths[0];\n            if ((0, isEmpty_1.default)((0, flatten_1.default)(pathsInsideProduction))) {\n                var errMsg = errMsgProvider.buildEmptyRepetitionError({\n                    topLevelRule: currTopRule,\n                    repetition: currProd\n                });\n                errors.push({\n                    message: errMsg,\n                    type: parser_1.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,\n                    ruleName: currTopRule.name\n                });\n            }\n        });\n    });\n    return errors;\n}\nexports.validateSomeNonEmptyLookaheadPath = validateSomeNonEmptyLookaheadPath;\nfunction checkAlternativesAmbiguities(alternatives, alternation, rule, errMsgProvider) {\n    var foundAmbiguousPaths = [];\n    var identicalAmbiguities = (0, reduce_1.default)(alternatives, function (result, currAlt, currAltIdx) {\n        // ignore (skip) ambiguities with this alternative\n        if (alternation.definition[currAltIdx].ignoreAmbiguities === true) {\n            return result;\n        }\n        (0, forEach_1.default)(currAlt, function (currPath) {\n            var altsCurrPathAppearsIn = [currAltIdx];\n            (0, forEach_1.default)(alternatives, function (currOtherAlt, currOtherAltIdx) {\n                if (currAltIdx !== currOtherAltIdx &&\n                    (0, lookahead_1.containsPath)(currOtherAlt, currPath) &&\n                    // ignore (skip) ambiguities with this \"other\" alternative\n                    alternation.definition[currOtherAltIdx].ignoreAmbiguities !== true) {\n                    altsCurrPathAppearsIn.push(currOtherAltIdx);\n                }\n            });\n            if (altsCurrPathAppearsIn.length > 1 &&\n                !(0, lookahead_1.containsPath)(foundAmbiguousPaths, currPath)) {\n                foundAmbiguousPaths.push(currPath);\n                result.push({\n                    alts: altsCurrPathAppearsIn,\n                    path: currPath\n                });\n            }\n        });\n        return result;\n    }, []);\n    var currErrors = (0, map_1.default)(identicalAmbiguities, function (currAmbDescriptor) {\n        var ambgIndices = (0, map_1.default)(currAmbDescriptor.alts, function (currAltIdx) { return currAltIdx + 1; });\n        var currMessage = errMsgProvider.buildAlternationAmbiguityError({\n            topLevelRule: rule,\n            alternation: alternation,\n            ambiguityIndices: ambgIndices,\n            prefixPath: currAmbDescriptor.path\n        });\n        return {\n            message: currMessage,\n            type: parser_1.ParserDefinitionErrorType.AMBIGUOUS_ALTS,\n            ruleName: rule.name,\n            occurrence: alternation.idx,\n            alternatives: currAmbDescriptor.alts\n        };\n    });\n    return currErrors;\n}\nfunction checkPrefixAlternativesAmbiguities(alternatives, alternation, rule, errMsgProvider) {\n    // flatten\n    var pathsAndIndices = (0, reduce_1.default)(alternatives, function (result, currAlt, idx) {\n        var currPathsAndIdx = (0, map_1.default)(currAlt, function (currPath) {\n            return { idx: idx, path: currPath };\n        });\n        return result.concat(currPathsAndIdx);\n    }, []);\n    var errors = (0, compact_1.default)((0, flatMap_1.default)(pathsAndIndices, function (currPathAndIdx) {\n        var alternativeGast = alternation.definition[currPathAndIdx.idx];\n        // ignore (skip) ambiguities with this alternative\n        if (alternativeGast.ignoreAmbiguities === true) {\n            return [];\n        }\n        var targetIdx = currPathAndIdx.idx;\n        var targetPath = currPathAndIdx.path;\n        var prefixAmbiguitiesPathsAndIndices = (0, filter_1.default)(pathsAndIndices, function (searchPathAndIdx) {\n            // prefix ambiguity can only be created from lower idx (higher priority) path\n            return (\n            // ignore (skip) ambiguities with this \"other\" alternative\n            alternation.definition[searchPathAndIdx.idx].ignoreAmbiguities !==\n                true &&\n                searchPathAndIdx.idx < targetIdx &&\n                // checking for strict prefix because identical lookaheads\n                // will be be detected using a different validation.\n                (0, lookahead_1.isStrictPrefixOfPath)(searchPathAndIdx.path, targetPath));\n        });\n        var currPathPrefixErrors = (0, map_1.default)(prefixAmbiguitiesPathsAndIndices, function (currAmbPathAndIdx) {\n            var ambgIndices = [currAmbPathAndIdx.idx + 1, targetIdx + 1];\n            var occurrence = alternation.idx === 0 ? \"\" : alternation.idx;\n            var message = errMsgProvider.buildAlternationPrefixAmbiguityError({\n                topLevelRule: rule,\n                alternation: alternation,\n                ambiguityIndices: ambgIndices,\n                prefixPath: currAmbPathAndIdx.path\n            });\n            return {\n                message: message,\n                type: parser_1.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,\n                ruleName: rule.name,\n                occurrence: occurrence,\n                alternatives: ambgIndices\n            };\n        });\n        return currPathPrefixErrors;\n    }));\n    return errors;\n}\nexports.checkPrefixAlternativesAmbiguities = checkPrefixAlternativesAmbiguities;\nfunction checkTerminalAndNoneTerminalsNameSpace(topLevels, tokenTypes, errMsgProvider) {\n    var errors = [];\n    var tokenNames = (0, map_1.default)(tokenTypes, function (currToken) { return currToken.name; });\n    (0, forEach_1.default)(topLevels, function (currRule) {\n        var currRuleName = currRule.name;\n        if ((0, includes_1.default)(tokenNames, currRuleName)) {\n            var errMsg = errMsgProvider.buildNamespaceConflictError(currRule);\n            errors.push({\n                message: errMsg,\n                type: parser_1.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,\n                ruleName: currRuleName\n            });\n        }\n    });\n    return errors;\n}\n//# sourceMappingURL=checks.js.map","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContentAssist = void 0;\nvar interpreter_1 = require(\"../../grammar/interpreter\");\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar ContentAssist = /** @class */ (function () {\n    function ContentAssist() {\n    }\n    ContentAssist.prototype.initContentAssist = function () { };\n    ContentAssist.prototype.computeContentAssist = function (startRuleName, precedingInput) {\n        var startRuleGast = this.gastProductionsCache[startRuleName];\n        if ((0, isUndefined_1.default)(startRuleGast)) {\n            throw Error(\"Rule ->\".concat(startRuleName, \"<- does not exist in this grammar.\"));\n        }\n        return (0, interpreter_1.nextPossibleTokensAfter)([startRuleGast], precedingInput, this.tokenMatcher, this.maxLookahead);\n    };\n    // TODO: should this be a member method or a utility? it does not have any state or usage of 'this'...\n    // TODO: should this be more explicitly part of the public API?\n    ContentAssist.prototype.getNextPossibleTokenTypes = function (grammarPath) {\n        var topRuleName = (0, first_1.default)(grammarPath.ruleStack);\n        var gastProductions = this.getGAstProductions();\n        var topProduction = gastProductions[topRuleName];\n        var nextPossibleTokenTypes = new interpreter_1.NextAfterTokenWalker(topProduction, grammarPath).startWalking();\n        return nextPossibleTokenTypes;\n    };\n    return ContentAssist;\n}());\nexports.ContentAssist = ContentAssist;\n//# sourceMappingURL=context_assist.js.map","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultGrammarValidatorErrorProvider = exports.defaultGrammarResolverErrorProvider = exports.defaultParserErrorProvider = void 0;\nvar tokens_public_1 = require(\"../scan/tokens_public\");\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar gast_1 = require(\"@chevrotain/gast\");\nvar gast_2 = require(\"@chevrotain/gast\");\nexports.defaultParserErrorProvider = {\n    buildMismatchTokenMessage: function (_a) {\n        var expected = _a.expected, actual = _a.actual, previous = _a.previous, ruleName = _a.ruleName;\n        var hasLabel = (0, tokens_public_1.hasTokenLabel)(expected);\n        var expectedMsg = hasLabel\n            ? \"--> \".concat((0, tokens_public_1.tokenLabel)(expected), \" <--\")\n            : \"token of type --> \".concat(expected.name, \" <--\");\n        var msg = \"Expecting \".concat(expectedMsg, \" but found --> '\").concat(actual.image, \"' <--\");\n        return msg;\n    },\n    buildNotAllInputParsedMessage: function (_a) {\n        var firstRedundant = _a.firstRedundant, ruleName = _a.ruleName;\n        return \"Redundant input, expecting EOF but found: \" + firstRedundant.image;\n    },\n    buildNoViableAltMessage: function (_a) {\n        var expectedPathsPerAlt = _a.expectedPathsPerAlt, actual = _a.actual, previous = _a.previous, customUserDescription = _a.customUserDescription, ruleName = _a.ruleName;\n        var errPrefix = \"Expecting: \";\n        // TODO: issue: No Viable Alternative Error may have incomplete details. #502\n        var actualText = (0, first_1.default)(actual).image;\n        var errSuffix = \"\\nbut found: '\" + actualText + \"'\";\n        if (customUserDescription) {\n            return errPrefix + customUserDescription + errSuffix;\n        }\n        else {\n            var allLookAheadPaths = (0, reduce_1.default)(expectedPathsPerAlt, function (result, currAltPaths) { return result.concat(currAltPaths); }, []);\n            var nextValidTokenSequences = (0, map_1.default)(allLookAheadPaths, function (currPath) {\n                return \"[\".concat((0, map_1.default)(currPath, function (currTokenType) { return (0, tokens_public_1.tokenLabel)(currTokenType); }).join(\", \"), \"]\");\n            });\n            var nextValidSequenceItems = (0, map_1.default)(nextValidTokenSequences, function (itemMsg, idx) { return \"  \".concat(idx + 1, \". \").concat(itemMsg); });\n            var calculatedDescription = \"one of these possible Token sequences:\\n\".concat(nextValidSequenceItems.join(\"\\n\"));\n            return errPrefix + calculatedDescription + errSuffix;\n        }\n    },\n    buildEarlyExitMessage: function (_a) {\n        var expectedIterationPaths = _a.expectedIterationPaths, actual = _a.actual, customUserDescription = _a.customUserDescription, ruleName = _a.ruleName;\n        var errPrefix = \"Expecting: \";\n        // TODO: issue: No Viable Alternative Error may have incomplete details. #502\n        var actualText = (0, first_1.default)(actual).image;\n        var errSuffix = \"\\nbut found: '\" + actualText + \"'\";\n        if (customUserDescription) {\n            return errPrefix + customUserDescription + errSuffix;\n        }\n        else {\n            var nextValidTokenSequences = (0, map_1.default)(expectedIterationPaths, function (currPath) {\n                return \"[\".concat((0, map_1.default)(currPath, function (currTokenType) { return (0, tokens_public_1.tokenLabel)(currTokenType); }).join(\",\"), \"]\");\n            });\n            var calculatedDescription = \"expecting at least one iteration which starts with one of these possible Token sequences::\\n  \" +\n                \"<\".concat(nextValidTokenSequences.join(\" ,\"), \">\");\n            return errPrefix + calculatedDescription + errSuffix;\n        }\n    }\n};\nObject.freeze(exports.defaultParserErrorProvider);\nexports.defaultGrammarResolverErrorProvider = {\n    buildRuleNotFoundError: function (topLevelRule, undefinedRule) {\n        var msg = \"Invalid grammar, reference to a rule which is not defined: ->\" +\n            undefinedRule.nonTerminalName +\n            \"<-\\n\" +\n            \"inside top level rule: ->\" +\n            topLevelRule.name +\n            \"<-\";\n        return msg;\n    }\n};\nexports.defaultGrammarValidatorErrorProvider = {\n    buildDuplicateFoundError: function (topLevelRule, duplicateProds) {\n        function getExtraProductionArgument(prod) {\n            if (prod instanceof gast_1.Terminal) {\n                return prod.terminalType.name;\n            }\n            else if (prod instanceof gast_1.NonTerminal) {\n                return prod.nonTerminalName;\n            }\n            else {\n                return \"\";\n            }\n        }\n        var topLevelName = topLevelRule.name;\n        var duplicateProd = (0, first_1.default)(duplicateProds);\n        var index = duplicateProd.idx;\n        var dslName = (0, gast_2.getProductionDslName)(duplicateProd);\n        var extraArgument = getExtraProductionArgument(duplicateProd);\n        var hasExplicitIndex = index > 0;\n        var msg = \"->\".concat(dslName).concat(hasExplicitIndex ? index : \"\", \"<- \").concat(extraArgument ? \"with argument: ->\".concat(extraArgument, \"<-\") : \"\", \"\\n                  appears more than once (\").concat(duplicateProds.length, \" times) in the top level rule: ->\").concat(topLevelName, \"<-.                  \\n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \\n                  \");\n        // white space trimming time! better to trim afterwards as it allows to use WELL formatted multi line template strings...\n        msg = msg.replace(/[ \\t]+/g, \" \");\n        msg = msg.replace(/\\s\\s+/g, \"\\n\");\n        return msg;\n    },\n    buildNamespaceConflictError: function (rule) {\n        var errMsg = \"Namespace conflict found in grammar.\\n\" +\n            \"The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <\".concat(rule.name, \">.\\n\") +\n            \"To resolve this make sure each Terminal and Non-Terminal names are unique\\n\" +\n            \"This is easy to accomplish by using the convention that Terminal names start with an uppercase letter\\n\" +\n            \"and Non-Terminal names start with a lower case letter.\";\n        return errMsg;\n    },\n    buildAlternationPrefixAmbiguityError: function (options) {\n        var pathMsg = (0, map_1.default)(options.prefixPath, function (currTok) {\n            return (0, tokens_public_1.tokenLabel)(currTok);\n        }).join(\", \");\n        var occurrence = options.alternation.idx === 0 ? \"\" : options.alternation.idx;\n        var errMsg = \"Ambiguous alternatives: <\".concat(options.ambiguityIndices.join(\" ,\"), \"> due to common lookahead prefix\\n\") +\n            \"in <OR\".concat(occurrence, \"> inside <\").concat(options.topLevelRule.name, \"> Rule,\\n\") +\n            \"<\".concat(pathMsg, \"> may appears as a prefix path in all these alternatives.\\n\") +\n            \"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\\n\" +\n            \"For Further details.\";\n        return errMsg;\n    },\n    buildAlternationAmbiguityError: function (options) {\n        var pathMsg = (0, map_1.default)(options.prefixPath, function (currtok) {\n            return (0, tokens_public_1.tokenLabel)(currtok);\n        }).join(\", \");\n        var occurrence = options.alternation.idx === 0 ? \"\" : options.alternation.idx;\n        var currMessage = \"Ambiguous Alternatives Detected: <\".concat(options.ambiguityIndices.join(\" ,\"), \"> in <OR\").concat(occurrence, \">\") +\n            \" inside <\".concat(options.topLevelRule.name, \"> Rule,\\n\") +\n            \"<\".concat(pathMsg, \"> may appears as a prefix path in all these alternatives.\\n\");\n        currMessage =\n            currMessage +\n                \"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\\n\" +\n                \"For Further details.\";\n        return currMessage;\n    },\n    buildEmptyRepetitionError: function (options) {\n        var dslName = (0, gast_2.getProductionDslName)(options.repetition);\n        if (options.repetition.idx !== 0) {\n            dslName += options.repetition.idx;\n        }\n        var errMsg = \"The repetition <\".concat(dslName, \"> within Rule <\").concat(options.topLevelRule.name, \"> can never consume any tokens.\\n\") +\n            \"This could lead to an infinite loop.\";\n        return errMsg;\n    },\n    // TODO: remove - `errors_public` from nyc.config.js exclude\n    //       once this method is fully removed from this file\n    buildTokenNameError: function (options) {\n        /* istanbul ignore next */\n        return \"deprecated\";\n    },\n    buildEmptyAlternationError: function (options) {\n        var errMsg = \"Ambiguous empty alternative: <\".concat(options.emptyChoiceIdx + 1, \">\") +\n            \" in <OR\".concat(options.alternation.idx, \"> inside <\").concat(options.topLevelRule.name, \"> Rule.\\n\") +\n            \"Only the last alternative may be an empty alternative.\";\n        return errMsg;\n    },\n    buildTooManyAlternativesError: function (options) {\n        var errMsg = \"An Alternation cannot have more than 256 alternatives:\\n\" +\n            \"<OR\".concat(options.alternation.idx, \"> inside <\").concat(options.topLevelRule.name, \"> Rule.\\n has \").concat(options.alternation.definition.length + 1, \" alternatives.\");\n        return errMsg;\n    },\n    buildLeftRecursionError: function (options) {\n        var ruleName = options.topLevelRule.name;\n        var pathNames = (0, map_1.default)(options.leftRecursionPath, function (currRule) { return currRule.name; });\n        var leftRecursivePath = \"\".concat(ruleName, \" --> \").concat(pathNames\n            .concat([ruleName])\n            .join(\" --> \"));\n        var errMsg = \"Left Recursion found in grammar.\\n\" +\n            \"rule: <\".concat(ruleName, \"> can be invoked from itself (directly or indirectly)\\n\") +\n            \"without consuming any Tokens. The grammar path that causes this is: \\n \".concat(leftRecursivePath, \"\\n\") +\n            \" To fix this refactor your grammar to remove the left recursion.\\n\" +\n            \"see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.\";\n        return errMsg;\n    },\n    // TODO: remove - `errors_public` from nyc.config.js exclude\n    //       once this method is fully removed from this file\n    buildInvalidRuleNameError: function (options) {\n        /* istanbul ignore next */\n        return \"deprecated\";\n    },\n    buildDuplicateRuleNameError: function (options) {\n        var ruleName;\n        if (options.topLevelRule instanceof gast_1.Rule) {\n            ruleName = options.topLevelRule.name;\n        }\n        else {\n            ruleName = options.topLevelRule;\n        }\n        var errMsg = \"Duplicate definition, rule: ->\".concat(ruleName, \"<- is already defined in the grammar: ->\").concat(options.grammarName, \"<-\");\n        return errMsg;\n    }\n};\n//# sourceMappingURL=errors_public.js.map","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nmodule.exports = head;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.some` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction baseSome(collection, predicate) {\n  var result;\n\n  baseEach(collection, function(value, index, collection) {\n    result = predicate(value, index, collection);\n    return !result;\n  });\n  return !!result;\n}\n\nmodule.exports = baseSome;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LexerAdapter = void 0;\nvar parser_1 = require(\"../parser\");\n/**\n * Trait responsible abstracting over the interaction with Lexer output (Token vector).\n *\n * This could be generalized to support other kinds of lexers, e.g.\n * - Just in Time Lexing / Lexer-Less parsing.\n * - Streaming Lexer.\n */\nvar LexerAdapter = /** @class */ (function () {\n    function LexerAdapter() {\n    }\n    LexerAdapter.prototype.initLexerAdapter = function () {\n        this.tokVector = [];\n        this.tokVectorLength = 0;\n        this.currIdx = -1;\n    };\n    Object.defineProperty(LexerAdapter.prototype, \"input\", {\n        get: function () {\n            return this.tokVector;\n        },\n        set: function (newInput) {\n            // @ts-ignore - `this parameter` not supported in setters/getters\n            //   - https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters\n            if (this.selfAnalysisDone !== true) {\n                throw Error(\"Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.\");\n            }\n            // @ts-ignore - `this parameter` not supported in setters/getters\n            //   - https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters\n            this.reset();\n            this.tokVector = newInput;\n            this.tokVectorLength = newInput.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // skips a token and returns the next token\n    LexerAdapter.prototype.SKIP_TOKEN = function () {\n        if (this.currIdx <= this.tokVector.length - 2) {\n            this.consumeToken();\n            return this.LA(1);\n        }\n        else {\n            return parser_1.END_OF_FILE;\n        }\n    };\n    // Lexer (accessing Token vector) related methods which can be overridden to implement lazy lexers\n    // or lexers dependent on parser context.\n    LexerAdapter.prototype.LA = function (howMuch) {\n        var soughtIdx = this.currIdx + howMuch;\n        if (soughtIdx < 0 || this.tokVectorLength <= soughtIdx) {\n            return parser_1.END_OF_FILE;\n        }\n        else {\n            return this.tokVector[soughtIdx];\n        }\n    };\n    LexerAdapter.prototype.consumeToken = function () {\n        this.currIdx++;\n    };\n    LexerAdapter.prototype.exportLexerState = function () {\n        return this.currIdx;\n    };\n    LexerAdapter.prototype.importLexerState = function (newState) {\n        this.currIdx = newState;\n    };\n    LexerAdapter.prototype.resetLexerState = function () {\n        this.currIdx = -1;\n    };\n    LexerAdapter.prototype.moveToTerminatedState = function () {\n        this.currIdx = this.tokVector.length - 1;\n    };\n    LexerAdapter.prototype.getLexerPosition = function () {\n        return this.exportLexerState();\n    };\n    return LexerAdapter;\n}());\nexports.LexerAdapter = LexerAdapter;\n//# sourceMappingURL=lexer_adapter.js.map","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    basePickBy = require('./_basePickBy'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/**\n * Creates an object composed of the `object` properties `predicate` returns\n * truthy for. The predicate is invoked with two arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pickBy(object, _.isNumber);\n * // => { 'a': 1, 'c': 3 }\n */\nfunction pickBy(object, predicate) {\n  if (object == null) {\n    return {};\n  }\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\n    return [prop];\n  });\n  predicate = baseIteratee(predicate);\n  return basePickBy(object, props, function(value, path) {\n    return predicate(value, path[0]);\n  });\n}\n\nmodule.exports = pickBy;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecognizerApi = void 0;\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar exceptions_public_1 = require(\"../../exceptions_public\");\nvar parser_1 = require(\"../parser\");\nvar errors_public_1 = require(\"../../errors_public\");\nvar checks_1 = require(\"../../grammar/checks\");\nvar gast_1 = require(\"@chevrotain/gast\");\n/**\n * This trait is responsible for implementing the public API\n * for defining Chevrotain parsers, i.e:\n * - CONSUME\n * - RULE\n * - OPTION\n * - ...\n */\nvar RecognizerApi = /** @class */ (function () {\n    function RecognizerApi() {\n    }\n    RecognizerApi.prototype.ACTION = function (impl) {\n        return impl.call(this);\n    };\n    RecognizerApi.prototype.consume = function (idx, tokType, options) {\n        return this.consumeInternal(tokType, idx, options);\n    };\n    RecognizerApi.prototype.subrule = function (idx, ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, idx, options);\n    };\n    RecognizerApi.prototype.option = function (idx, actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, idx);\n    };\n    RecognizerApi.prototype.or = function (idx, altsOrOpts) {\n        return this.orInternal(altsOrOpts, idx);\n    };\n    RecognizerApi.prototype.many = function (idx, actionORMethodDef) {\n        return this.manyInternal(idx, actionORMethodDef);\n    };\n    RecognizerApi.prototype.atLeastOne = function (idx, actionORMethodDef) {\n        return this.atLeastOneInternal(idx, actionORMethodDef);\n    };\n    RecognizerApi.prototype.CONSUME = function (tokType, options) {\n        return this.consumeInternal(tokType, 0, options);\n    };\n    RecognizerApi.prototype.CONSUME1 = function (tokType, options) {\n        return this.consumeInternal(tokType, 1, options);\n    };\n    RecognizerApi.prototype.CONSUME2 = function (tokType, options) {\n        return this.consumeInternal(tokType, 2, options);\n    };\n    RecognizerApi.prototype.CONSUME3 = function (tokType, options) {\n        return this.consumeInternal(tokType, 3, options);\n    };\n    RecognizerApi.prototype.CONSUME4 = function (tokType, options) {\n        return this.consumeInternal(tokType, 4, options);\n    };\n    RecognizerApi.prototype.CONSUME5 = function (tokType, options) {\n        return this.consumeInternal(tokType, 5, options);\n    };\n    RecognizerApi.prototype.CONSUME6 = function (tokType, options) {\n        return this.consumeInternal(tokType, 6, options);\n    };\n    RecognizerApi.prototype.CONSUME7 = function (tokType, options) {\n        return this.consumeInternal(tokType, 7, options);\n    };\n    RecognizerApi.prototype.CONSUME8 = function (tokType, options) {\n        return this.consumeInternal(tokType, 8, options);\n    };\n    RecognizerApi.prototype.CONSUME9 = function (tokType, options) {\n        return this.consumeInternal(tokType, 9, options);\n    };\n    RecognizerApi.prototype.SUBRULE = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 0, options);\n    };\n    RecognizerApi.prototype.SUBRULE1 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 1, options);\n    };\n    RecognizerApi.prototype.SUBRULE2 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 2, options);\n    };\n    RecognizerApi.prototype.SUBRULE3 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 3, options);\n    };\n    RecognizerApi.prototype.SUBRULE4 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 4, options);\n    };\n    RecognizerApi.prototype.SUBRULE5 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 5, options);\n    };\n    RecognizerApi.prototype.SUBRULE6 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 6, options);\n    };\n    RecognizerApi.prototype.SUBRULE7 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 7, options);\n    };\n    RecognizerApi.prototype.SUBRULE8 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 8, options);\n    };\n    RecognizerApi.prototype.SUBRULE9 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 9, options);\n    };\n    RecognizerApi.prototype.OPTION = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 0);\n    };\n    RecognizerApi.prototype.OPTION1 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 1);\n    };\n    RecognizerApi.prototype.OPTION2 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 2);\n    };\n    RecognizerApi.prototype.OPTION3 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 3);\n    };\n    RecognizerApi.prototype.OPTION4 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 4);\n    };\n    RecognizerApi.prototype.OPTION5 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 5);\n    };\n    RecognizerApi.prototype.OPTION6 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 6);\n    };\n    RecognizerApi.prototype.OPTION7 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 7);\n    };\n    RecognizerApi.prototype.OPTION8 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 8);\n    };\n    RecognizerApi.prototype.OPTION9 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 9);\n    };\n    RecognizerApi.prototype.OR = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 0);\n    };\n    RecognizerApi.prototype.OR1 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 1);\n    };\n    RecognizerApi.prototype.OR2 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 2);\n    };\n    RecognizerApi.prototype.OR3 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 3);\n    };\n    RecognizerApi.prototype.OR4 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 4);\n    };\n    RecognizerApi.prototype.OR5 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 5);\n    };\n    RecognizerApi.prototype.OR6 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 6);\n    };\n    RecognizerApi.prototype.OR7 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 7);\n    };\n    RecognizerApi.prototype.OR8 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 8);\n    };\n    RecognizerApi.prototype.OR9 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 9);\n    };\n    RecognizerApi.prototype.MANY = function (actionORMethodDef) {\n        this.manyInternal(0, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY1 = function (actionORMethodDef) {\n        this.manyInternal(1, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY2 = function (actionORMethodDef) {\n        this.manyInternal(2, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY3 = function (actionORMethodDef) {\n        this.manyInternal(3, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY4 = function (actionORMethodDef) {\n        this.manyInternal(4, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY5 = function (actionORMethodDef) {\n        this.manyInternal(5, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY6 = function (actionORMethodDef) {\n        this.manyInternal(6, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY7 = function (actionORMethodDef) {\n        this.manyInternal(7, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY8 = function (actionORMethodDef) {\n        this.manyInternal(8, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY9 = function (actionORMethodDef) {\n        this.manyInternal(9, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY_SEP = function (options) {\n        this.manySepFirstInternal(0, options);\n    };\n    RecognizerApi.prototype.MANY_SEP1 = function (options) {\n        this.manySepFirstInternal(1, options);\n    };\n    RecognizerApi.prototype.MANY_SEP2 = function (options) {\n        this.manySepFirstInternal(2, options);\n    };\n    RecognizerApi.prototype.MANY_SEP3 = function (options) {\n        this.manySepFirstInternal(3, options);\n    };\n    RecognizerApi.prototype.MANY_SEP4 = function (options) {\n        this.manySepFirstInternal(4, options);\n    };\n    RecognizerApi.prototype.MANY_SEP5 = function (options) {\n        this.manySepFirstInternal(5, options);\n    };\n    RecognizerApi.prototype.MANY_SEP6 = function (options) {\n        this.manySepFirstInternal(6, options);\n    };\n    RecognizerApi.prototype.MANY_SEP7 = function (options) {\n        this.manySepFirstInternal(7, options);\n    };\n    RecognizerApi.prototype.MANY_SEP8 = function (options) {\n        this.manySepFirstInternal(8, options);\n    };\n    RecognizerApi.prototype.MANY_SEP9 = function (options) {\n        this.manySepFirstInternal(9, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE = function (actionORMethodDef) {\n        this.atLeastOneInternal(0, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE1 = function (actionORMethodDef) {\n        return this.atLeastOneInternal(1, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE2 = function (actionORMethodDef) {\n        this.atLeastOneInternal(2, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE3 = function (actionORMethodDef) {\n        this.atLeastOneInternal(3, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE4 = function (actionORMethodDef) {\n        this.atLeastOneInternal(4, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE5 = function (actionORMethodDef) {\n        this.atLeastOneInternal(5, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE6 = function (actionORMethodDef) {\n        this.atLeastOneInternal(6, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE7 = function (actionORMethodDef) {\n        this.atLeastOneInternal(7, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE8 = function (actionORMethodDef) {\n        this.atLeastOneInternal(8, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE9 = function (actionORMethodDef) {\n        this.atLeastOneInternal(9, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP = function (options) {\n        this.atLeastOneSepFirstInternal(0, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP1 = function (options) {\n        this.atLeastOneSepFirstInternal(1, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP2 = function (options) {\n        this.atLeastOneSepFirstInternal(2, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP3 = function (options) {\n        this.atLeastOneSepFirstInternal(3, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP4 = function (options) {\n        this.atLeastOneSepFirstInternal(4, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP5 = function (options) {\n        this.atLeastOneSepFirstInternal(5, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP6 = function (options) {\n        this.atLeastOneSepFirstInternal(6, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP7 = function (options) {\n        this.atLeastOneSepFirstInternal(7, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP8 = function (options) {\n        this.atLeastOneSepFirstInternal(8, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP9 = function (options) {\n        this.atLeastOneSepFirstInternal(9, options);\n    };\n    RecognizerApi.prototype.RULE = function (name, implementation, config) {\n        if (config === void 0) { config = parser_1.DEFAULT_RULE_CONFIG; }\n        if ((0, includes_1.default)(this.definedRulesNames, name)) {\n            var errMsg = errors_public_1.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({\n                topLevelRule: name,\n                grammarName: this.className\n            });\n            var error = {\n                message: errMsg,\n                type: parser_1.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,\n                ruleName: name\n            };\n            this.definitionErrors.push(error);\n        }\n        this.definedRulesNames.push(name);\n        var ruleImplementation = this.defineRule(name, implementation, config);\n        this[name] = ruleImplementation;\n        return ruleImplementation;\n    };\n    RecognizerApi.prototype.OVERRIDE_RULE = function (name, impl, config) {\n        if (config === void 0) { config = parser_1.DEFAULT_RULE_CONFIG; }\n        var ruleErrors = (0, checks_1.validateRuleIsOverridden)(name, this.definedRulesNames, this.className);\n        this.definitionErrors = this.definitionErrors.concat(ruleErrors);\n        var ruleImplementation = this.defineRule(name, impl, config);\n        this[name] = ruleImplementation;\n        return ruleImplementation;\n    };\n    RecognizerApi.prototype.BACKTRACK = function (grammarRule, args) {\n        return function () {\n            // save org state\n            this.isBackTrackingStack.push(1);\n            var orgState = this.saveRecogState();\n            try {\n                grammarRule.apply(this, args);\n                // if no exception was thrown we have succeed parsing the rule.\n                return true;\n            }\n            catch (e) {\n                if ((0, exceptions_public_1.isRecognitionException)(e)) {\n                    return false;\n                }\n                else {\n                    throw e;\n                }\n            }\n            finally {\n                this.reloadRecogState(orgState);\n                this.isBackTrackingStack.pop();\n            }\n        };\n    };\n    // GAST export APIs\n    RecognizerApi.prototype.getGAstProductions = function () {\n        return this.gastProductionsCache;\n    };\n    RecognizerApi.prototype.getSerializedGastProductions = function () {\n        return (0, gast_1.serializeGrammar)((0, values_1.default)(this.gastProductionsCache));\n    };\n    return RecognizerApi;\n}());\nexports.RecognizerApi = RecognizerApi;\n//# sourceMappingURL=recognizer_api.js.map","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","\"use strict\";\n/* istanbul ignore file - tricky to import some things from this module during testing */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = exports.createSyntaxDiagramsCode = exports.clearCache = exports.generateCstDts = exports.GAstVisitor = exports.serializeProduction = exports.serializeGrammar = exports.Terminal = exports.Rule = exports.RepetitionWithSeparator = exports.RepetitionMandatoryWithSeparator = exports.RepetitionMandatory = exports.Repetition = exports.Option = exports.NonTerminal = exports.Alternative = exports.Alternation = exports.defaultLexerErrorProvider = exports.NoViableAltException = exports.NotAllInputParsedException = exports.MismatchedTokenException = exports.isRecognitionException = exports.EarlyExitException = exports.defaultParserErrorProvider = exports.LLkLookaheadStrategy = exports.getLookaheadPaths = exports.tokenName = exports.tokenMatcher = exports.tokenLabel = exports.EOF = exports.createTokenInstance = exports.createToken = exports.LexerDefinitionErrorType = exports.Lexer = exports.EMPTY_ALT = exports.ParserDefinitionErrorType = exports.EmbeddedActionsParser = exports.CstParser = exports.VERSION = void 0;\n// semantic version\nvar version_1 = require(\"./version\");\nObject.defineProperty(exports, \"VERSION\", { enumerable: true, get: function () { return version_1.VERSION; } });\nvar parser_1 = require(\"./parse/parser/parser\");\nObject.defineProperty(exports, \"CstParser\", { enumerable: true, get: function () { return parser_1.CstParser; } });\nObject.defineProperty(exports, \"EmbeddedActionsParser\", { enumerable: true, get: function () { return parser_1.EmbeddedActionsParser; } });\nObject.defineProperty(exports, \"ParserDefinitionErrorType\", { enumerable: true, get: function () { return parser_1.ParserDefinitionErrorType; } });\nObject.defineProperty(exports, \"EMPTY_ALT\", { enumerable: true, get: function () { return parser_1.EMPTY_ALT; } });\nvar lexer_public_1 = require(\"./scan/lexer_public\");\nObject.defineProperty(exports, \"Lexer\", { enumerable: true, get: function () { return lexer_public_1.Lexer; } });\nObject.defineProperty(exports, \"LexerDefinitionErrorType\", { enumerable: true, get: function () { return lexer_public_1.LexerDefinitionErrorType; } });\n// Tokens utilities\nvar tokens_public_1 = require(\"./scan/tokens_public\");\nObject.defineProperty(exports, \"createToken\", { enumerable: true, get: function () { return tokens_public_1.createToken; } });\nObject.defineProperty(exports, \"createTokenInstance\", { enumerable: true, get: function () { return tokens_public_1.createTokenInstance; } });\nObject.defineProperty(exports, \"EOF\", { enumerable: true, get: function () { return tokens_public_1.EOF; } });\nObject.defineProperty(exports, \"tokenLabel\", { enumerable: true, get: function () { return tokens_public_1.tokenLabel; } });\nObject.defineProperty(exports, \"tokenMatcher\", { enumerable: true, get: function () { return tokens_public_1.tokenMatcher; } });\nObject.defineProperty(exports, \"tokenName\", { enumerable: true, get: function () { return tokens_public_1.tokenName; } });\n// Lookahead\nvar lookahead_1 = require(\"./parse/grammar/lookahead\");\nObject.defineProperty(exports, \"getLookaheadPaths\", { enumerable: true, get: function () { return lookahead_1.getLookaheadPaths; } });\nvar llk_lookahead_1 = require(\"./parse/grammar/llk_lookahead\");\nObject.defineProperty(exports, \"LLkLookaheadStrategy\", { enumerable: true, get: function () { return llk_lookahead_1.LLkLookaheadStrategy; } });\n// Other Utilities\nvar errors_public_1 = require(\"./parse/errors_public\");\nObject.defineProperty(exports, \"defaultParserErrorProvider\", { enumerable: true, get: function () { return errors_public_1.defaultParserErrorProvider; } });\nvar exceptions_public_1 = require(\"./parse/exceptions_public\");\nObject.defineProperty(exports, \"EarlyExitException\", { enumerable: true, get: function () { return exceptions_public_1.EarlyExitException; } });\nObject.defineProperty(exports, \"isRecognitionException\", { enumerable: true, get: function () { return exceptions_public_1.isRecognitionException; } });\nObject.defineProperty(exports, \"MismatchedTokenException\", { enumerable: true, get: function () { return exceptions_public_1.MismatchedTokenException; } });\nObject.defineProperty(exports, \"NotAllInputParsedException\", { enumerable: true, get: function () { return exceptions_public_1.NotAllInputParsedException; } });\nObject.defineProperty(exports, \"NoViableAltException\", { enumerable: true, get: function () { return exceptions_public_1.NoViableAltException; } });\nvar lexer_errors_public_1 = require(\"./scan/lexer_errors_public\");\nObject.defineProperty(exports, \"defaultLexerErrorProvider\", { enumerable: true, get: function () { return lexer_errors_public_1.defaultLexerErrorProvider; } });\n// grammar reflection API\nvar gast_1 = require(\"@chevrotain/gast\");\nObject.defineProperty(exports, \"Alternation\", { enumerable: true, get: function () { return gast_1.Alternation; } });\nObject.defineProperty(exports, \"Alternative\", { enumerable: true, get: function () { return gast_1.Alternative; } });\nObject.defineProperty(exports, \"NonTerminal\", { enumerable: true, get: function () { return gast_1.NonTerminal; } });\nObject.defineProperty(exports, \"Option\", { enumerable: true, get: function () { return gast_1.Option; } });\nObject.defineProperty(exports, \"Repetition\", { enumerable: true, get: function () { return gast_1.Repetition; } });\nObject.defineProperty(exports, \"RepetitionMandatory\", { enumerable: true, get: function () { return gast_1.RepetitionMandatory; } });\nObject.defineProperty(exports, \"RepetitionMandatoryWithSeparator\", { enumerable: true, get: function () { return gast_1.RepetitionMandatoryWithSeparator; } });\nObject.defineProperty(exports, \"RepetitionWithSeparator\", { enumerable: true, get: function () { return gast_1.RepetitionWithSeparator; } });\nObject.defineProperty(exports, \"Rule\", { enumerable: true, get: function () { return gast_1.Rule; } });\nObject.defineProperty(exports, \"Terminal\", { enumerable: true, get: function () { return gast_1.Terminal; } });\n// GAST Utilities\nvar gast_2 = require(\"@chevrotain/gast\");\nObject.defineProperty(exports, \"serializeGrammar\", { enumerable: true, get: function () { return gast_2.serializeGrammar; } });\nObject.defineProperty(exports, \"serializeProduction\", { enumerable: true, get: function () { return gast_2.serializeProduction; } });\nObject.defineProperty(exports, \"GAstVisitor\", { enumerable: true, get: function () { return gast_2.GAstVisitor; } });\nvar cst_dts_gen_1 = require(\"@chevrotain/cst-dts-gen\");\nObject.defineProperty(exports, \"generateCstDts\", { enumerable: true, get: function () { return cst_dts_gen_1.generateCstDts; } });\n/* istanbul ignore next */\nfunction clearCache() {\n    console.warn(\"The clearCache function was 'soft' removed from the Chevrotain API.\" +\n        \"\\n\\t It performs no action other than printing this message.\" +\n        \"\\n\\t Please avoid using it as it will be completely removed in the future\");\n}\nexports.clearCache = clearCache;\nvar render_public_1 = require(\"./diagrams/render_public\");\nObject.defineProperty(exports, \"createSyntaxDiagramsCode\", { enumerable: true, get: function () { return render_public_1.createSyntaxDiagramsCode; } });\nvar Parser = /** @class */ (function () {\n    function Parser() {\n        throw new Error(\"The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\\t\\n\" +\n            \"See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0\");\n    }\n    return Parser;\n}());\nexports.Parser = Parser;\n//# sourceMappingURL=api.js.map","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar regexpTag = '[object RegExp]';\n\n/**\n * The base implementation of `_.isRegExp` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n */\nfunction baseIsRegExp(value) {\n  return isObjectLike(value) && baseGetTag(value) == regexpTag;\n}\n\nmodule.exports = baseIsRegExp;\n","var baseHas = require('./_baseHas'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.timer = void 0;\nfunction timer(func) {\n    var start = new Date().getTime();\n    var val = func();\n    var end = new Date().getTime();\n    var total = end - start;\n    return { time: total, value: val };\n}\nexports.timer = timer;\n//# sourceMappingURL=timer.js.map","var baseIndexOf = require('./_baseIndexOf'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Gets the index at which the first occurrence of `value` is found in `array`\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. If `fromIndex` is negative, it's used as the\n * offset from the end of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n * @example\n *\n * _.indexOf([1, 2, 1, 2], 2);\n * // => 1\n *\n * // Search from the `fromIndex`.\n * _.indexOf([1, 2, 1, 2], 2, 2);\n * // => 3\n */\nfunction indexOf(array, value, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseIndexOf(array, value, index);\n}\n\nmodule.exports = indexOf;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/**\n * Available cell events.\n */\nexport enum CellEvent {\n    VALUE_CHANGED       = 'value.changed',\n    FORMULA_CHANGED     = 'fomula.changed',\n    FORMULA_CALCULATED  = 'formula.calculated',\n    CALCULATED          = 'calculated',\n\n    ELEMENT_MOUNTED     = 'element.mounted',\n}\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.collectMethods = exports.LooksAhead = void 0;\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar parser_1 = require(\"../parser\");\nvar keys_1 = require(\"../../grammar/keys\");\nvar gast_1 = require(\"@chevrotain/gast\");\nvar gast_2 = require(\"@chevrotain/gast\");\nvar llk_lookahead_1 = require(\"../../grammar/llk_lookahead\");\n/**\n * Trait responsible for the lookahead related utilities and optimizations.\n */\nvar LooksAhead = /** @class */ (function () {\n    function LooksAhead() {\n    }\n    LooksAhead.prototype.initLooksAhead = function (config) {\n        this.dynamicTokensEnabled = (0, has_1.default)(config, \"dynamicTokensEnabled\")\n            ? config.dynamicTokensEnabled // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled;\n        this.maxLookahead = (0, has_1.default)(config, \"maxLookahead\")\n            ? config.maxLookahead // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.maxLookahead;\n        this.lookaheadStrategy = (0, has_1.default)(config, \"lookaheadStrategy\")\n            ? config.lookaheadStrategy // assumes end user provides the correct config value/type\n            : new llk_lookahead_1.LLkLookaheadStrategy({ maxLookahead: this.maxLookahead });\n        this.lookAheadFuncsCache = new Map();\n    };\n    LooksAhead.prototype.preComputeLookaheadFunctions = function (rules) {\n        var _this = this;\n        (0, forEach_1.default)(rules, function (currRule) {\n            _this.TRACE_INIT(\"\".concat(currRule.name, \" Rule Lookahead\"), function () {\n                var _a = collectMethods(currRule), alternation = _a.alternation, repetition = _a.repetition, option = _a.option, repetitionMandatory = _a.repetitionMandatory, repetitionMandatoryWithSeparator = _a.repetitionMandatoryWithSeparator, repetitionWithSeparator = _a.repetitionWithSeparator;\n                (0, forEach_1.default)(alternation, function (currProd) {\n                    var prodIdx = currProd.idx === 0 ? \"\" : currProd.idx;\n                    _this.TRACE_INIT(\"\".concat((0, gast_2.getProductionDslName)(currProd)).concat(prodIdx), function () {\n                        var laFunc = _this.lookaheadStrategy.buildLookaheadForAlternation({\n                            prodOccurrence: currProd.idx,\n                            rule: currRule,\n                            maxLookahead: currProd.maxLookahead || _this.maxLookahead,\n                            hasPredicates: currProd.hasPredicates,\n                            dynamicTokensEnabled: _this.dynamicTokensEnabled\n                        });\n                        var key = (0, keys_1.getKeyForAutomaticLookahead)(_this.fullRuleNameToShort[currRule.name], keys_1.OR_IDX, currProd.idx);\n                        _this.setLaFuncCache(key, laFunc);\n                    });\n                });\n                (0, forEach_1.default)(repetition, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.MANY_IDX, \"Repetition\", currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n                (0, forEach_1.default)(option, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.OPTION_IDX, \"Option\", currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n                (0, forEach_1.default)(repetitionMandatory, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.AT_LEAST_ONE_IDX, \"RepetitionMandatory\", currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n                (0, forEach_1.default)(repetitionMandatoryWithSeparator, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.AT_LEAST_ONE_SEP_IDX, \"RepetitionMandatoryWithSeparator\", currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n                (0, forEach_1.default)(repetitionWithSeparator, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.MANY_SEP_IDX, \"RepetitionWithSeparator\", currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n            });\n        });\n    };\n    LooksAhead.prototype.computeLookaheadFunc = function (rule, prodOccurrence, prodKey, prodType, prodMaxLookahead, dslMethodName) {\n        var _this = this;\n        this.TRACE_INIT(\"\".concat(dslMethodName).concat(prodOccurrence === 0 ? \"\" : prodOccurrence), function () {\n            var laFunc = _this.lookaheadStrategy.buildLookaheadForOptional({\n                prodOccurrence: prodOccurrence,\n                rule: rule,\n                maxLookahead: prodMaxLookahead || _this.maxLookahead,\n                dynamicTokensEnabled: _this.dynamicTokensEnabled,\n                prodType: prodType\n            });\n            var key = (0, keys_1.getKeyForAutomaticLookahead)(_this.fullRuleNameToShort[rule.name], prodKey, prodOccurrence);\n            _this.setLaFuncCache(key, laFunc);\n        });\n    };\n    // this actually returns a number, but it is always used as a string (object prop key)\n    LooksAhead.prototype.getKeyForAutomaticLookahead = function (dslMethodIdx, occurrence) {\n        var currRuleShortName = this.getLastExplicitRuleShortName();\n        return (0, keys_1.getKeyForAutomaticLookahead)(currRuleShortName, dslMethodIdx, occurrence);\n    };\n    LooksAhead.prototype.getLaFuncFromCache = function (key) {\n        return this.lookAheadFuncsCache.get(key);\n    };\n    /* istanbul ignore next */\n    LooksAhead.prototype.setLaFuncCache = function (key, value) {\n        this.lookAheadFuncsCache.set(key, value);\n    };\n    return LooksAhead;\n}());\nexports.LooksAhead = LooksAhead;\nvar DslMethodsCollectorVisitor = /** @class */ (function (_super) {\n    __extends(DslMethodsCollectorVisitor, _super);\n    function DslMethodsCollectorVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dslMethods = {\n            option: [],\n            alternation: [],\n            repetition: [],\n            repetitionWithSeparator: [],\n            repetitionMandatory: [],\n            repetitionMandatoryWithSeparator: []\n        };\n        return _this;\n    }\n    DslMethodsCollectorVisitor.prototype.reset = function () {\n        this.dslMethods = {\n            option: [],\n            alternation: [],\n            repetition: [],\n            repetitionWithSeparator: [],\n            repetitionMandatory: [],\n            repetitionMandatoryWithSeparator: []\n        };\n    };\n    DslMethodsCollectorVisitor.prototype.visitOption = function (option) {\n        this.dslMethods.option.push(option);\n    };\n    DslMethodsCollectorVisitor.prototype.visitRepetitionWithSeparator = function (manySep) {\n        this.dslMethods.repetitionWithSeparator.push(manySep);\n    };\n    DslMethodsCollectorVisitor.prototype.visitRepetitionMandatory = function (atLeastOne) {\n        this.dslMethods.repetitionMandatory.push(atLeastOne);\n    };\n    DslMethodsCollectorVisitor.prototype.visitRepetitionMandatoryWithSeparator = function (atLeastOneSep) {\n        this.dslMethods.repetitionMandatoryWithSeparator.push(atLeastOneSep);\n    };\n    DslMethodsCollectorVisitor.prototype.visitRepetition = function (many) {\n        this.dslMethods.repetition.push(many);\n    };\n    DslMethodsCollectorVisitor.prototype.visitAlternation = function (or) {\n        this.dslMethods.alternation.push(or);\n    };\n    return DslMethodsCollectorVisitor;\n}(gast_1.GAstVisitor));\nvar collectorVisitor = new DslMethodsCollectorVisitor();\nfunction collectMethods(rule) {\n    collectorVisitor.reset();\n    rule.accept(collectorVisitor);\n    var dslMethods = collectorVisitor.dslMethods;\n    // avoid uncleaned references\n    collectorVisitor.reset();\n    return dslMethods;\n}\nexports.collectMethods = collectMethods;\n//# sourceMappingURL=looksahead.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PerformanceTracer = void 0;\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar parser_1 = require(\"../parser\");\n/**\n * Trait responsible for runtime parsing errors.\n */\nvar PerformanceTracer = /** @class */ (function () {\n    function PerformanceTracer() {\n    }\n    PerformanceTracer.prototype.initPerformanceTracer = function (config) {\n        if ((0, has_1.default)(config, \"traceInitPerf\")) {\n            var userTraceInitPerf = config.traceInitPerf;\n            var traceIsNumber = typeof userTraceInitPerf === \"number\";\n            this.traceInitMaxIdent = traceIsNumber\n                ? userTraceInitPerf\n                : Infinity;\n            this.traceInitPerf = traceIsNumber\n                ? userTraceInitPerf > 0\n                : userTraceInitPerf; // assumes end user provides the correct config value/type\n        }\n        else {\n            this.traceInitMaxIdent = 0;\n            this.traceInitPerf = parser_1.DEFAULT_PARSER_CONFIG.traceInitPerf;\n        }\n        this.traceInitIndent = -1;\n    };\n    PerformanceTracer.prototype.TRACE_INIT = function (phaseDesc, phaseImpl) {\n        // No need to optimize this using NOOP pattern because\n        // It is not called in a hot spot...\n        if (this.traceInitPerf === true) {\n            this.traceInitIndent++;\n            var indent = new Array(this.traceInitIndent + 1).join(\"\\t\");\n            if (this.traceInitIndent < this.traceInitMaxIdent) {\n                console.log(\"\".concat(indent, \"--> <\").concat(phaseDesc, \">\"));\n            }\n            var _a = (0, utils_1.timer)(phaseImpl), time = _a.time, value = _a.value;\n            /* istanbul ignore next - Difficult to reproduce specific performance behavior (>10ms) in tests */\n            var traceMethod = time > 10 ? console.warn : console.log;\n            if (this.traceInitIndent < this.traceInitMaxIdent) {\n                traceMethod(\"\".concat(indent, \"<-- <\").concat(phaseDesc, \"> time: \").concat(time, \"ms\"));\n            }\n            this.traceInitIndent--;\n            return value;\n        }\n        else {\n            return phaseImpl();\n        }\n    };\n    return PerformanceTracer;\n}());\nexports.PerformanceTracer = PerformanceTracer;\n//# sourceMappingURL=perf_tracer.js.map","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.firstForTerminal = exports.firstForBranching = exports.firstForSequence = exports.first = void 0;\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar uniq_1 = __importDefault(require(\"lodash/uniq\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar gast_1 = require(\"@chevrotain/gast\");\nvar gast_2 = require(\"@chevrotain/gast\");\nfunction first(prod) {\n    /* istanbul ignore else */\n    if (prod instanceof gast_1.NonTerminal) {\n        // this could in theory cause infinite loops if\n        // (1) prod A refs prod B.\n        // (2) prod B refs prod A\n        // (3) AB can match the empty set\n        // in other words a cycle where everything is optional so the first will keep\n        // looking ahead for the next optional part and will never exit\n        // currently there is no safeguard for this unique edge case because\n        // (1) not sure a grammar in which this can happen is useful for anything (productive)\n        return first(prod.referencedRule);\n    }\n    else if (prod instanceof gast_1.Terminal) {\n        return firstForTerminal(prod);\n    }\n    else if ((0, gast_2.isSequenceProd)(prod)) {\n        return firstForSequence(prod);\n    }\n    else if ((0, gast_2.isBranchingProd)(prod)) {\n        return firstForBranching(prod);\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.first = first;\nfunction firstForSequence(prod) {\n    var firstSet = [];\n    var seq = prod.definition;\n    var nextSubProdIdx = 0;\n    var hasInnerProdsRemaining = seq.length > nextSubProdIdx;\n    var currSubProd;\n    // so we enter the loop at least once (if the definition is not empty\n    var isLastInnerProdOptional = true;\n    // scan a sequence until it's end or until we have found a NONE optional production in it\n    while (hasInnerProdsRemaining && isLastInnerProdOptional) {\n        currSubProd = seq[nextSubProdIdx];\n        isLastInnerProdOptional = (0, gast_2.isOptionalProd)(currSubProd);\n        firstSet = firstSet.concat(first(currSubProd));\n        nextSubProdIdx = nextSubProdIdx + 1;\n        hasInnerProdsRemaining = seq.length > nextSubProdIdx;\n    }\n    return (0, uniq_1.default)(firstSet);\n}\nexports.firstForSequence = firstForSequence;\nfunction firstForBranching(prod) {\n    var allAlternativesFirsts = (0, map_1.default)(prod.definition, function (innerProd) {\n        return first(innerProd);\n    });\n    return (0, uniq_1.default)((0, flatten_1.default)(allAlternativesFirsts));\n}\nexports.firstForBranching = firstForBranching;\nfunction firstForTerminal(terminal) {\n    return [terminal.terminalType];\n}\nexports.firstForTerminal = firstForTerminal;\n//# sourceMappingURL=first.js.map","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PRINT_WARNING = exports.PRINT_ERROR = void 0;\nfunction PRINT_ERROR(msg) {\n    /* istanbul ignore else - can't override global.console in node.js */\n    if (console && console.error) {\n        console.error(\"Error: \".concat(msg));\n    }\n}\nexports.PRINT_ERROR = PRINT_ERROR;\nfunction PRINT_WARNING(msg) {\n    /* istanbul ignore else - can't override global.console in node.js*/\n    if (console && console.warn) {\n        // TODO: modify docs accordingly\n        console.warn(\"Warning: \".concat(msg));\n    }\n}\nexports.PRINT_WARNING = PRINT_WARNING;\n//# sourceMappingURL=print.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GastRecorder = void 0;\nvar last_1 = __importDefault(require(\"lodash/last\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar some_1 = __importDefault(require(\"lodash/some\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar gast_1 = require(\"@chevrotain/gast\");\nvar lexer_public_1 = require(\"../../../scan/lexer_public\");\nvar tokens_1 = require(\"../../../scan/tokens\");\nvar tokens_public_1 = require(\"../../../scan/tokens_public\");\nvar parser_1 = require(\"../parser\");\nvar keys_1 = require(\"../../grammar/keys\");\nvar RECORDING_NULL_OBJECT = {\n    description: \"This Object indicates the Parser is during Recording Phase\"\n};\nObject.freeze(RECORDING_NULL_OBJECT);\nvar HANDLE_SEPARATOR = true;\nvar MAX_METHOD_IDX = Math.pow(2, keys_1.BITS_FOR_OCCURRENCE_IDX) - 1;\nvar RFT = (0, tokens_public_1.createToken)({ name: \"RECORDING_PHASE_TOKEN\", pattern: lexer_public_1.Lexer.NA });\n(0, tokens_1.augmentTokenTypes)([RFT]);\nvar RECORDING_PHASE_TOKEN = (0, tokens_public_1.createTokenInstance)(RFT, \"This IToken indicates the Parser is in Recording Phase\\n\\t\" +\n    \"\" +\n    \"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details\", \n// Using \"-1\" instead of NaN (as in EOF) because an actual number is less likely to\n// cause errors if the output of LA or CONSUME would be (incorrectly) used during the recording phase.\n-1, -1, -1, -1, -1, -1);\nObject.freeze(RECORDING_PHASE_TOKEN);\nvar RECORDING_PHASE_CSTNODE = {\n    name: \"This CSTNode indicates the Parser is in Recording Phase\\n\\t\" +\n        \"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details\",\n    children: {}\n};\n/**\n * This trait handles the creation of the GAST structure for Chevrotain Grammars\n */\nvar GastRecorder = /** @class */ (function () {\n    function GastRecorder() {\n    }\n    GastRecorder.prototype.initGastRecorder = function (config) {\n        this.recordingProdStack = [];\n        this.RECORDING_PHASE = false;\n    };\n    GastRecorder.prototype.enableRecording = function () {\n        var _this = this;\n        this.RECORDING_PHASE = true;\n        this.TRACE_INIT(\"Enable Recording\", function () {\n            var _loop_1 = function (i) {\n                var idx = i > 0 ? i : \"\";\n                _this[\"CONSUME\".concat(idx)] = function (arg1, arg2) {\n                    return this.consumeInternalRecord(arg1, i, arg2);\n                };\n                _this[\"SUBRULE\".concat(idx)] = function (arg1, arg2) {\n                    return this.subruleInternalRecord(arg1, i, arg2);\n                };\n                _this[\"OPTION\".concat(idx)] = function (arg1) {\n                    return this.optionInternalRecord(arg1, i);\n                };\n                _this[\"OR\".concat(idx)] = function (arg1) {\n                    return this.orInternalRecord(arg1, i);\n                };\n                _this[\"MANY\".concat(idx)] = function (arg1) {\n                    this.manyInternalRecord(i, arg1);\n                };\n                _this[\"MANY_SEP\".concat(idx)] = function (arg1) {\n                    this.manySepFirstInternalRecord(i, arg1);\n                };\n                _this[\"AT_LEAST_ONE\".concat(idx)] = function (arg1) {\n                    this.atLeastOneInternalRecord(i, arg1);\n                };\n                _this[\"AT_LEAST_ONE_SEP\".concat(idx)] = function (arg1) {\n                    this.atLeastOneSepFirstInternalRecord(i, arg1);\n                };\n            };\n            /**\n             * Warning Dark Voodoo Magic upcoming!\n             * We are \"replacing\" the public parsing DSL methods API\n             * With **new** alternative implementations on the Parser **instance**\n             *\n             * So far this is the only way I've found to avoid performance regressions during parsing time.\n             * - Approx 30% performance regression was measured on Chrome 75 Canary when attempting to replace the \"internal\"\n             *   implementations directly instead.\n             */\n            for (var i = 0; i < 10; i++) {\n                _loop_1(i);\n            }\n            // DSL methods with the idx(suffix) as an argument\n            _this[\"consume\"] = function (idx, arg1, arg2) {\n                return this.consumeInternalRecord(arg1, idx, arg2);\n            };\n            _this[\"subrule\"] = function (idx, arg1, arg2) {\n                return this.subruleInternalRecord(arg1, idx, arg2);\n            };\n            _this[\"option\"] = function (idx, arg1) {\n                return this.optionInternalRecord(arg1, idx);\n            };\n            _this[\"or\"] = function (idx, arg1) {\n                return this.orInternalRecord(arg1, idx);\n            };\n            _this[\"many\"] = function (idx, arg1) {\n                this.manyInternalRecord(idx, arg1);\n            };\n            _this[\"atLeastOne\"] = function (idx, arg1) {\n                this.atLeastOneInternalRecord(idx, arg1);\n            };\n            _this.ACTION = _this.ACTION_RECORD;\n            _this.BACKTRACK = _this.BACKTRACK_RECORD;\n            _this.LA = _this.LA_RECORD;\n        });\n    };\n    GastRecorder.prototype.disableRecording = function () {\n        var _this = this;\n        this.RECORDING_PHASE = false;\n        // By deleting these **instance** properties, any future invocation\n        // will be deferred to the original methods on the **prototype** object\n        // This seems to get rid of any incorrect optimizations that V8 may\n        // do during the recording phase.\n        this.TRACE_INIT(\"Deleting Recording methods\", function () {\n            var that = _this;\n            for (var i = 0; i < 10; i++) {\n                var idx = i > 0 ? i : \"\";\n                delete that[\"CONSUME\".concat(idx)];\n                delete that[\"SUBRULE\".concat(idx)];\n                delete that[\"OPTION\".concat(idx)];\n                delete that[\"OR\".concat(idx)];\n                delete that[\"MANY\".concat(idx)];\n                delete that[\"MANY_SEP\".concat(idx)];\n                delete that[\"AT_LEAST_ONE\".concat(idx)];\n                delete that[\"AT_LEAST_ONE_SEP\".concat(idx)];\n            }\n            delete that[\"consume\"];\n            delete that[\"subrule\"];\n            delete that[\"option\"];\n            delete that[\"or\"];\n            delete that[\"many\"];\n            delete that[\"atLeastOne\"];\n            delete that.ACTION;\n            delete that.BACKTRACK;\n            delete that.LA;\n        });\n    };\n    //   Parser methods are called inside an ACTION?\n    //   Maybe try/catch/finally on ACTIONS while disabling the recorders state changes?\n    // @ts-expect-error -- noop place holder\n    GastRecorder.prototype.ACTION_RECORD = function (impl) {\n        // NO-OP during recording\n    };\n    // Executing backtracking logic will break our recording logic assumptions\n    GastRecorder.prototype.BACKTRACK_RECORD = function (grammarRule, args) {\n        return function () { return true; };\n    };\n    // LA is part of the official API and may be used for custom lookahead logic\n    // by end users who may forget to wrap it in ACTION or inside a GATE\n    GastRecorder.prototype.LA_RECORD = function (howMuch) {\n        // We cannot use the RECORD_PHASE_TOKEN here because someone may depend\n        // On LA return EOF at the end of the input so an infinite loop may occur.\n        return parser_1.END_OF_FILE;\n    };\n    GastRecorder.prototype.topLevelRuleRecord = function (name, def) {\n        try {\n            var newTopLevelRule = new gast_1.Rule({ definition: [], name: name });\n            newTopLevelRule.name = name;\n            this.recordingProdStack.push(newTopLevelRule);\n            def.call(this);\n            this.recordingProdStack.pop();\n            return newTopLevelRule;\n        }\n        catch (originalError) {\n            if (originalError.KNOWN_RECORDER_ERROR !== true) {\n                try {\n                    originalError.message =\n                        originalError.message +\n                            '\\n\\t This error was thrown during the \"grammar recording phase\" For more info see:\\n\\t' +\n                            \"https://chevrotain.io/docs/guide/internals.html#grammar-recording\";\n                }\n                catch (mutabilityError) {\n                    // We may not be able to modify the original error object\n                    throw originalError;\n                }\n            }\n            throw originalError;\n        }\n    };\n    // Implementation of parsing DSL\n    GastRecorder.prototype.optionInternalRecord = function (actionORMethodDef, occurrence) {\n        return recordProd.call(this, gast_1.Option, actionORMethodDef, occurrence);\n    };\n    GastRecorder.prototype.atLeastOneInternalRecord = function (occurrence, actionORMethodDef) {\n        recordProd.call(this, gast_1.RepetitionMandatory, actionORMethodDef, occurrence);\n    };\n    GastRecorder.prototype.atLeastOneSepFirstInternalRecord = function (occurrence, options) {\n        recordProd.call(this, gast_1.RepetitionMandatoryWithSeparator, options, occurrence, HANDLE_SEPARATOR);\n    };\n    GastRecorder.prototype.manyInternalRecord = function (occurrence, actionORMethodDef) {\n        recordProd.call(this, gast_1.Repetition, actionORMethodDef, occurrence);\n    };\n    GastRecorder.prototype.manySepFirstInternalRecord = function (occurrence, options) {\n        recordProd.call(this, gast_1.RepetitionWithSeparator, options, occurrence, HANDLE_SEPARATOR);\n    };\n    GastRecorder.prototype.orInternalRecord = function (altsOrOpts, occurrence) {\n        return recordOrProd.call(this, altsOrOpts, occurrence);\n    };\n    GastRecorder.prototype.subruleInternalRecord = function (ruleToCall, occurrence, options) {\n        assertMethodIdxIsValid(occurrence);\n        if (!ruleToCall || (0, has_1.default)(ruleToCall, \"ruleName\") === false) {\n            var error = new Error(\"<SUBRULE\".concat(getIdxSuffix(occurrence), \"> argument is invalid\") +\n                \" expecting a Parser method reference but got: <\".concat(JSON.stringify(ruleToCall), \">\") +\n                \"\\n inside top level rule: <\".concat(this.recordingProdStack[0].name, \">\"));\n            error.KNOWN_RECORDER_ERROR = true;\n            throw error;\n        }\n        var prevProd = (0, last_1.default)(this.recordingProdStack);\n        var ruleName = ruleToCall.ruleName;\n        var newNoneTerminal = new gast_1.NonTerminal({\n            idx: occurrence,\n            nonTerminalName: ruleName,\n            label: options === null || options === void 0 ? void 0 : options.LABEL,\n            // The resolving of the `referencedRule` property will be done once all the Rule's GASTs have been created\n            referencedRule: undefined\n        });\n        prevProd.definition.push(newNoneTerminal);\n        return this.outputCst ? RECORDING_PHASE_CSTNODE : RECORDING_NULL_OBJECT;\n    };\n    GastRecorder.prototype.consumeInternalRecord = function (tokType, occurrence, options) {\n        assertMethodIdxIsValid(occurrence);\n        if (!(0, tokens_1.hasShortKeyProperty)(tokType)) {\n            var error = new Error(\"<CONSUME\".concat(getIdxSuffix(occurrence), \"> argument is invalid\") +\n                \" expecting a TokenType reference but got: <\".concat(JSON.stringify(tokType), \">\") +\n                \"\\n inside top level rule: <\".concat(this.recordingProdStack[0].name, \">\"));\n            error.KNOWN_RECORDER_ERROR = true;\n            throw error;\n        }\n        var prevProd = (0, last_1.default)(this.recordingProdStack);\n        var newNoneTerminal = new gast_1.Terminal({\n            idx: occurrence,\n            terminalType: tokType,\n            label: options === null || options === void 0 ? void 0 : options.LABEL\n        });\n        prevProd.definition.push(newNoneTerminal);\n        return RECORDING_PHASE_TOKEN;\n    };\n    return GastRecorder;\n}());\nexports.GastRecorder = GastRecorder;\nfunction recordProd(prodConstructor, mainProdArg, occurrence, handleSep) {\n    if (handleSep === void 0) { handleSep = false; }\n    assertMethodIdxIsValid(occurrence);\n    var prevProd = (0, last_1.default)(this.recordingProdStack);\n    var grammarAction = (0, isFunction_1.default)(mainProdArg) ? mainProdArg : mainProdArg.DEF;\n    var newProd = new prodConstructor({ definition: [], idx: occurrence });\n    if (handleSep) {\n        newProd.separator = mainProdArg.SEP;\n    }\n    if ((0, has_1.default)(mainProdArg, \"MAX_LOOKAHEAD\")) {\n        newProd.maxLookahead = mainProdArg.MAX_LOOKAHEAD;\n    }\n    this.recordingProdStack.push(newProd);\n    grammarAction.call(this);\n    prevProd.definition.push(newProd);\n    this.recordingProdStack.pop();\n    return RECORDING_NULL_OBJECT;\n}\nfunction recordOrProd(mainProdArg, occurrence) {\n    var _this = this;\n    assertMethodIdxIsValid(occurrence);\n    var prevProd = (0, last_1.default)(this.recordingProdStack);\n    // Only an array of alternatives\n    var hasOptions = (0, isArray_1.default)(mainProdArg) === false;\n    var alts = hasOptions === false ? mainProdArg : mainProdArg.DEF;\n    var newOrProd = new gast_1.Alternation({\n        definition: [],\n        idx: occurrence,\n        ignoreAmbiguities: hasOptions && mainProdArg.IGNORE_AMBIGUITIES === true\n    });\n    if ((0, has_1.default)(mainProdArg, \"MAX_LOOKAHEAD\")) {\n        newOrProd.maxLookahead = mainProdArg.MAX_LOOKAHEAD;\n    }\n    var hasPredicates = (0, some_1.default)(alts, function (currAlt) { return (0, isFunction_1.default)(currAlt.GATE); });\n    newOrProd.hasPredicates = hasPredicates;\n    prevProd.definition.push(newOrProd);\n    (0, forEach_1.default)(alts, function (currAlt) {\n        var currAltFlat = new gast_1.Alternative({ definition: [] });\n        newOrProd.definition.push(currAltFlat);\n        if ((0, has_1.default)(currAlt, \"IGNORE_AMBIGUITIES\")) {\n            currAltFlat.ignoreAmbiguities = currAlt.IGNORE_AMBIGUITIES; // assumes end user provides the correct config value/type\n        }\n        // **implicit** ignoreAmbiguities due to usage of gate\n        else if ((0, has_1.default)(currAlt, \"GATE\")) {\n            currAltFlat.ignoreAmbiguities = true;\n        }\n        _this.recordingProdStack.push(currAltFlat);\n        currAlt.ALT.call(_this);\n        _this.recordingProdStack.pop();\n    });\n    return RECORDING_NULL_OBJECT;\n}\nfunction getIdxSuffix(idx) {\n    return idx === 0 ? \"\" : \"\".concat(idx);\n}\nfunction assertMethodIdxIsValid(idx) {\n    if (idx < 0 || idx > MAX_METHOD_IDX) {\n        var error = new Error(\n        // The stack trace will contain all the needed details\n        \"Invalid DSL Method idx value: <\".concat(idx, \">\\n\\t\") +\n            \"Idx value must be a none negative value smaller than \".concat(MAX_METHOD_IDX + 1));\n        error.KNOWN_RECORDER_ERROR = true;\n        throw error;\n    }\n}\n//# sourceMappingURL=gast_recorder.js.map","var arraySome = require('./_arraySome'),\n    baseIteratee = require('./_baseIteratee'),\n    baseSome = require('./_baseSome'),\n    isArray = require('./isArray'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Checks if `predicate` returns truthy for **any** element of `collection`.\n * Iteration is stopped once `predicate` returns truthy. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n * @example\n *\n * _.some([null, 0, 'yes', false], Boolean);\n * // => true\n *\n * var users = [\n *   { 'user': 'barney', 'active': true },\n *   { 'user': 'fred',   'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.some(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.some(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.some(users, 'active');\n * // => true\n */\nfunction some(collection, predicate, guard) {\n  var func = isArray(collection) ? arraySome : baseSome;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = some;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n",";(function(root, factory) {\n    // istanbul ignore next\n    if (typeof define === \"function\" && define.amd) {\n        // istanbul ignore next\n        define([], factory)\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory()\n    } else {\n        // istanbul ignore next\n        root.regexpToAst = factory()\n    }\n})(\n    typeof self !== \"undefined\"\n        ? // istanbul ignore next\n          self\n        : this,\n    function() {\n        // references\n        // https://hackernoon.com/the-madness-of-parsing-real-world-javascript-regexps-d9ee336df983\n        // https://www.ecma-international.org/ecma-262/8.0/index.html#prod-Pattern\n        function RegExpParser() {}\n\n        RegExpParser.prototype.saveState = function() {\n            return {\n                idx: this.idx,\n                input: this.input,\n                groupIdx: this.groupIdx\n            }\n        }\n\n        RegExpParser.prototype.restoreState = function(newState) {\n            this.idx = newState.idx\n            this.input = newState.input\n            this.groupIdx = newState.groupIdx\n        }\n\n        RegExpParser.prototype.pattern = function(input) {\n            // parser state\n            this.idx = 0\n            this.input = input\n            this.groupIdx = 0\n\n            this.consumeChar(\"/\")\n            var value = this.disjunction()\n            this.consumeChar(\"/\")\n\n            var flags = {\n                type: \"Flags\",\n                loc: { begin: this.idx, end: input.length },\n                global: false,\n                ignoreCase: false,\n                multiLine: false,\n                unicode: false,\n                sticky: false\n            }\n\n            while (this.isRegExpFlag()) {\n                switch (this.popChar()) {\n                    case \"g\":\n                        addFlag(flags, \"global\")\n                        break\n                    case \"i\":\n                        addFlag(flags, \"ignoreCase\")\n                        break\n                    case \"m\":\n                        addFlag(flags, \"multiLine\")\n                        break\n                    case \"u\":\n                        addFlag(flags, \"unicode\")\n                        break\n                    case \"y\":\n                        addFlag(flags, \"sticky\")\n                        break\n                }\n            }\n\n            if (this.idx !== this.input.length) {\n                throw Error(\n                    \"Redundant input: \" + this.input.substring(this.idx)\n                )\n            }\n            return {\n                type: \"Pattern\",\n                flags: flags,\n                value: value,\n                loc: this.loc(0)\n            }\n        }\n\n        RegExpParser.prototype.disjunction = function() {\n            var alts = []\n            var begin = this.idx\n\n            alts.push(this.alternative())\n\n            while (this.peekChar() === \"|\") {\n                this.consumeChar(\"|\")\n                alts.push(this.alternative())\n            }\n\n            return { type: \"Disjunction\", value: alts, loc: this.loc(begin) }\n        }\n\n        RegExpParser.prototype.alternative = function() {\n            var terms = []\n            var begin = this.idx\n\n            while (this.isTerm()) {\n                terms.push(this.term())\n            }\n\n            return { type: \"Alternative\", value: terms, loc: this.loc(begin) }\n        }\n\n        RegExpParser.prototype.term = function() {\n            if (this.isAssertion()) {\n                return this.assertion()\n            } else {\n                return this.atom()\n            }\n        }\n\n        RegExpParser.prototype.assertion = function() {\n            var begin = this.idx\n            switch (this.popChar()) {\n                case \"^\":\n                    return {\n                        type: \"StartAnchor\",\n                        loc: this.loc(begin)\n                    }\n                case \"$\":\n                    return { type: \"EndAnchor\", loc: this.loc(begin) }\n                // '\\b' or '\\B'\n                case \"\\\\\":\n                    switch (this.popChar()) {\n                        case \"b\":\n                            return {\n                                type: \"WordBoundary\",\n                                loc: this.loc(begin)\n                            }\n                        case \"B\":\n                            return {\n                                type: \"NonWordBoundary\",\n                                loc: this.loc(begin)\n                            }\n                    }\n                    // istanbul ignore next\n                    throw Error(\"Invalid Assertion Escape\")\n                // '(?=' or '(?!'\n                case \"(\":\n                    this.consumeChar(\"?\")\n\n                    var type\n                    switch (this.popChar()) {\n                        case \"=\":\n                            type = \"Lookahead\"\n                            break\n                        case \"!\":\n                            type = \"NegativeLookahead\"\n                            break\n                    }\n                    ASSERT_EXISTS(type)\n\n                    var disjunction = this.disjunction()\n\n                    this.consumeChar(\")\")\n\n                    return {\n                        type: type,\n                        value: disjunction,\n                        loc: this.loc(begin)\n                    }\n            }\n            // istanbul ignore next\n            ASSERT_NEVER_REACH_HERE()\n        }\n\n        RegExpParser.prototype.quantifier = function(isBacktracking) {\n            var range\n            var begin = this.idx\n            switch (this.popChar()) {\n                case \"*\":\n                    range = {\n                        atLeast: 0,\n                        atMost: Infinity\n                    }\n                    break\n                case \"+\":\n                    range = {\n                        atLeast: 1,\n                        atMost: Infinity\n                    }\n                    break\n                case \"?\":\n                    range = {\n                        atLeast: 0,\n                        atMost: 1\n                    }\n                    break\n                case \"{\":\n                    var atLeast = this.integerIncludingZero()\n                    switch (this.popChar()) {\n                        case \"}\":\n                            range = {\n                                atLeast: atLeast,\n                                atMost: atLeast\n                            }\n                            break\n                        case \",\":\n                            var atMost\n                            if (this.isDigit()) {\n                                atMost = this.integerIncludingZero()\n                                range = {\n                                    atLeast: atLeast,\n                                    atMost: atMost\n                                }\n                            } else {\n                                range = {\n                                    atLeast: atLeast,\n                                    atMost: Infinity\n                                }\n                            }\n                            this.consumeChar(\"}\")\n                            break\n                    }\n                    // throwing exceptions from \"ASSERT_EXISTS\" during backtracking\n                    // causes severe performance degradations\n                    if (isBacktracking === true && range === undefined) {\n                        return undefined\n                    }\n                    ASSERT_EXISTS(range)\n                    break\n            }\n\n            // throwing exceptions from \"ASSERT_EXISTS\" during backtracking\n            // causes severe performance degradations\n            if (isBacktracking === true && range === undefined) {\n                return undefined\n            }\n\n            ASSERT_EXISTS(range)\n\n            if (this.peekChar(0) === \"?\") {\n                this.consumeChar(\"?\")\n                range.greedy = false\n            } else {\n                range.greedy = true\n            }\n\n            range.type = \"Quantifier\"\n            range.loc = this.loc(begin)\n            return range\n        }\n\n        RegExpParser.prototype.atom = function() {\n            var atom\n            var begin = this.idx\n            switch (this.peekChar()) {\n                case \".\":\n                    atom = this.dotAll()\n                    break\n                case \"\\\\\":\n                    atom = this.atomEscape()\n                    break\n                case \"[\":\n                    atom = this.characterClass()\n                    break\n                case \"(\":\n                    atom = this.group()\n                    break\n            }\n\n            if (atom === undefined && this.isPatternCharacter()) {\n                atom = this.patternCharacter()\n            }\n\n            ASSERT_EXISTS(atom)\n\n            atom.loc = this.loc(begin)\n\n            if (this.isQuantifier()) {\n                atom.quantifier = this.quantifier()\n            }\n\n            return atom\n        }\n\n        RegExpParser.prototype.dotAll = function() {\n            this.consumeChar(\".\")\n            return {\n                type: \"Set\",\n                complement: true,\n                value: [cc(\"\\n\"), cc(\"\\r\"), cc(\"\\u2028\"), cc(\"\\u2029\")]\n            }\n        }\n\n        RegExpParser.prototype.atomEscape = function() {\n            this.consumeChar(\"\\\\\")\n\n            switch (this.peekChar()) {\n                case \"1\":\n                case \"2\":\n                case \"3\":\n                case \"4\":\n                case \"5\":\n                case \"6\":\n                case \"7\":\n                case \"8\":\n                case \"9\":\n                    return this.decimalEscapeAtom()\n                case \"d\":\n                case \"D\":\n                case \"s\":\n                case \"S\":\n                case \"w\":\n                case \"W\":\n                    return this.characterClassEscape()\n                case \"f\":\n                case \"n\":\n                case \"r\":\n                case \"t\":\n                case \"v\":\n                    return this.controlEscapeAtom()\n                case \"c\":\n                    return this.controlLetterEscapeAtom()\n                case \"0\":\n                    return this.nulCharacterAtom()\n                case \"x\":\n                    return this.hexEscapeSequenceAtom()\n                case \"u\":\n                    return this.regExpUnicodeEscapeSequenceAtom()\n                default:\n                    return this.identityEscapeAtom()\n            }\n        }\n\n        RegExpParser.prototype.decimalEscapeAtom = function() {\n            var value = this.positiveInteger()\n\n            return { type: \"GroupBackReference\", value: value }\n        }\n\n        RegExpParser.prototype.characterClassEscape = function() {\n            var set\n            var complement = false\n            switch (this.popChar()) {\n                case \"d\":\n                    set = digitsCharCodes\n                    break\n                case \"D\":\n                    set = digitsCharCodes\n                    complement = true\n                    break\n                case \"s\":\n                    set = whitespaceCodes\n                    break\n                case \"S\":\n                    set = whitespaceCodes\n                    complement = true\n                    break\n                case \"w\":\n                    set = wordCharCodes\n                    break\n                case \"W\":\n                    set = wordCharCodes\n                    complement = true\n                    break\n            }\n\n            ASSERT_EXISTS(set)\n\n            return { type: \"Set\", value: set, complement: complement }\n        }\n\n        RegExpParser.prototype.controlEscapeAtom = function() {\n            var escapeCode\n            switch (this.popChar()) {\n                case \"f\":\n                    escapeCode = cc(\"\\f\")\n                    break\n                case \"n\":\n                    escapeCode = cc(\"\\n\")\n                    break\n                case \"r\":\n                    escapeCode = cc(\"\\r\")\n                    break\n                case \"t\":\n                    escapeCode = cc(\"\\t\")\n                    break\n                case \"v\":\n                    escapeCode = cc(\"\\v\")\n                    break\n            }\n            ASSERT_EXISTS(escapeCode)\n\n            return { type: \"Character\", value: escapeCode }\n        }\n\n        RegExpParser.prototype.controlLetterEscapeAtom = function() {\n            this.consumeChar(\"c\")\n            var letter = this.popChar()\n            if (/[a-zA-Z]/.test(letter) === false) {\n                throw Error(\"Invalid \")\n            }\n\n            var letterCode = letter.toUpperCase().charCodeAt(0) - 64\n            return { type: \"Character\", value: letterCode }\n        }\n\n        RegExpParser.prototype.nulCharacterAtom = function() {\n            // TODO implement '[lookahead  DecimalDigit]'\n            // TODO: for the deprecated octal escape sequence\n            this.consumeChar(\"0\")\n            return { type: \"Character\", value: cc(\"\\0\") }\n        }\n\n        RegExpParser.prototype.hexEscapeSequenceAtom = function() {\n            this.consumeChar(\"x\")\n            return this.parseHexDigits(2)\n        }\n\n        RegExpParser.prototype.regExpUnicodeEscapeSequenceAtom = function() {\n            this.consumeChar(\"u\")\n            return this.parseHexDigits(4)\n        }\n\n        RegExpParser.prototype.identityEscapeAtom = function() {\n            // TODO: implement \"SourceCharacter but not UnicodeIDContinue\"\n            // // http://unicode.org/reports/tr31/#Specific_Character_Adjustments\n            var escapedChar = this.popChar()\n            return { type: \"Character\", value: cc(escapedChar) }\n        }\n\n        RegExpParser.prototype.classPatternCharacterAtom = function() {\n            switch (this.peekChar()) {\n                // istanbul ignore next\n                case \"\\n\":\n                // istanbul ignore next\n                case \"\\r\":\n                // istanbul ignore next\n                case \"\\u2028\":\n                // istanbul ignore next\n                case \"\\u2029\":\n                // istanbul ignore next\n                case \"\\\\\":\n                // istanbul ignore next\n                case \"]\":\n                    throw Error(\"TBD\")\n                default:\n                    var nextChar = this.popChar()\n                    return { type: \"Character\", value: cc(nextChar) }\n            }\n        }\n\n        RegExpParser.prototype.characterClass = function() {\n            var set = []\n            var complement = false\n            this.consumeChar(\"[\")\n            if (this.peekChar(0) === \"^\") {\n                this.consumeChar(\"^\")\n                complement = true\n            }\n\n            while (this.isClassAtom()) {\n                var from = this.classAtom()\n                var isFromSingleChar = from.type === \"Character\"\n                if (isFromSingleChar && this.isRangeDash()) {\n                    this.consumeChar(\"-\")\n                    var to = this.classAtom()\n                    var isToSingleChar = to.type === \"Character\"\n\n                    // a range can only be used when both sides are single characters\n                    if (isToSingleChar) {\n                        if (to.value < from.value) {\n                            throw Error(\"Range out of order in character class\")\n                        }\n                        set.push({ from: from.value, to: to.value })\n                    } else {\n                        // literal dash\n                        insertToSet(from.value, set)\n                        set.push(cc(\"-\"))\n                        insertToSet(to.value, set)\n                    }\n                } else {\n                    insertToSet(from.value, set)\n                }\n            }\n\n            this.consumeChar(\"]\")\n\n            return { type: \"Set\", complement: complement, value: set }\n        }\n\n        RegExpParser.prototype.classAtom = function() {\n            switch (this.peekChar()) {\n                // istanbul ignore next\n                case \"]\":\n                // istanbul ignore next\n                case \"\\n\":\n                // istanbul ignore next\n                case \"\\r\":\n                // istanbul ignore next\n                case \"\\u2028\":\n                // istanbul ignore next\n                case \"\\u2029\":\n                    throw Error(\"TBD\")\n                case \"\\\\\":\n                    return this.classEscape()\n                default:\n                    return this.classPatternCharacterAtom()\n            }\n        }\n\n        RegExpParser.prototype.classEscape = function() {\n            this.consumeChar(\"\\\\\")\n            switch (this.peekChar()) {\n                // Matches a backspace.\n                // (Not to be confused with \\b word boundary outside characterClass)\n                case \"b\":\n                    this.consumeChar(\"b\")\n                    return { type: \"Character\", value: cc(\"\\u0008\") }\n                case \"d\":\n                case \"D\":\n                case \"s\":\n                case \"S\":\n                case \"w\":\n                case \"W\":\n                    return this.characterClassEscape()\n                case \"f\":\n                case \"n\":\n                case \"r\":\n                case \"t\":\n                case \"v\":\n                    return this.controlEscapeAtom()\n                case \"c\":\n                    return this.controlLetterEscapeAtom()\n                case \"0\":\n                    return this.nulCharacterAtom()\n                case \"x\":\n                    return this.hexEscapeSequenceAtom()\n                case \"u\":\n                    return this.regExpUnicodeEscapeSequenceAtom()\n                default:\n                    return this.identityEscapeAtom()\n            }\n        }\n\n        RegExpParser.prototype.group = function() {\n            var capturing = true\n            this.consumeChar(\"(\")\n            switch (this.peekChar(0)) {\n                case \"?\":\n                    this.consumeChar(\"?\")\n                    this.consumeChar(\":\")\n                    capturing = false\n                    break\n                default:\n                    this.groupIdx++\n                    break\n            }\n            var value = this.disjunction()\n            this.consumeChar(\")\")\n\n            var groupAst = {\n                type: \"Group\",\n                capturing: capturing,\n                value: value\n            }\n\n            if (capturing) {\n                groupAst.idx = this.groupIdx\n            }\n\n            return groupAst\n        }\n\n        RegExpParser.prototype.positiveInteger = function() {\n            var number = this.popChar()\n\n            // istanbul ignore next - can't ever get here due to previous lookahead checks\n            // still implementing this error checking in case this ever changes.\n            if (decimalPatternNoZero.test(number) === false) {\n                throw Error(\"Expecting a positive integer\")\n            }\n\n            while (decimalPattern.test(this.peekChar(0))) {\n                number += this.popChar()\n            }\n\n            return parseInt(number, 10)\n        }\n\n        RegExpParser.prototype.integerIncludingZero = function() {\n            var number = this.popChar()\n            if (decimalPattern.test(number) === false) {\n                throw Error(\"Expecting an integer\")\n            }\n\n            while (decimalPattern.test(this.peekChar(0))) {\n                number += this.popChar()\n            }\n\n            return parseInt(number, 10)\n        }\n\n        RegExpParser.prototype.patternCharacter = function() {\n            var nextChar = this.popChar()\n            switch (nextChar) {\n                // istanbul ignore next\n                case \"\\n\":\n                // istanbul ignore next\n                case \"\\r\":\n                // istanbul ignore next\n                case \"\\u2028\":\n                // istanbul ignore next\n                case \"\\u2029\":\n                // istanbul ignore next\n                case \"^\":\n                // istanbul ignore next\n                case \"$\":\n                // istanbul ignore next\n                case \"\\\\\":\n                // istanbul ignore next\n                case \".\":\n                // istanbul ignore next\n                case \"*\":\n                // istanbul ignore next\n                case \"+\":\n                // istanbul ignore next\n                case \"?\":\n                // istanbul ignore next\n                case \"(\":\n                // istanbul ignore next\n                case \")\":\n                // istanbul ignore next\n                case \"[\":\n                // istanbul ignore next\n                case \"|\":\n                    // istanbul ignore next\n                    throw Error(\"TBD\")\n                default:\n                    return { type: \"Character\", value: cc(nextChar) }\n            }\n        }\n        RegExpParser.prototype.isRegExpFlag = function() {\n            switch (this.peekChar(0)) {\n                case \"g\":\n                case \"i\":\n                case \"m\":\n                case \"u\":\n                case \"y\":\n                    return true\n                default:\n                    return false\n            }\n        }\n\n        RegExpParser.prototype.isRangeDash = function() {\n            return this.peekChar() === \"-\" && this.isClassAtom(1)\n        }\n\n        RegExpParser.prototype.isDigit = function() {\n            return decimalPattern.test(this.peekChar(0))\n        }\n\n        RegExpParser.prototype.isClassAtom = function(howMuch) {\n            if (howMuch === undefined) {\n                howMuch = 0\n            }\n\n            switch (this.peekChar(howMuch)) {\n                case \"]\":\n                case \"\\n\":\n                case \"\\r\":\n                case \"\\u2028\":\n                case \"\\u2029\":\n                    return false\n                default:\n                    return true\n            }\n        }\n\n        RegExpParser.prototype.isTerm = function() {\n            return this.isAtom() || this.isAssertion()\n        }\n\n        RegExpParser.prototype.isAtom = function() {\n            if (this.isPatternCharacter()) {\n                return true\n            }\n\n            switch (this.peekChar(0)) {\n                case \".\":\n                case \"\\\\\": // atomEscape\n                case \"[\": // characterClass\n                // TODO: isAtom must be called before isAssertion - disambiguate\n                case \"(\": // group\n                    return true\n                default:\n                    return false\n            }\n        }\n\n        RegExpParser.prototype.isAssertion = function() {\n            switch (this.peekChar(0)) {\n                case \"^\":\n                case \"$\":\n                    return true\n                // '\\b' or '\\B'\n                case \"\\\\\":\n                    switch (this.peekChar(1)) {\n                        case \"b\":\n                        case \"B\":\n                            return true\n                        default:\n                            return false\n                    }\n                // '(?=' or '(?!'\n                case \"(\":\n                    return (\n                        this.peekChar(1) === \"?\" &&\n                        (this.peekChar(2) === \"=\" || this.peekChar(2) === \"!\")\n                    )\n                default:\n                    return false\n            }\n        }\n\n        RegExpParser.prototype.isQuantifier = function() {\n            var prevState = this.saveState()\n            try {\n                return this.quantifier(true) !== undefined\n            } catch (e) {\n                return false\n            } finally {\n                this.restoreState(prevState)\n            }\n        }\n\n        RegExpParser.prototype.isPatternCharacter = function() {\n            switch (this.peekChar()) {\n                case \"^\":\n                case \"$\":\n                case \"\\\\\":\n                case \".\":\n                case \"*\":\n                case \"+\":\n                case \"?\":\n                case \"(\":\n                case \")\":\n                case \"[\":\n                case \"|\":\n                case \"/\":\n                case \"\\n\":\n                case \"\\r\":\n                case \"\\u2028\":\n                case \"\\u2029\":\n                    return false\n                default:\n                    return true\n            }\n        }\n\n        RegExpParser.prototype.parseHexDigits = function(howMany) {\n            var hexString = \"\"\n            for (var i = 0; i < howMany; i++) {\n                var hexChar = this.popChar()\n                if (hexDigitPattern.test(hexChar) === false) {\n                    throw Error(\"Expecting a HexDecimal digits\")\n                }\n                hexString += hexChar\n            }\n            var charCode = parseInt(hexString, 16)\n            return { type: \"Character\", value: charCode }\n        }\n\n        RegExpParser.prototype.peekChar = function(howMuch) {\n            if (howMuch === undefined) {\n                howMuch = 0\n            }\n            return this.input[this.idx + howMuch]\n        }\n\n        RegExpParser.prototype.popChar = function() {\n            var nextChar = this.peekChar(0)\n            this.consumeChar()\n            return nextChar\n        }\n\n        RegExpParser.prototype.consumeChar = function(char) {\n            if (char !== undefined && this.input[this.idx] !== char) {\n                throw Error(\n                    \"Expected: '\" +\n                        char +\n                        \"' but found: '\" +\n                        this.input[this.idx] +\n                        \"' at offset: \" +\n                        this.idx\n                )\n            }\n\n            if (this.idx >= this.input.length) {\n                throw Error(\"Unexpected end of input\")\n            }\n            this.idx++\n        }\n\n        RegExpParser.prototype.loc = function(begin) {\n            return { begin: begin, end: this.idx }\n        }\n\n        // consts and utilities\n        var hexDigitPattern = /[0-9a-fA-F]/\n        var decimalPattern = /[0-9]/\n        var decimalPatternNoZero = /[1-9]/\n\n        function cc(char) {\n            return char.charCodeAt(0)\n        }\n\n        function insertToSet(item, set) {\n            if (item.length !== undefined) {\n                item.forEach(function(subItem) {\n                    set.push(subItem)\n                })\n            } else {\n                set.push(item)\n            }\n        }\n\n        function addFlag(flagObj, flagKey) {\n            if (flagObj[flagKey] === true) {\n                throw \"duplicate flag \" + flagKey\n            }\n\n            flagObj[flagKey] = true\n        }\n\n        function ASSERT_EXISTS(obj) {\n            // istanbul ignore next\n            if (obj === undefined) {\n                throw Error(\"Internal Error - Should never get here!\")\n            }\n        }\n\n        // istanbul ignore next\n        function ASSERT_NEVER_REACH_HERE() {\n            throw Error(\"Internal Error - Should never get here!\")\n        }\n\n        var i\n        var digitsCharCodes = []\n        for (i = cc(\"0\"); i <= cc(\"9\"); i++) {\n            digitsCharCodes.push(i)\n        }\n\n        var wordCharCodes = [cc(\"_\")].concat(digitsCharCodes)\n        for (i = cc(\"a\"); i <= cc(\"z\"); i++) {\n            wordCharCodes.push(i)\n        }\n\n        for (i = cc(\"A\"); i <= cc(\"Z\"); i++) {\n            wordCharCodes.push(i)\n        }\n\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#character-classes\n        var whitespaceCodes = [\n            cc(\" \"),\n            cc(\"\\f\"),\n            cc(\"\\n\"),\n            cc(\"\\r\"),\n            cc(\"\\t\"),\n            cc(\"\\v\"),\n            cc(\"\\t\"),\n            cc(\"\\u00a0\"),\n            cc(\"\\u1680\"),\n            cc(\"\\u2000\"),\n            cc(\"\\u2001\"),\n            cc(\"\\u2002\"),\n            cc(\"\\u2003\"),\n            cc(\"\\u2004\"),\n            cc(\"\\u2005\"),\n            cc(\"\\u2006\"),\n            cc(\"\\u2007\"),\n            cc(\"\\u2008\"),\n            cc(\"\\u2009\"),\n            cc(\"\\u200a\"),\n            cc(\"\\u2028\"),\n            cc(\"\\u2029\"),\n            cc(\"\\u202f\"),\n            cc(\"\\u205f\"),\n            cc(\"\\u3000\"),\n            cc(\"\\ufeff\")\n        ]\n\n        function BaseRegExpVisitor() {}\n\n        BaseRegExpVisitor.prototype.visitChildren = function(node) {\n            for (var key in node) {\n                var child = node[key]\n                /* istanbul ignore else */\n                if (node.hasOwnProperty(key)) {\n                    if (child.type !== undefined) {\n                        this.visit(child)\n                    } else if (Array.isArray(child)) {\n                        child.forEach(function(subChild) {\n                            this.visit(subChild)\n                        }, this)\n                    }\n                }\n            }\n        }\n\n        BaseRegExpVisitor.prototype.visit = function(node) {\n            switch (node.type) {\n                case \"Pattern\":\n                    this.visitPattern(node)\n                    break\n                case \"Flags\":\n                    this.visitFlags(node)\n                    break\n                case \"Disjunction\":\n                    this.visitDisjunction(node)\n                    break\n                case \"Alternative\":\n                    this.visitAlternative(node)\n                    break\n                case \"StartAnchor\":\n                    this.visitStartAnchor(node)\n                    break\n                case \"EndAnchor\":\n                    this.visitEndAnchor(node)\n                    break\n                case \"WordBoundary\":\n                    this.visitWordBoundary(node)\n                    break\n                case \"NonWordBoundary\":\n                    this.visitNonWordBoundary(node)\n                    break\n                case \"Lookahead\":\n                    this.visitLookahead(node)\n                    break\n                case \"NegativeLookahead\":\n                    this.visitNegativeLookahead(node)\n                    break\n                case \"Character\":\n                    this.visitCharacter(node)\n                    break\n                case \"Set\":\n                    this.visitSet(node)\n                    break\n                case \"Group\":\n                    this.visitGroup(node)\n                    break\n                case \"GroupBackReference\":\n                    this.visitGroupBackReference(node)\n                    break\n                case \"Quantifier\":\n                    this.visitQuantifier(node)\n                    break\n            }\n\n            this.visitChildren(node)\n        }\n\n        BaseRegExpVisitor.prototype.visitPattern = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitFlags = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitDisjunction = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitAlternative = function(node) {}\n\n        // Assertion\n        BaseRegExpVisitor.prototype.visitStartAnchor = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitEndAnchor = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitWordBoundary = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitNonWordBoundary = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitLookahead = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitNegativeLookahead = function(node) {}\n\n        // atoms\n        BaseRegExpVisitor.prototype.visitCharacter = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitSet = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitGroup = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitGroupBackReference = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitQuantifier = function(node) {}\n\n        return {\n            RegExpParser: RegExpParser,\n            BaseRegExpVisitor: BaseRegExpVisitor,\n            VERSION: \"0.5.0\"\n        }\n    }\n)\n","var castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nmodule.exports = createCaseFirst;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = clone;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isTokenType = exports.hasExtendingTokensTypesMapProperty = exports.hasExtendingTokensTypesProperty = exports.hasCategoriesProperty = exports.hasShortKeyProperty = exports.singleAssignCategoriesToksMap = exports.assignCategoriesMapProp = exports.assignCategoriesTokensProp = exports.assignTokenDefaultProps = exports.expandCategories = exports.augmentTokenTypes = exports.tokenIdxToClass = exports.tokenShortNameIdx = exports.tokenStructuredMatcherNoCategories = exports.tokenStructuredMatcher = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar compact_1 = __importDefault(require(\"lodash/compact\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar difference_1 = __importDefault(require(\"lodash/difference\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nfunction tokenStructuredMatcher(tokInstance, tokConstructor) {\n    var instanceType = tokInstance.tokenTypeIdx;\n    if (instanceType === tokConstructor.tokenTypeIdx) {\n        return true;\n    }\n    else {\n        return (tokConstructor.isParent === true &&\n            tokConstructor.categoryMatchesMap[instanceType] === true);\n    }\n}\nexports.tokenStructuredMatcher = tokenStructuredMatcher;\n// Optimized tokenMatcher in case our grammar does not use token categories\n// Being so tiny it is much more likely to be in-lined and this avoid the function call overhead\nfunction tokenStructuredMatcherNoCategories(token, tokType) {\n    return token.tokenTypeIdx === tokType.tokenTypeIdx;\n}\nexports.tokenStructuredMatcherNoCategories = tokenStructuredMatcherNoCategories;\nexports.tokenShortNameIdx = 1;\nexports.tokenIdxToClass = {};\nfunction augmentTokenTypes(tokenTypes) {\n    // collect the parent Token Types as well.\n    var tokenTypesAndParents = expandCategories(tokenTypes);\n    // add required tokenType and categoryMatches properties\n    assignTokenDefaultProps(tokenTypesAndParents);\n    // fill up the categoryMatches\n    assignCategoriesMapProp(tokenTypesAndParents);\n    assignCategoriesTokensProp(tokenTypesAndParents);\n    (0, forEach_1.default)(tokenTypesAndParents, function (tokType) {\n        tokType.isParent = tokType.categoryMatches.length > 0;\n    });\n}\nexports.augmentTokenTypes = augmentTokenTypes;\nfunction expandCategories(tokenTypes) {\n    var result = (0, clone_1.default)(tokenTypes);\n    var categories = tokenTypes;\n    var searching = true;\n    while (searching) {\n        categories = (0, compact_1.default)((0, flatten_1.default)((0, map_1.default)(categories, function (currTokType) { return currTokType.CATEGORIES; })));\n        var newCategories = (0, difference_1.default)(categories, result);\n        result = result.concat(newCategories);\n        if ((0, isEmpty_1.default)(newCategories)) {\n            searching = false;\n        }\n        else {\n            categories = newCategories;\n        }\n    }\n    return result;\n}\nexports.expandCategories = expandCategories;\nfunction assignTokenDefaultProps(tokenTypes) {\n    (0, forEach_1.default)(tokenTypes, function (currTokType) {\n        if (!hasShortKeyProperty(currTokType)) {\n            exports.tokenIdxToClass[exports.tokenShortNameIdx] = currTokType;\n            currTokType.tokenTypeIdx = exports.tokenShortNameIdx++;\n        }\n        // CATEGORIES? : TokenType | TokenType[]\n        if (hasCategoriesProperty(currTokType) &&\n            !(0, isArray_1.default)(currTokType.CATEGORIES)\n        // &&\n        // !isUndefined(currTokType.CATEGORIES.PATTERN)\n        ) {\n            currTokType.CATEGORIES = [currTokType.CATEGORIES];\n        }\n        if (!hasCategoriesProperty(currTokType)) {\n            currTokType.CATEGORIES = [];\n        }\n        if (!hasExtendingTokensTypesProperty(currTokType)) {\n            currTokType.categoryMatches = [];\n        }\n        if (!hasExtendingTokensTypesMapProperty(currTokType)) {\n            currTokType.categoryMatchesMap = {};\n        }\n    });\n}\nexports.assignTokenDefaultProps = assignTokenDefaultProps;\nfunction assignCategoriesTokensProp(tokenTypes) {\n    (0, forEach_1.default)(tokenTypes, function (currTokType) {\n        // avoid duplications\n        currTokType.categoryMatches = [];\n        (0, forEach_1.default)(currTokType.categoryMatchesMap, function (val, key) {\n            currTokType.categoryMatches.push(exports.tokenIdxToClass[key].tokenTypeIdx);\n        });\n    });\n}\nexports.assignCategoriesTokensProp = assignCategoriesTokensProp;\nfunction assignCategoriesMapProp(tokenTypes) {\n    (0, forEach_1.default)(tokenTypes, function (currTokType) {\n        singleAssignCategoriesToksMap([], currTokType);\n    });\n}\nexports.assignCategoriesMapProp = assignCategoriesMapProp;\nfunction singleAssignCategoriesToksMap(path, nextNode) {\n    (0, forEach_1.default)(path, function (pathNode) {\n        nextNode.categoryMatchesMap[pathNode.tokenTypeIdx] = true;\n    });\n    (0, forEach_1.default)(nextNode.CATEGORIES, function (nextCategory) {\n        var newPath = path.concat(nextNode);\n        // avoids infinite loops due to cyclic categories.\n        if (!(0, includes_1.default)(newPath, nextCategory)) {\n            singleAssignCategoriesToksMap(newPath, nextCategory);\n        }\n    });\n}\nexports.singleAssignCategoriesToksMap = singleAssignCategoriesToksMap;\nfunction hasShortKeyProperty(tokType) {\n    return (0, has_1.default)(tokType, \"tokenTypeIdx\");\n}\nexports.hasShortKeyProperty = hasShortKeyProperty;\nfunction hasCategoriesProperty(tokType) {\n    return (0, has_1.default)(tokType, \"CATEGORIES\");\n}\nexports.hasCategoriesProperty = hasCategoriesProperty;\nfunction hasExtendingTokensTypesProperty(tokType) {\n    return (0, has_1.default)(tokType, \"categoryMatches\");\n}\nexports.hasExtendingTokensTypesProperty = hasExtendingTokensTypesProperty;\nfunction hasExtendingTokensTypesMapProperty(tokType) {\n    return (0, has_1.default)(tokType, \"categoryMatchesMap\");\n}\nexports.hasExtendingTokensTypesMapProperty = hasExtendingTokensTypesMapProperty;\nfunction isTokenType(tokType) {\n    return (0, has_1.default)(tokType, \"tokenTypeIdx\");\n}\nexports.isTokenType = isTokenType;\n//# sourceMappingURL=tokens.js.map","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RestWalker = void 0;\nvar drop_1 = __importDefault(require(\"lodash/drop\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar gast_1 = require(\"@chevrotain/gast\");\n/**\n *  A Grammar Walker that computes the \"remaining\" grammar \"after\" a productions in the grammar.\n */\nvar RestWalker = /** @class */ (function () {\n    function RestWalker() {\n    }\n    RestWalker.prototype.walk = function (prod, prevRest) {\n        var _this = this;\n        if (prevRest === void 0) { prevRest = []; }\n        (0, forEach_1.default)(prod.definition, function (subProd, index) {\n            var currRest = (0, drop_1.default)(prod.definition, index + 1);\n            /* istanbul ignore else */\n            if (subProd instanceof gast_1.NonTerminal) {\n                _this.walkProdRef(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Terminal) {\n                _this.walkTerminal(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Alternative) {\n                _this.walkFlat(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Option) {\n                _this.walkOption(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.RepetitionMandatory) {\n                _this.walkAtLeastOne(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.RepetitionMandatoryWithSeparator) {\n                _this.walkAtLeastOneSep(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.RepetitionWithSeparator) {\n                _this.walkManySep(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Repetition) {\n                _this.walkMany(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Alternation) {\n                _this.walkOr(subProd, currRest, prevRest);\n            }\n            else {\n                throw Error(\"non exhaustive match\");\n            }\n        });\n    };\n    RestWalker.prototype.walkTerminal = function (terminal, currRest, prevRest) { };\n    RestWalker.prototype.walkProdRef = function (refProd, currRest, prevRest) { };\n    RestWalker.prototype.walkFlat = function (flatProd, currRest, prevRest) {\n        // ABCDEF => after the D the rest is EF\n        var fullOrRest = currRest.concat(prevRest);\n        this.walk(flatProd, fullOrRest);\n    };\n    RestWalker.prototype.walkOption = function (optionProd, currRest, prevRest) {\n        // ABC(DE)?F => after the (DE)? the rest is F\n        var fullOrRest = currRest.concat(prevRest);\n        this.walk(optionProd, fullOrRest);\n    };\n    RestWalker.prototype.walkAtLeastOne = function (atLeastOneProd, currRest, prevRest) {\n        // ABC(DE)+F => after the (DE)+ the rest is (DE)?F\n        var fullAtLeastOneRest = [\n            new gast_1.Option({ definition: atLeastOneProd.definition })\n        ].concat(currRest, prevRest);\n        this.walk(atLeastOneProd, fullAtLeastOneRest);\n    };\n    RestWalker.prototype.walkAtLeastOneSep = function (atLeastOneSepProd, currRest, prevRest) {\n        // ABC DE(,DE)* F => after the (,DE)+ the rest is (,DE)?F\n        var fullAtLeastOneSepRest = restForRepetitionWithSeparator(atLeastOneSepProd, currRest, prevRest);\n        this.walk(atLeastOneSepProd, fullAtLeastOneSepRest);\n    };\n    RestWalker.prototype.walkMany = function (manyProd, currRest, prevRest) {\n        // ABC(DE)*F => after the (DE)* the rest is (DE)?F\n        var fullManyRest = [\n            new gast_1.Option({ definition: manyProd.definition })\n        ].concat(currRest, prevRest);\n        this.walk(manyProd, fullManyRest);\n    };\n    RestWalker.prototype.walkManySep = function (manySepProd, currRest, prevRest) {\n        // ABC (DE(,DE)*)? F => after the (,DE)* the rest is (,DE)?F\n        var fullManySepRest = restForRepetitionWithSeparator(manySepProd, currRest, prevRest);\n        this.walk(manySepProd, fullManySepRest);\n    };\n    RestWalker.prototype.walkOr = function (orProd, currRest, prevRest) {\n        var _this = this;\n        // ABC(D|E|F)G => when finding the (D|E|F) the rest is G\n        var fullOrRest = currRest.concat(prevRest);\n        // walk all different alternatives\n        (0, forEach_1.default)(orProd.definition, function (alt) {\n            // wrapping each alternative in a single definition wrapper\n            // to avoid errors in computing the rest of that alternative in the invocation to computeInProdFollows\n            // (otherwise for OR([alt1,alt2]) alt2 will be considered in 'rest' of alt1\n            var prodWrapper = new gast_1.Alternative({ definition: [alt] });\n            _this.walk(prodWrapper, fullOrRest);\n        });\n    };\n    return RestWalker;\n}());\nexports.RestWalker = RestWalker;\nfunction restForRepetitionWithSeparator(repSepProd, currRest, prevRest) {\n    var repSepRest = [\n        new gast_1.Option({\n            definition: [\n                new gast_1.Terminal({ terminalType: repSepProd.separator })\n            ].concat(repSepProd.definition)\n        })\n    ];\n    var fullRepSepRest = repSepRest.concat(currRest, prevRest);\n    return fullRepSepRest;\n}\n//# sourceMappingURL=rest.js.map","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateCstDts = void 0;\nvar model_1 = require(\"./model\");\nvar generate_1 = require(\"./generate\");\nvar defaultOptions = {\n    includeVisitorInterface: true,\n    visitorInterfaceName: \"ICstNodeVisitor\"\n};\nfunction generateCstDts(productions, options) {\n    var effectiveOptions = __assign(__assign({}, defaultOptions), options);\n    var model = (0, model_1.buildModel)(productions);\n    return (0, generate_1.genDts)(model, effectiveOptions);\n}\nexports.generateCstDts = generateCstDts;\n//# sourceMappingURL=api.js.map","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSequenceProd = exports.isBranchingProd = exports.isOptionalProd = exports.getProductionDslName = exports.GAstVisitor = exports.serializeProduction = exports.serializeGrammar = exports.Alternative = exports.Alternation = exports.RepetitionWithSeparator = exports.RepetitionMandatoryWithSeparator = exports.RepetitionMandatory = exports.Repetition = exports.Option = exports.NonTerminal = exports.Terminal = exports.Rule = void 0;\nvar model_1 = require(\"./model\");\nObject.defineProperty(exports, \"Rule\", { enumerable: true, get: function () { return model_1.Rule; } });\nObject.defineProperty(exports, \"Terminal\", { enumerable: true, get: function () { return model_1.Terminal; } });\nObject.defineProperty(exports, \"NonTerminal\", { enumerable: true, get: function () { return model_1.NonTerminal; } });\nObject.defineProperty(exports, \"Option\", { enumerable: true, get: function () { return model_1.Option; } });\nObject.defineProperty(exports, \"Repetition\", { enumerable: true, get: function () { return model_1.Repetition; } });\nObject.defineProperty(exports, \"RepetitionMandatory\", { enumerable: true, get: function () { return model_1.RepetitionMandatory; } });\nObject.defineProperty(exports, \"RepetitionMandatoryWithSeparator\", { enumerable: true, get: function () { return model_1.RepetitionMandatoryWithSeparator; } });\nObject.defineProperty(exports, \"RepetitionWithSeparator\", { enumerable: true, get: function () { return model_1.RepetitionWithSeparator; } });\nObject.defineProperty(exports, \"Alternation\", { enumerable: true, get: function () { return model_1.Alternation; } });\nObject.defineProperty(exports, \"Alternative\", { enumerable: true, get: function () { return model_1.Alternative; } });\nObject.defineProperty(exports, \"serializeGrammar\", { enumerable: true, get: function () { return model_1.serializeGrammar; } });\nObject.defineProperty(exports, \"serializeProduction\", { enumerable: true, get: function () { return model_1.serializeProduction; } });\nvar visitor_1 = require(\"./visitor\");\nObject.defineProperty(exports, \"GAstVisitor\", { enumerable: true, get: function () { return visitor_1.GAstVisitor; } });\nvar helpers_1 = require(\"./helpers\");\nObject.defineProperty(exports, \"getProductionDslName\", { enumerable: true, get: function () { return helpers_1.getProductionDslName; } });\nObject.defineProperty(exports, \"isOptionalProd\", { enumerable: true, get: function () { return helpers_1.isOptionalProd; } });\nObject.defineProperty(exports, \"isBranchingProd\", { enumerable: true, get: function () { return helpers_1.isBranchingProd; } });\nObject.defineProperty(exports, \"isSequenceProd\", { enumerable: true, get: function () { return helpers_1.isSequenceProd; } });\n//# sourceMappingURL=api.js.map","import mod from \"../lib/src/api.js\";\n\nexport default mod;\nexport const Alternation = mod.Alternation;\nexport const Alternative = mod.Alternative;\nexport const CstParser = mod.CstParser;\nexport const EMPTY_ALT = mod.EMPTY_ALT;\nexport const EOF = mod.EOF;\nexport const EarlyExitException = mod.EarlyExitException;\nexport const EmbeddedActionsParser = mod.EmbeddedActionsParser;\nexport const GAstVisitor = mod.GAstVisitor;\nexport const LLkLookaheadStrategy = mod.LLkLookaheadStrategy;\nexport const Lexer = mod.Lexer;\nexport const LexerDefinitionErrorType = mod.LexerDefinitionErrorType;\nexport const MismatchedTokenException = mod.MismatchedTokenException;\nexport const NoViableAltException = mod.NoViableAltException;\nexport const NonTerminal = mod.NonTerminal;\nexport const NotAllInputParsedException = mod.NotAllInputParsedException;\nexport const Option = mod.Option;\nexport const Parser = mod.Parser;\nexport const ParserDefinitionErrorType = mod.ParserDefinitionErrorType;\nexport const Repetition = mod.Repetition;\nexport const RepetitionMandatory = mod.RepetitionMandatory;\nexport const RepetitionMandatoryWithSeparator = mod.RepetitionMandatoryWithSeparator;\nexport const RepetitionWithSeparator = mod.RepetitionWithSeparator;\nexport const Rule = mod.Rule;\nexport const Terminal = mod.Terminal;\nexport const VERSION = mod.VERSION;\nexport const clearCache = mod.clearCache;\nexport const createSyntaxDiagramsCode = mod.createSyntaxDiagramsCode;\nexport const createToken = mod.createToken;\nexport const createTokenInstance = mod.createTokenInstance;\nexport const defaultLexerErrorProvider = mod.defaultLexerErrorProvider;\nexport const defaultParserErrorProvider = mod.defaultParserErrorProvider;\nexport const generateCstDts = mod.generateCstDts;\nexport const getLookaheadPaths = mod.getLookaheadPaths;\nexport const isRecognitionException = mod.isRecognitionException;\nexport const serializeGrammar = mod.serializeGrammar;\nexport const serializeProduction = mod.serializeProduction;\nexport const tokenLabel = mod.tokenLabel;\nexport const tokenMatcher = mod.tokenMatcher;\nexport const tokenName = mod.tokenName;\n","import { createToken, Lexer } from \"chevrotain\";\n\nconst Plus = createToken({ name: \"Plus\", pattern: /\\+/ });\nconst Minus = createToken({ name: \"Minus\", pattern: /-/ });\nconst Mult = createToken({ name: \"Mult\", pattern: /\\*/ });\nconst Div = createToken({ name: \"Div\", pattern: /\\// });\nconst LParen = createToken({ name: \"LParen\", pattern: /\\(/ });\nconst RParen = createToken({ name: \"RParen\", pattern: /\\)/ });\nconst Comma = createToken({ name: \"Comma\", pattern: /,/ });\n\nconst RowRange = createToken({\n    name: \"RowRange\",\n    pattern: /\\$?\\d+:\\$?\\d+/\n});\n\nconst NumberLiteral = createToken({\n    name: \"NumberLiteral\",\n    pattern: /\\d+(\\.\\d+)?/,\n    longer_alt: RowRange  // Add RowRange as longer alternative\n});\n\n// Update Variable token to exclude sheet name\nconst Variable = createToken({\n    name: \"Variable\",\n    pattern: /[A-Za-z_][A-Za-z0-9_]*/\n});\n\nconst SheetName = createToken({\n    name: \"SheetName\",\n    pattern: /[A-Za-z_][A-Za-z0-9_-]*!/\n});\n\nconst CellRange = createToken({\n    name: \"CellRange\",\n    pattern: /\\$?[A-Za-z]+\\$?\\d+:\\$?[A-Za-z]+\\$?\\d+/\n});\n\nconst CellRef = createToken({\n    name: \"CellRef\",\n    pattern: /\\$?[A-Za-z]+\\$?\\d+/\n});\n\nconst StringLiteral = createToken({\n    name: \"StringLiteral\",\n    pattern: /([\"'])(?:(?!\\1).)*\\1/  // Matches either quote style and captures everything between matching quotes\n});\n\nconst Concat = createToken({\n    name: \"Concat\",\n    pattern: /&/\n});\n\nconst FunctionName = createToken({\n    name: \"FunctionName\",\n    pattern: /[A-Za-z]+(?=\\()/i,  // Added 'i' flag for case insensitive\n    longer_alt: CellRef  // In case the pattern matches a cell reference\n});\n\nconst WhiteSpace = createToken({ name: \"WhiteSpace\", pattern: /\\s+/, group: Lexer.SKIPPED });\n\n// Add new comparison operator tokens\nconst GreaterThan = createToken({ name: \"GreaterThan\", pattern: />/ });\nconst LessThan = createToken({ name: \"LessThan\", pattern: /</ });\nconst GreaterThanEqual = createToken({ name: \"GreaterThanEqual\", pattern: />=/ });\nconst LessThanEqual = createToken({ name: \"LessThanEqual\", pattern: /<=/ });\nconst Equal = createToken({ name: \"Equal\", pattern: /=/ });\nconst NotEqual = createToken({ name: \"NotEqual\", pattern: /<>/ });\n\n// Add special IF token before FunctionName\nconst IfFunction = createToken({\n    name: \"IfFunction\",\n    pattern: /IF(?=\\()/i,  // Added 'i' flag for case insensitive\n    longer_alt: Variable\n});\n\n// Add reserved keywords tokens\nconst TrueKeyword = createToken({\n    name: \"TrueKeyword\",\n    pattern: /TRUE/i,  // Added 'i' flag for case insensitive\n    longer_alt: Variable\n});\n\nconst FalseKeyword = createToken({\n    name: \"FalseKeyword\",\n    pattern: /FALSE/i,  // Added 'i' flag for case insensitive\n    longer_alt: Variable\n});\n\nconst NullKeyword = createToken({\n    name: \"NullKeyword\",\n    pattern: /NULL/i,  // Added 'i' flag for case insensitive\n    longer_alt: Variable\n});\n\n// Add array operators\nconst ArrayRowSep = createToken({ name: \"ArrayRowSep\", pattern: /;/ });\nconst RangeIntersect = createToken({ name: \"RangeIntersect\", pattern: / +/ }); // one or more spaces\n\n// Add error constants\nconst ErrorConstant = createToken({\n    name: \"ErrorConstant\",\n    pattern: /#(DIV\\/0!|N\\/A|NAME\\?|NULL!|NUM!|REF!|VALUE!|#SPILL!)/\n});\n\n// Add special function tokens\nconst IfErrorFunction = createToken({\n    name: \"IfErrorFunction\",\n    pattern: /IFERROR(?=\\()/i,\n    longer_alt: Variable\n});\n\nconst IfsFunction = createToken({\n    name: \"IfsFunction\",\n    pattern: /IFS(?=\\()/i,\n    longer_alt: Variable\n});\n\nconst SwitchFunction = createToken({\n    name: \"SwitchFunction\",\n    pattern: /SWITCH(?=\\()/i,\n    longer_alt: Variable\n});\n\n// Add curly brace tokens for array formulas\nconst LCurly = createToken({ name: \"LCurly\", pattern: /{/ });\nconst RCurly = createToken({ name: \"RCurly\", pattern: /}/ });\n\n// Add new tokens for full column/row ranges\nconst ColumnRange = createToken({\n    name: \"ColumnRange\",\n    pattern: /\\$?[A-Za-z]+:\\$?[A-Za-z]+/\n});\n\nconst Power = createToken({ name: \"Power\", pattern: /\\*\\*|\\^/ });\n\nexport const allTokens = [\n    WhiteSpace,\n    // Comparison operators (order important)\n    GreaterThanEqual, LessThanEqual, NotEqual,\n    GreaterThan, LessThan, Equal,\n\n    // Basic operators\n    Plus, Minus, Concat,\n    Power,  // Add Power token here\n    Mult, Div,\n\n    // Brackets and delimiters\n    LParen, RParen, LCurly, RCurly,\n    Comma, ArrayRowSep, // Single instance of ArrayRowSep\n\n    // References and ranges (order important for matching)\n    SheetName,      // Include SheetName token here\n    ColumnRange,    // Try column range first\n    RowRange,       // Then row range\n    CellRange,      // Then cell range\n    CellRef,        // Then cell reference\n    RangeIntersect, // Then range intersection\n\n    // Literals and constants (after ranges to avoid number conflicts)\n    NumberLiteral, // Moved after RowRange\n    StringLiteral,\n    ErrorConstant,\n\n    // Functions and keywords\n    IfFunction, IfErrorFunction, IfsFunction, SwitchFunction,\n    TrueKeyword, FalseKeyword, NullKeyword,\n    FunctionName,\n\n    // References and variables\n    Variable\n];\n\nexport const CalxTokens = {\n    Plus, Minus, Mult, Div, LParen, RParen, Comma,\n    RowRange, NumberLiteral, Variable, SheetName,\n    CellRange, CellRef, StringLiteral, Concat,\n    FunctionName, WhiteSpace, GreaterThan, LessThan,\n    GreaterThanEqual, LessThanEqual, Equal, NotEqual,\n    IfFunction, TrueKeyword, FalseKeyword, NullKeyword,\n    ArrayRowSep, RangeIntersect, ErrorConstant,\n    IfErrorFunction, IfsFunction, SwitchFunction,\n    LCurly, RCurly, ColumnRange, Power\n};","import { Lexer, CstParser, Rule, TokenType, ParserMethod, CstNode } from 'chevrotain';\nimport { allTokens, CalxTokens as token } from './Tokens';\n\nconst CalxLexer = new Lexer(allTokens);\n\nclass CalxParser extends CstParser {\n    // Declare parser rules with type annotations\n    public expression!: ParserMethod<unknown[], CstNode>;\n    public arrayFormula!: ParserMethod<unknown[], CstNode>;\n    public comparisonExpression!: ParserMethod<unknown[], CstNode>;\n    public additionExpression!: ParserMethod<unknown[], CstNode>;\n    public concatenationExpression!: ParserMethod<unknown[], CstNode>;\n    public multiplicationExpression!: ParserMethod<unknown[], CstNode>;\n    public exponentiationExpression!: ParserMethod<unknown[], CstNode>;\n    public unaryExpression!: ParserMethod<unknown[], CstNode>;\n    public atomicExpression!: ParserMethod<unknown[], CstNode>;\n    public ifFunctionCall!: ParserMethod<unknown[], CstNode>;\n    public functionCall!: ParserMethod<unknown[], CstNode>;\n    public ifErrorFunctionCall!: ParserMethod<unknown[], CstNode>;\n    public ifsFunctionCall!: ParserMethod<unknown[], CstNode>;\n    public switchFunctionCall!: ParserMethod<unknown[], CstNode>;\n    public arrayExpression!: ParserMethod<unknown[], CstNode>;\n    public arrayRow!: ParserMethod<unknown[], CstNode>;\n\n    cache: { comparisonExpression: boolean; atomicExpression: boolean; };\n\n    constructor() {\n        super(allTokens);\n\n        this.cache = {\n            comparisonExpression: false,\n            atomicExpression: false\n        };\n\n        const $ = this;\n\n\n        // Update the expression rule to start with comparison\n        $.RULE(\"expression\", () => {\n            $.OR([\n                { ALT: () => $.SUBRULE($.arrayFormula) },\n                { ALT: () => $.SUBRULE($.comparisonExpression) }\n            ]);\n        });\n\n        // Add array formula rule\n        $.RULE(\"arrayFormula\", () => {\n            $.CONSUME(token.LCurly);\n            $.OPTION(() => {\n                $.CONSUME(token.Equal);\n            });\n            $.SUBRULE($.expression);\n            $.MANY(() => {\n                $.OR([\n                    { ALT: () => $.CONSUME(token.Comma) },\n                    { ALT: () => $.CONSUME(token.ArrayRowSep) }\n                ]);\n                $.SUBRULE2($.expression);\n            });\n            $.CONSUME(token.RCurly);\n        });\n\n\n        // Add new comparison expression rule\n        $.RULE(\"comparisonExpression\", () => {\n            $.SUBRULE($.additionExpression, { LABEL: \"lhs\" });\n            $.OPTION(() => {\n                $.cache.comparisonExpression || ($.OR([\n                    { ALT: () => $.CONSUME(token.GreaterThan) },\n                    { ALT: () => $.CONSUME(token.LessThan) },\n                    { ALT: () => $.CONSUME(token.GreaterThanEqual) },\n                    { ALT: () => $.CONSUME(token.LessThanEqual) },\n                    { ALT: () => $.CONSUME(token.Equal) },\n                    { ALT: () => $.CONSUME(token.NotEqual) }\n                ]));\n                $.SUBRULE2($.additionExpression, { LABEL: \"rhs\" });\n            });\n        });\n\n        $.RULE(\"additionExpression\", () => {\n            $.SUBRULE($.concatenationExpression, { LABEL: \"lhs\" });\n            $.MANY(() => {\n                $.OR([\n                    { ALT: () => $.CONSUME(token.Plus) },\n                    { ALT: () => $.CONSUME(token.Minus) }\n                ]);\n                $.SUBRULE2($.concatenationExpression, { LABEL: \"rhs\" });\n            });\n        });\n\n        $.RULE(\"concatenationExpression\", () => {\n            $.SUBRULE($.multiplicationExpression, { LABEL: \"lhs\" });\n            $.MANY(() => {\n                $.CONSUME(token.Concat);\n                $.SUBRULE2($.multiplicationExpression, { LABEL: \"rhs\" });\n            });\n        });\n\n        $.RULE(\"multiplicationExpression\", () => {\n            $.SUBRULE($.exponentiationExpression, { LABEL: \"lhs\" });\n            $.MANY(() => {\n                $.OR([\n                    { ALT: () => $.CONSUME(token.Mult) },\n                    { ALT: () => $.CONSUME(token.Div) }\n                ]);\n                $.SUBRULE2($.exponentiationExpression, { LABEL: \"rhs\" });\n            });\n        });\n\n        // Add new rule for exponentiationExpression\n        $.RULE(\"exponentiationExpression\", () => {\n            $.SUBRULE($.unaryExpression, { LABEL: \"lhs\" });\n            $.MANY(() => {\n                $.CONSUME(token.Power);\n                $.SUBRULE2($.unaryExpression, { LABEL: \"rhs\" });\n            });\n        });\n\n        // Add a new rule for unary expressions\n        $.RULE(\"unaryExpression\", () => {\n            $.OR([\n                { ALT: () => {\n                    $.CONSUME(token.Minus); // Match unary minus\n                    $.SUBRULE($.unaryExpression); // Recursive unary expression\n                }},\n                { ALT: () => $.SUBRULE($.atomicExpression) }\n            ]);\n        });\n\n        $.RULE(\"atomicExpression\", () => {\n            $.cache.atomicExpression || ($.OR([\n                { ALT: () => $.CONSUME(token.NumberLiteral) },\n                { ALT: () => $.CONSUME(token.StringLiteral) },\n                { ALT: () => $.CONSUME(token.TrueKeyword) },    // Add keywords\n                { ALT: () => $.CONSUME(token.FalseKeyword) },\n                { ALT: () => $.CONSUME(token.NullKeyword) },\n                { ALT: () => {\n                    $.OPTION(() => {\n                        $.CONSUME(token.SheetName);\n                    });\n                    $.OR1([\n                        { ALT: () => $.CONSUME(token.Variable) },\n                        { ALT: () => $.CONSUME(token.CellRef) },\n                        { ALT: () => $.CONSUME(token.CellRange) },\n                        { ALT: () => $.CONSUME(token.RowRange) },\n                        { ALT: () => $.CONSUME(token.ColumnRange) }\n                    ]);\n                }},\n                { ALT: () => $.SUBRULE($.ifFunctionCall) },  // Try IF function first\n                { ALT: () => $.SUBRULE($.functionCall) },\n                { ALT: () => $.CONSUME(token.ErrorConstant) },\n                { ALT: () => $.SUBRULE($.ifErrorFunctionCall) },\n                { ALT: () => $.SUBRULE($.ifsFunctionCall) },\n                { ALT: () => $.SUBRULE($.switchFunctionCall) },\n                { ALT: () => {\n                    $.CONSUME(token.LParen);\n                    $.SUBRULE($.expression);\n                    $.CONSUME(token.RParen);\n                }},\n            ]));\n        });\n\n        // Update IF function rule to make false branch optional\n        $.RULE(\"ifFunctionCall\", () => {\n            $.CONSUME(token.IfFunction);\n            $.CONSUME(token.LParen);\n            // Condition expression\n            $.SUBRULE($.expression, { LABEL: \"condition\" });\n            $.CONSUME1(token.Comma);\n            // True branch\n            $.SUBRULE2($.expression, { LABEL: \"whenTrue\" });\n            // Optional false branch\n            $.OPTION(() => {\n                $.CONSUME2(token.Comma);\n                $.SUBRULE3($.expression, { LABEL: \"whenFalse\" });\n            });\n            $.CONSUME(token.RParen);\n        });\n\n        // Add special rules for IFERROR\n        $.RULE(\"ifErrorFunctionCall\", () => {\n            $.CONSUME(token.IfErrorFunction);\n            $.CONSUME(token.LParen);\n            $.SUBRULE($.expression, { LABEL: \"value\" });\n            $.CONSUME1(token.Comma);\n            $.SUBRULE2($.expression, { LABEL: \"valueIfError\" });\n            $.CONSUME(token.RParen);\n        });\n\n        // Add rule for IFS function (multiple IF conditions)\n        $.RULE(\"ifsFunctionCall\", () => {\n            $.CONSUME(token.IfsFunction);\n            $.CONSUME(token.LParen);\n            $.AT_LEAST_ONE(() => {\n                $.SUBRULE($.expression, { LABEL: \"condition\" });\n                $.CONSUME1(token.Comma);\n                $.SUBRULE2($.expression, { LABEL: \"value\" });\n                $.OPTION(() => $.CONSUME2(token.Comma));\n            });\n            $.CONSUME(token.RParen);\n        });\n\n        // Add rule for SWITCH\n        $.RULE(\"switchFunctionCall\", () => {\n            $.CONSUME(token.SwitchFunction);\n            $.CONSUME(token.LParen);\n            $.SUBRULE($.expression, { LABEL: \"expression\" });\n            $.CONSUME1(token.Comma);\n            $.AT_LEAST_ONE(() => {\n                $.SUBRULE2($.expression, { LABEL: \"value\" });\n                $.CONSUME2(token.Comma);\n                $.SUBRULE3($.expression, { LABEL: \"result\" });\n                $.OPTION(() => $.CONSUME3(token.Comma));\n            });\n            // Optional default value\n            $.OPTION2(() => {\n                $.SUBRULE4($.expression, { LABEL: \"default\" });\n            });\n            $.CONSUME(token.RParen);\n        });\n\n        $.RULE(\"functionCall\", () => {\n            $.CONSUME(token.FunctionName);\n            $.CONSUME(token.LParen);\n            $.OPTION(() => {\n                $.SUBRULE($.expression);\n                $.MANY(() => {\n                    $.CONSUME(token.Comma);\n                    $.SUBRULE2($.expression);\n                });\n            });\n            $.CONSUME(token.RParen);\n        });\n\n        // Add array expression support\n        $.RULE(\"arrayExpression\", () => {\n            $.CONSUME(token.LParen);\n            $.SUBRULE($.arrayRow);\n            $.MANY(() => {\n                $.CONSUME(token.ArrayRowSep);\n                $.SUBRULE2($.arrayRow);\n            });\n            $.CONSUME(token.RParen);\n        });\n\n        $.RULE(\"arrayRow\", () => {\n            $.SUBRULE($.expression);\n            $.MANY(() => {\n                $.CONSUME(token.Comma);\n                $.SUBRULE2($.expression);\n            });\n        });\n\n        this.performSelfAnalysis();\n    }\n\n    parse(inputText: string) {\n        console.log(\"Parsing input:\", inputText);\n\n        const lexResult = CalxLexer.tokenize(inputText);\n\n        console.log(\"Lexer result:\", lexResult.tokens);\n\n        if (lexResult.errors.length > 0) {\n            console.error(lexResult.errors);\n\n            throw new Error(\"Lexer errors detected\");\n        }\n\n        this.input = lexResult.tokens;\n        const cst = this.expression();\n\n        if (this.errors.length > 0) {\n            console.error(this.errors);\n\n            throw new Error(\"Parsing errors detected\");\n        }\n\n        return cst;\n    }\n}\n\nexport { CalxLexer, CalxParser };","export enum ErrorType {\n    DIV_BY_ZERO     = '#DIV/0!',\n    INVALID_NAME    = '#NAME?',\n    INVALID_REF     = '#REF!',\n    INVALID_VAL     = '#VALUE!',\n    INVALID_NUM     = '#NUM!',\n    NA              = '#N/A!',\n    NULL            = '#NULL!',\n    SPILL           = '#SPILL!',\n    ERROR           = '#ERROR!'\n}\n","/**\n * Represents the result of an array formula evaluation\n * Array formulas can spill into multiple cells\n */\nexport class ArrayResult {\n    /**\n     * Creates an ArrayResult\n     * @param values 2D array of values [row][col]\n     * @param rows Number of rows\n     * @param cols Number of columns\n     */\n    constructor(\n        public values: any[][],\n        public rows: number,\n        public cols: number\n    ) {}\n\n    /**\n     * Get value at specific position\n     */\n    getValue(row: number, col: number): any {\n        if (row >= 0 && row < this.rows && col >= 0 && col < this.cols) {\n            return this.values[row][col];\n        }\n        return undefined;\n    }\n\n    /**\n     * Check if this is a single value (1x1 array)\n     */\n    isSingleValue(): boolean {\n        return this.rows === 1 && this.cols === 1;\n    }\n\n    /**\n     * Get the single value if this is a 1x1 array\n     */\n    getSingleValue(): any {\n        if (this.isSingleValue()) {\n            return this.values[0][0];\n        }\n        return undefined;\n    }\n\n    /**\n     * Convert to flat array\n     */\n    toFlatArray(): any[] {\n        const result: any[] = [];\n        for (let row = 0; row < this.rows; row++) {\n            for (let col = 0; col < this.cols; col++) {\n                result.push(this.values[row][col]);\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Create ArrayResult from 1D array (vertical)\n     */\n    static fromVerticalArray(values: any[]): ArrayResult {\n        return new ArrayResult(\n            values.map(v => [v]),\n            values.length,\n            1\n        );\n    }\n\n    /**\n     * Create ArrayResult from 1D array (horizontal)\n     */\n    static fromHorizontalArray(values: any[]): ArrayResult {\n        return new ArrayResult(\n            [values],\n            1,\n            values.length\n        );\n    }\n\n    /**\n     * Create ArrayResult from 2D array\n     */\n    static from2DArray(values: any[][]): ArrayResult {\n        const rows = values.length;\n        const cols = rows > 0 ? Math.max(...values.map(row => row.length)) : 0;\n\n        // Normalize to ensure all rows have same length\n        const normalized = values.map(row => {\n            const newRow = [...row];\n            while (newRow.length < cols) {\n                newRow.push(undefined);\n            }\n            return newRow;\n        });\n\n        return new ArrayResult(normalized, rows, cols);\n    }\n\n    /**\n     * Create ArrayResult from single value\n     */\n    static fromSingleValue(value: any): ArrayResult {\n        return new ArrayResult([[value]], 1, 1);\n    }\n}\n","import { CstNode } from 'chevrotain';\nimport { CalxLexer, CalxParser } from './Parser';\nimport { SharedContext } from '../SharedContext';\nimport { ErrorType } from '../../Cell/ErrorType';\nimport { ArrayResult } from '../../Cell/ArrayResult';\n\nconst parserInstance = new CalxParser();\n\nexport class CalxInterpreter extends parserInstance.getBaseCstVisitorConstructorWithDefaults() {\n    private context?: SharedContext;\n    public yy?: SharedContext;\n\n    constructor() {\n        super();\n        this.validateVisitor();\n    }\n\n    setContext(context: SharedContext) {\n        this.context = context;\n        this.yy = context;\n    }\n\n    getContext(): SharedContext | undefined {\n        return this.context;\n    }\n\n    expression(ctx: any) {\n        if (ctx.arrayFormula && ctx.arrayFormula.length > 0) {\n            return this.visit(ctx.arrayFormula[0]);\n        }\n        return this.visit(ctx.comparisonExpression[0]);\n    }\n\n    arrayFormula(ctx: any) {\n        // Array formula with curly braces: {1,2,3} or {1;2;3} or {1,2;3,4}\n\n        // Check if we have the ArrayRowSep (semicolon) which indicates multiple rows\n        const hasRowSeparator = ctx.ArrayRowSep && ctx.ArrayRowSep.length > 0;\n\n        if (hasRowSeparator) {\n            // Multi-row array: {1,2;3,4} creates [[1,2],[3,4]]\n            // Need to figure out which separator comes after each expression\n\n            // Build a map of separator positions\n            const separators: Array<{offset: number, type: 'comma' | 'semicolon'}> = [];\n\n            if (ctx.Comma) {\n                ctx.Comma.forEach((token: any) => {\n                    separators.push({ offset: token.startOffset, type: 'comma' });\n                });\n            }\n\n            if (ctx.ArrayRowSep) {\n                ctx.ArrayRowSep.forEach((token: any) => {\n                    separators.push({ offset: token.startOffset, type: 'semicolon' });\n                });\n            }\n\n            // Sort separators by offset\n            separators.sort((a, b) => a.offset - b.offset);\n\n            // Build rows by grouping expressions based on separator types\n            const rows: any[][] = [];\n            let currentRow: any[] = [];\n\n            for (let i = 0; i < ctx.expression.length; i++) {\n                currentRow.push(this.visit(ctx.expression[i]));\n\n                // Check what separator comes after this expression (if any)\n                if (i < separators.length) {\n                    if (separators[i].type === 'semicolon') {\n                        // Semicolon means end of current row\n                        rows.push(currentRow);\n                        currentRow = [];\n                    }\n                    // Comma means continue in the same row, so do nothing\n                }\n            }\n\n            // Add last row if not empty\n            if (currentRow.length > 0) {\n                rows.push(currentRow);\n            }\n\n            return ArrayResult.from2DArray(rows);\n        }\n\n        // Single row array: {1,2,3} or single value {5}\n        const expressions = ctx.expression.map((exp: any) => this.visit(exp));\n\n        if (expressions.length === 1) {\n            const result = expressions[0];\n\n            // If already an ArrayResult, return it\n            if (result instanceof ArrayResult) {\n                return result;\n            }\n\n            // If array, convert to ArrayResult\n            if (Array.isArray(result)) {\n                return ArrayResult.fromHorizontalArray(result);\n            }\n\n            // Single value\n            return ArrayResult.fromSingleValue(result);\n        }\n\n        // Multiple expressions separated by commas = horizontal array\n        return ArrayResult.fromHorizontalArray(expressions);\n    }\n\n    comparisonExpression(ctx: any) {\n        const left = this.visit(ctx.lhs[0]);\n\n        // If there's no comparison operator, just return the left value\n        if (!ctx.rhs || ctx.rhs.length === 0) {\n            return left;\n        }\n\n        const right = this.visit(ctx.rhs[0]);\n\n        // Handle different comparison operators\n        if (ctx.GreaterThan) {\n            return left > right;\n        } else if (ctx.LessThan) {\n            return left < right;\n        } else if (ctx.GreaterThanEqual) {\n            return left >= right;\n        } else if (ctx.LessThanEqual) {\n            return left <= right;\n        } else if (ctx.Equal) {\n            return left === right;\n        } else if (ctx.NotEqual) {\n            return left !== right;\n        }\n\n        return left; // Fallback\n    }\n\n    additionExpression(ctx: any) {\n        let result = this.visit(ctx.lhs[0]);\n\n        // Process all additions/subtractions from left to right\n        if (ctx.rhs && ctx.rhs.length > 0) {\n            // Build array of operators in order they appear\n            const operators: Array<{type: 'plus' | 'minus', offset: number}> = [];\n\n            if (ctx.Plus) {\n                ctx.Plus.forEach((token: any) => {\n                    operators.push({ type: 'plus', offset: token.startOffset });\n                });\n            }\n\n            if (ctx.Minus) {\n                ctx.Minus.forEach((token: any) => {\n                    operators.push({ type: 'minus', offset: token.startOffset });\n                });\n            }\n\n            // Sort operators by offset to get correct order\n            operators.sort((a, b) => a.offset - b.offset);\n\n            for (let i = 0; i < ctx.rhs.length; i++) {\n                const rightValue = this.visit(ctx.rhs[i]);\n                const operator = operators[i];\n\n                if (operator.type === 'plus') {\n                    result = this.arrayOperation(result, rightValue, (a, b) => a + b);\n                } else if (operator.type === 'minus') {\n                    result = this.arrayOperation(result, rightValue, (a, b) => a - b);\n                }\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Perform array operation - applies operation element-wise if either operand is an array\n     */\n    private arrayOperation(left: any, right: any, operation: (a: any, b: any) => any): any {\n        // Check for error values first\n        if (this.isError(left)) return left;\n        if (this.isError(right)) return right;\n\n        // If neither is an array, just perform the operation\n        if (!Array.isArray(left) && !Array.isArray(right)) {\n            return operation(left, right);\n        }\n\n        // Convert to arrays if needed\n        const leftArray = Array.isArray(left) ? left : [left];\n        const rightArray = Array.isArray(right) ? right : [right];\n\n        // Determine the result size\n        const resultLength = Math.max(leftArray.length, rightArray.length);\n        const result = [];\n\n        for (let i = 0; i < resultLength; i++) {\n            const leftVal = leftArray[Math.min(i, leftArray.length - 1)];\n            const rightVal = rightArray[Math.min(i, rightArray.length - 1)];\n            result.push(operation(leftVal, rightVal));\n        }\n\n        // Return as ArrayResult if it's an array\n        return ArrayResult.fromVerticalArray(result);\n    }\n\n    /**\n     * Check if a value is an Excel error\n     */\n    private isError(value: any): boolean {\n        if (typeof value !== 'string') return false;\n        return /^#[A-Z\\/!]+\\??$/.test(value); // Matches #NAME?, #REF!, #DIV/0!, etc.\n    }\n\n    concatenationExpression(ctx: any) {\n        let result = this.visit(ctx.lhs[0]);\n\n        // Process all concatenations from left to right\n        if (ctx.rhs && ctx.rhs.length > 0) {\n            for (let i = 0; i < ctx.rhs.length; i++) {\n                const rightValue = this.visit(ctx.rhs[i]);\n                // Convert both sides to strings for concatenation\n                result = String(result) + String(rightValue);\n            }\n        }\n\n        return result;\n    }\n\n    multiplicationExpression(ctx: any) {\n        let result = this.visit(ctx.lhs[0]);\n\n        // Process all multiplications/divisions from left to right\n        if (ctx.rhs && ctx.rhs.length > 0) {\n            // Build array of operators in order they appear\n            const operators: Array<{type: 'mult' | 'div', offset: number}> = [];\n\n            if (ctx.Mult) {\n                ctx.Mult.forEach((token: any) => {\n                    operators.push({ type: 'mult', offset: token.startOffset });\n                });\n            }\n\n            if (ctx.Div) {\n                ctx.Div.forEach((token: any) => {\n                    operators.push({ type: 'div', offset: token.startOffset });\n                });\n            }\n\n            // Sort operators by offset to get correct order\n            operators.sort((a, b) => a.offset - b.offset);\n\n            for (let i = 0; i < ctx.rhs.length; i++) {\n                const rightValue = this.visit(ctx.rhs[i]);\n                const operator = operators[i];\n\n                if (operator.type === 'mult') {\n                    result = this.arrayOperation(result, rightValue, (a, b) => a * b);\n                } else if (operator.type === 'div') {\n                    result = this.arrayOperation(result, rightValue, (a, b) => {\n                        // Check for division by zero\n                        if (b === 0) {\n                            return \"#DIV/0!\";\n                        }\n                        return a / b;\n                    });\n                }\n            }\n        }\n\n        return result;\n    }\n\n    exponentiationExpression(ctx: any) {\n        let result = this.visit(ctx.lhs[0]);\n\n        // Process all exponentiations from left to right\n        if (ctx.rhs && ctx.rhs.length > 0) {\n            for (let i = 0; i < ctx.rhs.length; i++) {\n                const rightValue = this.visit(ctx.rhs[i]);\n                result = this.arrayOperation(result, rightValue, (a, b) => Math.pow(a, b));\n            }\n        }\n\n        return result;\n    }\n\n    unaryExpression(ctx: any) {\n        if (ctx.Minus) {\n            // Handle unary minus (negation)\n            const value = this.visit(ctx.unaryExpression[0]);\n            return -value;\n        } else {\n            // Otherwise, process the atomic expression\n            return this.visit(ctx.atomicExpression[0]);\n        }\n    }\n\n    atomicExpression(ctx: any) {\n        // Handle literals\n        if (ctx.NumberLiteral) {\n            return Number(ctx.NumberLiteral[0].image);\n        } else if (ctx.StringLiteral) {\n            // Remove quotes from string literals\n            const str = ctx.StringLiteral[0].image;\n            return str.substring(1, str.length - 1);\n        } else if (ctx.TrueKeyword) {\n            return true;\n        } else if (ctx.FalseKeyword) {\n            return false;\n        } else if (ctx.NullKeyword) {\n            return null;\n        } else if (ctx.ErrorConstant) {\n            // Return error constants as is\n            return ctx.ErrorConstant[0].image;\n        }\n\n        // Handle cell references and variables\n        if (ctx.Variable || ctx.CellRef || ctx.CellRange || ctx.RowRange || ctx.ColumnRange) {\n            let ref;\n            let sheetName = '';\n\n            // Extract sheet name if present\n            if (ctx.SheetName && ctx.SheetName.length > 0) {\n                sheetName = ctx.SheetName[0].image;\n                // Remove the trailing '!'\n                sheetName = sheetName.substring(0, sheetName.length - 1);\n            }\n\n            if (ctx.Variable && ctx.Variable.length > 0) {\n                ref = ctx.Variable[0].image;\n                return this.resolveVariable(ref, sheetName);\n            } else if (ctx.CellRef && ctx.CellRef.length > 0) {\n                ref = ctx.CellRef[0].image;\n                return this.resolveCellReference(ref, sheetName);\n            } else if (ctx.CellRange && ctx.CellRange.length > 0) {\n                ref = ctx.CellRange[0].image;\n                return this.resolveCellRange(ref, sheetName);\n            } else if (ctx.RowRange && ctx.RowRange.length > 0) {\n                ref = ctx.RowRange[0].image;\n                return this.resolveRowRange(ref, sheetName);\n            } else if (ctx.ColumnRange && ctx.ColumnRange.length > 0) {\n                ref = ctx.ColumnRange[0].image;\n                return this.resolveColumnRange(ref, sheetName);\n            }\n        }\n\n        // Handle function calls\n        if (ctx.ifFunctionCall) {\n            return this.visit(ctx.ifFunctionCall[0]);\n        } else if (ctx.functionCall) {\n            return this.visit(ctx.functionCall[0]);\n        } else if (ctx.ifErrorFunctionCall) {\n            return this.visit(ctx.ifErrorFunctionCall[0]);\n        } else if (ctx.ifsFunctionCall) {\n            return this.visit(ctx.ifsFunctionCall[0]);\n        } else if (ctx.switchFunctionCall) {\n            return this.visit(ctx.switchFunctionCall[0]);\n        }\n\n        // Handle parenthesized expressions\n        if (ctx.LParen) {\n            return this.visit(ctx.expression[0]);\n        }\n\n        // Fallback\n        console.warn(\"Unhandled atomic expression:\", ctx);\n        return null;\n    }\n\n    ifFunctionCall(ctx: any) {\n        const condition = this.visit(ctx.condition[0]);\n\n        if (this.isTruthy(condition)) {\n            return this.visit(ctx.whenTrue[0]);\n        } else if (ctx.whenFalse && ctx.whenFalse.length > 0) {\n            return this.visit(ctx.whenFalse[0]);\n        }\n\n        // If condition is false and no false branch, Excel returns FALSE\n        return false;\n    }\n\n    functionCall(ctx: any) {\n        const funcName = ctx.FunctionName[0].image.toUpperCase();\n        const args = [];\n\n        // Collect all arguments\n        if (ctx.expression) {\n            for (const expr of ctx.expression) {\n                args.push(this.visit(expr));\n            }\n        }\n\n        // Prioritize callFunction to ensure ArrayResult wrapping for dynamic arrays\n        if (this.context && typeof this.context.callFunction === 'function') {\n            try {\n                let result = this.context.callFunction(funcName, args);\n\n                // Handle Date objects - convert to Excel serial number\n                if (result instanceof Date) {\n                    const excelEpoch = new Date(1899, 11, 30).getTime();\n                    const msPerDay = 24 * 60 * 60 * 1000;\n                    result = Math.floor((result.getTime() - excelEpoch) / msPerDay);\n                }\n\n                return result;\n            } catch (e) {\n                console.warn(`Function ${funcName} not found in callFunction, trying getFunction`);\n            }\n        }\n\n        // Fallback to getFunction for custom/user-defined functions\n        if (this.context && typeof this.context.getFunction === 'function') {\n            const func = this.context.getFunction(funcName);\n            if (typeof func === 'function') {\n                try {\n                    let result = func(...args);\n\n                    // Handle Date objects - convert to Excel serial number\n                    if (result instanceof Date) {\n                        const excelEpoch = new Date(1899, 11, 30).getTime();\n                        const msPerDay = 24 * 60 * 60 * 1000;\n                        result = Math.floor((result.getTime() - excelEpoch) / msPerDay);\n                    }\n\n                    return result;\n                } catch (e) {\n                    console.error(`Error executing function ${funcName}:`, e);\n                    return \"#ERROR!\";\n                }\n            }\n        }\n\n        // Handle common Excel functions directly as fallback\n        return this.executeBuiltInFunction(funcName, args);\n    }\n\n    ifErrorFunctionCall(ctx: any) {\n        try {\n            const value = this.visit(ctx.value[0]);\n            // Check if the result is an error value\n            if (this.isErrorValue(value)) {\n                return this.visit(ctx.valueIfError[0]);\n            }\n            return value;\n        } catch (e) {\n            // If any exception occurs during evaluation, return the valueIfError\n            return this.visit(ctx.valueIfError[0]);\n        }\n    }\n\n    ifsFunctionCall(ctx: any) {\n        const conditions = ctx.condition;\n        const values = ctx.value;\n\n        for (let i = 0; i < conditions.length; i++) {\n            const condition = this.visit(conditions[i]);\n            if (this.isTruthy(condition)) {\n                return this.visit(values[i]);\n            }\n        }\n\n        // If no conditions are true, return #N/A\n        return \"#N/A\";\n    }\n\n    switchFunctionCall(ctx: any) {\n        const expression = this.visit(ctx.expression[0]);\n        const values = ctx.value;\n        const results = ctx.result;\n\n        for (let i = 0; i < values.length; i++) {\n            const value = this.visit(values[i]);\n            if (expression === value) {\n                return this.visit(results[i]);\n            }\n        }\n\n        // If no match and default is provided, return default\n        if (ctx.default && ctx.default.length > 0) {\n            return this.visit(ctx.default[0]);\n        }\n\n        // If no match and no default, return #N/A\n        return \"#N/A\";\n    }\n\n    arrayExpression(ctx: any) {\n        // Process array expressions as 2D arrays\n        const rows = [];\n        rows.push(this.visit(ctx.arrayRow[0]));\n\n        if (ctx.arrayRow.length > 1) {\n            for (let i = 1; i < ctx.arrayRow.length; i++) {\n                rows.push(this.visit(ctx.arrayRow[i]));\n            }\n        }\n\n        return rows;\n    }\n\n    arrayRow(ctx: any) {\n        // Process array rows as arrays\n        const row = [];\n        row.push(this.visit(ctx.expression[0]));\n\n        if (ctx.expression.length > 1) {\n            for (let i = 1; i < ctx.expression.length; i++) {\n                row.push(this.visit(ctx.expression[i]));\n            }\n        }\n\n        return row;\n    }\n\n    // Helper methods\n    private resolveVariable(name: string, sheetName: string = ''): any {\n        // First check if it's a named range (priority over sheet variables)\n        if (this.context && typeof this.context.getNamedRange === 'function') {\n            // Check if the workbook has this named range\n            if (this.context.workbook?.nameManager.has(name)) {\n                return this.context.getNamedRange(name);\n            }\n        }\n\n        // Fall back to sheet variables\n        if (this.context && typeof this.context.getVariable === 'function') {\n            return this.context.getVariable(name, sheetName);\n        }\n        return \"#NAME?\"; // Excel's error for undefined names\n    }\n\n    private resolveCellReference(ref: string, sheetName: string = ''): any {\n        if (this.context && typeof this.context.getCellValue === 'function') {\n            return this.context.getCellValue(ref, sheetName);\n        }\n        return \"#REF!\"; // Excel's error for invalid cell references\n    }\n\n    private resolveCellRange(range: string, sheetName: string = ''): any {\n        if (this.context && typeof this.context.getCellRange === 'function') {\n            return this.context.getCellRange(range, sheetName);\n        }\n        return \"#REF!\";\n    }\n\n    private resolveRowRange(range: string, sheetName: string = ''): any {\n        if (this.context && typeof this.context.getRowRange === 'function') {\n            return this.context.getRowRange(range, sheetName);\n        }\n        return \"#REF!\";\n    }\n\n    private resolveColumnRange(range: string, sheetName: string = ''): any {\n        if (this.context && typeof this.context.getColumnRange === 'function') {\n            return this.context.getColumnRange(range, sheetName);\n        }\n        return \"#REF!\";\n    }\n\n    private isTruthy(value: any): boolean {\n        if (typeof value === 'boolean') {\n            return value;\n        } else if (typeof value === 'number') {\n            return value !== 0;\n        } else if (typeof value === 'string') {\n            // Excel treats non-empty strings as true except \"FALSE\"\n            return value !== '' && value.toUpperCase() !== 'FALSE';\n        } else {\n            return value != null;\n        }\n    }\n\n    private isErrorValue(value: any): boolean {\n        if (typeof value !== 'string') return false;\n\n        const errorValues = [\n            \"#DIV/0!\", \"#N/A\", \"#NAME?\", \"#NULL!\",\n            \"#NUM!\", \"#REF!\", \"#VALUE!\", \"#ERROR!\"\n        ];\n\n        return errorValues.includes(value);\n    }\n\n    private executeBuiltInFunction(name: string, args: any[]): any {\n        // Implement common Excel functions\n        let count = 0;\n\n        switch (name) {\n            case \"SUM\":\n                return args.reduce((sum, val) => {\n                    if (Array.isArray(val)) {\n                        // Handle arrays/ranges\n                        return sum + this.flattenAndSum(val);\n                    } else if (!isNaN(val)) {\n                        return sum + Number(val);\n                    }\n                    return sum;\n                }, 0);\n\n            case \"AVERAGE\":\n                let sum = 0;\n\n                args.forEach(val => {\n                    if (Array.isArray(val)) {\n                        // Handle arrays/ranges\n                        const flattenedArray = this.flattenArray(val);\n                        sum += flattenedArray.reduce((s, v) => s + (isNaN(v) ? 0 : Number(v)), 0);\n                        count += flattenedArray.filter(v => !isNaN(v)).length;\n                    } else if (!isNaN(val)) {\n                        sum += Number(val);\n                        count++;\n                    }\n                });\n\n                return count > 0 ? sum / count : \"#DIV/0!\";\n\n            case \"MAX\":\n                let max = -Infinity;\n\n                args.forEach(val => {\n                    if (Array.isArray(val)) {\n                        // Handle arrays/ranges\n                        const flattenedArray = this.flattenArray(val);\n                        const arrayMax = Math.max(...flattenedArray.filter(v => !isNaN(v)).map(Number));\n                        if (arrayMax > max) max = arrayMax;\n                    } else if (!isNaN(val) && Number(val) > max) {\n                        max = Number(val);\n                    }\n                });\n\n                return max === -Infinity ? 0 : max;\n\n            case \"MIN\":\n                let min = Infinity;\n\n                args.forEach(val => {\n                    if (Array.isArray(val)) {\n                        // Handle arrays/ranges\n                        const flattenedArray = this.flattenArray(val);\n                        const arrayMin = Math.min(...flattenedArray.filter(v => !isNaN(v)).map(Number));\n                        if (arrayMin < min) min = arrayMin;\n                    } else if (!isNaN(val) && Number(val) < min) {\n                        min = Number(val);\n                    }\n                });\n\n                return min === Infinity ? 0 : min;\n\n            case \"COUNT\":\n\n                args.forEach(val => {\n                    if (Array.isArray(val)) {\n                        // Handle arrays/ranges\n                        const flattenedArray = this.flattenArray(val);\n                        count += flattenedArray.filter(v => !isNaN(v)).length;\n                    } else if (!isNaN(val)) {\n                        count++;\n                    }\n                });\n\n                return count;\n\n            case \"CONCATENATE\":\n                return args.reduce((result, val) => result + String(val), \"\");\n\n            case \"AND\":\n                return args.every(val => this.isTruthy(val));\n\n            case \"OR\":\n                return args.some(val => this.isTruthy(val));\n\n            default:\n                return \"#NAME?\"; // Unknown function\n        }\n    }\n\n    private flattenAndSum(arr: any[]): number {\n        if (!Array.isArray(arr)) return isNaN(arr) ? 0 : Number(arr);\n\n        return arr.reduce((sum, val) => {\n            if (Array.isArray(val)) {\n                return sum + this.flattenAndSum(val);\n            }\n            return sum + (isNaN(val) ? 0 : Number(val));\n        }, 0);\n    }\n\n    private flattenArray(arr: any[]): any[] {\n        return arr.reduce((flat, val) => {\n            if (Array.isArray(val)) {\n                return flat.concat(this.flattenArray(val));\n            } else {\n                return flat.concat(val);\n            }\n        }, []);\n    }\n\n    parseInput(inputText: string) {\n        // Strip leading '=' if present\n        const cleanInput = inputText.startsWith('=') ? inputText.substring(1) : inputText;\n\n        const lexResult = CalxLexer.tokenize(cleanInput);\n        parserInstance.input = lexResult.tokens;\n\n        const cst = parserInstance.expression();\n\n        if (parserInstance.errors.length > 0) {\n            console.error('Parser errors:', JSON.stringify(parserInstance.errors, null, 2));\n            throw Error('Parsing errors detected');\n        }\n\n        return this.visit(cst);\n    }\n\n    parseCst(cst: CstNode) {\n        return this.visit(cst);\n    }\n\n    parse(inputText: string) {\n        try {\n            const result = this.parseInput(inputText);\n            return result;\n        } catch (error) {\n            console.error(\"Parsing error for input:\", inputText);\n            console.error(\"Error details:\", error);\n            if (error instanceof Error) {\n                console.error(\"Stack trace:\", error.stack);\n            }\n            return ErrorType.ERROR; // Return a generic error type\n        }\n    }\n}\n","import { Cell } from './Cell';\nimport { Sheet } from './Sheet';\nimport { DataType } from './Cell/DataType';\n\n/**\n * Range class - Excel-like range that can contain one or more cells\n * This is the lowest unit of work in Calx, mimicking Excel's behavior\n *\n * Examples:\n * - Single cell: Range('A1') contains one cell\n * - Cell range: Range('A1:B10') contains multiple cells\n */\nexport class Range {\n    private _cells: Cell[] = [];\n    private _address: string;\n    private _startAddress!: string;\n    private _endAddress!: string;\n\n    constructor(\n        private sheet: Sheet,\n        address: string\n    ) {\n        this._address = address;\n        this.parseAddress(address);\n        this.loadCells();\n    }\n\n    /**\n     * Parse address and determine if single cell or range\n     */\n    private parseAddress(address: string) {\n        // Remove $ signs (absolute reference markers) for cell lookup\n        const cleanAddress = (addr: string) => addr.replace(/\\$/g, '');\n\n        if (address.includes(':')) {\n            // Range like \"A1:B10\" or \"$A$1:$B$10\"\n            const [start, end] = address.split(':');\n            this._startAddress = cleanAddress(start.trim());\n            this._endAddress = cleanAddress(end.trim());\n        } else {\n            // Single cell like \"A1\" or \"$A$1\"\n            this._startAddress = cleanAddress(address.trim());\n            this._endAddress = cleanAddress(address.trim());\n        }\n    }\n\n    /**\n     * Load cells from the sheet\n     */\n    private loadCells() {\n        if (this.isSingleCell()) {\n            const cell = this.sheet.getCellDirect(this._startAddress);\n            this._cells = [cell];\n        } else {\n            this._cells = this.expandRange();\n        }\n    }\n\n    /**\n     * Expand range address to array of cells\n     */\n    private expandRange(): Cell[] {\n        const cells: Cell[] = [];\n\n        const startCol = this._startAddress.match(/[A-Z]+/)?.[0] || 'A';\n        const startRow = parseInt(this._startAddress.match(/\\d+/)?.[0] || '1');\n        const endCol = this._endAddress.match(/[A-Z]+/)?.[0] || 'A';\n        const endRow = parseInt(this._endAddress.match(/\\d+/)?.[0] || '1');\n\n        const startColNum = this.colToNum(startCol);\n        const endColNum = this.colToNum(endCol);\n\n        // Normalize the range to handle reverse ranges (e.g., B2:A1 -> A1:B2)\n        const minRow = Math.min(startRow, endRow);\n        const maxRow = Math.max(startRow, endRow);\n        const minCol = Math.min(startColNum, endColNum);\n        const maxCol = Math.max(startColNum, endColNum);\n\n        for (let row = minRow; row <= maxRow; row++) {\n            for (let col = minCol; col <= maxCol; col++) {\n                const address = this.numToCol(col) + row;\n                cells.push(this.sheet.getCellDirect(address));\n            }\n        }\n\n        return cells;\n    }\n\n    /**\n     * Check if this is a single cell range\n     */\n    public isSingleCell(): boolean {\n        return this._startAddress === this._endAddress;\n    }\n\n    /**\n     * Get the address of this range\n     */\n    public get address(): string {\n        return this._address;\n    }\n\n    /**\n     * Get all cells in this range\n     */\n    public get cells(): Cell[] {\n        return this._cells;\n    }\n\n    /**\n     * Get the first cell in the range\n     */\n    public get cell(): Cell {\n        return this._cells[0];\n    }\n\n    /**\n     * Get value(s) from the range\n     * - Single cell: returns single value\n     * - Multiple cells: returns 2D array of values\n     */\n    public get value(): any {\n        if (this.isSingleCell()) {\n            return this._cells[0]?.value ?? null;\n        }\n\n        return this.getValues();\n    }\n\n    /**\n     * Set value(s) to the range\n     * - Single cell: sets the value\n     * - Multiple cells: if value is array, distributes values; otherwise sets all to same value\n     */\n    public set value(val: any) {\n        if (this.isSingleCell()) {\n            this._cells[0].value = val;\n        } else {\n            if (Array.isArray(val)) {\n                this.setValuesFromArray(val);\n            } else {\n                // Set all cells to same value\n                this._cells.forEach(cell => cell.value = val);\n            }\n        }\n    }\n\n    /**\n     * Get formula from the range (only for single cell)\n     */\n    public get formula(): string | null {\n        if (this.isSingleCell()) {\n            return this._cells[0].formula;\n        }\n        return null;\n    }\n\n    /**\n     * Set formula to the range\n     */\n    public set formula(formula: string) {\n        if (this.isSingleCell()) {\n            this._cells[0].formula = formula;\n        } else {\n            // For range, set formula to all cells (adjusting relative references)\n            // For now, set the same formula to all\n            this._cells.forEach(cell => cell.formula = formula);\n        }\n    }\n\n    /**\n     * Get values as 2D array\n     */\n    public getValues(): any[][] {\n        const startCol = this._startAddress.match(/[A-Z]+/)?.[0] || 'A';\n        const startRow = parseInt(this._startAddress.match(/\\d+/)?.[0] || '1');\n        const endCol = this._endAddress.match(/[A-Z]+/)?.[0] || 'A';\n        const endRow = parseInt(this._endAddress.match(/\\d+/)?.[0] || '1');\n\n        const startColNum = this.colToNum(startCol);\n        const endColNum = this.colToNum(endCol);\n\n        const result: any[][] = [];\n        let cellIndex = 0;\n\n        for (let row = startRow; row <= endRow; row++) {\n            const rowData: any[] = [];\n            for (let col = startColNum; col <= endColNum; col++) {\n                rowData.push(this._cells[cellIndex++].value);\n            }\n            result.push(rowData);\n        }\n\n        return result;\n    }\n\n    /**\n     * Set values from 2D array\n     */\n    public setValues(values: any[][]) {\n        let cellIndex = 0;\n        for (let row = 0; row < values.length; row++) {\n            for (let col = 0; col < values[row].length; col++) {\n                if (cellIndex < this._cells.length) {\n                    this._cells[cellIndex++].value = values[row][col];\n                }\n            }\n        }\n    }\n\n    /**\n     * Set values from flat array\n     */\n    private setValuesFromArray(values: any[]) {\n        for (let i = 0; i < Math.min(values.length, this._cells.length); i++) {\n            this._cells[i].value = values[i];\n        }\n    }\n\n    /**\n     * Get flat array of values\n     */\n    public toArray(): any[] {\n        return this._cells.map(cell => cell.value);\n    }\n\n    /**\n     * Calculate all cells in the range\n     */\n    public calculate() {\n        this._cells.forEach(cell => {\n            if (cell.formula) {\n                cell.calculate();\n            }\n        });\n    }\n\n    /**\n     * Get count of cells in range\n     */\n    public get count(): number {\n        return this._cells.length;\n    }\n\n    /**\n     * Get row count\n     */\n    public get rows(): number {\n        const startRow = parseInt(this._startAddress.match(/\\d+/)?.[0] || '1');\n        const endRow = parseInt(this._endAddress.match(/\\d+/)?.[0] || '1');\n        return endRow - startRow + 1;\n    }\n\n    /**\n     * Get column count\n     */\n    public get columns(): number {\n        const startCol = this._startAddress.match(/[A-Z]+/)?.[0] || 'A';\n        const endCol = this._endAddress.match(/[A-Z]+/)?.[0] || 'A';\n        return this.colToNum(endCol) - this.colToNum(startCol) + 1;\n    }\n\n    /**\n     * Iterate over each cell\n     */\n    public each(callback: (cell: Cell, index: number) => void) {\n        this._cells.forEach((cell, index) => callback(cell, index));\n    }\n\n    /**\n     * Map over cells\n     */\n    public map<T>(callback: (cell: Cell, index: number) => T): T[] {\n        return this._cells.map((cell, index) => callback(cell, index));\n    }\n\n    /**\n     * Filter cells\n     */\n    public filter(callback: (cell: Cell, index: number) => boolean): Cell[] {\n        return this._cells.filter((cell, index) => callback(cell, index));\n    }\n\n    /**\n     * Find a cell\n     */\n    public find(callback: (cell: Cell, index: number) => boolean): Cell | undefined {\n        return this._cells.find((cell, index) => callback(cell, index));\n    }\n\n    /**\n     * Get cell at specific position in range (0-based index)\n     */\n    public getCellAt(index: number): Cell | undefined {\n        return this._cells[index];\n    }\n\n    /**\n     * Get cell at row, col position (0-based)\n     */\n    public getCellAtPosition(row: number, col: number): Cell | undefined {\n        const colCount = this.columns;\n        const index = row * colCount + col;\n        return this._cells[index];\n    }\n\n    /**\n     * Convert column letter to number (A=1, Z=26, AA=27)\n     */\n    private colToNum(col: string): number {\n        let num = 0;\n        for (let i = 0; i < col.length; i++) {\n            num = num * 26 + (col.charCodeAt(i) - 64);\n        }\n        return num;\n    }\n\n    /**\n     * Convert number to column letter (1=A, 26=Z, 27=AA)\n     */\n    private numToCol(num: number): string {\n        let col = '';\n        while (num > 0) {\n            const remainder = (num - 1) % 26;\n            col = String.fromCharCode(65 + remainder) + col;\n            num = Math.floor((num - 1) / 26);\n        }\n        return col;\n    }\n\n    /**\n     * Get a sub-range\n     */\n    public getRange(address: string): Range {\n        return new Range(this.sheet, address);\n    }\n\n    /**\n     * Clear all values in range\n     */\n    public clear() {\n        this._cells.forEach(cell => {\n            cell.value = null;\n            cell.formula = '';\n        });\n    }\n\n    /**\n     * Get string representation\n     */\n    public toString(): string {\n        if (this.isSingleCell()) {\n            return `Range(${this._address})`;\n        }\n        return `Range(${this._address}) [${this.rows}x${this.columns}]`;\n    }\n}\n","/**\n * Available sheet events.\n */\nexport enum SheetEvent {\n    CALCULATION_STARTED     = 'calculation.started',\n    CALCULATION_PAUSED      = 'calculation.paused',\n    CALCULATION_RESUMED     = 'calculation.resumed',\n    CALCULATION_FINISHED    = 'calculation.finished',\n\n    CELL_ADDED          = 'cell.added',\n    CELL_REMOVED        = 'cell.removed',\n    CELL_CREATED        = \"CELL_CREATED\",\n\n    ELEMENT_ATTACHED    = 'element.attached',\n    ELEMENT_DETACHED    = 'element.detached',\n}\n\nexport enum SheetState {\n    CALCULATION_STARTED     = 'calculation.started',\n    CALCULATION_PAUSED      = 'calculation.paused',\n    CALCULATION_RESUMED     = 'calculation.resumed',\n    CALCULATION_FINISHED    = 'calculation.finished',\n    CALCULATION_IDLE        = 'calculation.idle',\n}","\nexport enum DataType {\n    TEXT    = 'text',\n    NUMBER  = 'number',\n    DATE    = 'date',\n    TIME    = 'time',\n    DATETIME= 'datetime',\n    BOOLEAN = 'boolean',\n    ERROR   = 'error',\n}\n","/**\n * Utility class for converting between Excel serial dates and JavaScript Date objects\n */\nexport class DateUtil {\n    /**\n     * Excel epoch: December 30, 1899\n     * Excel uses this as day 0 for date serial numbers\n     */\n    private static readonly EXCEL_EPOCH = new Date(1899, 11, 30).getTime();\n    private static readonly MS_PER_DAY = 24 * 60 * 60 * 1000;\n\n    /**\n     * Convert Excel serial date number to JavaScript Date object\n     * @param serialDate Excel serial date number (days since Dec 30, 1899)\n     * @returns JavaScript Date object\n     */\n    static serialToDate(serialDate: number): Date {\n        if (typeof serialDate !== 'number' || isNaN(serialDate)) {\n            throw new Error('Invalid serial date: must be a number');\n        }\n\n        // Excel epoch: December 30, 1899 at midnight local time\n        const epochDate = new Date(1899, 11, 30, 0, 0, 0, 0);\n        const ms = serialDate * DateUtil.MS_PER_DAY;\n        return new Date(epochDate.getTime() + ms);\n    }\n\n    /**\n     * Convert JavaScript Date object to Excel serial date number\n     * @param date JavaScript Date object\n     * @returns Excel serial date number (days since Dec 30, 1899)\n     */\n    static dateToSerial(date: Date): number {\n        if (!(date instanceof Date) || isNaN(date.getTime())) {\n            throw new Error('Invalid date: must be a valid Date object');\n        }\n\n        // Excel epoch: December 30, 1899 at midnight local time\n        const epochDate = new Date(1899, 11, 30, 0, 0, 0, 0);\n        const ms = date.getTime() - epochDate.getTime();\n        return Math.floor(ms / DateUtil.MS_PER_DAY);\n    }\n\n    /**\n     * Check if a value is a valid Excel serial date\n     * @param value Value to check\n     * @returns True if value is a valid serial date number\n     */\n    static isValidSerialDate(value: any): boolean {\n        if (typeof value !== 'number' || isNaN(value)) {\n            return false;\n        }\n\n        // Excel dates are typically between 1 (Jan 1, 1900) and ~50000 (year 2036)\n        // Allow negative for historical dates\n        return value >= -36522 && value <= 2958465; // Years 1800-9999\n    }\n\n    /**\n     * Create Excel serial date from date components\n     * @param year Full year (e.g., 2024)\n     * @param month Month (1-12)\n     * @param day Day of month (1-31)\n     * @returns Excel serial date number\n     */\n    static fromComponents(year: number, month: number, day: number): number {\n        const date = new Date(year, month - 1, day);\n        return DateUtil.dateToSerial(date);\n    }\n\n    /**\n     * Get date components from Excel serial date\n     * @param serialDate Excel serial date number\n     * @returns Object with year, month (1-12), day, weekday (0-6, Sunday=0)\n     */\n    static toComponents(serialDate: number): {\n        year: number;\n        month: number;\n        day: number;\n        weekday: number;\n        hours: number;\n        minutes: number;\n        seconds: number;\n    } {\n        const date = DateUtil.serialToDate(serialDate);\n        return {\n            year: date.getFullYear(),\n            month: date.getMonth() + 1, // Convert to 1-based\n            day: date.getDate(),\n            weekday: date.getDay(),\n            hours: date.getHours(),\n            minutes: date.getMinutes(),\n            seconds: date.getSeconds(),\n        };\n    }\n\n    /**\n     * Format Excel serial date as ISO string (YYYY-MM-DD)\n     * @param serialDate Excel serial date number\n     * @returns ISO date string\n     */\n    static toISOString(serialDate: number): string {\n        const date = DateUtil.serialToDate(serialDate);\n        return date.toISOString().split('T')[0];\n    }\n\n    /**\n     * Parse ISO date string (YYYY-MM-DD) to Excel serial date\n     * @param isoString ISO date string\n     * @returns Excel serial date number\n     */\n    static fromISOString(isoString: string): number {\n        const date = new Date(isoString);\n        if (isNaN(date.getTime())) {\n            throw new Error(`Invalid ISO date string: ${isoString}`);\n        }\n        return DateUtil.dateToSerial(date);\n    }\n\n    /**\n     * Get current date as Excel serial date\n     * @returns Excel serial date number for today\n     */\n    static today(): number {\n        const now = new Date();\n        now.setHours(0, 0, 0, 0); // Reset time to midnight\n        return DateUtil.dateToSerial(now);\n    }\n\n    /**\n     * Get current date and time as Excel serial date (with fractional day)\n     * @returns Excel serial date number for now (includes time as fraction)\n     */\n    static now(): number {\n        return DateUtil.dateToSerial(new Date());\n    }\n}\n","import { Sheet } from './Sheet';\nimport { CellEvent } from './Cell/CellEvent';\nimport { DataType } from './Cell/DataType';\nimport { ErrorType } from './Cell/ErrorType';\nimport { FormatterInterface } from './Cell/Formatter';\nimport { ArrayResult } from './Cell/ArrayResult';\nimport { DateUtil } from './Utility/DateUtil';\n\n/**\n * Cell object, hold single value or formula\n */\nexport class Cell {\n    private _value : any;                               //Cell original value\n    private _address!: string;                          //Cell address\n    private _formula!: string;                          //Cell formula\n    private _computed : any;                            //Result of the computed formula\n    private _rules : Record<string, RegExp> = {\n        address : /^\\$?[A-Z]+\\$?[0-9]+$/,               //Cell address validation rule (allows $ for absolute refs)\n    };\n\n    protected precedents : Record<string, Cell> = {};   //Cells registry required by the formula\n    protected dependents : Record<string, Cell> = {};   //Cells registry that depend on this cell\n\n    protected remotePrecedents : Record<string, Cell> = {}; //Cells registry required by the formula from other sheets\n    protected remoteDependents : Record<string, Cell> = {}; //Cells registry that depend on this cell from other sheets\n\n    /** Dynamic precedents (column/row ranges) */\n    private dynamicPrecedents: {\n        columnRanges?: string[];  // e.g., [\"A:A\", \"B:C\"]\n        rowRanges?: string[];     // e.g., [\"1:1\", \"5:10\"]\n    } = {};\n\n    /** Flags */\n    private _dirty : boolean = false;\n    private _calculated : boolean = false;\n    private _hasRemotePrecedents : boolean = false;\n    private _hasRemoteDependents : boolean = false;\n    private _hasDynamicPrecedents : boolean = false;\n\n    /** Array formula properties */\n    private _isArrayAnchor : boolean = false;           // Is this the anchor cell of an array formula?\n    private _arrayResult ?: ArrayResult;                 // Array result if this is anchor\n    private _spillRange ?: string;                       // Range that this array spills into (e.g., \"A1:C3\")\n\n    protected format!: string;\n    protected formatter!: FormatterInterface;\n    protected el ?: any;\n\n    constructor(\n        address : string,\n        protected sheet : Sheet,\n        protected _type : DataType = DataType.NUMBER\n    ) {\n        this.address = address;\n        this.init();\n    }\n\n    public init() {\n\n    }\n\n    /** Mount cell object into specific element */\n    public mount(el: any) {\n        this.el = el;\n\n        this.sheet.dispatcher.dispatch(CellEvent.ELEMENT_MOUNTED, {cell : this.address, el : el});\n    }\n\n    /** Check if cell has error value */\n    public isError() {\n        return Object.values(ErrorType).includes(this.value as ErrorType);\n    }\n\n    /** Check if cell has empty-able value, like null, empty string, undefined */\n    public isEmpty() {\n        // Check the raw value, not the processed value (which may convert null to 0 for NUMBER type)\n        const rawValue = this.formula ? this._computed : this._value;\n        return rawValue === null || rawValue === undefined || rawValue === '';\n    }\n\n    /**\n     * Calculate the cell value based on its formula\n     */\n    public calculate() {\n        // If no formula, nothing to calculate\n        if (!this._formula) {\n            this._calculated = true;\n            this._dirty = false;\n            return this._value;\n        }\n\n        try {\n            // Use the sheet's eval method which sets the active sheet context\n            const result = this.sheet.eval(this._formula);\n\n            // Check if result is an ArrayResult\n            if (result instanceof ArrayResult) {\n                return this.handleArrayResult(result);\n            }\n\n            // Check if value changed to mark dependents as dirty\n            const oldValue = this._computed;\n            const valueChanged = oldValue !== result;\n\n            this._computed = result;\n            this._calculated = true;\n            this._dirty = false;\n\n            // Dispatch calculation complete event\n            this.sheet.dispatcher.dispatch(CellEvent.CALCULATED, {\n                cell : this.address,\n                value : this._computed\n            });\n\n            // If value changed, mark dependents as dirty and recalculate if auto-calculate is enabled\n            if (valueChanged) {\n                this._markDependentsAsDirty();\n\n                if (this.sheet.autoCalculate) {\n                    this._recalculateDependents();\n                }\n            }\n\n            return this._computed;\n        } catch (error) {\n            console.error(`Error calculating cell ${this.address}:`, error);\n            this._computed = ErrorType.ERROR;\n            this._calculated = true;\n            this._dirty = false;\n            return this._computed;\n        }\n    }\n\n    /**\n     * Handle array formula result - spill into multiple cells\n     */\n    private handleArrayResult(arrayResult: ArrayResult): any {\n        // Mark this as array anchor\n        this._isArrayAnchor = true;\n        this._arrayResult = arrayResult;\n\n        // If single value, just return it\n        if (arrayResult.isSingleValue()) {\n            this._computed = arrayResult.getSingleValue();\n            this._calculated = true;\n            this._dirty = false;\n            return this._computed;\n        }\n\n        // Check if we can spill\n        const canSpill = this.checkSpillRange(arrayResult);\n\n        if (!canSpill) {\n            // Return SPILL error\n            this._computed = ErrorType.SPILL;\n            this._calculated = true;\n            this._dirty = false;\n            return this._computed;\n        }\n\n        // Spill the array into cells\n        this.spillArray(arrayResult);\n\n        // Return the value for this anchor cell\n        this._computed = arrayResult.getValue(0, 0);\n        this._calculated = true;\n        this._dirty = false;\n\n        return this._computed;\n    }\n\n    /**\n     * Check if the array can spill without blocking\n     */\n    private checkSpillRange(arrayResult: ArrayResult): boolean {\n        const {row: startRow, col: startCol} = this.getCellCoordinates(this.address);\n\n        // Check each cell in the spill range\n        for (let r = 0; r < arrayResult.rows; r++) {\n            for (let c = 0; c < arrayResult.cols; c++) {\n                // Skip the anchor cell\n                if (r === 0 && c === 0) continue;\n\n                const targetAddress = this.coordinatesToAddress(startRow + r, startCol + c);\n                const targetCell = this.sheet.getCell(targetAddress);\n\n                // If cell exists and has value or formula, it's blocking\n                if (targetCell && (!targetCell.isEmpty() || targetCell.formula)) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Spill array values into cells\n     */\n    private spillArray(arrayResult: ArrayResult): void {\n        const {row: startRow, col: startCol} = this.getCellCoordinates(this.address);\n        const endRow = startRow + arrayResult.rows - 1;\n        const endCol = startCol + arrayResult.cols - 1;\n\n        // Store spill range\n        this._spillRange = `${this.address}:${this.coordinatesToAddress(endRow, endCol)}`;\n\n        // Spill values into cells\n        for (let r = 0; r < arrayResult.rows; r++) {\n            for (let c = 0; c < arrayResult.cols; c++) {\n                // Skip the anchor cell\n                if (r === 0 && c === 0) continue;\n\n                const targetAddress = this.coordinatesToAddress(startRow + r, startCol + c);\n                const value = arrayResult.getValue(r, c);\n\n                // Get or create the cell and set its value\n                const cell = this.sheet.getCell(targetAddress);\n                cell.value = value;\n            }\n        }\n    }\n\n    /**\n     * Convert cell address to row/col coordinates\n     */\n    private getCellCoordinates(address: string): {row: number, col: number} {\n        const match = address.match(/^([A-Z]+)(\\d+)$/);\n        if (!match) throw new Error(`Invalid cell address: ${address}`);\n\n        const colStr = match[1];\n        const row = parseInt(match[2]);\n\n        // Convert column letters to number\n        let col = 0;\n        for (let i = 0; i < colStr.length; i++) {\n            col = col * 26 + (colStr.charCodeAt(i) - 64);\n        }\n\n        return {row, col};\n    }\n\n    /**\n     * Convert row/col coordinates to cell address\n     */\n    private coordinatesToAddress(row: number, col: number): string {\n        let colStr = '';\n        let c = col;\n\n        while (c > 0) {\n            const remainder = (c - 1) % 26;\n            colStr = String.fromCharCode(65 + remainder) + colStr;\n            c = Math.floor((c - 1) / 26);\n        }\n\n        return colStr + row;\n    }\n\n    /**\n     * Check if this cell is an array anchor\n     */\n    public isArrayAnchor(): boolean {\n        return this._isArrayAnchor;\n    }\n\n    /**\n     * Get the spill range if this is an array anchor\n     */\n    public getSpillRange(): string | undefined {\n        return this._spillRange;\n    }\n\n    /**\n     * Set cell format\n     */\n    public setFormat(format: string) {\n        this.format = format;\n    }\n\n    /**\n     * Get cell format\n     */\n    public getFormat(): string | undefined {\n        return this.format;\n    }\n\n    /**\n     * Set cell formatter\n     */\n    public setFormatter(formatter: any) {\n        this.formatter = formatter;\n    }\n\n    /**\n     * Get formatted value\n     */\n    public getFormattedValue(): string {\n        if (this.formatter) {\n            return this.formatter.format(this.value);\n        }\n        return this.value?.toString() || '';\n    }\n\n    /** Check if cell is calculated already */\n    public isCalculated() : boolean {\n        return this._calculated\n    }\n\n    /** Check if cell is affected by changes on other cells and need recalculation */\n    public isDirty() : boolean {\n        return this._dirty\n    }\n\n    public markAsDirty() {\n        this._dirty = true;\n    }\n\n    /** Check if the current is numeric */\n    public isNumeric() : boolean {\n        return !isNaN(this.value - parseFloat(this.value));\n    }\n\n    public get address() : string {\n        return this._address;\n    }\n\n    public set address(address : string) {\n        if (address.match(this._rules.address)) {\n            this._address = address;\n            return;\n        }\n\n        throw new Error(\"Cell address should follow spreadsheet like address rule\");\n    }\n\n    /**\n     * Get cell data type\n     */\n    public get type() : DataType {\n        return this._type;\n    }\n\n    /**\n     * Set cell data type\n     */\n    public set type(type : DataType) {\n        this._type = type;\n    }\n\n    /**\n     * Get cell formula\n     */\n    public get formula() : string {\n        return this._formula;\n    }\n\n    /**\n     * Set cell formula, and notify the parent sheet\n     */\n    public set formula(formula : string) {\n        const oldFormula = this._formula;\n        this._formula = formula;\n\n        // Detect and store dynamic precedents (column/row ranges)\n        this.updateDynamicPrecedents(formula);\n\n        this.sheet.dispatcher.dispatch(\n            CellEvent.FORMULA_CHANGED,\n            {\n                cell : this.address,\n                oldFormula : oldFormula,\n                newFormula : formula\n            }\n        );\n\n        // When formula changes, we need to rebuild dependencies\n        // Remove old precedents\n        const oldPrecedents = this.getPrecedents();\n        if (oldPrecedents) {\n            for (const addr in oldPrecedents) {\n                const precedent = oldPrecedents[addr];\n                if (precedent) {\n                    precedent.removeDependent(this);\n                }\n            }\n        }\n\n        // Clear precedents - they will be rebuilt on next calculation\n        this.precedents = {};\n\n        // Mark as dirty so it recalculates and rebuilds dependencies on next calculate()\n        this.markAsDirty();\n\n        // Trigger immediate dependency rebuild if workbook has been built\n        if (this.sheet.workbook && formula) {\n            this.rebuildDependencies();\n        }\n    }\n\n    /**\n     * Rebuild dependencies for this cell based on current formula\n     */\n    private rebuildDependencies(): void {\n        if (!this._formula) return;\n\n        const builder = new (require('./Workbook/DependencyBuilder').DependencyBuilder)();\n        builder.setWorkbook(this.sheet.workbook);\n\n        const { localDeps, remoteDeps } = builder.getFormulaDependencies(this._formula);\n\n        // Resolve local dependencies\n        const dependencies: Record<string, Cell> = {};\n        for (const address in localDeps) {\n            const precedentCell = this.sheet.getCellDirect(address);\n            if (precedentCell) {\n                dependencies[address] = precedentCell;\n                precedentCell.addDependent(this);\n            }\n        }\n\n        this.setPrecedents(dependencies);\n\n        // Handle remote (cross-sheet) dependencies\n        for (const remoteRef in remoteDeps) {\n            try {\n                const { sheetName, cellAddress } = builder.parseRemoteReference(remoteRef);\n                const targetSheet = this.sheet.workbook.getSheet(sheetName);\n                if (targetSheet) {\n                    const targetCell = targetSheet.getCellDirect(cellAddress);\n                    if (targetCell) {\n                        targetCell.addRemoteDependent(this);\n                        this.addRemotePrecedent(targetCell);\n                    }\n                }\n            } catch (e) {\n                // Ignore errors for invalid references\n            }\n        }\n    }\n\n    /**\n     * Get the value of the cell, if it has formula, return the computed value\n     */\n    public get value() : any | ErrorType {\n        let value : any | ErrorType = this.formula ? this._computed : this._value;\n\n        // Check if it's an error value first, return as-is\n        if (typeof value === 'string' && Object.values(ErrorType).includes(value as ErrorType)) {\n            return value;\n        }\n\n        switch (this._type) {\n            case DataType.NUMBER:\n                // Handle null, undefined, or empty string as 0 for calculations\n                if (value === null || value === undefined || value === '') {\n                    return 0;\n                }\n                // Only parse as number if it's not already a number\n                if (typeof value === 'number') {\n                    return value;\n                }\n                // Parse to number, but check if result is NaN\n                const parsed = parseFloat(value);\n                // Return the original value if it can't be parsed (like text)\n                // This allows text values to remain text even in NUMBER cells\n                return isNaN(parsed) ? value : parsed;\n            case DataType.BOOLEAN:\n                return !!value;\n            case DataType.DATE:\n            case DataType.DATETIME:\n            case DataType.TIME:\n                // For date types, return the Excel serial number (not converted to Date object)\n                // Users can call getDateValue() to get a JavaScript Date object\n                return value;\n            case DataType.ERROR:\n                return ErrorType[value as keyof typeof ErrorType];\n            default:\n                return value;\n        }\n    }\n\n    /**\n     * Set cell value, this will reset the formula\n     */\n    public set value(value : any) {\n        // Auto-convert numeric strings to numbers (unless explicitly typed as TEXT)\n        if (typeof value === 'string' && this._type !== DataType.TEXT) {\n            const trimmed = value.trim();\n            if (trimmed !== '') {\n                // Try to parse as number\n                const num = parseFloat(trimmed);\n                if (!isNaN(num) && String(num) === trimmed) {\n                    value = num;\n                }\n            }\n        }\n\n        // Convert boolean strings to actual booleans for BOOLEAN type cells\n        if (this._type === DataType.BOOLEAN && typeof value === 'string') {\n            const upperValue = value.trim().toUpperCase();\n            if (upperValue === 'TRUE') {\n                value = true;\n            } else if (upperValue === 'FALSE') {\n                value = false;\n            }\n        }\n\n        // Convert date strings to Excel serial numbers for DATE type cells\n        if (this._type === DataType.DATE || this._type === DataType.DATETIME) {\n            if (typeof value === 'string' && value.trim() !== '') {\n                try {\n                    // Try to parse as ISO date string (YYYY-MM-DD)\n                    // Use local date to avoid timezone issues\n                    const parts = value.match(/^(\\d{4})-(\\d{2})-(\\d{2})/);\n                    if (parts) {\n                        const year = parseInt(parts[1], 10);\n                        const month = parseInt(parts[2], 10) - 1; // Month is 0-based\n                        const day = parseInt(parts[3], 10);\n                        const date = new Date(year, month, day);\n                        const serial = DateUtil.dateToSerial(date);\n                        value = serial;\n                    } else {\n                        // Fallback to default Date parsing\n                        const date = new Date(value);\n                        if (!isNaN(date.getTime())) {\n                            value = DateUtil.dateToSerial(date);\n                        }\n                    }\n                } catch (e) {\n                    // If parsing fails, keep original value\n                }\n            } else if (value instanceof Date) {\n                value = DateUtil.dateToSerial(value);\n            }\n        }\n\n        this._value = value;\n        this._formula = '';\n\n        this.sheet.dispatcher.dispatch(CellEvent.VALUE_CHANGED, {cell : this.address, value : value});\n\n        // Mark dependents as dirty regardless of autoCalculate setting\n        this._markDependentsAsDirty();\n\n        // Also invalidate any formulas that reference this cell through column/row ranges\n        this.sheet.invalidateDynamicDependents(this.address);\n\n        // Auto-recalculate dependents if autoCalculate is enabled\n        if (this.sheet.autoCalculate) {\n            this._recalculateDependents();\n            // After recalculating explicit dependents, recalculate cells with dynamic precedents\n            this.sheet.recalculateDirtyCells();\n        }\n    }\n\n    /**\n     * Mark all dependent cells as dirty\n     */\n    private _markDependentsAsDirty() {\n        const dependents = this.getDependents();\n        for (const address in dependents) {\n            const dependent = dependents[address];\n            dependent.markAsDirty();\n            // Recursively mark their dependents as dirty\n            dependent._markDependentsAsDirty();\n        }\n    }\n\n    /**\n     * Recalculate all dependent cells\n     */\n    private _recalculateDependents() {\n        const dependents = this.getDependents();\n        for (const address in dependents) {\n            const dependent = dependents[address];\n            dependent.calculate();\n            // Recursively recalculate their dependents\n            dependent._recalculateDependents();\n        }\n    }\n\n    public getStringValue() : string {\n        return this.value.toString();\n    }\n\n    public getNumericValue() : number {\n        return isNaN (parseFloat(this.value)) ? 0 : parseFloat(this.value);\n    }\n\n    /**\n     * Get cell value as JavaScript Date object\n     * Works for DATE, TIME, and DATETIME types\n     * @returns JavaScript Date object if cell contains a date, null otherwise\n     */\n    public getDateValue(): Date | null {\n        // Check if cell is a date type\n        if (this._type !== DataType.DATE && this._type !== DataType.DATETIME && this._type !== DataType.TIME) {\n            return null;\n        }\n\n        const val = this.value;\n\n        // If already a Date object, return it\n        if (val instanceof Date) {\n            return val;\n        }\n\n        // If it's a number (Excel serial date), convert it\n        if (typeof val === 'number' && DateUtil.isValidSerialDate(val)) {\n            return DateUtil.serialToDate(val);\n        }\n\n        // Try parsing as date string\n        if (typeof val === 'string') {\n            const date = new Date(val);\n            if (!isNaN(date.getTime())) {\n                return date;\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Get cell value as Excel serial date number\n     * Works for DATE, TIME, and DATETIME types\n     * @returns Excel serial date number if cell contains a date, null otherwise\n     */\n    public getSerialDateValue(): number | null {\n        // Check if cell is a date type\n        if (this._type !== DataType.DATE && this._type !== DataType.DATETIME && this._type !== DataType.TIME) {\n            return null;\n        }\n\n        const val = this.value;\n\n        // If it's already a number and valid, return it\n        if (typeof val === 'number' && DateUtil.isValidSerialDate(val)) {\n            return val;\n        }\n\n        // If it's a Date object, convert it\n        if (val instanceof Date) {\n            return DateUtil.dateToSerial(val);\n        }\n\n        // Try parsing as date string and converting\n        if (typeof val === 'string') {\n            try {\n                return DateUtil.fromISOString(val);\n            } catch {\n                return null;\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Set cell value from a JavaScript Date object\n     * Automatically sets the cell type to DATE and stores as Excel serial number\n     * @param date JavaScript Date object\n     */\n    public setDateValue(date: Date): void {\n        if (!(date instanceof Date) || isNaN(date.getTime())) {\n            throw new Error('Invalid date: must be a valid Date object');\n        }\n\n        this._type = DataType.DATE;\n        this.value = DateUtil.dateToSerial(date);\n    }\n\n    /**\n     * Set cell value from Excel serial date number\n     * Automatically sets the cell type to DATE\n     * @param serialDate Excel serial date number\n     */\n    public setSerialDateValue(serialDate: number): void {\n        if (!DateUtil.isValidSerialDate(serialDate)) {\n            throw new Error('Invalid serial date: must be a valid number');\n        }\n\n        this._type = DataType.DATE;\n        this.value = serialDate;\n    }\n\n    /**\n     * Get formatted date string (ISO format: YYYY-MM-DD)\n     * @returns ISO date string if cell contains a date, null otherwise\n     */\n    public getFormattedDate(): string | null {\n        const serialDate = this.getSerialDateValue();\n        if (serialDate === null) {\n            return null;\n        }\n\n        return DateUtil.toISOString(serialDate);\n    }\n\n    /**\n     * Check if this cell contains a date value\n     * @returns True if cell has DATE, TIME, or DATETIME type\n     */\n    public isDate(): boolean {\n        return this._type === DataType.DATE ||\n               this._type === DataType.DATETIME ||\n               this._type === DataType.TIME;\n    }\n\n    public getPrecedents() : Record<string, Cell>|null {\n        if (this._hasDynamicPrecedents) {\n            return null;\n        } else {\n            return this.precedents;\n        }\n    }\n\n    public setPrecedents(precedents : Record<string, Cell>) {\n        this.precedents = precedents;\n    }\n\n    public addPrecedent(cell : Cell) {\n        this.precedents[cell.address] = cell;\n    }\n\n    public getDependents() : Record<string, Cell> {\n        // Combine local and remote dependents\n        return {...this.dependents, ...this.remoteDependents};\n    }\n\n    public setDependents(dependents : Record<string, Cell>) {\n        this.dependents = dependents;\n    }\n\n    public addDependent(cell : Cell) {\n        this.dependents[cell.address] = cell;\n    }\n\n    public removeDependent(cell : Cell) {\n        delete this.dependents[cell.address];\n    }\n\n    public addRemoteDependent(cell : Cell) {\n        // Use sheet name + address as key to differentiate cells from different sheets\n        const key = cell.sheet.name + '!' + cell.address;\n        this.remoteDependents[key] = cell;\n        this._hasRemoteDependents = true;\n    }\n\n    public addRemotePrecedent(cell : Cell) {\n        // Use sheet name + address as key to differentiate cells from different sheets\n        const key = cell.sheet.name + '!' + cell.address;\n        this.remotePrecedents[key] = cell;\n    }\n\n    /**\n     * Update dynamic precedents by parsing formula for column/row ranges\n     */\n    private updateDynamicPrecedents(formula: string): void {\n        if (!formula) {\n            this.dynamicPrecedents = {};\n            this._hasDynamicPrecedents = false;\n            return;\n        }\n\n        const columnRanges: string[] = [];\n        const rowRanges: string[] = [];\n\n        // Match column ranges: A:A, B:C, etc.\n        const columnPattern = /\\b([A-Z]+)\\s*:\\s*([A-Z]+)\\b/g;\n        let match;\n        while ((match = columnPattern.exec(formula)) !== null) {\n            columnRanges.push(match[0]);\n        }\n\n        // Match row ranges: 1:1, 5:10, etc. (but not cell ranges like A1:B2)\n        const rowPattern = /\\b(\\d+)\\s*:\\s*(\\d+)\\b/g;\n        while ((match = rowPattern.exec(formula)) !== null) {\n            // Make sure it's not part of a cell range (no letter before the number)\n            const beforeMatch = formula[match.index - 1];\n            if (!beforeMatch || !/[A-Z]/i.test(beforeMatch)) {\n                rowRanges.push(match[0]);\n            }\n        }\n\n        this.dynamicPrecedents = {};\n        if (columnRanges.length > 0) {\n            this.dynamicPrecedents.columnRanges = columnRanges;\n        }\n        if (rowRanges.length > 0) {\n            this.dynamicPrecedents.rowRanges = rowRanges;\n        }\n\n        this._hasDynamicPrecedents = columnRanges.length > 0 || rowRanges.length > 0;\n    }\n\n    /**\n     * Check if this cell has dynamic precedents\n     */\n    public hasDynamicPrecedents(): boolean {\n        return this._hasDynamicPrecedents;\n    }\n\n    /**\n     * Check if this cell depends on a specific column\n     */\n    public dependsOnColumn(column: string): boolean {\n        if (!this._hasDynamicPrecedents || !this.dynamicPrecedents.columnRanges) {\n            return false;\n        }\n\n        const colNum = this.columnToNumber(column);\n        return this.dynamicPrecedents.columnRanges.some(range => {\n            const [start, end] = range.split(':').map(c => this.columnToNumber(c.trim()));\n            return colNum >= start && colNum <= end;\n        });\n    }\n\n    /**\n     * Check if this cell depends on a specific row\n     */\n    public dependsOnRow(row: number): boolean {\n        if (!this._hasDynamicPrecedents || !this.dynamicPrecedents.rowRanges) {\n            return false;\n        }\n\n        return this.dynamicPrecedents.rowRanges.some(range => {\n            const [start, end] = range.split(':').map(r => parseInt(r.trim()));\n            return row >= start && row <= end;\n        });\n    }\n\n    /**\n     * Convert column letter to number (A=1, B=2, etc.)\n     */\n    private columnToNumber(col: string): number {\n        let num = 0;\n        for (let i = 0; i < col.length; i++) {\n            num = num * 26 + (col.charCodeAt(i) - 64);\n        }\n        return num;\n    }\n}\n","import { Cell } from \"../Cell\";\nimport { Sheet } from \"../Sheet\";\nimport { EventDispatcher } from \"../Utility/EventDispatcher\";\nimport { CellData } from \"../Workbook/Data\";\nimport { SheetEvent } from \"./SheetEvent\";\n\nexport class CellRegistry {\n    private cells : Record<string, Cell> = {};\n\n    constructor(\n        private sheet : Sheet,\n        private event : EventDispatcher\n    ) {\n\n    }\n\n    public add (cell : Cell) {\n        this.cells[cell.address] = cell;\n\n        this.event.dispatch(SheetEvent.CELL_ADDED, {cell : cell});\n    }\n\n    public remove (cell : Cell) {\n        delete this.cells[cell.address];\n\n        this.event.dispatch(SheetEvent.CELL_REMOVED, {cell : cell});\n    }\n\n    public get (address : string) : Cell {\n        if (this.cells.hasOwnProperty(address)) {\n            return this.cells[address];\n        } else {\n            // create new cell on-the-fly if it doesn't exist\n            const cell = new Cell(address, this.sheet);\n            this.cells[address] = cell;\n            this.event.dispatch(SheetEvent.CELL_CREATED, {cell : cell});\n            return cell;\n        }\n    }\n\n    public has (address : string) : boolean {\n        return this.cells.hasOwnProperty(address);\n    }\n\n    public create (address : string, data : CellData) : Cell {\n        if (this.has(address)) {\n            throw new Error(`Cell ${address} already exists`);\n        }\n\n        const cell = new Cell(address, this.sheet, data.type);\n\n        // Set cell properties from data\n        if (data.formula) {\n            cell.formula = data.formula;\n        } else if (data.value !== undefined) {\n            cell.value = data.value;\n        }\n\n        if (data.format) {\n            cell.setFormat(data.format);\n        }\n\n        if (data.formatter) {\n            cell.setFormatter(data.formatter);\n        }\n\n        this.cells[cell.address] = cell;\n\n        this.event.dispatch(SheetEvent.CELL_CREATED, {cell : cell});\n\n        return cell;\n    }\n\n    public all () : Record<string, Cell> {\n        return this.cells;\n    }\n\n    public count () : number {\n        return Object.keys(this.cells).length;\n    }\n\n    public clear () {\n        this.cells = {};\n    }\n\n    public each (callback : (cell : Cell) => void) {\n        for (const address in this.cells) {\n            callback(this.cells[address]);\n        }\n    }\n\n    public filter (callback : (cell : Cell) => boolean) : Record<string, Cell> {\n        const filtered : Record<string, Cell> = {};\n\n        for (const address in this.cells) {\n            if (callback(this.cells[address])) {\n                filtered[address] = this.cells[address];\n            }\n        }\n\n        return filtered;\n    }\n}","import { Cell } from \"../Cell\";\n\n/**\n * translate numeric to alphabet, like 1 => A, 27 => AA\n * @param  {integer} num    numeric value translated to alphabet\n * @return {string}         alphabet representation of the value\n */\nexport function numToStr(num: number): string {\n    var s = \"\";\n    num = Math.round(num - 1);\n    while (num >= 0) {\n        s = String.fromCharCode(num % 26 + 97) + s;\n        num = Math.floor(num / 26) - 1;\n    }\n    return s.toUpperCase();\n}\n\n/**\n * translate alphabet to numeric, A => 1, B => 2, Z => 26, AA => 27 etc\n * @param  {string} char    Alphabet [A-Z]\n * @return {integer}        Integer representation of the alphabet\n */\nexport function strToNum(char: string): number {\n    const chars = char.toUpperCase().split('');\n    const base = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\".split('');\n    let i, j, result = 0;\n\n    for (i = 0, j = chars.length - 1; i < chars.length; i += 1, j -= 1) {\n        result += Math.pow(base.length, j) * (base.indexOf(chars[i]) + 1);\n    }\n\n    return result;\n}\n\n/**\n * translate cellStart:cellStop to array containing all cell in range\n * e.g A1:B3 => [A1, A2, A3, B1, B2, B3]\n * @return {array} array containing all address in range\n */\nexport function getCellsInRange(range : string) {\n    range = range.toUpperCase();\n    const regex = {\n            alpha   : /[A-Z]+/,\n            num     : /[0-9]+/,\n            cellRange   : /^[A-Za-z]+[0-9]+\\s*:\\s*[A-Za-z]+[0-9]+$/,\n        };\n\n    if (!range.match(regex.cellRange)) {\n        throw new Error(\"Invalid range syntax!\");\n    }\n\n    const rangeStart = range.split(':')[0],\n        rangeEnd = range.split(':')[1],\n        boundaries = {\n            start : {\n                col : strToNum(rangeStart.match(regex.alpha)[0]), //alpha part\n                row : parseInt(rangeStart.match(regex.num)[0]), //numeric part\n            },\n            end : {\n                col : strToNum(rangeEnd.match(regex.alpha)[0]), //alpha part\n                row : parseInt(rangeEnd.match(regex.num)[0]), //numeric part\n            }\n        },\n        cellRange = [];\n\n    for (\n        let col = Math.min(boundaries.start.col, boundaries.end.col) ;\n        col <= Math.max(boundaries.start.col, boundaries.end.col);\n        col++\n    ) {\n        for (\n            let row = Math.min(boundaries.start.row, boundaries.end.row);\n            row <= Math.max(boundaries.start.row, boundaries.end.row);\n            row++\n        ) {\n            cellRange.push(numToStr(col) + row + '');\n        }\n    }\n\n    return cellRange;\n}\n\n/**\n * taken from Formula.VALIDBIN of stoic's formula.js (http://www.stoic.com/pages/formula)\n * check if number is in valid binary format\n * @param  {string}  number [the binary number]\n * @return {Boolean}        [true if valid, false if invalid]\n */\nexport function isValidBinary(number: string) {\n    return (/^[01]{1,10}$/).test(number);\n}\n\n/**\n * String repeater, taken from underscore string (https://github.com/epeli/underscore.string)\n * @param  {[type]} str [description]\n * @param  {[type]} qty [description]\n * @return {[type]}     [description]\n */\nexport function strRepeat(str: string, qty: number) {\n    if (qty < 1) return '';\n    var result = '';\n    while (qty > 0) {\n        if (qty & 1) result += str;\n        qty >>= 1, str += str;\n    }\n    return result;\n}\n\nexport function repeat(str: string, qty: number, separator: string) {\n    if (str == null) {\n        return '';\n    }\n\n    qty = ~~qty;\n\n    // using faster implementation if separator is not needed;\n    if (separator == null) {\n        return strRepeat(String(str), qty);\n    }\n\n    // this one is about 300x slower in Google Chrome\n    for (var repeat = []; qty > 0; repeat[--qty] = str) { }\n    return repeat.join(separator);\n}\n\nexport function unique(array: Array<any>) {\n    return array.reduce(function (p, c) {\n        if (p.indexOf(c) < 0) p.push(c);\n        return p;\n    }, []);\n}\n\nexport function initial(array: Array<any>, n : any, guard : any) {\n    return Array.prototype.slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n\nexport function rest(array : Array<any>, n : any, guard : any) {\n    return Array.prototype.slice.call(array, n == null || guard ? 1 : n);\n}\n\n/** end of underscore func */\n\nexport function arrayMerge(args : any) {\n    let result : Array<any> = [];\n\n    for (let i = 0; i < args.length; i++) {\n        if (typeof (args[i]) == 'object') {\n            for (let a in args[i]) {\n                if (args[i][a].trim() !== '') {\n                    result = result.concat(args[i][a]);\n                }\n            }\n        } else {\n            if (result.concat(args[i]).join().trim() !== '') {\n                result = result.concat(args[i]);\n            }\n        }\n    }\n\n    return result;\n}\n\nexport function toArray(args : any) {\n    return Array.prototype.slice.call(args, 0);\n}\n\n/**\n * Converting object into plain array\n * @param  {object} obj Object need to be converted\n * @return {array}      Plain array\n */\nexport function objectToArray(obj: any) {\n    return Object.values(obj);\n}\n\n/**\n * remove empty cell from cell range collection\n * @param  {object} cellRange\n * @return {object} trimmed cellRange\n */\nexport function trimEmptyCell(cellRange : Record<string, any>) {\n    var result : Record<string, any> = {};\n\n    for (var a in cellRange) {\n        if (cellRange[a].trim() !== '') {\n            result[a] = cellRange[a];\n        }\n    }\n\n    return result;\n}\n\n/**\n * convert range {A1: val1, A2: val2, B1: val3, B2: val4} into 2 dimensional table array\n * [\n *     [val1, val2],\n *     [val3, val4]\n * ]\n *\n * @param  {object} cellRange [description]\n * @return {array}            [description]\n */\nexport function rangeToTable(cellRange: Array<Array<any>>): Array<Array<any>> {\n    var cell, col,\n        row = 0,\n        alphaPattern = /[A-Z]+/,\n        numPattern = /[0-9]+/,\n        arrayTable = [],\n        resultTable = [];\n\n    for (cell in cellRange) {\n\n        col = strToNum(cell.match(alphaPattern)[0]) - 1;\n        row = parseInt(cell.match(numPattern)[0], 10) - 1;\n\n        if (typeof arrayTable[row] == 'undefined') {\n            arrayTable[row] = [];\n        }\n\n        arrayTable[row][col] = cellRange[cell];\n    }\n\n    var resultRow = 0, rowLength = arrayTable.length, colLength;\n    for (row = 0; row < rowLength; row++) {\n        if (typeof (arrayTable[row]) != 'undefined') {\n            colLength = arrayTable[row].length;\n\n            if (typeof (resultTable[resultRow]) == 'undefined') {\n                resultTable[resultRow] = [];\n            }\n\n            for (col = 0; col < colLength; col++) {\n                if (typeof (arrayTable[row][col]) != 'undefined') {\n                    resultTable[resultRow].push(arrayTable[row][col]);\n                }\n            }\n\n            resultRow++;\n        }\n    }\n\n    return resultTable;\n};\n\n/**\n * transpose horizontal table to be vertical table, or vice-versa\n * e.g\n *  [\n *      [1,2,3,4],\n *      [1,2,3,4],\n *  ]\n *\n * to be\n *  [\n *      [1,1],\n *      [2,2],\n *      [3,3],\n *      [4,4],\n *  ]\n */\nexport function transposeTable(table: Array<Array<any>>): Array<Array<any>> {\n    var row, col, rowLength, colLength, newTable;\n\n    rowLength = table.length;\n    newTable = [];\n\n    for (row = 0; row < rowLength; row++) {\n        colLength = table[row].length;\n\n        for (col = 0; col < colLength; col++) {\n            if (typeof (newTable[col]) == 'undefined') {\n                newTable[col] = [];\n            }\n\n            newTable[col].push(table[row][col]);\n        }\n    }\n\n    return newTable;\n}\n\n/**\n * Translate all cell references in a formula by applying row and column offsets.\n * Respects absolute references ($ markers) and translates both individual cells and ranges.\n *\n * @param formula The formula to translate (must start with =)\n * @param cellRowOffset The row offset to apply to relative row references\n * @param cellColOffset The column offset to apply to relative column references\n * @returns The translated formula\n *\n * @example\n * translateFormula('=A1', 1, 1) // Returns '=B2'\n * translateFormula('=SUM(A1:B2)', 1, 1) // Returns '=SUM(B2:C3)'\n * translateFormula('=$A$1', 1, 1) // Returns '=$A$1' (absolute reference unchanged)\n * translateFormula('=A$1', 1, 1) // Returns '=B$1' (absolute row unchanged)\n */\nexport function translateFormula(formula: string, cellRowOffset: number, cellColOffset: number): string {\n    if (!formula.startsWith('=')) return formula;\n\n    // Remove leading =\n    let translated = formula.substring(1);\n\n    // First, match and translate cell ranges (A1:B2)\n    // We do this first to avoid double-processing individual cells in ranges\n    translated = translated.replace(\n        /(\\$?)([A-Z]+)(\\$?)(\\d+):(\\$?)([A-Z]+)(\\$?)(\\d+)/gi,\n        (match, col1Abs, col1, row1Abs, row1, col2Abs, col2, row2Abs, row2) => {\n            // Translate start of range\n            const col1Num = strToNum(col1.toUpperCase());\n            const row1Num = parseInt(row1);\n            const newCol1Num = col1Abs === '$' ? col1Num : col1Num + cellColOffset;\n            const newRow1Num = row1Abs === '$' ? row1Num : row1Num + cellRowOffset;\n            const newStart = `${col1Abs}${numToStr(newCol1Num)}${row1Abs}${newRow1Num}`;\n\n            // Translate end of range\n            const col2Num = strToNum(col2.toUpperCase());\n            const row2Num = parseInt(row2);\n            const newCol2Num = col2Abs === '$' ? col2Num : col2Num + cellColOffset;\n            const newRow2Num = row2Abs === '$' ? row2Num : row2Num + cellRowOffset;\n            const newEnd = `${col2Abs}${numToStr(newCol2Num)}${row2Abs}${newRow2Num}`;\n\n            return `${newStart}:${newEnd}`;\n        }\n    );\n\n    // Then match individual cell references (A1, $A$1, A$1, $A1)\n    // Use (?<![A-Z0-9]) to ensure we don't match in the middle of a word or after a colon\n    translated = translated.replace(\n        /(?<![A-Z0-9:])(\\$?)([A-Z]+)(\\$?)(\\d+)(?![:A-Z0-9])/gi,\n        (match, colAbs, col, rowAbs, row) => {\n            const colNum = strToNum(col.toUpperCase());\n            const rowNum = parseInt(row);\n\n            const newColNum = colAbs === '$' ? colNum : colNum + cellColOffset;\n            const newRowNum = rowAbs === '$' ? rowNum : rowNum + cellRowOffset;\n\n            return `${colAbs}${numToStr(newColNum)}${rowAbs}${newRowNum}`;\n        }\n    );\n\n    return '=' + translated;\n}\n\n/**\n * Update references to a moved range in a formula\n * When a range is moved from oldRange to newRange, all formulas that reference\n * cells in oldRange need to be updated to reference newRange instead\n *\n * @param formula The formula to update\n * @param oldStartCol The starting column of the old range (e.g., 'A')\n * @param oldStartRow The starting row of the old range (e.g., 1)\n * @param oldEndCol The ending column of the old range (e.g., 'B')\n * @param oldEndRow The ending row of the old range (e.g., 2)\n * @param newStartCol The starting column of the new range\n * @param newStartRow The starting row of the new range\n * @param newEndCol The ending column of the new range\n * @param newEndRow The ending row of the new range\n * @returns The updated formula\n *\n * @example\n * updateMovedReferences('=SUM(A1:B2)', 'A', 1, 'B', 2, 'C', 3, 'D', 4)\n * // Returns '=SUM(C3:D4)'\n *\n * updateMovedReferences('=A1+B1', 'A', 1, 'B', 2, 'C', 3, 'D', 4)\n * // Returns '=C3+D3'\n */\nexport function updateMovedReferences(\n    formula: string,\n    oldStartCol: string,\n    oldStartRow: number,\n    oldEndCol: string,\n    oldEndRow: number,\n    newStartCol: string,\n    newStartRow: number,\n    newEndCol: string,\n    newEndRow: number\n): string {\n    if (!formula.startsWith('=')) return formula;\n\n    const oldStartColNum = strToNum(oldStartCol);\n    const oldEndColNum = strToNum(oldEndCol);\n    const newStartColNum = strToNum(newStartCol);\n    const newEndColNum = strToNum(newEndCol);\n\n    // Normalize ranges (ensure start <= end)\n    const oldMinRow = Math.min(oldStartRow, oldEndRow);\n    const oldMaxRow = Math.max(oldStartRow, oldEndRow);\n    const oldMinCol = Math.min(oldStartColNum, oldEndColNum);\n    const oldMaxCol = Math.max(oldStartColNum, oldEndColNum);\n\n    const newMinRow = Math.min(newStartRow, newEndRow);\n    const newMaxRow = Math.max(newStartRow, newEndRow);\n    const newMinCol = Math.min(newStartColNum, newEndColNum);\n    const newMaxCol = Math.max(newStartColNum, newEndColNum);\n\n    let translated = formula.substring(1);\n\n    // Update range references (A1:B2)\n    translated = translated.replace(\n        /(?<![A-Z0-9:])(\\$?)([A-Z]+)(\\$?)(\\d+):(\\$?)([A-Z]+)(\\$?)(\\d+)(?![:A-Z0-9])/gi,\n        (match, col1Abs, col1, row1Abs, row1, col2Abs, col2, row2Abs, row2) => {\n            const col1Num = strToNum(col1.toUpperCase());\n            const row1Num = parseInt(row1);\n            const col2Num = strToNum(col2.toUpperCase());\n            const row2Num = parseInt(row2);\n\n            // Check if this range overlaps with the moved range\n            const rangeMinCol = Math.min(col1Num, col2Num);\n            const rangeMaxCol = Math.max(col1Num, col2Num);\n            const rangeMinRow = Math.min(row1Num, row2Num);\n            const rangeMaxRow = Math.max(row1Num, row2Num);\n\n            // If the range matches the old range exactly, update it\n            if (rangeMinCol === oldMinCol && rangeMaxCol === oldMaxCol &&\n                rangeMinRow === oldMinRow && rangeMaxRow === oldMaxRow) {\n                const newCol1 = numToStr(newMinCol);\n                const newCol2 = numToStr(newMaxCol);\n                return `${col1Abs}${newCol1}${row1Abs}${newMinRow}:${col2Abs}${newCol2}${row2Abs}${newMaxRow}`;\n            }\n\n            return match;\n        }\n    );\n\n    // Update individual cell references\n    translated = translated.replace(\n        /(?<![A-Z0-9:])(\\$?)([A-Z]+)(\\$?)(\\d+)(?![:A-Z0-9])/gi,\n        (match, colAbs, col, rowAbs, row) => {\n            const colNum = strToNum(col.toUpperCase());\n            const rowNum = parseInt(row);\n\n            // Check if this cell is in the moved range\n            if (colNum >= oldMinCol && colNum <= oldMaxCol &&\n                rowNum >= oldMinRow && rowNum <= oldMaxRow) {\n                // Calculate relative position within old range\n                const relCol = colNum - oldMinCol;\n                const relRow = rowNum - oldMinRow;\n\n                // Apply to new range\n                const newColNum = newMinCol + relCol;\n                const newRowNum = newMinRow + relRow;\n\n                return `${colAbs}${numToStr(newColNum)}${rowAbs}${newRowNum}`;\n            }\n\n            return match;\n        }\n    );\n\n    return '=' + translated;\n}\n","import { Workbook } from './Workbook';\nimport { Cell } from './Cell';\nimport { Range } from './Range';\nimport { EventDispatcher } from './Utility/EventDispatcher';\nimport { SheetEvent, SheetState } from './Sheet/SheetEvent';\nimport { CellRegistry } from './Sheet/CellRegistry';\nimport { DependencyTree } from './Workbook/DependencyTree';\nimport { DependencyBuilder } from './Workbook/DependencyBuilder';\nimport { CellData } from './Workbook/Data';\nimport { strToNum, numToStr, translateFormula, updateMovedReferences, getCellsInRange } from './Utility/Utility';\n\nexport class Sheet {\n    private _el!: any;\n    private _id : string;\n    private _cells! : CellRegistry;\n    private _states : Record<string, any> = {\n        calculation : SheetState.CALCULATION_IDLE,\n    };\n    private _variables : Record<string, any> = {};\n    private _depTree!: DependencyTree;\n    private _autoCalculate : boolean = true;\n\n    public needCalculate!: Array<string>;\n    public needRender!: Array<any>;\n    public workbook: Workbook;\n    public name: string;\n    public dispatcher: EventDispatcher;\n\n    constructor(\n        workbook : Workbook,\n        name : string,\n        dispatcher : EventDispatcher = new EventDispatcher()\n    ) {\n        this.workbook = workbook;\n        this.name = name;\n        this.dispatcher = dispatcher;\n        this._id = this._generateId();\n        this._cells = new CellRegistry(this, this.dispatcher);\n    }\n\n    /**\n     * Generate unique id for sheet.\n     *\n     * @returns generated id\n     */\n    private _generateId() : string {\n        return 'xxxx-xxxx-xxx-xxxx'.replace(/[x]/g, (c) => {\n            const random = Math.floor(Math.random() * 16);\n            return random.toString(16);\n        });\n    }\n\n    /**\n     * Get autoCalculate option\n     */\n    public get autoCalculate(): boolean {\n        return this._autoCalculate;\n    }\n\n    /**\n     * Set autoCalculate option\n     * When true, changes to cell values automatically trigger recalculation of dependents\n     * When false, manual calculation is required\n     */\n    public set autoCalculate(value: boolean) {\n        this._autoCalculate = value;\n    }\n\n    /**\n     * Recalculate all dirty cells (used for dynamic precedents)\n     */\n    public recalculateDirtyCells(): void {\n        // Temporarily disable auto-calculate to avoid infinite recursion\n        const wasAutoCalculate = this._autoCalculate;\n        this._autoCalculate = false;\n\n        this._cells.each((cell: Cell) => {\n            if (cell.isDirty()) {\n                cell.calculate();\n            }\n        });\n\n        // Restore auto-calculate setting\n        this._autoCalculate = wasAutoCalculate;\n    }\n\n    /**\n     * Set element where sheet should be mounted (optional)\n     */\n    public set element(el : any) {\n        el.setAttribute('data-calx-id', this.id);\n\n        this._el = el;\n\n        this.dispatcher.dispatch(SheetEvent.ELEMENT_ATTACHED, {sheet : this, el : el});\n    }\n\n    /**\n     * Get element where sheet is mounted\n     */\n    public get element() : any {\n        return this._el;\n    }\n\n    /**\n     * Get sheet id\n     */\n    public get id() : string {\n        return this._id;\n    }\n\n    /**\n     * Get cells collection\n     */\n    public get cells() : Record<string, Cell> {\n        return this._cells.all();\n    }\n\n    /**\n     * Listen to sheet events\n     * Convenience method that delegates to the dispatcher\n     */\n    public listen(event: string, callback: (data: any) => void): void {\n        this.dispatcher.listen(event, callback);\n    }\n\n    /**\n     * Calculate the entire sheet\n     *\n     * @param options calculation option\n     */\n    public calculate(options : {withoutEvent : boolean} = {withoutEvent : false}) {\n        if (options.withoutEvent) {\n            this.dispatcher.pauseListener();\n        }\n\n        // Get calculation order from dependency tree\n        if (this._depTree) {\n            const calculationOrder = this._depTree.topologicalSort();\n\n            // Calculate cells in order (level by level)\n            for (const level of calculationOrder) {\n                // Skip undefined levels\n                if (!level) continue;\n\n                for (const cell of level) {\n                    if (cell.isDirty() || !cell.isCalculated()) {\n                        cell.calculate();\n                    }\n                }\n            }\n\n            // After dependency tree calculation, also calculate cells with dynamic precedents\n            // that might not be in the tree (e.g., cells with only column/row references)\n            this._cells.each((cell: Cell) => {\n                if (cell.hasDynamicPrecedents() && (cell.isDirty() || !cell.isCalculated())) {\n                    cell.calculate();\n                }\n            });\n        } else {\n            // No dependency tree, calculate all cells\n            for (const address in this.cells) {\n                this.cells[address].calculate();\n            }\n        }\n\n        this.dispatcher.resumeListener();\n    }\n\n    /**\n     * Request particular cell to be calculated.\n     *\n     * @param address cell address\n     */\n    public requestCalculate(address : string) {\n        const cell = this.getCell(address);\n        if (cell) {\n            cell.markAsDirty();\n            cell.calculate();\n\n            // Mark dependents as dirty\n            const dependents = cell.getDependents();\n            for (const depAddress in dependents) {\n                dependents[depAddress].markAsDirty();\n            }\n        }\n    }\n\n    /**\n     * Get range (Excel-like behavior)\n     * - Single cell: getRange('A1') returns Range containing one cell\n     * - Multiple cells: getRange('A1:B10') returns Range containing multiple cells\n     */\n    public getRange(address: string): Range {\n        return new Range(this, address);\n    }\n\n    /**\n     * Get cell object directly (internal use)\n     * For external use, prefer getRange() which is more Excel-like\n     */\n    public getCellDirect(address: string): Cell {\n        return this._cells.get(address);\n    }\n\n    /**\n     * Alias for getRange (Excel-like)\n     * @deprecated Use getRange() instead\n     */\n    public getCell(address: string): Cell {\n        return this._cells.get(address);\n    }\n\n    public getCellValue(cellAddr: string): any {\n        return this.getRange(cellAddr).value;\n    }\n\n    public createCell(address : string, data? : CellData) : Cell {\n        const cell = this._cells.create(address, data || {});\n\n        // Mark cells with dynamic precedents that might reference this new cell\n        this.invalidateDynamicDependents(address);\n\n        return cell;\n    }\n\n    /**\n     * Evaluate the given formula.\n     */\n    public eval(formula : string) : any {\n        this.workbook.setActiveSheet(this);\n\n        return this.workbook.parser.parse(formula);\n    }\n\n    /**\n     * Build dependency tree for all registered cells\n     */\n    public buildDependencyTree() : void {\n        const builder = new DependencyBuilder();\n        builder.setWorkbook(this.workbook);\n        this._depTree = builder.build(this._cells);\n    }\n\n    /**\n     * Mark cells with dynamic precedents (column/row ranges) as dirty\n     * when a cell at the given address is created or modified\n     */\n    public invalidateDynamicDependents(address: string): void {\n        // Parse the address to get column and row\n        const match = address.match(/^([A-Z]+)(\\d+)$/);\n        if (!match) return;\n\n        const column = match[1];\n        const row = parseInt(match[2]);\n\n        // Check all cells in the sheet for dynamic dependencies\n        this._cells.each((cell: Cell) => {\n            if (cell.hasDynamicPrecedents()) {\n                if (cell.dependsOnColumn(column) || cell.dependsOnRow(row)) {\n                    cell.markAsDirty();\n                }\n            }\n        });\n    }\n\n    /**\n     * Get variable value\n     */\n    public getVariable(name: string): any {\n        return this._variables[name] !== undefined ? this._variables[name] : \"#NAME?\";\n    }\n\n    /**\n     * Set variable value\n     */\n    public setVariable(name: string, value: any): void {\n        this._variables[name] = value;\n    }\n\n    /**\n     * Get values from a range of cells\n     */\n    public getCellRangeValues(start: string, end: string): any[] {\n        // Implementation to get range of cells\n        // This should parse cell addresses and return array of values\n        const startColMatch = start.match(/[A-Z]+/);\n        const startRowMatch = start.match(/\\d+/);\n        const endColMatch = end.match(/[A-Z]+/);\n        const endRowMatch = end.match(/\\d+/);\n\n        if (!startColMatch || !startRowMatch || !endColMatch || !endRowMatch) {\n            throw new Error(`Invalid cell range: ${start}:${end}`);\n        }\n\n        const startCol = startColMatch[0];\n        const startRow = parseInt(startRowMatch[0]);\n        const endCol = endColMatch[0];\n        const endRow = parseInt(endRowMatch[0]);\n\n        const result: any[] = [];\n\n        // Convert column letters to numbers\n        const colToNum = (col: string) => {\n            let num = 0;\n            for (let i = 0; i < col.length; i++) {\n                num = num * 26 + (col.charCodeAt(i) - 64);\n            }\n            return num;\n        };\n\n        const numToCol = (num: number) => {\n            let col = '';\n            while (num > 0) {\n                const remainder = (num - 1) % 26;\n                col = String.fromCharCode(65 + remainder) + col;\n                num = Math.floor((num - 1) / 26);\n            }\n            return col;\n        };\n\n        const startColNum = colToNum(startCol);\n        const endColNum = colToNum(endCol);\n\n        // Return as flat array for compatibility with functions\n        for (let row = startRow; row <= endRow; row++) {\n            for (let col = startColNum; col <= endColNum; col++) {\n                const address = numToCol(col) + row;\n                const cell = this._cells.get(address);\n                result.push(cell ? cell.value : null);\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Get values from a range of rows\n     */\n    public getRowRangeValues(range: string): any[] {\n        // Parse range like \"1:3\" or \"2:2\"\n        const parts = range.replace(/\\$/g, '').split(':');\n        const startRow = parseInt(parts[0]);\n        const endRow = parseInt(parts[1]);\n\n        const result: any[] = [];\n        const allCells = this._cells.all();\n\n        // Find all cells in the row range\n        for (const address in allCells) {\n            const rowMatch = address.match(/(\\d+)$/);\n            if (rowMatch) {\n                const row = parseInt(rowMatch[1]);\n                if (row >= startRow && row <= endRow) {\n                    result.push(allCells[address].value);\n                }\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Get values from a range of columns\n     */\n    public getColumnRangeValues(range: string): any[] {\n        // Parse range like \"A:C\" or \"A:A\"\n        const parts = range.replace(/\\$/g, '').split(':');\n        const [startCol, endCol] = parts;\n\n        const colToNum = (col: string) => {\n            let num = 0;\n            for (let i = 0; i < col.length; i++) {\n                num = num * 26 + (col.charCodeAt(i) - 64);\n            }\n            return num;\n        };\n\n        const startColNum = colToNum(startCol);\n        const endColNum = colToNum(endCol);\n\n        const result: any[] = [];\n        const allCells = this._cells.all();\n\n        // Find all cells in the column range\n        for (const address in allCells) {\n            const colMatch = address.match(/^([A-Z]+)/);\n            if (colMatch) {\n                const colNum = colToNum(colMatch[1]);\n                if (colNum >= startColNum && colNum <= endColNum) {\n                    result.push(allCells[address].value);\n                }\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Load data from a 2D array into the sheet, starting at the anchor cell\n     * Formulas are automatically translated to the correct cell addresses based on the anchor offset\n     *\n     * @param data 2D array of values (numbers, strings, or formulas starting with =)\n     * @param anchor Cell address where the array should start (e.g., 'B2')\n     *\n     * @example\n     * sheet.loadArray([\n     *   [100, 200, 300],\n     *   [400, 500, 600],\n     *   ['=SUM(A1:C1)', 0, 0]\n     * ], 'B2');\n     * // Creates cells at B2, C2, D2, B3, C3, D3, B4, C4, D4\n     * // Formula '=SUM(A1:C1)' at array[2][0] becomes '=SUM(B2:D2)' at cell B4\n     */\n    public loadArray(data: any[][], anchor: string): void {\n        if (!Array.isArray(data) || data.length === 0) {\n            throw new Error('Data must be a non-empty 2D array');\n        }\n\n        // Parse anchor address to get column and row\n        const anchorMatch = anchor.match(/^([A-Z]+)(\\d+)$/i);\n        if (!anchorMatch) {\n            throw new Error(`Invalid anchor address: ${anchor}`);\n        }\n\n        const anchorCol = anchorMatch[1].toUpperCase();\n        const anchorRow = parseInt(anchorMatch[2]);\n        const anchorColNum = strToNum(anchorCol);\n\n        // Calculate the offset that applies to all formulas in the array\n        // This is the offset from the theoretical position (A1) to the actual anchor\n        const formulaRowOffset = anchorRow - 1;\n        const formulaColOffset = anchorColNum - 1;\n\n        // Iterate through the array and create cells\n        for (let rowIdx = 0; rowIdx < data.length; rowIdx++) {\n            const row = data[rowIdx];\n            if (!Array.isArray(row)) {\n                throw new Error(`Row ${rowIdx} is not an array`);\n            }\n\n            for (let colIdx = 0; colIdx < row.length; colIdx++) {\n                const value = row[colIdx];\n                const targetCol = numToStr(anchorColNum + colIdx);\n                const targetRow = anchorRow + rowIdx;\n                const targetAddress = `${targetCol}${targetRow}`;\n\n                // Determine if it's a formula or a value\n                if (typeof value === 'string' && value.startsWith('=')) {\n                    // Translate formula using the same offset for all cells\n                    const translatedFormula = translateFormula(value, formulaRowOffset, formulaColOffset);\n                    this.createCell(targetAddress, { formula: translatedFormula });\n                } else {\n                    // Regular value\n                    this.createCell(targetAddress, { value });\n                }\n            }\n        }\n    }\n\n    /**\n     * Move a range of cells to a new location\n     * - Moves cell values and formulas\n     * - Translates formulas within the moved cells\n     * - Updates references to moved cells in other formulas\n     * - Rebuilds dependency tree\n     *\n     * @param srcRange Source range address (e.g., 'A1:B2' or 'A1')\n     * @param dstAddress Destination starting address (e.g., 'C3')\n     *\n     * @example\n     * sheet.moveRange('A1:B2', 'D5');\n     * // Moves cells A1, A2, B1, B2 to D5, D6, E5, E6\n     * // Formula =SUM(A1:B2) in moved cells becomes =SUM(D5:E6)\n     * // Formula =A1+B1 in other cells becomes =D5+E5\n     */\n    public moveRange(srcRange: string, dstAddress: string): void {\n        // Parse source range\n        const srcParts = srcRange.includes(':') ? srcRange.split(':') : [srcRange, srcRange];\n        const srcStart = srcParts[0].trim().replace(/\\$/g, '');\n        const srcEnd = srcParts[1].trim().replace(/\\$/g, '');\n\n        const srcStartCol = srcStart.match(/[A-Z]+/)?.[0] || 'A';\n        const srcStartRow = parseInt(srcStart.match(/\\d+/)?.[0] || '1');\n        const srcEndCol = srcEnd.match(/[A-Z]+/)?.[0] || srcStartCol;\n        const srcEndRow = parseInt(srcEnd.match(/\\d+/)?.[0] || srcStartRow.toString());\n\n        // Parse destination\n        const dstCleaned = dstAddress.replace(/\\$/g, '');\n        const dstStartCol = dstCleaned.match(/[A-Z]+/)?.[0] || 'A';\n        const dstStartRow = parseInt(dstCleaned.match(/\\d+/)?.[0] || '1');\n\n        // Calculate range dimensions\n        const srcStartColNum = strToNum(srcStartCol);\n        const srcEndColNum = strToNum(srcEndCol);\n        const colCount = Math.abs(srcEndColNum - srcStartColNum) + 1;\n        const rowCount = Math.abs(srcEndRow - srcStartRow) + 1;\n\n        const dstStartColNum = strToNum(dstStartCol);\n        const dstEndColNum = dstStartColNum + colCount - 1;\n        const dstEndRow = dstStartRow + rowCount - 1;\n        const dstEndCol = numToStr(dstEndColNum);\n\n        // Calculate offset for translating formulas in moved cells\n        const rowOffset = dstStartRow - srcStartRow;\n        const colOffset = dstStartColNum - srcStartColNum;\n\n        // Get all cells in source range\n        const srcCellAddresses = getCellsInRange(\n            srcStart === srcEnd ? `${srcStart}:${srcEnd}` : srcRange\n        );\n\n        // Store cell data before moving\n        const cellData: Array<{ address: string; value: any; formula: string | null }> = [];\n        srcCellAddresses.forEach(addr => {\n            if (this._cells.has(addr)) {\n                const cell = this._cells.get(addr);\n                cellData.push({\n                    address: addr,\n                    value: cell.value,\n                    formula: cell.formula\n                });\n            }\n        });\n\n        // Remove source cells FIRST\n        srcCellAddresses.forEach(addr => {\n            if (this._cells.has(addr)) {\n                const cell = this._cells.get(addr);\n                this._cells.remove(cell);\n            }\n        });\n\n        // Create cells at destination with translated formulas\n        cellData.forEach((data) => {\n            const srcAddr = data.address;\n            const srcColMatch = srcAddr.match(/[A-Z]+/)?.[0] || 'A';\n            const srcRowMatch = parseInt(srcAddr.match(/\\d+/)?.[0] || '1');\n            const srcCol = strToNum(srcColMatch);\n            const srcRow = srcRowMatch;\n\n            // Calculate destination address\n            const dstCol = srcCol + colOffset;\n            const dstRow = srcRow + rowOffset;\n            const dstAddr = `${numToStr(dstCol)}${dstRow}`;\n\n            // Remove existing cell at destination if it exists\n            if (this._cells.has(dstAddr)) {\n                const existingCell = this._cells.get(dstAddr);\n                this._cells.remove(existingCell);\n            }\n\n            // Translate formula if exists\n            let newFormula = data.formula;\n            if (newFormula) {\n                newFormula = translateFormula(newFormula, rowOffset, colOffset);\n            }\n\n            // Create new cell\n            if (newFormula) {\n                this.createCell(dstAddr, { formula: newFormula });\n            } else {\n                this.createCell(dstAddr, { value: data.value });\n            }\n        });\n\n        // Update all formulas in the sheet that reference the moved range\n        // Do this AFTER creating destination cells so they exist when formulas are updated\n        this._cells.each((cell: Cell) => {\n            // Skip cells that are at the destination (just moved)\n            if (cell.address >= numToStr(dstStartColNum) + dstStartRow &&\n                cell.address <= numToStr(dstEndColNum) + dstEndRow) {\n                // This is a rough check - could be improved\n                return;\n            }\n\n            if (cell.formula) {\n                const updatedFormula = updateMovedReferences(\n                    cell.formula,\n                    srcStartCol, srcStartRow, srcEndCol, srcEndRow,\n                    dstStartCol, dstStartRow, dstEndCol, dstEndRow\n                );\n                if (updatedFormula !== cell.formula) {\n                    cell.formula = updatedFormula;\n                }\n            }\n        });\n\n        // Rebuild dependency tree\n        this.buildDependencyTree();\n    }\n\n    /**\n     * Copy a range of cells to a new location\n     * - Copies cell values and formulas\n     * - Translates formulas within the copied cells\n     * - Does NOT update references in other formulas (they still point to original)\n     * - Rebuilds dependency tree\n     *\n     * @param srcRange Source range address (e.g., 'A1:B2' or 'A1')\n     * @param dstAddress Destination starting address (e.g., 'C3')\n     *\n     * @example\n     * sheet.copyRange('A1:B2', 'D5');\n     * // Copies cells A1, A2, B1, B2 to D5, D6, E5, E6\n     * // Formula =SUM(A1:B2) in copied cells becomes =SUM(D5:E6)\n     * // Other formulas that reference A1:B2 remain unchanged\n     */\n    public copyRange(srcRange: string, dstAddress: string): void {\n        // Parse source range\n        const srcParts = srcRange.includes(':') ? srcRange.split(':') : [srcRange, srcRange];\n        const srcStart = srcParts[0].trim().replace(/\\$/g, '');\n        const srcEnd = srcParts[1].trim().replace(/\\$/g, '');\n\n        const srcStartCol = srcStart.match(/[A-Z]+/)?.[0] || 'A';\n        const srcStartRow = parseInt(srcStart.match(/\\d+/)?.[0] || '1');\n        const srcEndCol = srcEnd.match(/[A-Z]+/)?.[0] || srcStartCol;\n        const srcEndRow = parseInt(srcEnd.match(/\\d+/)?.[0] || srcStartRow.toString());\n\n        // Parse destination\n        const dstCleaned = dstAddress.replace(/\\$/g, '');\n        const dstStartCol = dstCleaned.match(/[A-Z]+/)?.[0] || 'A';\n        const dstStartRow = parseInt(dstCleaned.match(/\\d+/)?.[0] || '1');\n\n        // Calculate offset for translating formulas\n        const srcStartColNum = strToNum(srcStartCol);\n        const dstStartColNum = strToNum(dstStartCol);\n        const rowOffset = dstStartRow - srcStartRow;\n        const colOffset = dstStartColNum - srcStartColNum;\n\n        // Get all cells in source range\n        const srcCellAddresses = getCellsInRange(\n            srcStart === srcEnd ? `${srcStart}:${srcEnd}` : srcRange\n        );\n\n        // Collect all source cell data BEFORE writing (important for overlapping ranges)\n        const cellData: { srcAddr: string; dstAddr: string; value: any; formula: string }[] = [];\n\n        srcCellAddresses.forEach(srcAddr => {\n            if (this._cells.has(srcAddr)) {\n                const srcCell = this._cells.get(srcAddr);\n\n                // Calculate destination address\n                const srcColMatch = srcAddr.match(/[A-Z]+/)?.[0] || 'A';\n                const srcRowMatch = parseInt(srcAddr.match(/\\d+/)?.[0] || '1');\n                const srcCol = strToNum(srcColMatch);\n                const srcRow = srcRowMatch;\n\n                const dstCol = srcCol + colOffset;\n                const dstRow = srcRow + rowOffset;\n                const dstAddr = `${numToStr(dstCol)}${dstRow}`;\n\n                cellData.push({\n                    srcAddr,\n                    dstAddr,\n                    value: srcCell.value,\n                    formula: srcCell.formula\n                });\n            }\n        });\n\n        // Now write all destination cells\n        cellData.forEach(data => {\n            // Remove existing cell at destination if it exists\n            if (this._cells.has(data.dstAddr)) {\n                const existingCell = this._cells.get(data.dstAddr);\n                this._cells.remove(existingCell);\n            }\n\n            // Translate formula if exists\n            let newFormula = data.formula;\n            if (newFormula) {\n                newFormula = translateFormula(newFormula, rowOffset, colOffset);\n            }\n\n            // Create new cell at destination\n            if (newFormula) {\n                this.createCell(data.dstAddr, { formula: newFormula });\n            } else {\n                this.createCell(data.dstAddr, { value: data.value });\n            }\n        });\n\n        // Rebuild dependency tree\n        this.buildDependencyTree();\n    }\n}\n","import bessel from 'bessel';\nimport jStat from 'jstat';\n\nconst nil = new Error('#NULL!');\nconst div0 = new Error('#DIV/0!');\nconst value = new Error('#VALUE!');\nconst ref = new Error('#REF!');\nconst name = new Error('#NAME?');\nconst num = new Error('#NUM!');\nconst na = new Error('#N/A');\nconst error = new Error('#ERROR!');\nconst data = new Error('#GETTING_DATA');\n\nfunction flattenShallow(array) {\n  if (!array || !array.reduce) {\n    return [array]\n  }\n\n  return array.reduce((a, b) => {\n    const aIsArray = Array.isArray(a);\n    const bIsArray = Array.isArray(b);\n\n    if (aIsArray && bIsArray) {\n      return a.concat(b)\n    }\n\n    if (aIsArray) {\n      a.push(b);\n\n      return a\n    }\n\n    if (bIsArray) {\n      return [a].concat(b)\n    }\n\n    return [a, b]\n  })\n}\n\nfunction isFlat(array) {\n  if (!array) {\n    return false\n  }\n\n  for (let i = 0; i < array.length; ++i) {\n    if (Array.isArray(array[i])) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction flatten() {\n  let result;\n\n  if (arguments.length === 1) {\n    const argument = arguments[0];\n    result = isArrayLike(argument) ? argsToArray.apply(null, arguments) : [argument];\n  } else {\n    result = Array.from(arguments);\n  }\n\n  while (!isFlat(result)) {\n    result = flattenShallow(result);\n  }\n\n  return result\n}\n\nfunction isArrayLike(a) {\n  return a != null && typeof a.length === 'number' && typeof a !== 'string'\n}\n\nfunction argsToArray(args) {\n  const result = [];\n\n  arrayEach(args, (value) => {\n    result.push(value);\n  });\n\n  return result\n}\n\nfunction numbers() {\n  const possibleNumbers = flatten.apply(null, arguments);\n\n  return possibleNumbers.filter((el) => typeof el === 'number')\n}\n\nfunction cleanFloat(number) {\n  const power = 1e14;\n\n  return Math.round(number * power) / power\n}\n\nfunction parseBool(bool) {\n  if (typeof bool === 'boolean') {\n    return bool\n  }\n\n  if (bool instanceof Error) {\n    return bool\n  }\n\n  if (typeof bool === 'number') {\n    return bool !== 0\n  }\n\n  if (typeof bool === 'string') {\n    const up = bool.toUpperCase();\n\n    if (up === 'TRUE') {\n      return true\n    }\n\n    if (up === 'FALSE') {\n      return false\n    }\n  }\n\n  if (bool instanceof Date && !isNaN(bool)) {\n    return true\n  }\n\n  return value\n}\n\nfunction parseNumber(string) {\n  if (string instanceof Error) {\n    return string\n  }\n\n  if (string === undefined || string === null || string === '') {\n    return 0\n  }\n\n  if (typeof string === 'boolean') {\n    string = +string;\n  }\n\n  if (!isNaN(string)) {\n    return parseFloat(string)\n  }\n\n  return value\n}\n\nfunction parseString(string) {\n  if (string instanceof Error) {\n    return string\n  }\n\n  if (string === undefined || string === null) {\n    return ''\n  }\n\n  return string.toString()\n}\n\nfunction parseNumberArray(arr) {\n  let len;\n\n  if (!arr || (len = arr.length) === 0) {\n    return value\n  }\n\n  let parsed;\n\n  while (len--) {\n    if (arr[len] instanceof Error) {\n      return arr[len]\n    }\n\n    parsed = parseNumber(arr[len]);\n\n    if (parsed instanceof Error) {\n      return parsed\n    }\n\n    arr[len] = parsed;\n  }\n\n  return arr\n}\n\nfunction serialNumberToDate(serial) {\n  if (serial < 60) {\n    serial += 1;\n  }\n\n  const utc_days = Math.floor(serial - 25569);\n  const utc_value = utc_days * 86400;\n  const date_info = new Date(utc_value * 1000);\n  const fractional_day = serial - Math.floor(serial) + 0.0000001;\n\n  let total_seconds = Math.floor(86400 * fractional_day);\n\n  const seconds = total_seconds % 60;\n\n  total_seconds -= seconds;\n\n  const hours = Math.floor(total_seconds / (60 * 60));\n  const minutes = Math.floor(total_seconds / 60) % 60;\n  let days = date_info.getUTCDate();\n  let month = date_info.getUTCMonth();\n\n  if (serial >= 60 && serial < 61) {\n    days = 29;\n    month = 1;\n  }\n\n  return new Date(date_info.getUTCFullYear(), month, days, hours, minutes, seconds)\n}\n\nfunction parseDate(date) {\n  if (!isNaN(date)) {\n    if (date instanceof Date) {\n      return new Date(date)\n    }\n\n    const d = parseFloat(date);\n\n    if (d < 0 || d >= 2958466) {\n      return num\n    }\n\n    return serialNumberToDate(d)\n  }\n\n  if (typeof date === 'string') {\n    date = /(\\d{4})-(\\d\\d?)-(\\d\\d?)$/.test(date) ? new Date(date + 'T00:00:00.000') : new Date(date);\n\n    if (!isNaN(date)) {\n      return date\n    }\n  }\n\n  return value\n}\n\nfunction parseDateArray(arr) {\n  let len = arr.length;\n  let parsed;\n\n  while (len--) {\n    parsed = parseDate(arr[len]);\n\n    if (parsed === value) {\n      return parsed\n    }\n\n    arr[len] = parsed;\n  }\n\n  return arr\n}\n\nfunction anyError() {\n  for (let n = 0; n < arguments.length; n++) {\n    if (arguments[n] instanceof Error) {\n      return arguments[n]\n    }\n  }\n\n  return undefined\n}\n\nfunction isDefined(arg) {\n  return arg !== undefined && arg !== null\n}\n\nfunction anyIsError() {\n  let n = arguments.length;\n\n  while (n--) {\n    if (arguments[n] instanceof Error) {\n      return true\n    }\n  }\n\n  return false\n}\n\nfunction anyIsString() {\n  let n = arguments.length;\n\n  while (n--) {\n    if (typeof arguments[n] === 'string') {\n      return true\n    }\n  }\n\n  return false\n}\n\nfunction arrayValuesToNumbers(arr) {\n  let n = arr.length;\n  let el;\n\n  while (n--) {\n    el = arr[n];\n\n    if (typeof el === 'number') {\n      continue\n    }\n\n    if (el === true) {\n      arr[n] = 1;\n      continue\n    }\n\n    if (el === false) {\n      arr[n] = 0;\n      continue\n    }\n\n    if (typeof el === 'string') {\n      const number = parseNumber(el);\n\n      arr[n] = number instanceof Error ? 0 : number;\n    }\n  }\n\n  return arr\n}\n\nfunction rest(array, idx) {\n  idx = idx || 1;\n\n  if (!array || typeof array.slice !== 'function') {\n    return array\n  }\n\n  return array.slice(idx)\n}\n\nfunction initial(array, idx) {\n  idx = idx || 1;\n\n  if (!array || typeof array.slice !== 'function') {\n    return array\n  }\n\n  return array.slice(0, array.length - idx)\n}\n\nfunction arrayEach(array, iteratee) {\n  let index = -1;\n  const length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break\n    }\n  }\n\n  return array\n}\n\nfunction transpose(matrix) {\n  if (!matrix) {\n    return value\n  }\n\n  return matrix[0].map((col, i) => matrix.map((row) => row[i]))\n}\n\nconst d1900 = new Date(Date.UTC(1900, 0, 1));\nconst WEEK_STARTS = [\n  undefined,\n  0,\n  1,\n  undefined,\n  undefined,\n  undefined,\n  undefined,\n  undefined,\n  undefined,\n  undefined,\n  undefined,\n  undefined,\n  1,\n  2,\n  3,\n  4,\n  5,\n  6,\n  0\n];\nconst WEEK_TYPES = [\n  [],\n  [1, 2, 3, 4, 5, 6, 7],\n  [7, 1, 2, 3, 4, 5, 6],\n  [6, 0, 1, 2, 3, 4, 5],\n  [],\n  [],\n  [],\n  [],\n  [],\n  [],\n  [],\n  [7, 1, 2, 3, 4, 5, 6],\n  [6, 7, 1, 2, 3, 4, 5],\n  [5, 6, 7, 1, 2, 3, 4],\n  [4, 5, 6, 7, 1, 2, 3],\n  [3, 4, 5, 6, 7, 1, 2],\n  [2, 3, 4, 5, 6, 7, 1],\n  [1, 2, 3, 4, 5, 6, 7]\n];\nconst WEEKEND_TYPES = [\n  [],\n  [6, 0],\n  [0, 1],\n  [1, 2],\n  [2, 3],\n  [3, 4],\n  [4, 5],\n  [5, 6],\n  undefined,\n  undefined,\n  undefined,\n  [0, 0],\n  [1, 1],\n  [2, 2],\n  [3, 3],\n  [4, 4],\n  [5, 5],\n  [6, 6]\n];\n\n/**\n * Returns the serial number of a particular date.\n *\n * Category: Date and time\n *\n * @param {*} year Year\n * @param {*} month Month\n * @param {*} day Day\n * @returns\n */\nfunction DATE(year, month, day) {\n  let result;\n\n  year = parseNumber(year);\n  month = parseNumber(month);\n  day = parseNumber(day);\n\n  if (anyIsError(year, month, day)) {\n    result = value;\n  } else {\n    result = new Date(year, month - 1, day);\n\n    if (result.getFullYear() < 0) {\n      result = num;\n    }\n  }\n\n  return result\n}\n\n/**\n * Calculates the number of days, months, or years between two dates. This function is useful in formulas where you need to calculate an age.\n *\n * Category: Date and time\n *\n * @param {*} start_date A date that represents the first, or starting date of a given period.\n * @param {*} end_date A date that represents the last, or ending, date of the period.\n * @param {*} unit The type of information that you want returned, where:\n - \"Y\": The number of complete years in the period.\n - \"M\": The number of complete months in the period.\n - \"D\": The number of days in the period.\n - \"MD\": The difference between the days in start_date and end_date. The months and years of the dates are ignored.\n - \"YM\": The difference between the months in start_date and end_date. The days and years of the dates are ignored\n - \"YD\": The difference between the days of start_date and end_date. The years of the dates are ignored.\n * @returns\n */\nfunction DATEDIF(start_date, end_date, unit) {\n  unit = unit.toUpperCase();\n  start_date = parseDate(start_date);\n  end_date = parseDate(end_date);\n\n  const start_date_year = start_date.getFullYear();\n  const start_date_month = start_date.getMonth();\n  const start_date_day = start_date.getDate();\n  const end_date_year = end_date.getFullYear();\n  const end_date_month = end_date.getMonth();\n  const end_date_day = end_date.getDate();\n\n  let result;\n\n  switch (unit) {\n    case 'Y':\n      result = Math.floor(YEARFRAC(start_date, end_date));\n      break\n    case 'D':\n      result = DAYS(end_date, start_date);\n      break\n    case 'M':\n      result = end_date_month - start_date_month + 12 * (end_date_year - start_date_year);\n\n      if (end_date_day < start_date_day) {\n        result--;\n      }\n\n      break\n    case 'MD':\n      if (start_date_day <= end_date_day) {\n        result = end_date_day - start_date_day;\n      } else {\n        if (end_date_month === 0) {\n          start_date.setFullYear(end_date_year - 1);\n          start_date.setMonth(12);\n        } else {\n          start_date.setFullYear(end_date_year);\n          start_date.setMonth(end_date_month - 1);\n        }\n\n        result = DAYS(end_date, start_date);\n      }\n\n      break\n    case 'YM':\n      result = end_date_month - start_date_month + 12 * (end_date_year - start_date_year);\n\n      if (end_date_day < start_date_day) {\n        result--;\n      }\n\n      result = result % 12;\n      break\n    case 'YD':\n      if (end_date_month > start_date_month || (end_date_month === start_date_month && end_date_day < start_date_day)) {\n        start_date.setFullYear(end_date_year);\n      } else {\n        start_date.setFullYear(end_date_year - 1);\n      }\n\n      result = DAYS(end_date, start_date);\n      break\n  }\n\n  return result\n}\n\n/**\n * Converts a date in the form of text to a serial number.\n *\n * Category: Date and time\n *\n * @param {*} date_text Text that represents a date in an Excel date format, or a reference to a value that contains text that represents a date in an Excel date format.\n * @returns\n */\nfunction DATEVALUE(date_text) {\n  if (typeof date_text !== 'string') {\n    return value\n  }\n\n  const date = Date.parse(date_text);\n\n  if (isNaN(date)) {\n    return value\n  }\n\n  return new Date(date_text)\n}\n\n/**\n * Converts a serial number to a day of the month.\n *\n * Category: Date and time\n *\n * @param {*} serial_number The date of the day you are trying to find.\n * @returns\n */\nfunction DAY(serial_number) {\n  const date = parseDate(serial_number);\n\n  if (date instanceof Error) {\n    return date\n  }\n\n  return date.getDate()\n}\n\nfunction startOfDay(date) {\n  const newDate = new Date(date);\n  newDate.setHours(0, 0, 0, 0);\n\n  return newDate\n}\n\n/**\n * Returns the number of days between two dates.\n *\n * Category: Date and time\n *\n * @param {*} end_date Start_date and End_date are the two dates between which you want to know the number of days.\n * @param {*} start_date Start_date and End_date are the two dates between which you want to know the number of days.\n * @returns\n */\nfunction DAYS(end_date, start_date) {\n  end_date = parseDate(end_date);\n  start_date = parseDate(start_date);\n\n  if (end_date instanceof Error) {\n    return end_date\n  }\n\n  if (start_date instanceof Error) {\n    return start_date\n  }\n\n  return serial(startOfDay(end_date)) - serial(startOfDay(start_date))\n}\n\n/**\n * Calculates the number of days between two dates based on a 360-day year.\n *\n * Category: Date and time\n *\n * @param {*} start_date A date that represents the start date. If start_date occurs after end_date, the DAYS360 function returns a negative number.\n * @param {*} end_date A date that represents the end date.\n * @param {*} method Optional. A logical value that specifies whether to use the U.S. or European method in the calculation.\n * @returns\n */\nfunction DAYS360(start_date, end_date, method) {\n  method = parseBool(method || 'false');\n  start_date = parseDate(start_date);\n  end_date = parseDate(end_date);\n\n  if (start_date instanceof Error) {\n    return start_date\n  }\n\n  if (end_date instanceof Error) {\n    return end_date\n  }\n\n  if (method instanceof Error) {\n    return method\n  }\n\n  const sm = start_date.getMonth();\n  let em = end_date.getMonth();\n  let sd, ed;\n\n  if (method) {\n    sd = start_date.getDate() === 31 ? 30 : start_date.getDate();\n    ed = end_date.getDate() === 31 ? 30 : end_date.getDate();\n  } else {\n    const smd = new Date(start_date.getFullYear(), sm + 1, 0).getDate();\n    const emd = new Date(end_date.getFullYear(), em + 1, 0).getDate();\n    sd = start_date.getDate() === smd ? 30 : start_date.getDate();\n\n    if (end_date.getDate() === emd) {\n      if (sd < 30) {\n        em++;\n        ed = 1;\n      } else {\n        ed = 30;\n      }\n    } else {\n      ed = end_date.getDate();\n    }\n  }\n\n  return 360 * (end_date.getFullYear() - start_date.getFullYear()) + 30 * (em - sm) + (ed - sd)\n}\n\n/**\n * Returns the serial number of the date that is the indicated number of months before or after the start date.\n *\n * Category: Date and time\n *\n * @param {*} start_date A date that represents the start date.\n * @param {*} months The number of months before or after start_date. A positive value for months yields a future date; a negative value yields a past date.\n * @returns\n */\nfunction EDATE(start_date, months) {\n  start_date = parseDate(start_date);\n\n  if (start_date instanceof Error) {\n    return start_date\n  }\n\n  if (isNaN(months)) {\n    return value\n  }\n\n  months = parseInt(months, 10);\n  start_date.setMonth(start_date.getMonth() + months);\n\n  return start_date\n}\n\n/**\n * Returns the serial number of the last day of the month before or after a specified number of months.\n *\n * Category: Date and time\n *\n * @param {*} start_date A date that represents the starting date.\n * @param {*} months The number of months before or after start_date. A positive value for months yields a future date; a negative value yields a past date.\n * @returns\n */\nfunction EOMONTH(start_date, months) {\n  start_date = parseDate(start_date);\n\n  if (start_date instanceof Error) {\n    return start_date\n  }\n\n  if (isNaN(months)) {\n    return value\n  }\n\n  months = parseInt(months, 10);\n\n  return new Date(start_date.getFullYear(), start_date.getMonth() + months + 1, 0)\n}\n\n/**\n * Converts a serial number to an hour.\n *\n * Category: Date and time\n *\n * @param {*} serial_number The time that contains the hour you want to find. Times may be entered as text strings within quotation marks (for example, \"6:45 PM\"), as decimal numbers (for example, 0.78125, which represents 6:45 PM), or as results of other formulas or functions (for example, TIMEVALUE(\"6:45 PM\")).\n * @returns\n */\nfunction HOUR(serial_number) {\n  serial_number = parseDate(serial_number);\n\n  if (serial_number instanceof Error) {\n    return serial_number\n  }\n\n  return serial_number.getHours()\n}\n\n/**\n * Formula.js only\n *\n * @param {*} second\n * @returns\n */\nfunction INTERVAL(second) {\n  if (typeof second !== 'number' && typeof second !== 'string') {\n    return value\n  } else {\n    second = parseInt(second, 10);\n  }\n\n  let year = Math.floor(second / 946080000);\n  second = second % 946080000;\n  let month = Math.floor(second / 2592000);\n  second = second % 2592000;\n  let day = Math.floor(second / 86400);\n  second = second % 86400;\n\n  let hour = Math.floor(second / 3600);\n  second = second % 3600;\n  let min = Math.floor(second / 60);\n  second = second % 60;\n  let sec = second;\n\n  year = year > 0 ? year + 'Y' : '';\n  month = month > 0 ? month + 'M' : '';\n  day = day > 0 ? day + 'D' : '';\n  hour = hour > 0 ? hour + 'H' : '';\n  min = min > 0 ? min + 'M' : '';\n  sec = sec > 0 ? sec + 'S' : '';\n\n  return 'P' + year + month + day + 'T' + hour + min + sec\n}\n\n/**\n * Returns the number of the ISO week number of the year for a given date.\n *\n * Category: Date and time\n *\n * @param {*} date Date is the date-time code used by Excel for date and time calculation.\n * @returns\n */\nfunction ISOWEEKNUM(date) {\n  date = parseDate(date);\n\n  if (date instanceof Error) {\n    return date\n  }\n\n  date = startOfDay(date);\n  date.setDate(date.getDate() + 4 - (date.getDay() || 7));\n  const yearStart = new Date(date.getFullYear(), 0, 1);\n\n  return Math.ceil(((date - yearStart) / 86400000 + 1) / 7)\n}\n\n/**\n * Converts a serial number to a minute.\n *\n * Category: Date and time\n *\n * @param {*} serial_number The time that contains the minute you want to find. Times may be entered as text strings within quotation marks (for example, \"6:45 PM\"), as decimal numbers (for example, 0.78125, which represents 6:45 PM), or as results of other formulas or functions (for example, TIMEVALUE(\"6:45 PM\")).\n * @returns\n */\nfunction MINUTE(serial_number) {\n  serial_number = parseDate(serial_number);\n\n  if (serial_number instanceof Error) {\n    return serial_number\n  }\n\n  return serial_number.getMinutes()\n}\n\n/**\n * Converts a serial number to a month.\n *\n * Category: Date and time\n *\n * @param {*} serial_number The date of the month you are trying to find.\n * @returns\n */\nfunction MONTH(serial_number) {\n  serial_number = parseDate(serial_number);\n\n  if (serial_number instanceof Error) {\n    return serial_number\n  }\n\n  return serial_number.getMonth() + 1\n}\n\n/**\n * Returns the number of whole workdays between two dates.\n *\n * Category: Date and time\n *\n * @param {*} start_date A date that represents the start date.\n * @param {*} end_date A date that represents the end date.\n * @param {*} holidays Optional. An optional range of one or more dates to exclude from the working calendar, such as state and federal holidays and floating holidays. The list can be either a range of values that contains the dates or an array constant of the serial numbers that represent the dates.\n * @returns\n */\nfunction NETWORKDAYS(start_date, end_date, holidays) {\n  return NETWORKDAYS.INTL(start_date, end_date, 1, holidays)\n}\n\n/**\n * Returns the number of whole workdays between two dates using parameters to indicate which and how many days are weekend days.\n *\n * Category: Date and time\n *\n * @param {*} start_date The date for from which the difference is to be computed. The start_date can be earlier than, the same as, or later than the end_date.\n * @param {*} end_date The date for to which the difference is to be computed.\n * @param {*} weekend Optional. Indicates the days of the week that are weekend days and are not included in the number of whole working days between start_date and end_date. Weekend is a weekend number or string that specifies when weekends occur. Weekend number values indicate the following weekend days:\n * @param {*} holidays Optional. An optional set of one or more dates that are to be excluded from the working day calendar. holidays shall be a range of values that contain the dates, or an array constant of the serial values that represent those dates. The ordering of dates or serial values in holidays can be arbitrary.\n * @returns\n */\nNETWORKDAYS.INTL = (start_date, end_date, weekend, holidays) => {\n  start_date = parseDate(start_date);\n\n  if (start_date instanceof Error) {\n    return start_date\n  }\n\n  end_date = parseDate(end_date);\n\n  if (end_date instanceof Error) {\n    return end_date\n  }\n\n  let isMask = false;\n  const maskDays = [];\n  const maskIndex = [1, 2, 3, 4, 5, 6, 0];\n  const maskRegex = new RegExp('^[0|1]{7}$');\n\n  if (weekend === undefined) {\n    weekend = WEEKEND_TYPES[1];\n  } else if (typeof weekend === 'string' && maskRegex.test(weekend)) {\n    isMask = true;\n    weekend = weekend.split('');\n\n    for (let i = 0; i < weekend.length; i++) {\n      if (weekend[i] === '1') {\n        maskDays.push(maskIndex[i]);\n      }\n    }\n  } else {\n    weekend = WEEKEND_TYPES[weekend];\n  }\n\n  if (!(weekend instanceof Array)) {\n    return value\n  }\n\n  if (holidays === undefined) {\n    holidays = [];\n  } else if (!(holidays instanceof Array)) {\n    holidays = [holidays];\n  }\n\n  for (let i = 0; i < holidays.length; i++) {\n    const h = parseDate(holidays[i]);\n\n    if (h instanceof Error) {\n      return h\n    }\n\n    holidays[i] = h;\n  }\n\n  const days = Math.round((end_date - start_date) / (1000 * 60 * 60 * 24)) + 1;\n  let total = days;\n  const day = start_date;\n\n  for (let i = 0; i < days; i++) {\n    const d = new Date().getTimezoneOffset() > 0 ? day.getUTCDay() : day.getDay();\n    let dec = isMask ? maskDays.includes(d) : d === weekend[0] || d === weekend[1];\n\n    for (let j = 0; j < holidays.length; j++) {\n      const holiday = holidays[j];\n\n      if (\n        holiday.getDate() === day.getDate() &&\n        holiday.getMonth() === day.getMonth() &&\n        holiday.getFullYear() === day.getFullYear()\n      ) {\n        dec = true;\n        break\n      }\n    }\n\n    if (dec) {\n      total--;\n    }\n\n    day.setDate(day.getDate() + 1);\n  }\n\n  return total\n};\n\n/**\n * Returns the serial number of the current date and time.\n *\n * Category: Date and time\n *\n * @returns\n */\nfunction NOW() {\n  return new Date()\n}\n\n/**\n * Converts a serial number to a second.\n *\n * Category: Date and time\n *\n * @param {*} serial_number The time that contains the seconds you want to find. Times may be entered as text strings within quotation marks (for example, \"6:45 PM\"), as decimal numbers (for example, 0.78125, which represents 6:45 PM), or as results of other formulas or functions (for example, TIMEVALUE(\"6:45 PM\")).\n * @returns\n */\nfunction SECOND(serial_number) {\n  serial_number = parseDate(serial_number);\n\n  if (serial_number instanceof Error) {\n    return serial_number\n  }\n\n  return serial_number.getSeconds()\n}\n\n/**\n * Returns the serial number of a particular time.\n *\n * Category: Date and time\n *\n * @param {*} hour A number from 0 (zero) to 32767 representing the hour. Any value greater than 23 will be divided by 24 and the remainder will be treated as the hour value. For example, TIME(27,0,0) = TIME(3,0,0) = .125 or 3:00 AM.\n * @param {*} minute A number from 0 to 32767 representing the minute. Any value greater than 59 will be converted to hours and minutes. For example, TIME(0,750,0) = TIME(12,30,0) = .520833 or 12:30 PM.\n * @param {*} second A number from 0 to 32767 representing the second. Any value greater than 59 will be converted to hours, minutes, and seconds. For example, TIME(0,0,2000) = TIME(0,33,22) = .023148 or 12:33:20 AM\n * @returns\n */\nfunction TIME(hour, minute, second) {\n  hour = parseNumber(hour);\n  minute = parseNumber(minute);\n  second = parseNumber(second);\n\n  if (anyIsError(hour, minute, second)) {\n    return value\n  }\n\n  if (hour < 0 || minute < 0 || second < 0) {\n    return num\n  }\n\n  return (3600 * hour + 60 * minute + second) / 86400\n}\n\n/**\n * Converts a time in the form of text to a serial number.\n *\n * Category: Date and time\n *\n * @param {*} time_text A text string that represents a time in any one of the Microsoft Excel time formats; for example, \"6:45 PM\" and \"18:45\" text strings within quotation marks that represent time.\n * @returns\n */\nfunction TIMEVALUE(time_text) {\n  time_text = parseDate(time_text);\n\n  if (time_text instanceof Error) {\n    return time_text\n  }\n\n  return (3600 * time_text.getHours() + 60 * time_text.getMinutes() + time_text.getSeconds()) / 86400\n}\n\n/**\n * Returns the serial number of today's date.\n *\n * Category: Date and time\n *\n * @returns\n */\nfunction TODAY() {\n  return startOfDay(new Date())\n}\n\n/**\n * Converts a serial number to a day of the week.\n *\n * Category: Date and time\n *\n * @param {*} serial_number A sequential number that represents the date of the day you are trying to find.\n * @param {*} return_type Optional. A number that determines the type of return value.\n * @returns\n */\nfunction WEEKDAY(serial_number, return_type) {\n  serial_number = parseDate(serial_number);\n\n  if (serial_number instanceof Error) {\n    return serial_number\n  }\n\n  if (return_type === undefined) {\n    return_type = 1;\n  }\n\n  const day = serial_number.getDay();\n\n  return WEEK_TYPES[return_type][day]\n}\n\n/**\n * Converts a serial number to a number representing where the week falls numerically with a year.\n *\n * Category: Date and time\n *\n * @param {*} serial_number A date within the week.\n * @param {*} return_type Optional. A number that determines on which day the week begins. The default is 1.\n * @returns\n */\nfunction WEEKNUM(serial_number, return_type) {\n  serial_number = parseDate(serial_number);\n\n  if (serial_number instanceof Error) {\n    return serial_number\n  }\n\n  if (return_type === undefined) {\n    return_type = 1;\n  }\n\n  if (return_type === 21) {\n    return ISOWEEKNUM(serial_number)\n  }\n\n  const week_start = WEEK_STARTS[return_type];\n  let jan = new Date(serial_number.getFullYear(), 0, 1);\n  const inc = jan.getDay() < week_start ? 1 : 0;\n  jan -= Math.abs(jan.getDay() - week_start) * 24 * 60 * 60 * 1000;\n\n  return Math.floor((serial_number - jan) / (1000 * 60 * 60 * 24) / 7 + 1) + inc\n}\n\n/**\n * Returns the serial number of the date before or after a specified number of workdays.\n *\n * Category: Date and time\n *\n * @param {*} start_date A date that represents the start date.\n * @param {*} days The number of nonweekend and nonholiday days before or after start_date. A positive value for days yields a future date; a negative value yields a past date.\n * @param {*} holidays Optional. An optional list of one or more dates to exclude from the working calendar, such as state and federal holidays and floating holidays. The list can be either a range of values that contain the dates or an array constant of the serial numbers that represent the dates.\n * @returns\n */\nfunction WORKDAY(start_date, days, holidays) {\n  return WORKDAY.INTL(start_date, days, 1, holidays)\n}\n\n/**\n * Returns the serial number of the date before or after a specified number of workdays using parameters to indicate which and how many days are weekend days.\n *\n * Category: Date and time\n *\n * @param {*} start_date The start date, truncated to integer.\n * @param {*} days The number of workdays before or after the start_date. A positive value yields a future date; a negative value yields a past date; a zero value yields the start_date. Day-offset is truncated to an integer.\n * @param {*} weekend Optional. Indicates the days of the week that are weekend days and are not considered working days. Weekend is a weekend number or string that specifies when weekends occur. Weekend number values indicate the following weekend days:\n * @param {*} holidays Optional. An optional set of one or more dates that are to be excluded from the working day calendar. Holidays shall be a range of values that contain the dates, or an array constant of the serial values that represent those dates. The ordering of dates or serial values in holidays can be arbitrary.\n * @returns\n */\nWORKDAY.INTL = (start_date, days, weekend, holidays) => {\n  start_date = parseDate(start_date);\n\n  if (start_date instanceof Error) {\n    return start_date\n  }\n\n  days = parseNumber(days);\n\n  if (days instanceof Error) {\n    return days\n  }\n\n  if (days < 0) {\n    return num\n  }\n\n  if (weekend === undefined) {\n    weekend = WEEKEND_TYPES[1];\n  } else {\n    weekend = WEEKEND_TYPES[weekend];\n  }\n\n  if (!(weekend instanceof Array)) {\n    return value\n  }\n\n  if (holidays === undefined) {\n    holidays = [];\n  } else if (!(holidays instanceof Array)) {\n    holidays = [holidays];\n  }\n\n  for (let i = 0; i < holidays.length; i++) {\n    const h = parseDate(holidays[i]);\n\n    if (h instanceof Error) {\n      return h\n    }\n\n    holidays[i] = h;\n  }\n\n  let d = 0;\n\n  while (d < days) {\n    start_date.setDate(start_date.getDate() + 1);\n    const day = start_date.getDay();\n\n    if (day === weekend[0] || day === weekend[1]) {\n      continue\n    }\n\n    for (let j = 0; j < holidays.length; j++) {\n      const holiday = holidays[j];\n\n      if (\n        holiday.getDate() === start_date.getDate() &&\n        holiday.getMonth() === start_date.getMonth() &&\n        holiday.getFullYear() === start_date.getFullYear()\n      ) {\n        d--;\n        break\n      }\n    }\n\n    d++;\n  }\n\n  return start_date\n};\n\n/**\n * Converts a serial number to a year.\n *\n * Category: Date and time\n *\n * @param {*} serial_number The date of the year you want to find.\n * @returns\n */\nfunction YEAR(serial_number) {\n  serial_number = parseDate(serial_number);\n\n  if (serial_number instanceof Error) {\n    return serial_number\n  }\n\n  return serial_number.getFullYear()\n}\n\nfunction isLeapYear(year) {\n  return new Date(year, 1, 29).getMonth() === 1\n}\n\n// TODO : Use DAYS ?\nfunction daysBetween(start_date, end_date) {\n  return Math.ceil((end_date - start_date) / 1000 / 60 / 60 / 24)\n}\n\n/**\n * Returns the year fraction representing the number of whole days between start_date and end_date.\n *\n * Category: Date and time\n *\n * @param {*} start_date A date that represents the start date.\n * @param {*} end_date A date that represents the end date.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction YEARFRAC(start_date, end_date, basis) {\n  start_date = parseDate(start_date);\n\n  if (start_date instanceof Error) {\n    return start_date\n  }\n\n  end_date = parseDate(end_date);\n\n  if (end_date instanceof Error) {\n    return end_date\n  }\n\n  basis = basis || 0;\n  let sd = start_date.getDate();\n  const sm = start_date.getMonth() + 1;\n  const sy = start_date.getFullYear();\n  let ed = end_date.getDate();\n  const em = end_date.getMonth() + 1;\n  const ey = end_date.getFullYear();\n\n  switch (basis) {\n    case 0:\n      // US (NASD) 30/360\n      if (sd === 31 && ed === 31) {\n        sd = 30;\n        ed = 30;\n      } else if (sd === 31) {\n        sd = 30;\n      } else if (sd === 30 && ed === 31) {\n        ed = 30;\n      }\n\n      return (ed + em * 30 + ey * 360 - (sd + sm * 30 + sy * 360)) / 360\n    case 1: {\n      // Actual/actual\n      const feb29Between = (date1, date2) => {\n        const year1 = date1.getFullYear();\n        const mar1year1 = new Date(year1, 2, 1);\n\n        if (isLeapYear(year1) && date1 < mar1year1 && date2 >= mar1year1) {\n          return true\n        }\n\n        const year2 = date2.getFullYear();\n        const mar1year2 = new Date(year2, 2, 1);\n\n        return isLeapYear(year2) && date2 >= mar1year2 && date1 < mar1year2\n      };\n\n      let ylength = 365;\n\n      if (sy === ey || (sy + 1 === ey && (sm > em || (sm === em && sd >= ed)))) {\n        if ((sy === ey && isLeapYear(sy)) || feb29Between(start_date, end_date) || (em === 1 && ed === 29)) {\n          ylength = 366;\n        }\n\n        return daysBetween(start_date, end_date) / ylength\n      }\n\n      const years = ey - sy + 1;\n      const days = (new Date(ey + 1, 0, 1) - new Date(sy, 0, 1)) / 1000 / 60 / 60 / 24;\n      const average = days / years;\n\n      return daysBetween(start_date, end_date) / average\n    }\n\n    case 2:\n      // Actual/360\n\n      return daysBetween(start_date, end_date) / 360\n    case 3:\n      // Actual/365\n\n      return daysBetween(start_date, end_date) / 365\n    case 4:\n      // European 30/360\n\n      return (ed + em * 30 + ey * 360 - (sd + sm * 30 + sy * 360)) / 360\n  }\n}\n\nfunction serial(date) {\n  const addOn = date > -2203891200000 ? 2 : 1;\n\n  return Math.ceil((date - d1900) / 86400000) + addOn\n}\n\nconst defaultOperator = '=';\nconst validSymbols = ['>', '>=', '<', '<=', '=', '<>'];\nconst _TOKEN_TYPE_OPERATOR = 'operator';\nconst _TOKEN_TYPE_LITERAL = 'literal';\nconst SUPPORTED_TOKENS = [_TOKEN_TYPE_OPERATOR, _TOKEN_TYPE_LITERAL];\n\nconst TOKEN_TYPE_OPERATOR = _TOKEN_TYPE_OPERATOR;\nconst TOKEN_TYPE_LITERAL = _TOKEN_TYPE_LITERAL;\n\n/**\n * Create token which describe passed symbol/value.\n *\n * @param {String} value Value/Symbol to describe.\n * @param {String} type Type of the token 'operator' or 'literal'.\n * @return {Object}\n */\nfunction createToken(value, type) {\n  if (SUPPORTED_TOKENS.indexOf(type) === -1) {\n    throw new Error('Unsupported token type: ' + type)\n  }\n\n  return {\n    value: value,\n    type: type\n  }\n}\n\n/**\n * Tries to cast numeric values to their type passed as a string.\n *\n * @param {*} value\n * @return {*}\n */\nfunction castValueToCorrectType(value) {\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  if (/^\\d+(\\.\\d+)?$/.test(value)) {\n    value = value.indexOf('.') === -1 ? parseInt(value, 10) : parseFloat(value);\n  }\n\n  return value\n}\n\n/**\n * Generate stream of tokens from passed expression.\n *\n * @param {String} expression\n * @return {String[]}\n */\nfunction tokenizeExpression(expression) {\n  const expressionLength = expression.length;\n  const tokens = [];\n  let cursorIndex = 0;\n  let processedValue = '';\n  let processedSymbol = '';\n\n  while (cursorIndex < expressionLength) {\n    const char = expression.charAt(cursorIndex);\n\n    switch (char) {\n      case '>':\n      case '<':\n      case '=':\n        processedSymbol = processedSymbol + char;\n\n        if (processedValue.length > 0) {\n          tokens.push(processedValue);\n          processedValue = '';\n        }\n\n        break\n      default:\n        if (processedSymbol.length > 0) {\n          tokens.push(processedSymbol);\n          processedSymbol = '';\n        }\n\n        processedValue = processedValue + char;\n        break\n    }\n\n    cursorIndex++;\n  }\n\n  if (processedValue.length > 0) {\n    tokens.push(processedValue);\n  }\n\n  if (processedSymbol.length > 0) {\n    tokens.push(processedSymbol);\n  }\n\n  return tokens\n}\n\n/**\n * Analyze and convert tokens to an object which describes their meaning.\n *\n * @param {String[]} tokens\n * @return {Object[]}\n */\nfunction analyzeTokens(tokens) {\n  let literalValue = '';\n  const analyzedTokens = [];\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n\n    if (i === 0 && validSymbols.indexOf(token) >= 0) {\n      analyzedTokens.push(createToken(token, TOKEN_TYPE_OPERATOR));\n    } else {\n      literalValue += token;\n    }\n  }\n\n  if (literalValue.length > 0) {\n    analyzedTokens.push(createToken(castValueToCorrectType(literalValue), TOKEN_TYPE_LITERAL));\n  }\n\n  if (analyzedTokens.length > 0 && analyzedTokens[0].type !== TOKEN_TYPE_OPERATOR) {\n    analyzedTokens.unshift(createToken(defaultOperator, TOKEN_TYPE_OPERATOR));\n  }\n\n  return analyzedTokens\n}\n\n/**\n * Compute/Evaluate an expression passed as an array of tokens.\n *\n * @param {Object[]} tokens\n * @return {Boolean}\n */\nfunction computeExpression(tokens) {\n  const values = [];\n  let operator;\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n\n    switch (token.type) {\n      case TOKEN_TYPE_OPERATOR:\n        operator = token.value;\n        break\n      case TOKEN_TYPE_LITERAL:\n        values.push(token.value);\n        break\n    }\n  }\n\n  return evaluate(values, operator)\n}\n\n/**\n * Evaluate values based on passed math operator.\n *\n * @param {*} values\n * @param {String} operator\n * @return {Boolean}\n */\nfunction evaluate(values, operator) {\n  let result = false;\n\n  switch (operator) {\n    case '>':\n      result = values[0] > values[1];\n      break\n    case '>=':\n      result = values[0] >= values[1];\n      break\n    case '<':\n      result = values[0] < values[1];\n      break\n    case '<=':\n      result = values[0] <= values[1];\n      break\n    case '=':\n      result = values[0] == values[1];\n      break\n    case '<>':\n      result = values[0] != values[1];\n      break\n  }\n\n  return result\n}\n\nfunction parse(expression) {\n  return analyzeTokens(tokenizeExpression(expression))\n}\n\nconst compute = computeExpression;\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns information about the formatting, location, or contents of a value.\n *\n * Category: Information\n *\n * @returns\n */\nfunction CELL() {\n  throw new Error('CELL is not implemented')\n}\n\nconst ERROR = {};\n\nERROR.TYPE = (error_val) => {\n  switch (error_val) {\n    case nil:\n      return 1\n    case div0:\n      return 2\n    case value:\n      return 3\n    case ref:\n      return 4\n    case name:\n      return 5\n    case num:\n      return 6\n    case na:\n      return 7\n    case data:\n      return 8\n  }\n\n  return na\n};\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns information about the current operating environment.\n *\n * Category: Information\n *\n * @returns\n */\nfunction INFO() {\n  throw new Error('INFO is not implemented')\n}\n\n/**\n * Returns TRUE if the value is blank.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISBLANK(value) {\n  return value === null\n}\n\n/**\n * Formula.js only\n *\n * @param {*} number\n * @returns\n */\nfunction ISBINARY(number) {\n  return /^[01]{1,10}$/.test(number)\n}\n\n/**\n * Returns TRUE if the value is any error value except #N/A.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISERR(value$1) {\n  return (\n    [value, ref, div0, num, name, nil].indexOf(value$1) >= 0 ||\n    (typeof value$1 === 'number' && (isNaN(value$1) || !isFinite(value$1)))\n  )\n}\n\n/**\n * Returns TRUE if the value is any error value.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISERROR(value) {\n  return ISERR(value) || value === na\n}\n\n/**\n * Returns TRUE if the number is even.\n *\n * Category: Information\n *\n * @param {*} number The value to test. If number is not an integer, it is truncated.\n * @returns\n */\nfunction ISEVEN(number) {\n  return !(Math.floor(Math.abs(number)) & 1)\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns TRUE if there is a reference to a value that contains a formula.\n *\n * Category: Information\n *\n * @param {*} reference Reference is a reference to the value you want to test. Reference can be a value reference, a formula, or a name that refers to a value.\n * @returns\n */\nfunction ISFORMULA() {\n  throw new Error('ISFORMULA is not implemented')\n}\n\n/**\n * Returns TRUE if the value is a logical value.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISLOGICAL(value) {\n  return value === true || value === false\n}\n\n/**\n * Returns TRUE if the value is the #N/A error value.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISNA(value) {\n  return value === na\n}\n\n/**\n * Returns TRUE if the value is not text.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISNONTEXT(value) {\n  return typeof value !== 'string'\n}\n\n/**\n * Returns TRUE if the value is a number.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISNUMBER(value) {\n  return typeof value === 'number' && !isNaN(value) && isFinite(value)\n}\n\n/**\n * Returns TRUE if the number is odd.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISODD(value) {\n  return !!(Math.floor(Math.abs(value)) & 1)\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns TRUE if the value is a reference.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISREF() {\n  throw new Error('ISREF is not implemented')\n}\n\n/**\n * Returns TRUE if the value is text.\n *\n * Category: Information\n *\n * @param {*} value The value that you want tested. The value argument can be a blank (empty value), error, logical value, text, number, or reference value, or a name referring to any of these.\n * @returns\n */\nfunction ISTEXT(value) {\n  return typeof value === 'string'\n}\n\n/**\n * Returns a value converted to a number.\n *\n * Category: Information\n *\n * @param {*} value The value you want converted. N converts values listed in the following table.\n * @returns\n */\nfunction N(value) {\n  if (ISNUMBER(value)) {\n    return value\n  }\n\n  if (value instanceof Date) {\n    return value.getTime()\n  }\n\n  if (value === true) {\n    return 1\n  }\n\n  if (value === false) {\n    return 0\n  }\n\n  if (ISERROR(value)) {\n    return value\n  }\n\n  return 0\n}\n\n/**\n * Returns the error value #N/A.\n *\n * Category: Information\n *\n * @returns\n */\nfunction NA() {\n  return na\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the sheet number of the referenced sheet.\n *\n * Category: Information\n *\n * @param {*} value Optional. Value is the name of a sheet or a reference for which you want the sheet number. If value is omitted, SHEET returns the number of the sheet that contains the function.\n * @returns\n */\nfunction SHEET() {\n  throw new Error('SHEET is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the number of sheets in a reference.\n *\n * Category: Information\n *\n * @param {*} reference Optional. Reference is a reference for which you want to know the number of sheets it contains. If Reference is omitted, SHEETS returns the number of sheets in the workbook that contains the function.\n * @returns\n */\nfunction SHEETS() {\n  throw new Error('SHEETS is not implemented')\n}\n\n/**\n * Returns a number indicating the data type of a value.\n *\n * Category: Information\n *\n * @param {*} value Can be any Microsoft Excel value, such as a number, text, logical value, and so on.\n * @returns\n */\nfunction TYPE(value) {\n  if (ISNUMBER(value)) {\n    return 1\n  }\n\n  if (ISTEXT(value)) {\n    return 2\n  }\n\n  if (ISLOGICAL(value)) {\n    return 4\n  }\n\n  if (ISERROR(value)) {\n    return 16\n  }\n\n  if (Array.isArray(value)) {\n    return 64\n  }\n}\n\n/**\n * Chooses a value from a list of values.\n *\n * Category: Lookup and reference\n *\n * @param {*} index_num Specifies which value argument is selected. Index_num must be a number between 1 and 254, or a formula or reference to a value containing a number between 1 and 254. If index_num is 1, CHOOSE returns value1; if it is 2, CHOOSE returns value2; and so on. If index_num is less than 1 or greater than the number of the last value in the list, CHOOSE returns the #VALUE! error value. If index_num is a fraction, it is truncated to the lowest integer before being used.\n - If index_num is 1, CHOOSE returns value1; if it is 2, CHOOSE returns value2; and so on.\n - If index_num is less than 1 or greater than the number of the last value in the list, CHOOSE returns the #VALUE! error value.\n - If index_num is a fraction, it is truncated to the lowest integer before being used.\n * @param {*} args value1, value2, ... Value 1 is required, subsequent values are optional. 1 to 254 value arguments from which CHOOSE selects a value or an action to perform based on index_num. The arguments can be numbers, value references, defined names, formulas, functions, or text.\n * @returns\n */\nfunction CHOOSE() {\n  if (arguments.length < 2) {\n    return na\n  }\n\n  const index = arguments[0];\n\n  if (index < 1 || index > 254) {\n    return value\n  }\n\n  if (arguments.length < index + 1) {\n    return value\n  }\n\n  return arguments[index]\n}\n\n/**\n * Returns the column number of a reference.\n *\n * Category: Lookup and reference\n *\n * @param {*} reference the value or range of values for which you want to return the column number.\n * @param {*} index\n * @returns\n */\nfunction COLUMN(reference, index) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (index < 0) {\n    return num\n  }\n\n  if (!(reference instanceof Array) || typeof index !== 'number') {\n    return value\n  }\n\n  if (reference.length === 0) {\n    return undefined\n  }\n\n  return jStat.col(reference, index)\n}\n\n/**\n * Returns the number of columns in a reference.\n *\n * Category: Lookup and reference\n *\n * @param {*} array An array or array formula, or a reference to a range of values for which you want the number of columns.\n * @returns\n */\nfunction COLUMNS(array) {\n  if (arguments.length !== 1) {\n    return na\n  }\n\n  if (!(array instanceof Array)) {\n    return value\n  }\n\n  if (array.length === 0) {\n    return 0\n  }\n\n  return jStat.cols(array)\n}\n\n/**\n * Looks in the top row of an array and returns the value of the indicated value.\n *\n * Category: Lookup and reference\n *\n * @param {*} lookup_value The value to be found in the first row of the table. Lookup_value can be a value, a reference, or a text string.\n * @param {*} table_array A table of information in which data is looked up. Use a reference to a range or a range name.\n * @param {*} row_index_num The row number in table_array from which the matching value will be returned. A row_index_num of 1 returns the first row value in table_array, a row_index_num of 2 returns the second row value in table_array, and so on. If row_index_num is less than 1, HLOOKUP returns the #VALUE! error value; if row_index_num is greater than the number of rows on table_array, HLOOKUP returns the #REF! error value.\n * @param {*} range_lookup Optional. A logical value that specifies whether you want HLOOKUP to find an exact match or an approximate match. If TRUE or omitted, an approximate match is returned. In other words, if an exact match is not found, the next largest value that is less than lookup_value is returned. If FALSE, HLOOKUP will find an exact match. If one is not found, the error value #N/A is returned.\n * @returns\n */\nfunction HLOOKUP(lookup_value, table_array, row_index_num, range_lookup) {\n  return VLOOKUP(lookup_value, transpose(table_array), row_index_num, range_lookup)\n}\n\n/**\n * Uses an index to choose a value from a reference or array.\n *\n * Category: Lookup and reference\n *\n * @param {*} array A range of values or an array constant.\n - If array contains only one row or column, the corresponding row_num or column_num argument is optional.\n - If array has more than one row and more than one column, and only row_num or column_num is used, INDEX returns an array of the entire row or column in array.\n * @param {*} row_num Required, unless column_num is present. Selects the row in array from which to return a value. If row_num is omitted, column_num is required.\n * @param {*} column_num Optional. Selects the column in array from which to return a value. If column_num is omitted, row_num is required.\n * @returns\n */\nfunction INDEX(array, row_num, column_num) {\n  const someError = anyError(array, row_num, column_num);\n\n  if (someError) {\n    return someError\n  }\n\n  if (!Array.isArray(array)) {\n    return value\n  }\n\n  const isOneDimensionRange = array.length > 0 && !Array.isArray(array[0]);\n\n  if (isOneDimensionRange && !column_num) {\n    column_num = row_num;\n    row_num = 1;\n  } else {\n    column_num = column_num || 1;\n    row_num = row_num || 1;\n  }\n\n  if (column_num < 0 || row_num < 0) {\n    return value\n  }\n\n  if (isOneDimensionRange && row_num === 1 && column_num <= array.length) {\n    return array[column_num - 1]\n  } else if (row_num <= array.length && column_num <= array[row_num - 1].length) {\n    return array[row_num - 1][column_num - 1]\n  }\n\n  return ref\n}\n\n/**\n * Looks up values in a vector or array.\n *\n * Category: Lookup and reference\n *\n * @param {*} lookup_value A value that LOOKUP searches for in an array. The lookup_value argument can be a number, text, a logical value, or a name or reference that refers to a value.\n - If LOOKUP can't find the value of lookup_value, it uses the largest value in the array that is less than or equal to lookup_value.\n - If the value of lookup_value is smaller than the smallest value in the first row or column (depending on the array dimensions), LOOKUP returns the #N/A error value.\n * @param {*} array A range of values that contains text, numbers, or logical values that you want to compare with lookup_value. The array form of LOOKUP is very similar to the HLOOKUP and VLOOKUP functions. The difference is that HLOOKUP searches for the value of lookup_value in the first row, VLOOKUP searches in the first column, and LOOKUP searches according to the dimensions of array.\n* @param {*} result_array Optional. A range that contains only one row or column. The result_array argument must be the same size as lookup_value. It has to be the same size.\n * @returns\n */\nfunction LOOKUP(lookup_value, array, result_array) {\n  array = flatten(array);\n  result_array = result_array ? flatten(result_array) : array;\n\n  const isNumberLookup = typeof lookup_value === 'number';\n  let result = na;\n\n  for (let i = 0; i < array.length; i++) {\n    if (array[i] === lookup_value) {\n      return result_array[i]\n    } else if (\n      (isNumberLookup && array[i] <= lookup_value) ||\n      (typeof array[i] === 'string' && array[i].localeCompare(lookup_value) < 0)\n    ) {\n      result = result_array[i];\n    } else if (isNumberLookup && array[i] > lookup_value) {\n      return result\n    }\n  }\n\n  return result\n}\n\n/**\n * Looks up values in a reference or array.\n *\n * Category: Lookup and reference\n *\n * @param {*} lookup_value The value that you want to match in lookup_array. For example, when you look up someone's number in a telephone book, you are using the person's name as the lookup value, but the telephone number is the value you want.The lookup_value argument can be a value (number, text, or logical value) or a value reference to a number, text, or logical value.\n * @param {*} lookup_array The range of values being searched.\n * @param {*} match_type Optional. The number -1, 0, or 1. The match_type argument specifies how Excel matches lookup_value with values in lookup_array. The default value for this argument is 1.\n * @returns\n */\nfunction MATCH(lookup_value, lookup_array, match_type) {\n  if (!lookup_value || !lookup_array) {\n    return na\n  }\n\n  if (arguments.length === 2) {\n    match_type = 1;\n  }\n\n  lookup_array = flatten(lookup_array);\n\n  if (!(lookup_array instanceof Array)) {\n    return na\n  }\n\n  if (match_type !== -1 && match_type !== 0 && match_type !== 1) {\n    return na\n  }\n\n  let index;\n  let indexValue;\n\n  for (let idx = 0; idx < lookup_array.length; idx++) {\n    if (match_type === 1) {\n      if (lookup_array[idx] === lookup_value) {\n        return idx + 1\n      } else if (lookup_array[idx] < lookup_value) {\n        if (!indexValue) {\n          index = idx + 1;\n          indexValue = lookup_array[idx];\n        } else if (lookup_array[idx] > indexValue) {\n          index = idx + 1;\n          indexValue = lookup_array[idx];\n        }\n      }\n    } else if (match_type === 0) {\n      if (typeof lookup_value === 'string' && typeof lookup_array[idx] === 'string') {\n        const lookupValueStr = lookup_value.toLowerCase().replace(/\\?/g, '.').replace(/\\*/g, '.*').replace(/~/g, '\\\\');\n        const regex = new RegExp('^' + lookupValueStr + '$');\n\n        if (regex.test(lookup_array[idx].toLowerCase())) {\n          return idx + 1\n        }\n      } else {\n        if (lookup_array[idx] === lookup_value) {\n          return idx + 1\n        }\n      }\n    } else if (match_type === -1) {\n      if (lookup_array[idx] === lookup_value) {\n        return idx + 1\n      } else if (lookup_array[idx] > lookup_value) {\n        if (!indexValue) {\n          index = idx + 1;\n          indexValue = lookup_array[idx];\n        } else if (lookup_array[idx] < indexValue) {\n          index = idx + 1;\n          indexValue = lookup_array[idx];\n        }\n      }\n    }\n  }\n\n  return index || na\n}\n\n/**\n * Returns the number of rows in a reference.\n *\n * Category: Lookup and reference\n *\n * @param {*} array An array, an array formula, or a reference to a range of values for which you want the number of rows.\n * @returns\n */\nfunction ROWS(array) {\n  if (arguments.length !== 1) {\n    return na\n  }\n\n  if (!(array instanceof Array)) {\n    return value\n  }\n\n  if (array.length === 0) {\n    return 0\n  }\n\n  return jStat.rows(array)\n}\n\n/**\n * Returns the transpose of an array.\n *\n * Category: Lookup and reference\n *\n * @param {*} array An array or range of values on a worksheet that you want to transpose. The transpose of an array is created by using the first row of the array as the first column of the new array, the second row of the array as the second column of the new array, and so on. If you're not sure of how to enter an array formula, see Create an array formula.\n * @returns\n */\nfunction TRANSPOSE(array) {\n  if (!array) {\n    return na\n  }\n\n  return jStat.transpose(array)\n}\n\n/**\n * Returns a list of unique values in a list or range.\n *\n * Category: Lookup and reference\n *\n * @returns\n */\nfunction UNIQUE() {\n  const result = [];\n\n  for (let i = 0; i < arguments.length; ++i) {\n    let hasElement = false;\n    const element = arguments[i];\n\n    // Check if we've already seen this element.\n\n    for (let j = 0; j < result.length; ++j) {\n      hasElement = result[j] === element;\n\n      if (hasElement) {\n        break\n      }\n    }\n\n    // If we did not find it, add it to the result.\n    if (!hasElement) {\n      result.push(element);\n    }\n  }\n\n  return result\n}\n\n/**\n * Looks in the first column of an array and moves across the row to return the value of a value.\n *\n * Category: Lookup and reference\n *\n * @param {*} lookup_value The value to be found in the first row of the table. Lookup_value can be a value, a reference, or a text string.\n * @param {*} table_array A table of information in which data is looked up. Use a reference to a range or a range name.\n * @param {*} col_index_num The row number in table_array from which the matching value will be returned. A row_index_num of 1 returns the first row value in table_array, a row_index_num of 2 returns the second row value in table_array, and so on. If row_index_num is less than 1, HLOOKUP returns the #VALUE! error value; if row_index_num is greater than the number of rows on table_array, HLOOKUP returns the #REF! error value.\n * @param {*} range_lookup Optional. A logical value that specifies whether you want HLOOKUP to find an exact match or an approximate match. If TRUE or omitted, an approximate match is returned. In other words, if an exact match is not found, the next largest value that is less than lookup_value is returned. If FALSE, HLOOKUP will find an exact match. If one is not found, the error value #N/A is returned.\n * @returns\n */\nfunction VLOOKUP(lookup_value, table_array, col_index_num, range_lookup) {\n  if (!table_array || !col_index_num) {\n    return na\n  }\n\n  range_lookup = !(range_lookup === 0 || range_lookup === false);\n  let result = na;\n  const isNumberLookup = typeof lookup_value === 'number';\n  let exactMatchOnly = false;\n\n  for (let i = 0; i < table_array.length; i++) {\n    const row = table_array[i];\n\n    if (row[0] === lookup_value) {\n      result = col_index_num < row.length + 1 ? row[col_index_num - 1] : ref;\n      break\n    } else if (\n      !exactMatchOnly &&\n      ((isNumberLookup && range_lookup && row[0] <= lookup_value) ||\n        (range_lookup && typeof row[0] === 'string' && row[0].localeCompare(lookup_value) < 0))\n    ) {\n      result = col_index_num < row.length + 1 ? row[col_index_num - 1] : ref;\n    }\n\n    if (isNumberLookup && row[0] > lookup_value) {\n      exactMatchOnly = true;\n    }\n  }\n\n  return result\n}\n\nconst SQRT2PI = 2.5066282746310002;\n\n/**\n * Returns the average of the absolute deviations of data points from their mean.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 arguments for which you want the average of the absolute deviations. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction AVEDEV() {\n  const flatArguments = flatten(arguments);\n  const flatArgumentsDefined = flatArguments.filter(isDefined);\n\n  if (flatArgumentsDefined.length === 0) {\n    return num\n  }\n\n  const range = parseNumberArray(flatArgumentsDefined);\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  return jStat.sum(jStat(range).subtract(jStat.mean(range)).abs()[0]) / range.length\n}\n\n/**\n * Returns the average of its arguments.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ...Numbers, value references or ranges for which you want the average.\n * @returns\n */\nfunction AVERAGE() {\n  const flatArguments = flatten(arguments);\n  const flatArgumentsDefined = flatArguments.filter(isDefined);\n\n  if (flatArgumentsDefined.length === 0) {\n    return div0\n  }\n\n  const someError = anyError.apply(undefined, flatArgumentsDefined);\n\n  if (someError) {\n    return someError\n  }\n\n  const range = numbers(flatArgumentsDefined);\n  const n = range.length;\n  let sum = 0;\n  let count = 0;\n  let result;\n\n  for (let i = 0; i < n; i++) {\n    sum += range[i];\n    count += 1;\n  }\n\n  result = sum / count;\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n/**\n * Returns the average of its arguments, including numbers, text, and logical values.\n *\n * Category: Statistical\n *\n * @param {*} args value1, value2, ... Value1 is required, subsequent values are optional. 1 to 255 values, ranges of values, or values for which you want the average.\n * @returns\n */\nfunction AVERAGEA() {\n  const flatArguments = flatten(arguments);\n  const flatArgumentsDefined = flatArguments.filter(isDefined);\n\n  if (flatArgumentsDefined.length === 0) {\n    return div0\n  }\n\n  const someError = anyError.apply(undefined, flatArgumentsDefined);\n\n  if (someError) {\n    return someError\n  }\n\n  const range = flatArgumentsDefined;\n  const n = range.length;\n  let sum = 0;\n  let count = 0;\n  let result;\n\n  for (let i = 0; i < n; i++) {\n    const el = range[i];\n\n    if (typeof el === 'number') {\n      sum += el;\n    }\n\n    if (el === true) {\n      sum++;\n    }\n\n    if (el !== null) {\n      count++;\n    }\n  }\n\n  result = sum / count;\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n/**\n * Returns the average (arithmetic mean) of all the values in a range that meet a given criteria.\n *\n * Category: Statistical\n *\n * @param {*} range One or more values to average, including numbers or names, arrays, or references that contain numbers.\n * @param {*} criteria The criteria in the form of a number, expression, value reference, or text that defines which values are averaged.\n * @param {*} average_range Optional. The actual set of values to average. If omitted, range is used.\n * @returns\n */\nfunction AVERAGEIF(range, criteria, average_range) {\n  if (arguments.length <= 1) {\n    return na\n  }\n\n  average_range = average_range || range;\n  const flatAverageRange = flatten(average_range);\n  const flatAverageRangeDefined = flatAverageRange.filter(isDefined);\n  average_range = parseNumberArray(flatAverageRangeDefined);\n\n  range = flatten(range);\n\n  if (average_range instanceof Error) {\n    return average_range\n  }\n\n  let average_count = 0;\n  let result = 0;\n  const isWildcard = criteria === void 0 || criteria === '*';\n  const tokenizedCriteria = isWildcard ? null : parse(criteria + '');\n\n  for (let i = 0; i < range.length; i++) {\n    const value = range[i];\n\n    if (isWildcard) {\n      result += average_range[i];\n      average_count++;\n    } else {\n      const tokens = [createToken(value, TOKEN_TYPE_LITERAL)].concat(tokenizedCriteria);\n\n      if (compute(tokens)) {\n        result += average_range[i];\n        average_count++;\n      }\n    }\n  }\n\n  return result / average_count\n}\n\n/**\n * Returns the average (arithmetic mean) of all values that meet multiple criteria.\n *\n * Category: Statistical\n *\n * @param {*} args One or more values to average, including numbers or names, arrays, or references that contain numbers.\n * @returns\n */\nfunction AVERAGEIFS() {\n  // Does not work with multi dimensional ranges yet!\n  // http://office.microsoft.com/en-001/excel-help/averageifs-function-HA010047493.aspx\n  const args = argsToArray(arguments);\n  const criteriaLength = (args.length - 1) / 2;\n  const range = flatten(args[0]);\n  let count = 0;\n  let result = 0;\n\n  for (let i = 0; i < range.length; i++) {\n    let isMeetCondition = false;\n\n    for (let j = 0; j < criteriaLength; j++) {\n      const value = args[2 * j + 1][i];\n      const criteria = args[2 * j + 2];\n      const isWildcard = criteria === void 0 || criteria === '*';\n      let computedResult = false;\n\n      if (isWildcard) {\n        computedResult = true;\n      } else {\n        const tokenizedCriteria = parse(criteria + '');\n        const tokens = [createToken(value, TOKEN_TYPE_LITERAL)].concat(tokenizedCriteria);\n\n        computedResult = compute(tokens);\n      }\n\n      // Criterias are calculated as AND so any `false` breakes the loop as unmeet condition\n      if (!computedResult) {\n        isMeetCondition = false;\n        break\n      }\n\n      isMeetCondition = true;\n    }\n\n    if (isMeetCondition) {\n      result += range[i];\n      count++;\n    }\n  }\n\n  const average = result / count;\n\n  return isNaN(average) ? 0 : average\n}\n\nconst BETA = {};\n\n/**\n * Returns the beta cumulative distribution function.\n *\n * Category: Statistical\n *\n * @param {*} x The value between A and B at which to evaluate the function\n * @param {*} alpha A parameter of the distribution.\n * @param {*} beta A parameter of the distribution.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, BETA.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @param {*} a Optional. A lower bound to the interval of x.\n * @param {*} b Optional. An upper bound to the interval of x.\n * @returns\n */\nBETA.DIST = function (x, alpha, beta, cumulative, a, b) {\n  if (arguments.length < 4) {\n    return value\n  }\n\n  a = a === undefined ? 0 : a;\n  b = b === undefined ? 1 : b;\n\n  x = parseNumber(x);\n  alpha = parseNumber(alpha);\n  beta = parseNumber(beta);\n  a = parseNumber(a);\n  b = parseNumber(b);\n\n  if (anyIsError(x, alpha, beta, a, b)) {\n    return value\n  }\n\n  x = (x - a) / (b - a);\n\n  return cumulative ? jStat.beta.cdf(x, alpha, beta) : jStat.beta.pdf(x, alpha, beta)\n};\n\n/**\n * Returns the inverse of the cumulative distribution function for a specified beta distribution.\n *\n * Category: Statistical\n *\n * @param {*} probability A probability associated with the beta distribution.\n * @param {*} alpha A parameter of the distribution.\n * @param {*} beta A parameter the distribution.\n * @param {*} a Optional. A lower bound to the interval of x.\n * @param {*} b Optional. An upper bound to the interval of x.\n * @returns\n */\nBETA.INV = (probability, alpha, beta, a, b) => {\n  a = a === undefined ? 0 : a;\n  b = b === undefined ? 1 : b;\n  probability = parseNumber(probability);\n  alpha = parseNumber(alpha);\n  beta = parseNumber(beta);\n  a = parseNumber(a);\n  b = parseNumber(b);\n\n  if (anyIsError(probability, alpha, beta, a, b)) {\n    return value\n  }\n\n  return jStat.beta.inv(probability, alpha, beta) * (b - a) + a\n};\n\nconst BINOM = {};\n\n/**\n * Returns the individual term binomial distribution probability.\n *\n * Category: Statistical\n *\n * @param {*} number_s The number of successes in trials.\n * @param {*} trials The number of independent trials.\n * @param {*} probability_s The probability of success on each trial.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, then BINOM.DIST returns the cumulative distribution function, which is the probability that there are at most number_s successes; if FALSE, it returns the probability mass function, which is the probability that there are number_s successes.\n * @returns\n */\nBINOM.DIST = (number_s, trials, probability_s, cumulative) => {\n  number_s = parseNumber(number_s);\n  trials = parseNumber(trials);\n  probability_s = parseNumber(probability_s);\n  cumulative = parseNumber(cumulative);\n\n  if (anyIsError(number_s, trials, probability_s, cumulative)) {\n    return value\n  }\n\n  return cumulative\n    ? jStat.binomial.cdf(number_s, trials, probability_s)\n    : jStat.binomial.pdf(number_s, trials, probability_s)\n};\n\n/**\n * Returns the probability of a trial result using a binomial distribution.\n *\n * Category: Statistical\n *\n * @param {*} trials The number of independent trials. Must be greater than or equal to 0.\n * @param {*} probability_s The probability of success in each trial. Must be greater than or equal to 0 and less than or equal to 1.\n * @param {*} number_s The number of successes in trials. Must be greater than or equal to 0 and less than or equal to Trials.\n * @param {*} number_s2 Optional. If provided, returns the probability that the number of successful trials will fall between Number_s and number_s2. Must be greater than or equal to Number_s and less than or equal to Trials.\n * @returns\n */\nBINOM.DIST.RANGE = (trials, probability_s, number_s, number_s2) => {\n  number_s2 = number_s2 === undefined ? number_s : number_s2;\n\n  trials = parseNumber(trials);\n  probability_s = parseNumber(probability_s);\n  number_s = parseNumber(number_s);\n  number_s2 = parseNumber(number_s2);\n\n  if (anyIsError(trials, probability_s, number_s, number_s2)) {\n    return value\n  }\n\n  let result = 0;\n\n  for (let i = number_s; i <= number_s2; i++) {\n    result += COMBIN(trials, i) * Math.pow(probability_s, i) * Math.pow(1 - probability_s, trials - i);\n  }\n\n  return result\n};\n\n/**\n * Returns the smallest value for which the cumulative binomial distribution is less than or equal to a criterion value.\n *\n * Category: Statistical\n *\n * @param {*} trials The number of Bernoulli trials.\n * @param {*} probability_s The probability of a success on each trial.\n * @param {*} alpha The criterion value.\n * @returns\n */\nBINOM.INV = (trials, probability_s, alpha) => {\n  trials = parseNumber(trials);\n  probability_s = parseNumber(probability_s);\n  alpha = parseNumber(alpha);\n\n  if (anyIsError(trials, probability_s, alpha)) {\n    return value\n  }\n\n  let x = 0;\n\n  while (x <= trials) {\n    if (jStat.binomial.cdf(x, trials, probability_s) >= alpha) {\n      return x\n    }\n\n    x++;\n  }\n};\n\nconst CHISQ = {};\n\n/**\n * Returns the cumulative beta probability density function.\n *\n * Category: Statistical\n *\n * @param {*} x The value at which you want to evaluate the distribution.\n * @param {*} deg_freedom The number of degrees of freedom.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, CHISQ.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @returns\n */\nCHISQ.DIST = (x, deg_freedom, cumulative) => {\n  x = parseNumber(x);\n  deg_freedom = parseNumber(deg_freedom);\n\n  if (anyIsError(x, deg_freedom)) {\n    return value\n  }\n\n  return cumulative ? jStat.chisquare.cdf(x, deg_freedom) : jStat.chisquare.pdf(x, deg_freedom)\n};\n\n/**\n * Returns the one-tailed probability of the chi-squared distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The value at which you want to evaluate the distribution.\n * @param {*} deg_freedom The number of degrees of freedom.\n * @returns\n */\nCHISQ.DIST.RT = (x, deg_freedom) => {\n  if (!x | !deg_freedom) {\n    return na\n  }\n\n  if (x < 1 || deg_freedom > Math.pow(10, 10)) {\n    return num\n  }\n\n  if (typeof x !== 'number' || typeof deg_freedom !== 'number') {\n    return value\n  }\n\n  return 1 - jStat.chisquare.cdf(x, deg_freedom)\n};\n\n/**\n * Returns the cumulative beta probability density function.\n *\n * Category: Statistical\n *\n * @param {*} probability A probability associated with the chi-squared distribution.\n * @param {*} deg_freedom The number of degrees of freedom.\n * @returns\n */\nCHISQ.INV = (probability, deg_freedom) => {\n  probability = parseNumber(probability);\n  deg_freedom = parseNumber(deg_freedom);\n\n  if (anyIsError(probability, deg_freedom)) {\n    return value\n  }\n\n  return jStat.chisquare.inv(probability, deg_freedom)\n};\n\n/**\n * Returns the inverse of the one-tailed probability of the chi-squared distribution.\n *\n * Category: Statistical\n *\n * @param {*} probability A probability associated with the chi-squared distribution.\n * @param {*} deg_freedom The number of degrees of freedom.\n * @returns\n */\nCHISQ.INV.RT = (probability, deg_freedom) => {\n  if (!probability | !deg_freedom) {\n    return na\n  }\n\n  if (probability < 0 || probability > 1 || deg_freedom < 1 || deg_freedom > Math.pow(10, 10)) {\n    return num\n  }\n\n  if (typeof probability !== 'number' || typeof deg_freedom !== 'number') {\n    return value\n  }\n\n  return jStat.chisquare.inv(1.0 - probability, deg_freedom)\n};\n\n/**\n * Returns the test for independence.\n *\n * Category: Statistical\n *\n * @param {*} actual_range The range of data that contains observations to test against expected values.\n * @param {*} expected_range The range of data that contains the ratio of the product of row totals and column totals to the grand total.\n * @returns\n */\nCHISQ.TEST = function (actual_range, expected_range) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (!(actual_range instanceof Array) || !(expected_range instanceof Array)) {\n    return value\n  }\n\n  if (actual_range.length !== expected_range.length) {\n    return value\n  }\n\n  if (actual_range[0] && expected_range[0] && actual_range[0].length !== expected_range[0].length) {\n    return value\n  }\n\n  const row = actual_range.length;\n  let tmp, i, j;\n\n  // Convert single-dimension array into two-dimension array\n\n  for (i = 0; i < row; i++) {\n    if (!(actual_range[i] instanceof Array)) {\n      tmp = actual_range[i];\n      actual_range[i] = [];\n      actual_range[i].push(tmp);\n    }\n\n    if (!(expected_range[i] instanceof Array)) {\n      tmp = expected_range[i];\n      expected_range[i] = [];\n      expected_range[i].push(tmp);\n    }\n  }\n\n  const col = actual_range[0].length;\n  const dof = col === 1 ? row - 1 : (row - 1) * (col - 1);\n  let xsqr = 0;\n  const Pi = Math.PI;\n\n  for (i = 0; i < row; i++) {\n    for (j = 0; j < col; j++) {\n      xsqr += Math.pow(actual_range[i][j] - expected_range[i][j], 2) / expected_range[i][j];\n    }\n  }\n\n  // Get independency by X square and its degree of freedom\n  function ChiSq(xsqr, dof) {\n    let p = Math.exp(-0.5 * xsqr);\n\n    if (dof % 2 === 1) {\n      p = p * Math.sqrt((2 * xsqr) / Pi);\n    }\n\n    let k = dof;\n\n    while (k >= 2) {\n      p = (p * xsqr) / k;\n      k = k - 2;\n    }\n\n    let t = p;\n    let a = dof;\n\n    while (t > 0.0000000001 * p) {\n      a = a + 2;\n      t = (t * xsqr) / a;\n      p = p + t;\n    }\n\n    return 1 - p\n  }\n\n  return Math.round(ChiSq(xsqr, dof) * 1000000) / 1000000\n};\n\nconst CONFIDENCE = {};\n\n/**\n * Returns the confidence interval for a population mean.\n *\n * Category: Statistical\n *\n * @param {*} alpha The significance level used to compute the confidence level. The confidence level equals 100*(1 - alpha)%, or in other words, an alpha of 0.05 indicates a 95 percent confidence level.\n * @param {*} standard_dev The population standard deviation for the data range and is assumed to be known.\n * @param {*} size The sample size.\n * @returns\n */\nCONFIDENCE.NORM = (alpha, standard_dev, size) => {\n  alpha = parseNumber(alpha);\n  standard_dev = parseNumber(standard_dev);\n  size = parseNumber(size);\n\n  if (anyIsError(alpha, standard_dev, size)) {\n    return value\n  }\n\n  return jStat.normalci(1, alpha, standard_dev, size)[1] - 1\n};\n\n/**\n * Returns the confidence interval for a population mean, using a Student's t distribution.\n *\n * Category: Statistical\n *\n * @param {*} alpha The significance level used to compute the confidence level. The confidence level equals 100*(1 - alpha)%, or in other words, an alpha of 0.05 indicates a 95 percent confidence level.\n * @param {*} standard_dev The population standard deviation for the data range and is assumed to be known.\n * @param {*} size The sample size.\n * @returns\n */\nCONFIDENCE.T = (alpha, standard_dev, size) => {\n  alpha = parseNumber(alpha);\n  standard_dev = parseNumber(standard_dev);\n  size = parseNumber(size);\n\n  if (anyIsError(alpha, standard_dev, size)) {\n    return value\n  }\n\n  return jStat.tci(1, alpha, standard_dev, size)[1] - 1\n};\n\n/**\n * Returns the correlation coefficient between two data sets.\n *\n * Category: Statistical\n *\n * @param {*} array1 A range of value values.\n * @param {*} array2 A second range of value values.\n * @returns\n */\nfunction CORREL(array1, array2) {\n  array1 = parseNumberArray(flatten(array1));\n  array2 = parseNumberArray(flatten(array2));\n\n  if (anyIsError(array1, array2)) {\n    return value\n  }\n\n  return jStat.corrcoeff(array1, array2)\n}\n\n/**\n * Counts how many numbers are in the list of arguments.\n *\n * Category: Statistical\n *\n * @param {*} args Cell reference, or range within which you want to count numbers.count numbers.\n * @returns\n */\nfunction COUNT() {\n  const flatArguments = flatten(arguments);\n\n  return numbers(flatArguments).length\n}\n\n/**\n * Counts how many values are in the list of arguments.\n *\n * Category: Statistical\n *\n * @param {*} args Arguments representing the values that you want to count.\n * @returns\n */\nfunction COUNTA() {\n  const flatArguments = flatten(arguments);\n\n  return flatArguments.length - COUNTBLANK(flatArguments)\n}\n\n/**\n * Formula.js only\n *\n * @param {*} range\n * @param {*} value\n * @returns\n */\nfunction COUNTIN(range, value) {\n  let result = 0;\n\n  range = flatten(range);\n\n  for (let i = 0; i < range.length; i++) {\n    if (range[i] === value) {\n      result++;\n    }\n  }\n\n  return result\n}\n\n/**\n * Counts the number of blank values within a range.\n *\n * Category: Statistical\n *\n * @param {*} args The range from which you want to count the blank values.\n * @returns\n */\nfunction COUNTBLANK() {\n  const range = flatten(arguments);\n  let blanks = 0;\n  let element;\n\n  for (let i = 0; i < range.length; i++) {\n    element = range[i];\n\n    if (element === undefined || element === null || element === '') {\n      blanks++;\n    }\n  }\n\n  return blanks\n}\n\n/**\n * Counts the number of values within a range that meet the given criteria.\n *\n * Category: Statistical\n *\n * @returns\n */\nfunction COUNTIF(range, criteria) {\n  range = flatten(range);\n\n  const isWildcard = criteria === void 0 || criteria === '*';\n\n  if (isWildcard) {\n    return range.length\n  }\n\n  let matches = 0;\n  const tokenizedCriteria = parse(criteria + '');\n\n  for (let i = 0; i < range.length; i++) {\n    const value = range[i];\n    const tokens = [createToken(value, TOKEN_TYPE_LITERAL)].concat(tokenizedCriteria);\n\n    if (compute(tokens)) {\n      matches++;\n    }\n  }\n\n  return matches\n}\n\n/**\n * Counts the number of values within a range that meet multiple criteria.\n *\n * Category: Statistical\n *\n * @param {*} args Range in which to evaluate the associated criteria.\n * @returns\n */\nfunction COUNTIFS() {\n  const args = argsToArray(arguments);\n  const results = new Array(flatten(args[0]).length);\n\n  for (let i = 0; i < results.length; i++) {\n    results[i] = true;\n  }\n\n  for (let i = 0; i < args.length; i += 2) {\n    const range = flatten(args[i]);\n    const criteria = args[i + 1];\n    const isWildcard = criteria === void 0 || criteria === '*';\n\n    if (!isWildcard) {\n      const tokenizedCriteria = parse(criteria + '');\n\n      for (let j = 0; j < range.length; j++) {\n        const value = range[j];\n        const tokens = [createToken(value, TOKEN_TYPE_LITERAL)].concat(tokenizedCriteria);\n\n        results[j] = results[j] && compute(tokens);\n      }\n    }\n  }\n\n  let result = 0;\n\n  for (let i = 0; i < results.length; i++) {\n    if (results[i]) {\n      result++;\n    }\n  }\n\n  return result\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction COUNTUNIQUE() {\n  return UNIQUE.apply(null, flatten(arguments)).length\n}\n\nconst COVARIANCE = {};\n\n/**\n * Returns covariance, the average of the products of paired deviations.\n *\n * Category: Statistical\n *\n * @param {*} array1 The first value range of integers.\n * @param {*} array2 The second value range of integers.\n * @returns\n */\nCOVARIANCE.P = (array1, array2) => {\n  array1 = parseNumberArray(flatten(array1));\n  array2 = parseNumberArray(flatten(array2));\n\n  if (anyIsError(array1, array2)) {\n    return value\n  }\n\n  const mean1 = jStat.mean(array1);\n  const mean2 = jStat.mean(array2);\n  let result = 0;\n  const n = array1.length;\n\n  for (let i = 0; i < n; i++) {\n    result += (array1[i] - mean1) * (array2[i] - mean2);\n  }\n\n  return result / n\n};\n\n/**\n * Returns the sample covariance, the average of the products deviations for each data point pair in two data sets.\n *\n * Category: Statistical\n *\n * @param {*} array1 The first value range of integers.\n * @param {*} array2 The second value range of integers.\n * @returns\n */\nCOVARIANCE.S = (array1, array2) => {\n  array1 = parseNumberArray(flatten(array1));\n  array2 = parseNumberArray(flatten(array2));\n\n  if (anyIsError(array1, array2)) {\n    return value\n  }\n\n  return jStat.covariance(array1, array2)\n};\n\n/**\n * Returns the sum of squares of deviations.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 arguments for which you want to calculate the sum of squared deviations. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction DEVSQ() {\n  const range = parseNumberArray(flatten(arguments));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  const mean = jStat.mean(range);\n  let result = 0;\n\n  for (let i = 0; i < range.length; i++) {\n    result += Math.pow(range[i] - mean, 2);\n  }\n\n  return result\n}\n\nconst EXPON = {};\n\n/**\n * Returns the exponential distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The value of the function.\n * @param {*} lambda The parameter value.\n * @param {*} cumulative A logical value that indicates which form of the exponential function to provide. If cumulative is TRUE, EXPON.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @returns\n */\nEXPON.DIST = (x, lambda, cumulative) => {\n  x = parseNumber(x);\n  lambda = parseNumber(lambda);\n\n  if (anyIsError(x, lambda)) {\n    return value\n  }\n\n  return cumulative ? jStat.exponential.cdf(x, lambda) : jStat.exponential.pdf(x, lambda)\n};\n\nconst F = {};\n\n/**\n * Returns the F probability distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The value at which to evaluate the function.\n * @param {*} deg_freedom1 The numerator degrees of freedom.\n * @param {*} deg_freedom2 The denominator degrees of freedom.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, F.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @returns\n */\nF.DIST = (x, deg_freedom1, deg_freedom2, cumulative) => {\n  x = parseNumber(x);\n  deg_freedom1 = parseNumber(deg_freedom1);\n  deg_freedom2 = parseNumber(deg_freedom2);\n\n  if (anyIsError(x, deg_freedom1, deg_freedom2)) {\n    return value\n  }\n\n  return cumulative\n    ? jStat.centralF.cdf(x, deg_freedom1, deg_freedom2)\n    : jStat.centralF.pdf(x, deg_freedom1, deg_freedom2)\n};\n\n/**\n * Returns the F probability distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The value at which to evaluate the function.\n * @param {*} deg_freedom1 The numerator degrees of freedom.\n * @param {*} deg_freedom2 The denominator degrees of freedom.\n * @returns\n */\nF.DIST.RT = function (x, deg_freedom1, deg_freedom2) {\n  if (arguments.length !== 3) {\n    return na\n  }\n\n  if (x < 0 || deg_freedom1 < 1 || deg_freedom2 < 1) {\n    return num\n  }\n\n  if (typeof x !== 'number' || typeof deg_freedom1 !== 'number' || typeof deg_freedom2 !== 'number') {\n    return value\n  }\n\n  return 1 - jStat.centralF.cdf(x, deg_freedom1, deg_freedom2)\n};\n\n/**\n * Returns the inverse of the F probability distribution.\n *\n * Category: Statistical\n *\n * @param {*} probability A probability associated with the F cumulative distribution.\n * @param {*} deg_freedom1 The numerator degrees of freedom.\n * @param {*} deg_freedom2 The denominator degrees of freedom.\n * @returns\n */\nF.INV = (probability, deg_freedom1, deg_freedom2) => {\n  probability = parseNumber(probability);\n  deg_freedom1 = parseNumber(deg_freedom1);\n  deg_freedom2 = parseNumber(deg_freedom2);\n\n  if (anyIsError(probability, deg_freedom1, deg_freedom2)) {\n    return value\n  }\n\n  if (probability <= 0.0 || probability > 1.0) {\n    return num\n  }\n\n  return jStat.centralF.inv(probability, deg_freedom1, deg_freedom2)\n};\n\n/**\n * Returns the inverse of the F probability distribution.\n *\n * Category: Statistical\n *\n * @param {*} probability A probability associated with the F cumulative distribution.\n * @param {*} deg_freedom1 The numerator degrees of freedom.\n * @param {*} deg_freedom2 The denominator degrees of freedom.\n * @returns\n */\nF.INV.RT = function (probability, deg_freedom1, deg_freedom2) {\n  if (arguments.length !== 3) {\n    return na\n  }\n\n  if (\n    probability < 0 ||\n    probability > 1 ||\n    deg_freedom1 < 1 ||\n    deg_freedom1 > Math.pow(10, 10) ||\n    deg_freedom2 < 1 ||\n    deg_freedom2 > Math.pow(10, 10)\n  ) {\n    return num\n  }\n\n  if (typeof probability !== 'number' || typeof deg_freedom1 !== 'number' || typeof deg_freedom2 !== 'number') {\n    return value\n  }\n\n  return jStat.centralF.inv(1.0 - probability, deg_freedom1, deg_freedom2)\n};\n\n/**\n * Returns the result of an F-test.\n *\n * Category: Statistical\n *\n * @param {*} array1 The first array or range of data.\n * @param {*} array2 The second array or range of data.\n * @returns\n */\nF.TEST = (array1, array2) => {\n  if (!array1 || !array2) {\n    return na\n  }\n\n  if (!(array1 instanceof Array) || !(array2 instanceof Array)) {\n    return na\n  }\n\n  if (array1.length < 2 || array2.length < 2) {\n    return div0\n  }\n\n  const sumOfSquares = (values, x1) => {\n    let sum = 0;\n\n    for (let i = 0; i < values.length; i++) {\n      sum += Math.pow(values[i] - x1, 2);\n    }\n\n    return sum\n  };\n\n  const x1 = SUM(array1) / array1.length;\n  const x2 = SUM(array2) / array2.length;\n  const sum1 = sumOfSquares(array1, x1) / (array1.length - 1);\n  const sum2 = sumOfSquares(array2, x2) / (array2.length - 1);\n\n  return sum1 / sum2\n};\n\n/**\n * Returns the Fisher transformation.\n *\n * Category: Statistical\n *\n * @param {*} x A numeric value for which you want the transformation.\n * @returns\n */\nfunction FISHER(x) {\n  x = parseNumber(x);\n\n  if (x instanceof Error) {\n    return x\n  }\n\n  return Math.log((1 + x) / (1 - x)) / 2\n}\n\n/**\n * Returns the inverse of the Fisher transformation.\n *\n * Category: Statistical\n *\n * @param {*} y The value for which you want to perform the inverse of the transformation.\n * @returns\n */\nfunction FISHERINV(y) {\n  y = parseNumber(y);\n\n  if (y instanceof Error) {\n    return y\n  }\n\n  const e2y = Math.exp(2 * y);\n\n  return (e2y - 1) / (e2y + 1)\n}\n\n/**\n * Returns a value along a linear trend.\n *\n * Category: Statistical\n *\n * @param {*} x The data point for which you want to predict a value.\n * @param {*} known_ys The dependent array or range of data.\n * @param {*} known_xs The independent array or range of data.\n * @returns\n */\nfunction FORECAST(x, known_ys, known_xs) {\n  x = parseNumber(x);\n  known_ys = parseNumberArray(flatten(known_ys));\n  known_xs = parseNumberArray(flatten(known_xs));\n\n  if (anyIsError(x, known_ys, known_xs)) {\n    return value\n  }\n\n  const xmean = jStat.mean(known_xs);\n  const ymean = jStat.mean(known_ys);\n  const n = known_xs.length;\n  let num = 0;\n  let den = 0;\n\n  for (let i = 0; i < n; i++) {\n    num += (known_xs[i] - xmean) * (known_ys[i] - ymean);\n    den += Math.pow(known_xs[i] - xmean, 2);\n  }\n\n  const b = num / den;\n  const a = ymean - b * xmean;\n\n  return a + b * x\n}\n\n/**\n * Returns a frequency distribution as a vertical array.\n *\n * Category: Statistical\n *\n * @param {*} data_array An array of or reference to a set of values for which you want to count frequencies. If data_array contains no values, FREQUENCY returns an array of zeros.\n * @param {*} bins_array An array of or reference to intervals into which you want to group the values in data_array. If bins_array contains no values, FREQUENCY returns the number of elements in data_array.\n * @returns\n */\nfunction FREQUENCY(data_array, bins_array) {\n  data_array = parseNumberArray(flatten(data_array));\n  bins_array = parseNumberArray(flatten(bins_array));\n\n  if (anyIsError(data_array, bins_array)) {\n    return value\n  }\n\n  const n = data_array.length;\n  const b = bins_array.length;\n  const r = [];\n\n  for (let i = 0; i <= b; i++) {\n    r[i] = 0;\n\n    for (let j = 0; j < n; j++) {\n      if (i === 0) {\n        if (data_array[j] <= bins_array[0]) {\n          r[0] += 1;\n        }\n      } else if (i < b) {\n        if (data_array[j] > bins_array[i - 1] && data_array[j] <= bins_array[i]) {\n          r[i] += 1;\n        }\n      } else if (i === b) {\n        if (data_array[j] > bins_array[b - 1]) {\n          r[b] += 1;\n        }\n      }\n    }\n  }\n\n  return r\n}\n\n/**\n * Returns the Gamma function value.\n *\n * Category: Statistical\n *\n * @param {*} number Returns a number.\n * @returns\n */\nfunction GAMMA(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number === 0) {\n    return num\n  }\n\n  if (parseInt(number, 10) === number && number < 0) {\n    return num\n  }\n\n  return jStat.gammafn(number)\n}\n\n/**\n * Returns the gamma distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The value at which you want to evaluate the distribution.\n * @param {*} alpha A parameter to the distribution.\n * @param {*} beta A parameter to the distribution. If beta = 1, GAMMA.DIST returns the standard gamma distribution.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, GAMMA.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @returns\n */\nGAMMA.DIST = function (value$1, alpha, beta, cumulative) {\n  if (arguments.length !== 4) {\n    return na\n  }\n\n  if (value$1 < 0 || alpha <= 0 || beta <= 0) {\n    return value\n  }\n\n  if (typeof value$1 !== 'number' || typeof alpha !== 'number' || typeof beta !== 'number') {\n    return value\n  }\n\n  return cumulative ? jStat.gamma.cdf(value$1, alpha, beta, true) : jStat.gamma.pdf(value$1, alpha, beta, false)\n};\n\n/**\n * Returns the inverse of the gamma cumulative distribution.\n *\n * Category: Statistical\n *\n * @param {*} probability The probability associated with the gamma distribution.\n * @param {*} alpha A parameter to the distribution.\n * @param {*} beta A parameter to the distribution. If beta = 1, GAMMA.INV returns the standard gamma distribution.\n * @returns\n */\nGAMMA.INV = function (probability, alpha, beta) {\n  if (arguments.length !== 3) {\n    return na\n  }\n\n  if (probability < 0 || probability > 1 || alpha <= 0 || beta <= 0) {\n    return num\n  }\n\n  if (typeof probability !== 'number' || typeof alpha !== 'number' || typeof beta !== 'number') {\n    return value\n  }\n\n  return jStat.gamma.inv(probability, alpha, beta)\n};\n\n/**\n * Returns the natural logarithm of the gamma function, (x).\n *\n * Category: Statistical\n *\n * @param {*} x The value for which you want to calculate GAMMALN.\n * @returns\n */\nfunction GAMMALN(x) {\n  x = parseNumber(x);\n\n  if (x instanceof Error) {\n    return x\n  }\n\n  return jStat.gammaln(x)\n}\n\n/**\n * Returns the natural logarithm of the gamma function, (x).\n *\n * Category: Statistical\n *\n * @param {*} x The value for which you want to calculate GAMMALN.PRECISE.\n * @returns\n */\nGAMMALN.PRECISE = function (x) {\n  if (arguments.length !== 1) {\n    return na\n  }\n\n  if (x <= 0) {\n    return num\n  }\n\n  if (typeof x !== 'number') {\n    return value\n  }\n\n  return jStat.gammaln(x)\n};\n\n/**\n * Returns 0.5 less than the standard normal cumulative distribution.\n *\n * Category: Statistical\n *\n * @param {*} z Returns a number.\n * @returns\n */\nfunction GAUSS(z) {\n  z = parseNumber(z);\n\n  if (z instanceof Error) {\n    return z\n  }\n\n  return jStat.normal.cdf(z, 0, 1) - 0.5\n}\n\n/**\n * Returns the geometric mean.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 arguments for which you want to calculate the mean. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction GEOMEAN() {\n  const args = parseNumberArray(flatten(arguments));\n\n  if (args instanceof Error) {\n    return args\n  }\n\n  return jStat.geomean(args)\n}\n\n/**\n * Returns values along an exponential trend.\n *\n * Category: Statistical\n *\n * @param {*} known_y The set of y-values you already know in the relationship y = b*m^x.\n - If the array known_y's is in a single column, then each column of known_x's is interpreted as a separate variable.\n - If the array known_y's is in a single row, then each row of known_x's is interpreted as a separate variable.\n - If any of the numbers in known_y's is 0 or negative, GROWTH returns the #NUM! error value.\n * @param {*} known_x Optional. An optional set of x-values that you may already know in the relationship y = b*m^x.\n - The array known_x's can include one or more sets of variables. If only one variable is used, known_y's and known_x's can be ranges of any shape, as long as they have equal dimensions. If more than one variable is used, known_y's must be a vector (that is, a range with a height of one row or a width of one column).\n - If known_x's is omitted, it is assumed to be the array {1,2,3,...} that is the same size as known_y's.\n * @param {*} new_x Optional. Are new x-values for which you want GROWTH to return corresponding y-values.\n - new_x's must include a column (or row) for each independent variable, just as known_x's does. So, if known_y's is in a single column, known_x's and new_x's must have the same number of columns. If known_y's is in a single row, known_x's and new_x's must have the same number of rows.\n - If new_x's is omitted, it is assumed to be the same as known_x's.\n - If both known_x's and new_x's are omitted, they are assumed to be the array {1,2,3,...} that is the same size as known_y's.\n * @param {*} use_const Optional. A logical value specifying whether to force the constant b to equal 1. If const is TRUE or omitted, b is calculated normally. If const is FALSE, b is set equal to 1 and the m-values are adjusted so that y = m^x.\n - If const is TRUE or omitted, b is calculated normally.\n - If const is FALSE, b is set equal to 1 and the m-values are adjusted so that y = m^x.\n * @returns\n */\nfunction GROWTH(known_y, known_x, new_x, use_const) {\n  // Credits: Ilmari Karonen (http://stackoverflow.com/questions/14161990/how-to-implement-growth-function-in-javascript)\n  known_y = parseNumberArray(known_y);\n\n  if (known_y instanceof Error) {\n    return known_y\n  }\n\n  // Default values for optional parameters:\n  let i;\n\n  if (known_x === undefined) {\n    known_x = [];\n\n    for (i = 1; i <= known_y.length; i++) {\n      known_x.push(i);\n    }\n  }\n\n  if (new_x === undefined) {\n    new_x = [];\n\n    for (i = 1; i <= known_y.length; i++) {\n      new_x.push(i);\n    }\n  }\n\n  known_x = parseNumberArray(known_x);\n  new_x = parseNumberArray(new_x);\n\n  if (anyIsError(known_x, new_x)) {\n    return value\n  }\n\n  if (use_const === undefined) {\n    use_const = true;\n  }\n\n  // Calculate sums over the data:\n  const n = known_y.length;\n  let avg_x = 0;\n  let avg_y = 0;\n  let avg_xy = 0;\n  let avg_xx = 0;\n\n  for (i = 0; i < n; i++) {\n    const x = known_x[i];\n    const y = Math.log(known_y[i]);\n    avg_x += x;\n    avg_y += y;\n    avg_xy += x * y;\n    avg_xx += x * x;\n  }\n\n  avg_x /= n;\n  avg_y /= n;\n  avg_xy /= n;\n  avg_xx /= n;\n\n  // Compute linear regression coefficients:\n  let beta;\n  let alpha;\n\n  if (use_const) {\n    beta = (avg_xy - avg_x * avg_y) / (avg_xx - avg_x * avg_x);\n    alpha = avg_y - beta * avg_x;\n  } else {\n    beta = avg_xy / avg_xx;\n    alpha = 0;\n  }\n\n  // Compute and return result array:\n  const new_y = [];\n\n  for (i = 0; i < new_x.length; i++) {\n    new_y.push(Math.exp(alpha + beta * new_x[i]));\n  }\n\n  return new_y\n}\n\n/**\n * Returns the harmonic mean.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 arguments for which you want to calculate the mean. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction HARMEAN() {\n  const range = parseNumberArray(flatten(arguments));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  const n = range.length;\n  let den = 0;\n\n  for (let i = 0; i < n; i++) {\n    den += 1 / range[i];\n  }\n\n  return n / den\n}\n\nconst HYPGEOM = {};\n\n/**\n * Returns the hypergeometric distribution.\n *\n * Category: Statistical\n *\n * @param {*} sample_s The number of successes in the sample.\n * @param {*} number_sample The size of the sample.\n * @param {*} population_s The number of successes in the population.\n * @param {*} number_pop The population size.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, then HYPGEOM.DIST returns the cumulative distribution function; if FALSE, it returns the probability mass function.\n * @returns\n */\nHYPGEOM.DIST = (sample_s, number_sample, population_s, number_pop, cumulative) => {\n  sample_s = parseNumber(sample_s);\n  number_sample = parseNumber(number_sample);\n  population_s = parseNumber(population_s);\n  number_pop = parseNumber(number_pop);\n\n  if (anyIsError(sample_s, number_sample, population_s, number_pop)) {\n    return value\n  }\n\n  function pdf(x, n, M, N) {\n    return (COMBIN(M, x) * COMBIN(N - M, n - x)) / COMBIN(N, n)\n  }\n\n  function cdf(x, n, M, N) {\n    let result = 0;\n\n    for (let i = 0; i <= x; i++) {\n      result += pdf(i, n, M, N);\n    }\n\n    return result\n  }\n\n  return cumulative\n    ? cdf(sample_s, number_sample, population_s, number_pop)\n    : pdf(sample_s, number_sample, population_s, number_pop)\n};\n\n/**\n * Returns the intercept of the linear regression line.\n *\n * Category: Statistical\n *\n * @param {*} known_y The dependent set of observations or data.\n * @param {*} known_x The independent set of observations or data.\n * @returns\n */\nfunction INTERCEPT(known_y, known_x) {\n  known_y = parseNumberArray(known_y);\n  known_x = parseNumberArray(known_x);\n\n  if (anyIsError(known_y, known_x)) {\n    return value\n  }\n\n  if (known_y.length !== known_x.length) {\n    return na\n  }\n\n  return FORECAST(0, known_y, known_x)\n}\n\n/**\n * Returns the kurtosis of a data set.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 arguments for which you want to calculate kurtosis. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction KURT() {\n  const range = parseNumberArray(flatten(arguments));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  const mean = jStat.mean(range);\n  const n = range.length;\n  let sigma = 0;\n\n  for (let i = 0; i < n; i++) {\n    sigma += Math.pow(range[i] - mean, 4);\n  }\n\n  sigma = sigma / Math.pow(jStat.stdev(range, true), 4);\n\n  return ((n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3))) * sigma - (3 * (n - 1) * (n - 1)) / ((n - 2) * (n - 3))\n}\n\n/**\n * Returns the k-th largest value in a data set.\n *\n * Category: Statistical\n *\n * @param {*} array The array or range of data for which you want to determine the k-th largest value.\n * @param {*} k The position (from the largest) in the array or value range of data to return.\n * @returns\n */\nfunction LARGE(array, k) {\n  array = parseNumberArray(flatten(array));\n  k = parseNumber(k);\n\n  if (anyIsError(array, k)) {\n    return array\n  }\n\n  if (k < 0 || array.length < k) {\n    return value\n  }\n\n  return array.sort((a, b) => b - a)[k - 1]\n}\n\n/**\n * Returns the parameters of a linear trend.\n *\n * Category: Statistical\n *\n * @param {*} known_y The set of y-values that you already know in the relationship y = mx + b.\n - If the range of known_y's is in a single column, each column of known_x's is interpreted as a separate variable.\n - If the range of known_y's is contained in a single row, each row of known_x's is interpreted as a separate variable.\n * @param {*} known_x Optional. A set of x-values that you may already know in the relationship y = mx + b.\n - The range of known_x's can include one or more sets of variables. If only one variable is used, known_y's and known_x's can be ranges of any shape, as long as they have equal dimensions. If more than one variable is used, known_y's must be a vector (that is, a range with a height of one row or a width of one column).\n - If known_x's is omitted, it is assumed to be the array {1,2,3,...} that is the same size as known_y's.\n * @returns\n */\nfunction LINEST(known_y, known_x) {\n  known_y = parseNumberArray(flatten(known_y));\n  known_x = parseNumberArray(flatten(known_x));\n\n  if (anyIsError(known_y, known_x)) {\n    return value\n  }\n\n  const ymean = jStat.mean(known_y);\n  const xmean = jStat.mean(known_x);\n  const n = known_x.length;\n  let num = 0;\n  let den = 0;\n\n  for (let i = 0; i < n; i++) {\n    num += (known_x[i] - xmean) * (known_y[i] - ymean);\n    den += Math.pow(known_x[i] - xmean, 2);\n  }\n\n  const m = num / den;\n  const b = ymean - m * xmean;\n\n  return [m, b]\n}\n\n// According to Microsoft:\n// http://office.microsoft.com/en-us/starter-help/logest-function-HP010342665.aspx\n// LOGEST returns are based on the following linear model:\n// ln y = x1 ln m1 + ... + xn ln mn + ln b\n/**\n * Returns the parameters of an exponential trend.\n *\n * Category: Statistical\n *\n * @param {*} known_y The set of y-values you already know in the relationship y = b*m^x.\n - If the array known_y's is in a single column, then each column of known_x's is interpreted as a separate variable.\n - If the array known_y's is in a single row, then each row of known_x's is interpreted as a separate variable.\n * @param {*} known_x Optional. An optional set of x-values that you may already know in the relationship y = b*m^x.\n - The array known_x's can include one or more sets of variables. If only one variable is used, known_y's and known_x's can be ranges of any shape, as long as they have equal dimensions. If more than one variable is used, known_y's must be a range of values with a height of one row or a width of one column (which is also known as a vector).\n - If known_x's is omitted, it is assumed to be the array {1,2,3,...} that is the same size as known_y's.\n * @returns\n */\nfunction LOGEST(known_y, known_x) {\n  known_y = parseNumberArray(flatten(known_y));\n  known_x = parseNumberArray(flatten(known_x));\n\n  if (anyIsError(known_y, known_x)) {\n    return value\n  }\n\n  if (known_y.length !== known_x.length) {\n    return value\n  }\n\n  for (let i = 0; i < known_y.length; i++) {\n    known_y[i] = Math.log(known_y[i]);\n  }\n\n  const result = LINEST(known_y, known_x);\n  result[0] = Math.round(Math.exp(result[0]) * 1000000) / 1000000;\n  result[1] = Math.round(Math.exp(result[1]) * 1000000) / 1000000;\n\n  return result\n}\n\nconst LOGNORM = {};\n\n/**\n * Returns the cumulative lognormal distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The value at which to evaluate the function.\n * @param {*} mean The mean of ln(x).\n * @param {*} standard_dev The standard deviation of ln(x).\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, LOGNORM.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @returns\n */\nLOGNORM.DIST = (x, mean, standard_dev, cumulative) => {\n  x = parseNumber(x);\n  mean = parseNumber(mean);\n  standard_dev = parseNumber(standard_dev);\n\n  if (anyIsError(x, mean, standard_dev)) {\n    return value\n  }\n\n  return cumulative ? jStat.lognormal.cdf(x, mean, standard_dev) : jStat.lognormal.pdf(x, mean, standard_dev)\n};\n\n/**\n * Returns the inverse of the lognormal cumulative distribution.\n *\n * Category: Statistical\n *\n * @param {*} probability A probability associated with the lognormal distribution.\n * @param {*} mean The mean of ln(x).\n * @param {*} standard_dev The standard deviation of ln(x).\n * @returns\n */\nLOGNORM.INV = (probability, mean, standard_dev) => {\n  probability = parseNumber(probability);\n  mean = parseNumber(mean);\n  standard_dev = parseNumber(standard_dev);\n\n  if (anyIsError(probability, mean, standard_dev)) {\n    return value\n  }\n\n  return jStat.lognormal.inv(probability, mean, standard_dev)\n};\n\n/**\n * Returns the maximum value in a list of arguments.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 numbers for which you want to find the maximum value.\n * @returns\n */\nfunction MAX() {\n  const flatArguments = flatten(arguments);\n  const someError = anyError.apply(undefined, flatArguments);\n\n  if (someError) {\n    return someError\n  }\n\n  const range = numbers(flatArguments);\n\n  return range.length === 0 ? 0 : Math.max.apply(Math, range)\n}\n\n/**\n * Returns the maximum value in a list of arguments, including numbers, text, and logical values.\n *\n * Category: Statistical\n *\n * @param {*} args value1, value2,... Number arguments 2 to 255 for which you want to find the largest value.\n * @returns\n */\nfunction MAXA() {\n  const flatArguments = flatten(arguments);\n  const someError = anyError.apply(undefined, flatArguments);\n\n  if (someError) {\n    return someError\n  }\n\n  let range = arrayValuesToNumbers(flatArguments);\n  range = range.map((value) => (value === undefined || value === null ? 0 : value));\n\n  return range.length === 0 ? 0 : Math.max.apply(Math, range)\n}\n\n/**\n * Returns the median of the given numbers.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 numbers for which you want the median.\n * @returns\n */\nfunction MEDIAN() {\n  const flatArguments = flatten(arguments);\n  const someError = anyError.apply(undefined, flatArguments);\n\n  if (someError) {\n    return someError\n  }\n\n  const range = arrayValuesToNumbers(flatArguments);\n  let result = jStat.median(range);\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n/**\n * Returns the minimum value in a list of arguments.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is optional, subsequent numbers are optional. 1 to 255 numbers for which you want to find the minimum value.\n * @returns\n */\nfunction MIN() {\n  const flatArguments = flatten(arguments);\n  const someError = anyError.apply(undefined, flatArguments);\n\n  if (someError) {\n    return someError\n  }\n\n  const range = numbers(flatArguments);\n\n  return range.length === 0 ? 0 : Math.min.apply(Math, range)\n}\n\n/**\n * Returns the smallest value in a list of arguments, including numbers, text, and logical values.\n *\n * Category: Statistical\n *\n * @param {*} args value1, value2, ... Value1 is required, subsequent values are optional. 1 to 255 values for which you want to find the smallest value.\n * @returns\n */\nfunction MINA() {\n  const flatArguments = flatten(arguments);\n  const someError = anyError.apply(undefined, flatArguments);\n\n  if (someError) {\n    return someError\n  }\n\n  let range = arrayValuesToNumbers(flatArguments);\n  range = range.map((value) => (value === undefined || value === null ? 0 : value));\n\n  return range.length === 0 ? 0 : Math.min.apply(Math, range)\n}\n\nconst MODE = {};\n\n/**\n * Returns a vertical array of the most frequently occurring, or repetitive values in an array or range of data.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number arguments 2 to 254 for which you want to calculate the mode. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nMODE.MULT = function () {\n  // Credits: Ronan\n  const range = parseNumberArray(flatten(arguments));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  const n = range.length;\n  const count = {};\n  let maxItems = [];\n  let max = 0;\n  let currentItem;\n\n  for (let i = 0; i < n; i++) {\n    currentItem = range[i];\n    count[currentItem] = count[currentItem] ? count[currentItem] + 1 : 1;\n\n    if (count[currentItem] > max) {\n      max = count[currentItem];\n      maxItems = [];\n    }\n\n    if (count[currentItem] === max) {\n      maxItems[maxItems.length] = currentItem;\n    }\n  }\n\n  return maxItems\n};\n\n/**\n * Returns the most common value in a data set.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Arguments 2 to 254 for which you want to calculate the mode. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nMODE.SNGL = function () {\n  const range = parseNumberArray(flatten(arguments));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  return MODE.MULT(range).sort((a, b) => a - b)[0]\n};\n\nconst NEGBINOM = {};\n\n/**\n * Returns the negative binomial distribution.\n *\n * Category: Statistical\n *\n * @param {*} number_f The number of failures.\n * @param {*} number_s The threshold number of successes.\n * @param {*} probability_s The probability of a success.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, NEGBINOM.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @returns\n */\nNEGBINOM.DIST = (number_f, number_s, probability_s, cumulative) => {\n  number_f = parseNumber(number_f);\n  number_s = parseNumber(number_s);\n  probability_s = parseNumber(probability_s);\n\n  if (anyIsError(number_f, number_s, probability_s)) {\n    return value\n  }\n\n  return cumulative\n    ? jStat.negbin.cdf(number_f, number_s, probability_s)\n    : jStat.negbin.pdf(number_f, number_s, probability_s)\n};\n\nconst NORM = {};\n\n/**\n * Returns the normal cumulative distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The value for which you want the distribution.\n * @param {*} mean The arithmetic mean of the distribution.\n * @param {*} standard_dev The standard deviation of the distribution.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, NORM.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @returns\n */\nNORM.DIST = (x, mean, standard_dev, cumulative) => {\n  x = parseNumber(x);\n  mean = parseNumber(mean);\n  standard_dev = parseNumber(standard_dev);\n\n  if (anyIsError(x, mean, standard_dev)) {\n    return value\n  }\n\n  if (standard_dev <= 0) {\n    return num\n  }\n\n  // Return normal distribution computed by jStat [http://jstat.org]\n  return cumulative ? jStat.normal.cdf(x, mean, standard_dev) : jStat.normal.pdf(x, mean, standard_dev)\n};\n\n/**\n * Returns the inverse of the normal cumulative distribution.\n *\n * Category: Statistical\n *\n * @param {*} probability A probability corresponding to the normal distribution.\n * @param {*} mean The arithmetic mean of the distribution.\n * @param {*} standard_dev The standard deviation of the distribution.\n * @returns\n */\nNORM.INV = (probability, mean, standard_dev) => {\n  probability = parseNumber(probability);\n  mean = parseNumber(mean);\n  standard_dev = parseNumber(standard_dev);\n\n  if (anyIsError(probability, mean, standard_dev)) {\n    return value\n  }\n\n  return jStat.normal.inv(probability, mean, standard_dev)\n};\n\nNORM.S = {};\n\n/**\n * Returns the standard normal cumulative distribution.\n *\n * Category: Statistical\n *\n * @param {*} z The value for which you want the distribution.\n * @param {*} cumulative Cumulative is a logical value that determines the form of the function. If cumulative is TRUE, NORMS.DIST returns the cumulative distribution function; if FALSE, it returns the probability mass function.\n * @returns\n */\nNORM.S.DIST = (z, cumulative) => {\n  z = parseNumber(z);\n\n  if (z instanceof Error) {\n    return value\n  }\n\n  return cumulative ? jStat.normal.cdf(z, 0, 1) : jStat.normal.pdf(z, 0, 1)\n};\n\n/**\n * Returns the inverse of the standard normal cumulative distribution.\n *\n * Category: Statistical\n *\n * @param {*} probability A probability corresponding to the normal distribution.\n * @returns\n */\nNORM.S.INV = (probability) => {\n  probability = parseNumber(probability);\n\n  if (probability instanceof Error) {\n    return value\n  }\n\n  return jStat.normal.inv(probability, 0, 1)\n};\n\n/**\n * Returns the Pearson product moment correlation coefficient.\n *\n * Category: Statistical\n *\n * @param {*} array1 A set of independent values.\n * @param {*} array2 A set of dependent values.\n * @returns\n */\nfunction PEARSON(array1, array2) {\n  array2 = parseNumberArray(flatten(array2));\n  array1 = parseNumberArray(flatten(array1));\n\n  if (anyIsError(array2, array1)) {\n    return value\n  }\n\n  const xmean = jStat.mean(array1);\n  const ymean = jStat.mean(array2);\n  const n = array1.length;\n  let num = 0;\n  let den1 = 0;\n  let den2 = 0;\n\n  for (let i = 0; i < n; i++) {\n    num += (array1[i] - xmean) * (array2[i] - ymean);\n    den1 += Math.pow(array1[i] - xmean, 2);\n    den2 += Math.pow(array2[i] - ymean, 2);\n  }\n\n  return num / Math.sqrt(den1 * den2)\n}\n\nconst PERCENTILE = {};\n\n/**\n * Returns the k-th percentile of values in a range, where k is in the range 0..1, exclusive.\n *\n * Category: Statistical\n *\n * @returns\n */\nPERCENTILE.EXC = (array, k) => {\n  array = parseNumberArray(flatten(array));\n  k = parseNumber(k);\n\n  if (anyIsError(array, k)) {\n    return value\n  }\n\n  array = array.sort((a, b) => a - b);\n  const n = array.length;\n\n  if (k < 1 / (n + 1) || k > 1 - 1 / (n + 1)) {\n    return num\n  }\n\n  const l = k * (n + 1) - 1;\n  const fl = Math.floor(l);\n\n  return cleanFloat(l === fl ? array[l] : array[fl] + (l - fl) * (array[fl + 1] - array[fl]))\n};\n\n/**\n * Returns the k-th percentile of values in a range.\n *\n * Category: Statistical\n *\n * @param {*} array The array or range of data that defines relative standing.\n * @param {*} k The percentile value in the range 0..1, inclusive.\n * @returns\n */\nPERCENTILE.INC = (array, k) => {\n  array = parseNumberArray(flatten(array));\n  k = parseNumber(k);\n\n  if (anyIsError(array, k)) {\n    return value\n  }\n\n  array = array.sort((a, b) => a - b);\n  const n = array.length;\n  const l = k * (n - 1);\n  const fl = Math.floor(l);\n\n  return cleanFloat(l === fl ? array[l] : array[fl] + (l - fl) * (array[fl + 1] - array[fl]))\n};\n\nconst PERCENTRANK = {};\n\n/**\n * Returns the rank of a value in a data set as a percentage (0..1, exclusive) of the data set.\n *\n * Category: Statistical\n *\n * @param {*} array The array or range of data with numeric values that defines relative standing\n * @param {*} x The value for which you want to know the rank.\n * @param {*} significance Optional. A value that identifies the number of significant digits for the returned percentage value. If omitted, PERCENTRANK.EXC uses three digits (0.xxx).\n * @returns\n */\nPERCENTRANK.EXC = (array, x, significance) => {\n  significance = significance === undefined ? 3 : significance;\n  array = parseNumberArray(flatten(array));\n  x = parseNumber(x);\n  significance = parseNumber(significance);\n\n  if (anyIsError(array, x, significance)) {\n    return value\n  }\n\n  array = array.sort((a, b) => a - b);\n  const uniques = UNIQUE.apply(null, array);\n  const n = array.length;\n  const m = uniques.length;\n  const power = Math.pow(10, significance);\n  let result = 0;\n  let match = false;\n  let i = 0;\n\n  while (!match && i < m) {\n    if (x === uniques[i]) {\n      result = (array.indexOf(uniques[i]) + 1) / (n + 1);\n      match = true;\n    } else if (x >= uniques[i] && (x < uniques[i + 1] || i === m - 1)) {\n      result = (array.indexOf(uniques[i]) + 1 + (x - uniques[i]) / (uniques[i + 1] - uniques[i])) / (n + 1);\n      match = true;\n    }\n\n    i++;\n  }\n\n  return Math.floor(result * power) / power\n};\n\n/**\n * Returns the percentage rank of a value in a data set.\n *\n * Category: Statistical\n *\n * @param {*} array The array or range of data with numeric values that defines relative standing.\n * @param {*} x The value for which you want to know the rank.\n * @param {*} significance Optional. A value that identifies the number of significant digits for the returned percentage value. If omitted, PERCENTRANK.INC uses three digits (0.xxx).\n * @returns\n */\nPERCENTRANK.INC = (array, x, significance) => {\n  significance = significance === undefined ? 3 : significance;\n  array = parseNumberArray(flatten(array));\n  x = parseNumber(x);\n  significance = parseNumber(significance);\n\n  if (anyIsError(array, x, significance)) {\n    return value\n  }\n\n  array = array.sort((a, b) => a - b);\n  const uniques = UNIQUE.apply(null, array);\n  const n = array.length;\n  const m = uniques.length;\n  const power = Math.pow(10, significance);\n  let result = 0;\n  let match = false;\n  let i = 0;\n\n  while (!match && i < m) {\n    if (x === uniques[i]) {\n      result = array.indexOf(uniques[i]) / (n - 1);\n      match = true;\n    } else if (x >= uniques[i] && (x < uniques[i + 1] || i === m - 1)) {\n      result = (array.indexOf(uniques[i]) + (x - uniques[i]) / (uniques[i + 1] - uniques[i])) / (n - 1);\n      match = true;\n    }\n\n    i++;\n  }\n\n  return Math.floor(result * power) / power\n};\n\n/**\n * Returns the number of permutations for a given number of objects.\n *\n * Category: Statistical\n *\n * @param {*} number An integer that describes the number of objects.\n * @param {*} number_chosen An integer that describes the number of objects in each permutation.\n * @returns\n */\nfunction PERMUT(number, number_chosen) {\n  number = parseNumber(number);\n  number_chosen = parseNumber(number_chosen);\n\n  if (anyIsError(number, number_chosen)) {\n    return value\n  }\n\n  return FACT(number) / FACT(number - number_chosen)\n}\n\n/**\n * Returns the number of permutations for a given number of objects (with repetitions) that can be selected from the total objects.\n *\n * Category: Statistical\n *\n * @param {*} number An integer that describes the total number of objects.\n * @param {*} number_chosen An integer that describes the number of objects in each permutation.\n * @returns\n */\nfunction PERMUTATIONA(number, number_chosen) {\n  number = parseNumber(number);\n  number_chosen = parseNumber(number_chosen);\n\n  if (anyIsError(number, number_chosen)) {\n    return value\n  }\n\n  return Math.pow(number, number_chosen)\n}\n\n/**\n * Returns the value of the density function for a standard normal distribution.\n *\n * Category: Statistical\n *\n * @param {*} x X is the number for which you want the density of the standard normal distribution.\n * @returns\n */\nfunction PHI(x) {\n  x = parseNumber(x);\n\n  if (x instanceof Error) {\n    return value\n  }\n\n  return Math.exp(-0.5 * x * x) / SQRT2PI\n}\n\nconst POISSON = {};\n\n/**\n * Returns the Poisson distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The number of events.\n * @param {*} mean The expected numeric value.\n * @param {*} cumulative A logical value that determines the form of the probability distribution returned. If cumulative is TRUE, POISSON.DIST returns the cumulative Poisson probability that the number of random events occurring will be between zero and x inclusive; if FALSE, it returns the Poisson probability mass function that the number of events occurring will be exactly x.\n * @returns\n */\nPOISSON.DIST = (x, mean, cumulative) => {\n  x = parseNumber(x);\n  mean = parseNumber(mean);\n\n  if (anyIsError(x, mean)) {\n    return value\n  }\n\n  return cumulative ? jStat.poisson.cdf(x, mean) : jStat.poisson.pdf(x, mean)\n};\n\n/**\n * Returns the probability that values in a range are between two limits.\n *\n * Category: Statistical\n *\n * @param {*} x_range The range of numeric values of x with which there are associated probabilities.\n * @param {*} prob_range A set of probabilities associated with values in x_range.\n * @param {*} lower_limit Optional. The lower bound on the value for which you want a probability.\n * @param {*} upper_limit Optional. The optional upper bound on the value for which you want a probability.\n * @returns\n */\nfunction PROB(x_range, prob_range, lower_limit, upper_limit) {\n  if (lower_limit === undefined) {\n    return 0\n  }\n\n  upper_limit = upper_limit === undefined ? lower_limit : upper_limit;\n\n  x_range = parseNumberArray(flatten(x_range));\n  prob_range = parseNumberArray(flatten(prob_range));\n  lower_limit = parseNumber(lower_limit);\n  upper_limit = parseNumber(upper_limit);\n\n  if (anyIsError(x_range, prob_range, lower_limit, upper_limit)) {\n    return value\n  }\n\n  if (lower_limit === upper_limit) {\n    return x_range.indexOf(lower_limit) >= 0 ? prob_range[x_range.indexOf(lower_limit)] : 0\n  }\n\n  const sorted = x_range.sort((a, b) => a - b);\n  const n = sorted.length;\n  let result = 0;\n\n  for (let i = 0; i < n; i++) {\n    if (sorted[i] >= lower_limit && sorted[i] <= upper_limit) {\n      result += prob_range[x_range.indexOf(sorted[i])];\n    }\n  }\n\n  return result\n}\n\nconst QUARTILE = {};\n\n/**\n * Returns the quartile of the data set, based on percentile values from 0..1, exclusive.\n *\n * Category: Statistical\n *\n * @param {*} array The array or value range of numeric values for which you want the quartile value.\n * @param {*} quart Indicates which value to return.\n * @returns\n */\nQUARTILE.EXC = (range, quart) => {\n  range = parseNumberArray(flatten(range));\n  quart = parseNumber(quart);\n\n  if (anyIsError(range, quart)) {\n    return value\n  }\n\n  switch (quart) {\n    case 1:\n      return PERCENTILE.EXC(range, 0.25)\n    case 2:\n      return PERCENTILE.EXC(range, 0.5)\n    case 3:\n      return PERCENTILE.EXC(range, 0.75)\n    default:\n      return num\n  }\n};\n\n/**\n * Returns the quartile of a data set.\n *\n * Category: Statistical\n *\n * @param {*} array The array or value range of numeric values for which you want the quartile value.\n * @param {*} quart Indicates which value to return.\n * @returns\n */\nQUARTILE.INC = (range, quart) => {\n  range = parseNumberArray(flatten(range));\n  quart = parseNumber(quart);\n\n  if (anyIsError(range, quart)) {\n    return value\n  }\n\n  switch (quart) {\n    case 1:\n      return PERCENTILE.INC(range, 0.25)\n    case 2:\n      return PERCENTILE.INC(range, 0.5)\n    case 3:\n      return PERCENTILE.INC(range, 0.75)\n    default:\n      return num\n  }\n};\n\nconst RANK = {};\n\n/**\n * Returns the rank of a number in a list of numbers.\n *\n * Category: Statistical\n *\n * @param {*} number The number whose rank you want to find.\n * @param {*} ref An array of, or a reference to, a list of numbers. Nonnumeric values in Ref are ignored.\n * @param {*} order Optional. A number specifying how to rank number.\n * @returns\n */\nRANK.AVG = (number, ref, order) => {\n  number = parseNumber(number);\n  ref = parseNumberArray(flatten(ref));\n\n  if (anyIsError(number, ref)) {\n    return value\n  }\n\n  ref = flatten(ref);\n  order = order || false;\n  const sort = order ? (a, b) => a - b : (a, b) => b - a;\n  ref = ref.sort(sort);\n\n  const length = ref.length;\n  let count = 0;\n\n  for (let i = 0; i < length; i++) {\n    if (ref[i] === number) {\n      count++;\n    }\n  }\n\n  return count > 1 ? (2 * ref.indexOf(number) + count + 1) / 2 : ref.indexOf(number) + 1\n};\n\n/**\n * Returns the rank of a number in a list of numbers.\n *\n * Category: Statistical\n *\n * @param {*} number The number whose rank you want to find.\n * @param {*} ref An array of, or a reference to, a list of numbers. Non-numeric values in Ref are ignored.\n * @param {*} order Optional. A number specifying how to rank number.\n * @returns\n */\nRANK.EQ = (number, ref, order) => {\n  number = parseNumber(number);\n  ref = parseNumberArray(flatten(ref));\n\n  if (anyIsError(number, ref)) {\n    return value\n  }\n\n  order = order || false;\n  const sort = order ? (a, b) => a - b : (a, b) => b - a;\n  ref = ref.sort(sort);\n\n  return ref.indexOf(number) + 1\n};\n\n/**\n * Returns the row number of a reference.\n *\n * Category: Lookup and reference\n *\n * @param {*} reference the value or range of values for which you want the row number.\n * @param {*} index\n * @returns\n */\nfunction ROW(reference, index) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (index < 0) {\n    return num\n  }\n\n  if (!(reference instanceof Array) || typeof index !== 'number') {\n    return value\n  }\n\n  if (reference.length === 0) {\n    return undefined\n  }\n\n  return jStat.row(reference, index)\n}\n\n/**\n * Returns the square of the Pearson product moment correlation coefficient.\n *\n * Category: Statistical\n *\n * @param {*} known_y An array or range of data points.\n * @param {*} known_x An array or range of data points.\n * @returns\n */\nfunction RSQ(known_y, known_x) {\n  // no need to flatten here, PEARSON will take care of that\n  known_y = parseNumberArray(flatten(known_y));\n  known_x = parseNumberArray(flatten(known_x));\n\n  if (anyIsError(known_y, known_x)) {\n    return value\n  }\n\n  return Math.pow(PEARSON(known_y, known_x), 2)\n}\n\n/**\n * Returns the skewness of a distribution.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 arguments for which you want to calculate skewness. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction SKEW() {\n  const range = parseNumberArray(flatten(arguments));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  const mean = jStat.mean(range);\n  const n = range.length;\n  let sigma = 0;\n\n  for (let i = 0; i < n; i++) {\n    sigma += Math.pow(range[i] - mean, 3);\n  }\n\n  return (n * sigma) / ((n - 1) * (n - 2) * Math.pow(jStat.stdev(range, true), 3))\n}\n\n/**\n * Returns the skewness of a distribution based on a population.\n *\n * Category: Statistical\n *\n * @returns\n */\nSKEW.P = function () {\n  const range = parseNumberArray(flatten(arguments));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  const mean = jStat.mean(range);\n  const n = range.length;\n  let m2 = 0;\n  let m3 = 0;\n\n  for (let i = 0; i < n; i++) {\n    m3 += Math.pow(range[i] - mean, 3);\n    m2 += Math.pow(range[i] - mean, 2);\n  }\n\n  m3 = m3 / n;\n  m2 = m2 / n;\n\n  return m3 / Math.pow(m2, 3 / 2)\n};\n\n/**\n * Returns the slope of the linear regression line.\n *\n * Category: Statistical\n *\n * @param {*} known_y An array or value range of numeric dependent data points.\n * @param {*} known_x The set of independent data points.\n * @returns\n */\nfunction SLOPE(known_y, known_x) {\n  known_y = parseNumberArray(flatten(known_y));\n  known_x = parseNumberArray(flatten(known_x));\n\n  if (anyIsError(known_y, known_x)) {\n    return value\n  }\n\n  const xmean = jStat.mean(known_x);\n  const ymean = jStat.mean(known_y);\n  const n = known_x.length;\n  let num = 0;\n  let den = 0;\n\n  for (let i = 0; i < n; i++) {\n    num += (known_x[i] - xmean) * (known_y[i] - ymean);\n    den += Math.pow(known_x[i] - xmean, 2);\n  }\n\n  return num / den\n}\n\n/**\n * Returns the k-th smallest value in a data set.\n *\n * Category: Statistical\n *\n * @param {*} array An array or range of numerical data for which you want to determine the k-th smallest value.\n * @param {*} k The position (from the smallest) in the array or range of data to return.\n * @returns\n */\nfunction SMALL(array, k) {\n  array = parseNumberArray(flatten(array));\n  k = parseNumber(k);\n\n  if (anyIsError(array, k)) {\n    return array\n  }\n\n  return array.sort((a, b) => a - b)[k - 1]\n}\n\n/**\n * Returns a normalized value.\n *\n * Category: Statistical\n *\n * @param {*} x The value you want to normalize.\n * @param {*} mean The arithmetic mean of the distribution.\n * @param {*} standard_dev The standard deviation of the distribution.\n * @returns\n */\nfunction STANDARDIZE(x, mean, standard_dev) {\n  x = parseNumber(x);\n  mean = parseNumber(mean);\n  standard_dev = parseNumber(standard_dev);\n\n  if (anyIsError(x, mean, standard_dev)) {\n    return value\n  }\n\n  return (x - mean) / standard_dev\n}\n\nconst STDEV = {};\n\n/**\n * Calculates standard deviation based on the entire population.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number arguments 2 to 254 corresponding to a population. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nSTDEV.P = function () {\n  const v = VAR.P.apply(this, arguments);\n  let result = Math.sqrt(v);\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n};\n\n/**\n * Estimates standard deviation based on a sample.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number arguments 2 to 254 corresponding to a sample of a population. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nSTDEV.S = function () {\n  const v = VAR.S.apply(this, arguments);\n  const result = Math.sqrt(v);\n\n  return result\n};\n\n/**\n * Estimates standard deviation based on a sample, including numbers, text, and logical values.\n *\n * Category: Statistical\n *\n * @param {*} args value1, value2, ... Value1 is required, subsequent values are optional. 1 to 255 values corresponding to a sample of a population. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction STDEVA() {\n  const v = VARA.apply(this, arguments);\n  const result = Math.sqrt(v);\n\n  return result\n}\n\n/**\n * Calculates standard deviation based on the entire population, including numbers, text, and logical values.\n *\n * Category: Statistical\n *\n * @param {*} args value1, value2, ... Value1 is required, subsequent values are optional. 1 to 255 values corresponding to a population. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction STDEVPA() {\n  const v = VARPA.apply(this, arguments);\n  let result = Math.sqrt(v);\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n/**\n * Returns the standard error of the predicted y-value for each x in the regression.\n *\n * Category: Statistical\n *\n * @param {*} known_y An array or range of dependent data points.\n * @param {*} known_x An array or range of independent data points.\n * @returns\n */\nfunction STEYX(known_y, known_x) {\n  known_y = parseNumberArray(flatten(known_y));\n  known_x = parseNumberArray(flatten(known_x));\n\n  if (anyIsError(known_y, known_x)) {\n    return value\n  }\n\n  const xmean = jStat.mean(known_x);\n  const ymean = jStat.mean(known_y);\n  const n = known_x.length;\n  let lft = 0;\n  let num = 0;\n  let den = 0;\n\n  for (let i = 0; i < n; i++) {\n    lft += Math.pow(known_y[i] - ymean, 2);\n    num += (known_x[i] - xmean) * (known_y[i] - ymean);\n    den += Math.pow(known_x[i] - xmean, 2);\n  }\n\n  return Math.sqrt((lft - (num * num) / den) / (n - 2))\n}\n\nconst T$1 = {};\n\n/**\n * Returns the Percentage Points (probability) for the Student t-distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The numeric value at which to evaluate the distribution\n * @param {*} deg_freedom An integer indicating the number of degrees of freedom.\n * @param {*} cumulative A logical value that determines the form of the function. If cumulative is TRUE, T.DIST returns the cumulative distribution function; if FALSE, it returns the probability density function.\n * @returns\n */\nT$1.DIST = (x, deg_freedom, cumulative) => {\n  if (cumulative !== 1 && cumulative !== 2) {\n    return num\n  }\n\n  return cumulative === 1 ? T$1.DIST.RT(x, deg_freedom) : T$1.DIST['2T'](x, deg_freedom)\n};\n\n/**\n * Returns the Percentage Points (probability) for the Student t-distribution\n *\n * Category: Statistical\n *\n * @param {*} x The numeric value at which to evaluate the distribution.\n * @param {*} deg_freedom An integer indicating the number of degrees of freedom.\n * @returns\n */\nT$1.DIST['2T'] = function (x, deg_freedom) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (x < 0 || deg_freedom < 1) {\n    return num\n  }\n\n  if (typeof x !== 'number' || typeof deg_freedom !== 'number') {\n    return value\n  }\n\n  return (1 - jStat.studentt.cdf(x, deg_freedom)) * 2\n};\n\n/**\n * Returns the Student's t-distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The numeric value at which to evaluate the distribution.\n * @param {*} deg_freedom An integer indicating the number of degrees of freedom.\n * @returns\n */\nT$1.DIST.RT = function (x, deg_freedom) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (x < 0 || deg_freedom < 1) {\n    return num\n  }\n\n  if (typeof x !== 'number' || typeof deg_freedom !== 'number') {\n    return value\n  }\n\n  return 1 - jStat.studentt.cdf(x, deg_freedom)\n};\n\n/**\n * Returns the t-value of the Student's t-distribution as a function of the probability and the degrees of freedom.\n *\n * Category: Statistical\n *\n * @param {*} probability The probability associated with the Student's t-distribution.\n * @param {*} deg_freedom The number of degrees of freedom with which to characterize the distribution.\n * @returns\n */\nT$1.INV = (probability, deg_freedom) => {\n  probability = parseNumber(probability);\n  deg_freedom = parseNumber(deg_freedom);\n\n  if (anyIsError(probability, deg_freedom)) {\n    return value\n  }\n\n  return jStat.studentt.inv(probability, deg_freedom)\n};\n\n/**\n * Returns the inverse of the Student's t-distribution\n *\n * Category: Statistical\n *\n * @param {*} probability The probability associated with the Student's t-distribution.\n * @param {*} deg_freedom The number of degrees of freedom with which to characterize the distribution.\n * @returns\n */\nT$1.INV['2T'] = (probability, deg_freedom) => {\n  probability = parseNumber(probability);\n  deg_freedom = parseNumber(deg_freedom);\n\n  if (probability <= 0 || probability > 1 || deg_freedom < 1) {\n    return num\n  }\n\n  if (anyIsError(probability, deg_freedom)) {\n    return value\n  }\n\n  return Math.abs(jStat.studentt.inv(probability / 2, deg_freedom))\n};\n\n// The algorithm can be found here:\n// http://www.chem.uoa.gr/applets/AppletTtest/Appl_Ttest2.html\n/**\n * Returns the probability associated with a Student's t-test.\n *\n * Category: Statistical\n *\n * @param {*} array1 The first data set.\n * @param {*} array2 The second data set.\n * @returns\n */\nT$1.TEST = (array1, array2) => {\n  array1 = parseNumberArray(flatten(array1));\n  array2 = parseNumberArray(flatten(array2));\n\n  if (anyIsError(array1, array2)) {\n    return value\n  }\n\n  const mean_x = jStat.mean(array1);\n  const mean_y = jStat.mean(array2);\n  let s_x = 0;\n  let s_y = 0;\n  let i;\n\n  for (i = 0; i < array1.length; i++) {\n    s_x += Math.pow(array1[i] - mean_x, 2);\n  }\n\n  for (i = 0; i < array2.length; i++) {\n    s_y += Math.pow(array2[i] - mean_y, 2);\n  }\n\n  s_x = s_x / (array1.length - 1);\n  s_y = s_y / (array2.length - 1);\n\n  const t = Math.abs(mean_x - mean_y) / Math.sqrt(s_x / array1.length + s_y / array2.length);\n\n  return T$1.DIST['2T'](t, array1.length + array2.length - 2)\n};\n\n/**\n * Returns values along a linear trend.\n *\n * Category: Statistical\n *\n * @param {*} known_ys The set of y-values you already know in the relationship y = mx + b\n * @param {*} known_xs An optional set of x-values that you may already know in the relationship y = mx + b\n * @param {*} new_xs Optional. New x-values for which you want TREND to return corresponding y-values.\n * @returns\n */\nfunction TREND(known_ys, known_xs, new_xs) {\n  known_ys = parseNumberArray(flatten(known_ys));\n  known_xs = parseNumberArray(flatten(known_xs));\n  new_xs = parseNumberArray(flatten(new_xs));\n\n  if (anyIsError(known_ys, known_xs, new_xs)) {\n    return value\n  }\n\n  const linest = LINEST(known_ys, known_xs);\n  const m = linest[0];\n  const b = linest[1];\n  const result = [];\n\n  new_xs.forEach((x) => {\n    result.push(m * x + b);\n  });\n\n  return result\n}\n\n/**\n * Returns the mean of the interior of a data set.\n *\n * Category: Statistical\n *\n * @param {*} array The array or range of values to trim and average.\n * @param {*} percent The fractional number of data points to exclude from the calculation. For example, if percent = 0.2, 4 points are trimmed from a data set of 20 points (20 x 0.2): 2 from the top and 2 from the bottom of the set.\n * @returns\n */\nfunction TRIMMEAN(range, percent) {\n  range = parseNumberArray(flatten(range));\n  percent = parseNumber(percent);\n\n  if (anyIsError(range, percent)) {\n    return value\n  }\n\n  const trim = FLOOR(range.length * percent, 2) / 2;\n\n  return jStat.mean(\n    initial(\n      rest(\n        range.sort((a, b) => a - b),\n        trim\n      ),\n      trim\n    )\n  )\n}\n\nconst VAR = {};\n\n/**\n * Calculates variance based on the entire population.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number arguments 2 to 254 corresponding to a population.\n * @returns\n */\nVAR.P = function () {\n  const range = numbers(flatten(arguments));\n  const n = range.length;\n  let sigma = 0;\n  const mean = AVERAGE(range);\n  let result;\n\n  for (let i = 0; i < n; i++) {\n    sigma += Math.pow(range[i] - mean, 2);\n  }\n\n  result = sigma / n;\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n};\n\n/**\n * Estimates variance based on a sample.\n *\n * Category: Statistical\n *\n * @param {*} args number1, number2, ... Number arguments 2 to 254 corresponding to a sample of a population.\n * @returns\n */\nVAR.S = function () {\n  const range = numbers(flatten(arguments));\n  const n = range.length;\n  let sigma = 0;\n  const mean = AVERAGE(range);\n\n  for (let i = 0; i < n; i++) {\n    sigma += Math.pow(range[i] - mean, 2);\n  }\n\n  return sigma / (n - 1)\n};\n\n/**\n * Estimates variance based on a sample, including numbers, text, and logical values.\n *\n * Category: Statistical\n *\n * @param {*} args value1, value2, ... Value1 is required, subsequent values are optional. 1 to 255 value arguments corresponding to a sample of a population.\n * @returns\n */\nfunction VARA() {\n  const range = flatten(arguments);\n  const n = range.length;\n  let sigma = 0;\n  let count = 0;\n  const mean = AVERAGEA(range);\n\n  for (let i = 0; i < n; i++) {\n    const el = range[i];\n\n    if (typeof el === 'number') {\n      sigma += Math.pow(el - mean, 2);\n    } else if (el === true) {\n      sigma += Math.pow(1 - mean, 2);\n    } else {\n      sigma += Math.pow(0 - mean, 2);\n    }\n\n    if (el !== null) {\n      count++;\n    }\n  }\n\n  return sigma / (count - 1)\n}\n\n/**\n * Calculates variance based on the entire population, including numbers, text, and logical values.\n *\n * Category: Statistical\n *\n * @param {*} args value1, value2, ... Value1 is required, subsequent values are optional. 1 to 255 value arguments corresponding to a population.\n * @returns\n */\nfunction VARPA() {\n  const range = flatten(arguments);\n  const n = range.length;\n  let sigma = 0;\n  let count = 0;\n  const mean = AVERAGEA(range);\n  let result;\n\n  for (let i = 0; i < n; i++) {\n    const el = range[i];\n\n    if (typeof el === 'number') {\n      sigma += Math.pow(el - mean, 2);\n    } else if (el === true) {\n      sigma += Math.pow(1 - mean, 2);\n    } else {\n      sigma += Math.pow(0 - mean, 2);\n    }\n\n    if (el !== null) {\n      count++;\n    }\n  }\n\n  result = sigma / count;\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\nconst WEIBULL = {};\n\n/**\n * Returns the Weibull distribution.\n *\n * Category: Statistical\n *\n * @param {*} x The value at which to evaluate the function.\n * @param {*} alpha A parameter to the distribution.\n * @param {*} beta A parameter to the distribution.\n * @param {*} cumulative Determines the form of the function.\n * @returns\n */\nWEIBULL.DIST = (x, alpha, beta, cumulative) => {\n  x = parseNumber(x);\n  alpha = parseNumber(alpha);\n  beta = parseNumber(beta);\n\n  if (anyIsError(x, alpha, beta)) {\n    return value\n  }\n\n  return cumulative\n    ? 1 - Math.exp(-Math.pow(x / beta, alpha))\n    : (Math.pow(x, alpha - 1) * Math.exp(-Math.pow(x / beta, alpha)) * alpha) / Math.pow(beta, alpha)\n};\n\nconst Z = {};\n\n/**\n * Returns the one-tailed probability-value of a z-test.\n *\n * Category: Statistical\n *\n * @param {*} array The array or range of data against which to test x.\n * @param {*} x The value to test.\n * @param {*} sigma Optional. The population (known) standard deviation. If omitted, the sample standard deviation is used.\n * @returns\n */\nZ.TEST = (array, x, sigma) => {\n  array = parseNumberArray(flatten(array));\n  x = parseNumber(x);\n\n  if (anyIsError(array, x)) {\n    return value\n  }\n\n  sigma = sigma || STDEV.S(array);\n  const n = array.length;\n\n  return 1 - NORM.S.DIST((AVERAGE(array) - x) / (sigma / Math.sqrt(n)), true)\n};\n\n/**\n * Returns the absolute value of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The real number of which you want the absolute value.\n * @returns\n */\nfunction ABS(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  const result = Math.abs(number);\n\n  return result\n}\n\n/**\n * Returns the arccosine of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The cosine of the angle you want and must be from -1 to 1.\n * @returns\n */\nfunction ACOS(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  let result = Math.acos(number);\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n/**\n * Returns the inverse hyperbolic cosine of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number equal to or greater than 1.\n * @returns\n */\nfunction ACOSH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  let result = Math.log(number + Math.sqrt(number * number - 1));\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n/**\n * Returns the arccotangent of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Number is the cotangent of the angle you want. This must be a real number.\n * @returns\n */\nfunction ACOT(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  const result = Math.atan(1 / number);\n\n  return result\n}\n\n/**\n * Returns the hyperbolic arccotangent of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The absolute value of Number must be greater than 1.\n * @returns\n */\nfunction ACOTH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  let result = 0.5 * Math.log((number + 1) / (number - 1));\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n// TODO: use options\n/**\n * Returns an aggregate in a list or database.\n *\n * Category: Math and trigonometry\n *\n * @param {*} function_num A number 1 to 19 that specifies which function to use.\n * @param {*} options A numerical value that determines which values to ignore in the evaluation range for the function. Note: The function will not ignore hidden rows, nested subtotals or nested aggregates if the array argument includes a calculation, for example: =AGGREGATE(14,3,A1:A100*(A1:A100>0),1)\n * @param {*} ref1 The first numeric argument for functions that take multiple numeric arguments for which you want the aggregate value.\n * @param {*} ref2 Optional. Numeric arguments 2 to 253 for which you want the aggregate value. For functions that take an array, ref1 is an array, an array formula, or a reference to a range of values for which you want the aggregate value. Ref2 is a second argument that is required for certain functions.\n * @returns\n */\nfunction AGGREGATE(function_num, options, ref1, ref2) {\n  function_num = parseNumber(function_num);\n  options = parseNumber(function_num);\n\n  if (anyIsError(function_num, options)) {\n    return value\n  }\n\n  switch (function_num) {\n    case 1:\n      return AVERAGE(ref1)\n    case 2:\n      return COUNT(ref1)\n    case 3:\n      return COUNTA(ref1)\n    case 4:\n      return MAX(ref1)\n    case 5:\n      return MIN(ref1)\n    case 6:\n      return PRODUCT(ref1)\n    case 7:\n      return STDEV.S(ref1)\n    case 8:\n      return STDEV.P(ref1)\n    case 9:\n      return SUM(ref1)\n    case 10:\n      return VAR.S(ref1)\n    case 11:\n      return VAR.P(ref1)\n    case 12:\n      return MEDIAN(ref1)\n    case 13:\n      return MODE.SNGL(ref1)\n    case 14:\n      return LARGE(ref1, ref2)\n    case 15:\n      return SMALL(ref1, ref2)\n    case 16:\n      return PERCENTILE.INC(ref1, ref2)\n    case 17:\n      return QUARTILE.INC(ref1, ref2)\n    case 18:\n      return PERCENTILE.EXC(ref1, ref2)\n    case 19:\n      return QUARTILE.EXC(ref1, ref2)\n  }\n}\n\n/**\n * Converts a Roman number to Arabic, as a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} text A string enclosed in quotation marks, an empty string (\"\"), or a reference to a value containing text.\n * @returns\n */\nfunction ARABIC(text) {\n  if (text === undefined || text === null) {\n    return 0\n  }\n\n  if (text instanceof Error) {\n    return text\n  }\n\n  // Credits: Rafa? Kukawski\n  if (!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(text)) {\n    return value\n  }\n\n  let r = 0;\n  text.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g, (i) => {\n    r += {\n      M: 1000,\n      CM: 900,\n      D: 500,\n      CD: 400,\n      C: 100,\n      XC: 90,\n      L: 50,\n      XL: 40,\n      X: 10,\n      IX: 9,\n      V: 5,\n      IV: 4,\n      I: 1\n    }[i];\n  });\n\n  return r\n}\n\n/**\n * Returns the arcsine of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The sine of the angle you want and must be from -1 to 1.\n * @returns\n */\nfunction ASIN(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  let result = Math.asin(number);\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n/**\n * Returns the inverse hyperbolic sine of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number.\n * @returns\n */\nfunction ASINH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return Math.log(number + Math.sqrt(number * number + 1))\n}\n\n/**\n * Returns the arctangent of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The tangent of the angle you want.\n * @returns\n */\nfunction ATAN(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return Math.atan(number)\n}\n\n/**\n * Returns the arctangent from x- and y-coordinates.\n *\n * Category: Math and trigonometry\n *\n * @param {*} x_num The x-coordinate of the point.\n * @param {*} y_num The y-coordinate of the point.\n * @returns\n */\nfunction ATAN2(x_num, y_num) {\n  x_num = parseNumber(x_num);\n  y_num = parseNumber(y_num);\n  const anyError$1 = anyError(x_num, y_num);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return Math.atan2(x_num, y_num)\n}\n\n/**\n * Returns the inverse hyperbolic tangent of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number between 1 and -1.\n * @returns\n */\nfunction ATANH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  let result = Math.log((1 + number) / (1 - number)) / 2;\n\n  if (isNaN(result)) {\n    result = num;\n  }\n\n  return result\n}\n\n/**\n * Converts a number into a text representation with the given radix (base).\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The number that you want to convert. Must be an integer greater than or equal to 0 and less than 2^53.\n * @param {*} radix The base radix that you want to convert the number into. Must be an integer greater than or equal to 2 and less than or equal to 36.\n * @param {*} min_length Optional. The minimum length of the returned string. Must be an integer greater than or equal to 0.\n * @returns\n */\nfunction BASE(number, radix, min_length) {\n  number = parseNumber(number);\n  radix = parseNumber(radix);\n  min_length = parseNumber(min_length);\n  const anyError$1 = anyError(number, radix, min_length);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (radix === 0) {\n    return num\n  }\n\n  const result = number.toString(radix);\n\n  return new Array(Math.max(min_length + 1 - result.length, 0)).join('0') + result\n}\n\n/**\n * Rounds a number to the nearest integer or to the nearest multiple of significance.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The value you want to round.\n * @param {*} significance The multiple to which you want to round.\n * @param {*} mode Optional. For negative numbers, controls whether Number is rounded toward or away from zero.\n * @returns\n */\nfunction CEILING(number, significance, mode) {\n  number = parseNumber(number);\n  significance = parseNumber(significance);\n  mode = parseNumber(mode);\n  const anyError$1 = anyError(number, significance, mode);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (significance === 0) {\n    return 0\n  }\n\n  significance = Math.abs(significance);\n  const precision = -Math.floor(Math.log(significance) / Math.log(10));\n\n  if (number >= 0) {\n    return ROUND(Math.ceil(number / significance) * significance, precision)\n  } else {\n    if (mode === 0) {\n      return -ROUND(Math.floor(Math.abs(number) / significance) * significance, precision)\n    } else {\n      return -ROUND(Math.ceil(Math.abs(number) / significance) * significance, precision)\n    }\n  }\n}\n\nCEILING.MATH = CEILING;\n\nCEILING.PRECISE = CEILING;\n\n/**\n * Returns the number of combinations for a given number of objects.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The number of items.\n * @param {*} number_chosen The number of items in each combination.\n * @returns\n */\nfunction COMBIN(number, number_chosen) {\n  number = parseNumber(number);\n  number_chosen = parseNumber(number_chosen);\n  const anyError$1 = anyError(number, number_chosen);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (number < number_chosen) {\n    return num\n  }\n\n  return FACT(number) / (FACT(number_chosen) * FACT(number - number_chosen))\n}\n\n/**\n * Returns the number of combinations with repetitions for a given number of items.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Must be greater than or equal to 0, and greater than or equal to Number_chosen. Non-integer values are truncated.\n * @param {*} number_chosen Must be greater than or equal to 0. Non-integer values are truncated.\n * @returns\n */\nfunction COMBINA(number, number_chosen) {\n  number = parseNumber(number);\n  number_chosen = parseNumber(number_chosen);\n  const anyError$1 = anyError(number, number_chosen);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (number < number_chosen) {\n    return num\n  }\n\n  return number === 0 && number_chosen === 0 ? 1 : COMBIN(number + number_chosen - 1, number - 1)\n}\n\n/**\n * Returns the cosine of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The angle in radians for which you want the cosine.\n * @returns\n */\nfunction COS(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return Math.cos(number)\n}\n\n/**\n * Returns the hyperbolic cosine of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number for which you want to find the hyperbolic cosine.\n * @returns\n */\nfunction COSH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return (Math.exp(number) + Math.exp(-number)) / 2\n}\n\n/**\n * Returns the hyperbolic cosine of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The angle in radians for which you want the cotangent.\n * @returns\n */\nfunction COT(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number === 0) {\n    return div0\n  }\n\n  return 1 / Math.tan(number)\n}\n\n/**\n * Returns the cotangent of an angle.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number\n * @returns\n */\nfunction COTH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number === 0) {\n    return div0\n  }\n\n  const e2 = Math.exp(2 * number);\n\n  return (e2 + 1) / (e2 - 1)\n}\n\n/**\n * Returns the cosecant of an angle.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number\n * @returns\n */\nfunction CSC(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number === 0) {\n    return div0\n  }\n\n  return 1 / Math.sin(number)\n}\n\n/**\n * Returns the hyperbolic cosecant of an angle.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number\n * @returns\n */\nfunction CSCH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number === 0) {\n    return div0\n  }\n\n  return 2 / (Math.exp(number) - Math.exp(-number))\n}\n\n/**\n * Converts a text representation of a number in a given base into a decimal number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} text\n * @param {*} radix Radix must be an integer.\n * @returns\n */\nfunction DECIMAL(text, radix) {\n  if (arguments.length < 1) {\n    return value\n  }\n\n  text = parseNumber(text);\n  radix = parseNumber(radix);\n  const anyError$1 = anyError(text, radix);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (radix === 0) {\n    return num\n  }\n\n  return parseInt(text, radix)\n}\n\n/**\n * Converts radians to degrees.\n *\n * Category: Math and trigonometry\n *\n * @param {*} angle The angle in radians that you want to convert.\n * @returns\n */\nfunction DEGREES(angle) {\n  angle = parseNumber(angle);\n\n  if (angle instanceof Error) {\n    return angle\n  }\n\n  return (angle * 180) / Math.PI\n}\n\n/**\n * Rounds a number up to the nearest even integer.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The value to round.\n * @returns\n */\nfunction EVEN(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return CEILING(number, -2, -1)\n}\n\n/**\n * Returns e raised to the power of a given number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The exponent applied to the base e.\n * @returns\n */\nfunction EXP(number) {\n  if (arguments.length < 1) {\n    return na\n  }\n\n  if (arguments.length > 1) {\n    return error\n  }\n\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  number = Math.exp(number);\n\n  return number\n}\n\nconst MEMOIZED_FACT = [];\n/**\n * Returns the factorial of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The nonnegative number for which you want the factorial. If number is not an integer, it is truncated.\n * @returns\n */\nfunction FACT(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  const n = Math.floor(number);\n\n  if (n === 0 || n === 1) {\n    return 1\n  } else if (MEMOIZED_FACT[n] > 0) {\n    return MEMOIZED_FACT[n]\n  } else {\n    MEMOIZED_FACT[n] = FACT(n - 1) * n;\n\n    return MEMOIZED_FACT[n]\n  }\n}\n\n/**\n * Returns the double factorial of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The value for which to return the double factorial. If number is not an integer, it is truncated.\n * @returns\n */\nfunction FACTDOUBLE(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  const n = Math.floor(number);\n\n  return n <= 0 ? 1 : n * FACTDOUBLE(n - 2)\n}\n\n/**\n * Rounds a number down, toward zero.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The numeric value you want to round.\n * @param {*} significance The multiple to which you want to round.\n * @returns\n */\nfunction FLOOR(number, significance) {\n  number = parseNumber(number);\n  significance = parseNumber(significance);\n  const anyError$1 = anyError(number, significance);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (significance === 0) {\n    return 0\n  }\n\n  if (!(number >= 0 && significance > 0) && !(number <= 0 && significance < 0)) {\n    return num\n  }\n\n  significance = Math.abs(significance);\n  const precision = -Math.floor(Math.log(significance) / Math.log(10));\n\n  return number >= 0\n    ? ROUND(Math.floor(number / significance) * significance, precision)\n    : -ROUND(Math.ceil(Math.abs(number) / significance), precision)\n}\n\n// TODO: Verify\n\n/**\n * Rounds a number down, to the nearest integer or to the nearest multiple of significance.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The number to be rounded down.\n * @param {*} significance Optional. The multiple to which you want to round.\n * @param {*} mode Optional. The direction (toward or away from 0) to round negative numbers.\n * @returns\n */\nFLOOR.MATH = (number, significance, mode) => {\n  if (significance instanceof Error) {\n    return significance\n  }\n\n  significance = significance === undefined ? 0 : significance;\n\n  number = parseNumber(number);\n  significance = parseNumber(significance);\n  mode = parseNumber(mode);\n  const anyError$1 = anyError(number, significance, mode);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (significance === 0) {\n    return 0\n  }\n\n  significance = significance ? Math.abs(significance) : 1;\n  const precision = -Math.floor(Math.log(significance) / Math.log(10));\n\n  if (number >= 0) {\n    return ROUND(Math.floor(number / significance) * significance, precision)\n  } else if (mode === 0 || mode === undefined) {\n    return -ROUND(Math.ceil(Math.abs(number) / significance) * significance, precision)\n  }\n\n  return -ROUND(Math.floor(Math.abs(number) / significance) * significance, precision)\n};\n\n// Deprecated\n\n/**\n * Rounds a number the nearest integer or to the nearest multiple of significance. Regardless of the sign of the number, the number is rounded up.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The value to be rounded.\n * @param {*} significance Optional. The multiple to which number is to be rounded. If significance is omitted, its default value is 1.\n * @returns\n */\nFLOOR.PRECISE = FLOOR['MATH'];\n\n// adapted http://rosettacode.org/wiki/Greatest_common_divisor#JavaScript\n/**\n * Returns the greatest common divisor.\n *\n * Category: Math and trigonometry\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 values. If any value is not an integer, it is truncated.\n * @returns\n */\nfunction GCD() {\n  const range = parseNumberArray(flatten(arguments));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  const n = range.length;\n  const r0 = range[0];\n  let x = r0 < 0 ? -r0 : r0;\n\n  for (let i = 1; i < n; i++) {\n    const ri = range[i];\n    let y = ri < 0 ? -ri : ri;\n\n    while (x && y) {\n      if (x > y) {\n        x %= y;\n      } else {\n        y %= x;\n      }\n    }\n\n    x += y;\n  }\n\n  return x\n}\n\n/**\n * Rounds a number down to the nearest integer.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The real number you want to round down to an integer.\n * @returns\n */\nfunction INT(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return Math.floor(number)\n}\n\n// TODO: verify\nconst ISO = {\n  CEILING: CEILING\n};\n\n/**\n * Returns the least common multiple.\n *\n * Category: Math and trigonometry\n *\n * @param {*} args number1, number2,... Number1 is required, subsequent numbers are optional. 1 to 255 values for which you want the least common multiple. If value is not an integer, it is truncated.\n * @returns\n */\nfunction LCM() {\n  // Credits: Jonas Raoni Soares Silva\n  const o = parseNumberArray(flatten(arguments));\n\n  if (o instanceof Error) {\n    return o\n  }\n\n  for (var i, j, n, d, r = 1; (n = o.pop()) !== undefined; ) {\n    if (n === 0) {\n      return 0\n    }\n\n    while (n > 1) {\n      if (n % 2) {\n        for (i = 3, j = Math.floor(Math.sqrt(n)); i <= j && n % i; i += 2) {\n          // empty\n        }\n\n        d = i <= j ? i : n;\n      } else {\n        d = 2;\n      }\n\n      for (n /= d, r *= d, i = o.length; i; o[--i] % d === 0 && (o[i] /= d) === 1 && o.splice(i, 1)) {\n        // empty\n      }\n    }\n  }\n\n  return r\n}\n\n/**\n * Returns the natural logarithm of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The positive real number for which you want the natural logarithm.\n * @returns\n */\nfunction LN(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number === 0) {\n    return num\n  }\n\n  return Math.log(number)\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction LN10() {\n  return Math.log(10)\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction LN2() {\n  return Math.log(2)\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction LOG10E() {\n  return Math.LOG10E\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction LOG2E() {\n  return Math.LOG2E\n}\n\n/**\n * Returns the logarithm of a number to a specified base.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The positive real number for which you want the logarithm.\n * @param {*} base Optional. The base of the logarithm. If base is omitted, it is assumed to be 10.\n * @returns\n */\nfunction LOG(number, base) {\n  number = parseNumber(number);\n  base = parseNumber(base);\n  const anyError$1 = anyError(number, base);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (number === 0 || base === 0) {\n    return num\n  }\n\n  return Math.log(number) / Math.log(base)\n}\n\n/**\n * Returns the base-10 logarithm of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The positive real number for which you want the base-10 logarithm.\n * @returns\n */\nfunction LOG10(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number === 0) {\n    return num\n  }\n\n  return Math.log(number) / Math.log(10)\n}\n\n/**\n * Returns the remainder from division.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The number for which you want to find the remainder.\n * @param {*} divisor The number by which you want to divide number.\n * @returns\n */\nfunction MOD(number, divisor) {\n  number = parseNumber(number);\n  divisor = parseNumber(divisor);\n  const anyError$1 = anyError(number, divisor);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (divisor === 0) {\n    return div0\n  }\n\n  let modulus = Math.abs(number % divisor);\n  modulus = number < 0 ? divisor - modulus : modulus;\n\n  return divisor > 0 ? modulus : -modulus\n}\n\n/**\n * Returns a number rounded to the desired multiple.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The value to round.\n * @param {*} multiple The multiple to which you want to round number.\n * @returns\n */\nfunction MROUND(number, multiple) {\n  number = parseNumber(number);\n  multiple = parseNumber(multiple);\n  const anyError$1 = anyError(number, multiple);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (number * multiple === 0) {\n    return 0\n  }\n\n  if (number * multiple < 0) {\n    return num\n  }\n\n  return Math.round(number / multiple) * multiple\n}\n\n/**\n * Returns the multinomial of a set of numbers.\n *\n * Category: Math and trigonometry\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 values for which you want the multinomial.\n * @returns\n */\nfunction MULTINOMIAL() {\n  const args = parseNumberArray(flatten(arguments));\n\n  if (args instanceof Error) {\n    return args\n  }\n\n  let sum = 0;\n  let divisor = 1;\n\n  for (let i = 0; i < args.length; i++) {\n    sum += args[i];\n    divisor *= FACT(args[i]);\n  }\n\n  return FACT(sum) / divisor\n}\n\n/**\n * Rounds a number up to the nearest odd integer.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number: The value to round.\n * @returns\n */\nfunction ODD(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  let temp = Math.ceil(Math.abs(number));\n  temp = temp & 1 ? temp : temp + 1;\n\n  return number >= 0 ? temp : -temp\n}\n\n/**\n * Returns the value of pi.\n *\n * Category: Math and trigonometry\n *\n * @returns\n */\nfunction PI() {\n  return Math.PI\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction E() {\n  return Math.E\n}\n\n/**\n * Returns the result of a number raised to a power.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The base number. It can be any real number.\n * @param {*} power The exponent to which the base number is raised.\n * @returns\n */\nfunction POWER(number, power) {\n  number = parseNumber(number);\n  power = parseNumber(power);\n  const anyError$1 = anyError(number, power);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (number === 0 && power === 0) {\n    return num\n  }\n\n  const result = Math.pow(number, power);\n\n  if (isNaN(result)) {\n    return num\n  }\n\n  return result\n}\n\n/**\n * Multiplies its arguments.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number1 The first number or range that you want to multiply.\n * @param {*} args number2, ... Optional. Additional numbers or ranges that you want to multiply, up to a maximum of 255 arguments.\n * @returns\n */\nfunction PRODUCT() {\n  const flatArguments = flatten(arguments);\n  const flatArgumentsDefined = flatArguments.filter((arg) => arg !== undefined && arg !== null);\n\n  if (flatArgumentsDefined.length === 0) {\n    return 0\n  }\n\n  const args = parseNumberArray(flatArgumentsDefined);\n\n  if (args instanceof Error) {\n    return args\n  }\n\n  let result = 1;\n\n  for (let i = 0; i < args.length; i++) {\n    result *= args[i];\n  }\n\n  return result\n}\n\n/**\n * Returns the integer portion of a division.\n *\n * Category: Math and trigonometry\n *\n * @param {*} numerator The dividend.\n * @param {*} denominator The divisor.\n * @returns\n */\nfunction QUOTIENT(numerator, denominator) {\n  numerator = parseNumber(numerator);\n  denominator = parseNumber(denominator);\n  const anyError$1 = anyError(numerator, denominator);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return parseInt(numerator / denominator, 10)\n}\n\n/**\n * Converts degrees to radians.\n *\n * Category: Math and trigonometry\n *\n * @param {*} angle An angle in degrees that you want to convert.\n * @returns\n */\nfunction RADIANS(angle) {\n  angle = parseNumber(angle);\n\n  if (angle instanceof Error) {\n    return angle\n  }\n\n  return (angle * Math.PI) / 180\n}\n\n/**\n * Returns a random number between 0 and 1.\n *\n * Category: Math and trigonometry\n *\n * @returns\n */\nfunction RAND() {\n  return Math.random()\n}\n\n/**\n * Returns a random number between the numbers you specify.\n *\n * Category: Math and trigonometry\n *\n * @param {*} bottom The smallest integer RANDBETWEEN will return.\n * @param {*} top The largest integer RANDBETWEEN will return.\n * @returns\n */\nfunction RANDBETWEEN(bottom, top) {\n  bottom = parseNumber(bottom);\n  top = parseNumber(top);\n  const anyError$1 = anyError(bottom, top);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n  // Creative Commons Attribution 3.0 License\n  // Copyright (c) 2012 eqcode\n\n  return bottom + Math.ceil((top - bottom + 1) * Math.random()) - 1\n}\n\n// TODO\n/**\n * Converts an arabic numeral to roman, as text.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The Arabic numeral you want converted.\n * @returns\n */\nfunction ROMAN(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  // The MIT License\n  // Copyright (c) 2008 Steven Levithan\n  const digits = String(number).split('');\n  const key = [\n    '',\n    'C',\n    'CC',\n    'CCC',\n    'CD',\n    'D',\n    'DC',\n    'DCC',\n    'DCCC',\n    'CM',\n    '',\n    'X',\n    'XX',\n    'XXX',\n    'XL',\n    'L',\n    'LX',\n    'LXX',\n    'LXXX',\n    'XC',\n    '',\n    'I',\n    'II',\n    'III',\n    'IV',\n    'V',\n    'VI',\n    'VII',\n    'VIII',\n    'IX'\n  ];\n  let roman = '';\n  let i = 3;\n\n  while (i--) {\n    roman = (key[+digits.pop() + i * 10] || '') + roman;\n  }\n\n  return new Array(+digits.join('') + 1).join('M') + roman\n}\n\n/**\n * Rounds a number to a specified number of digits.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The number that you want to round.\n * @param {*} num_digits The number of digits to which you want to round the number argument.\n * @returns\n */\nfunction ROUND(number, num_digits) {\n  number = parseNumber(number);\n  num_digits = parseNumber(num_digits);\n  const anyError$1 = anyError(number, num_digits);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return Number(Math.round(Number(number + 'e' + num_digits)) + 'e' + num_digits * -1)\n}\n\n/**\n * Rounds a number down, toward zero.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number that you want rounded down.\n * @param {*} num_digits The number of digits to which you want to round number.\n * @returns\n */\nfunction ROUNDDOWN(number, num_digits) {\n  number = parseNumber(number);\n  num_digits = parseNumber(num_digits);\n  const anyError$1 = anyError(number, num_digits);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  const sign = number > 0 ? 1 : -1;\n\n  return (sign * Math.floor(Math.abs(number) * Math.pow(10, num_digits))) / Math.pow(10, num_digits)\n}\n\n/**\n * Rounds a number up, away from zero.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number that you want rounded up.\n * @param {*} num_digits The number of digits to which you want to round number.\n * @returns\n */\nfunction ROUNDUP(number, num_digits) {\n  number = parseNumber(number);\n  num_digits = parseNumber(num_digits);\n  const anyError$1 = anyError(number, num_digits);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  const sign = number > 0 ? 1 : -1;\n\n  return (sign * Math.ceil(Math.abs(number) * Math.pow(10, num_digits))) / Math.pow(10, num_digits)\n}\n\n/**\n * Returns the secant of an angle.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The angle in radians for which you want the secant.\n * @returns\n */\nfunction SEC(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return 1 / Math.cos(number)\n}\n\n/**\n * Returns the hyperbolic secant of an angle.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The angle in radians for which you want the hyperbolic secant.\n * @returns\n */\nfunction SECH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return 2 / (Math.exp(number) + Math.exp(-number))\n}\n\n/**\n * Returns the sum of a power series based on the formula.\n *\n * Category: Math and trigonometry\n *\n * @param {*} x The input value to the power series.\n * @param {*} n The initial power to which you want to raise x.\n * @param {*} m The step by which to increase n for each term in the series.\n * @param {*} coefficients A set of coefficients by which each successive power of x is multiplied. The number of values in coefficients determines the number of terms in the power series. For example, if there are three values in coefficients, then there will be three terms in the power series.\n * @returns\n */\nfunction SERIESSUM(x, n, m, coefficients) {\n  x = parseNumber(x);\n  n = parseNumber(n);\n  m = parseNumber(m);\n  coefficients = parseNumberArray(coefficients);\n\n  if (anyIsError(x, n, m, coefficients)) {\n    return value\n  }\n\n  let result = coefficients[0] * Math.pow(x, n);\n\n  for (let i = 1; i < coefficients.length; i++) {\n    result += coefficients[i] * Math.pow(x, n + i * m);\n  }\n\n  return result\n}\n\n/**\n * Returns the sign of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number.\n * @returns\n */\nfunction SIGN(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number < 0) {\n    return -1\n  } else if (number === 0) {\n    return 0\n  } else {\n    return 1\n  }\n}\n\n/**\n * Returns the sine of the given angle.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The angle in radians for which you want the sine.\n * @returns\n */\nfunction SIN(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return Math.sin(number)\n}\n\n/**\n * Returns the hyperbolic sine of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number.\n * @returns\n */\nfunction SINH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return (Math.exp(number) - Math.exp(-number)) / 2\n}\n\n/**\n * Returns a positive square root.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The number for which you want the square root.\n * @returns\n */\nfunction SQRT(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  if (number < 0) {\n    return num\n  }\n\n  return Math.sqrt(number)\n}\n\n/**\n * Returns the square root of (number * pi).\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The number by which pi is multiplied.\n * @returns\n */\nfunction SQRTPI(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return Math.sqrt(number * Math.PI)\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction SQRT1_2() {\n  return 1 / Math.sqrt(2)\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction SQRT2() {\n  return Math.sqrt(2)\n}\n\n/**\n * Returns a subtotal in a list or database.\n *\n * Category: Math and trigonometry\n *\n * @param {*} function_num The number 1-11 or 101-111 that specifies the function to use for the subtotal. 1-11 includes manually-hidden rows, while 101-111 excludes them; filtered-out values are always excluded.\n * @param {*} ref1 The first named range or reference for which you want the subtotal.\n * @returns\n */\nfunction SUBTOTAL(function_num, ref1) {\n  function_num = parseNumber(function_num);\n\n  if (function_num instanceof Error) {\n    return function_num\n  }\n\n  switch (function_num) {\n    case 1:\n      return AVERAGE(ref1)\n    case 2:\n      return COUNT(ref1)\n    case 3:\n      return COUNTA(ref1)\n    case 4:\n      return MAX(ref1)\n    case 5:\n      return MIN(ref1)\n    case 6:\n      return PRODUCT(ref1)\n    case 7:\n      return STDEV.S(ref1)\n    case 8:\n      return STDEV.P(ref1)\n    case 9:\n      return SUM(ref1)\n    case 10:\n      return VAR.S(ref1)\n    case 11:\n      return VAR.P(ref1)\n    // no hidden values for us\n    case 101:\n      return AVERAGE(ref1)\n    case 102:\n      return COUNT(ref1)\n    case 103:\n      return COUNTA(ref1)\n    case 104:\n      return MAX(ref1)\n    case 105:\n      return MIN(ref1)\n    case 106:\n      return PRODUCT(ref1)\n    case 107:\n      return STDEV.S(ref1)\n    case 108:\n      return STDEV.P(ref1)\n    case 109:\n      return SUM(ref1)\n    case 110:\n      return VAR.S(ref1)\n    case 111:\n      return VAR.P(ref1)\n  }\n}\n\n/**\n * Formula.js only\n *\n * @param {*} num1\n * @param {*} num2\n * @returns\n */\nfunction ADD(num1, num2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  num1 = parseNumber(num1);\n  num2 = parseNumber(num2);\n  const anyError$1 = anyError(num1, num2);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return num1 + num2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} num1\n * @param {*} num2\n * @returns\n */\nfunction MINUS(num1, num2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  num1 = parseNumber(num1);\n  num2 = parseNumber(num2);\n  const anyError$1 = anyError(num1, num2);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return num1 - num2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} dividend\n * @param {*} divisor\n * @returns\n */\nfunction DIVIDE(dividend, divisor) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  dividend = parseNumber(dividend);\n  divisor = parseNumber(divisor);\n  const anyError$1 = anyError(dividend, divisor);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (divisor === 0) {\n    return div0\n  }\n\n  return dividend / divisor\n}\n\n/**\n * Formula.js only\n *\n * @param {*} factor1\n * @param {*} factor2\n * @returns\n */\nfunction MULTIPLY(factor1, factor2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  factor1 = parseNumber(factor1);\n  factor2 = parseNumber(factor2);\n  const anyError$1 = anyError(factor1, factor2);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return factor1 * factor2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} num1\n * @param {*} num2\n * @returns\n */\nfunction GT(num1, num2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (num1 instanceof Error) {\n    return num1\n  }\n\n  if (num2 instanceof Error) {\n    return num2\n  }\n\n  if (anyIsString(num1, num2)) {\n    num1 = parseString(num1);\n    num2 = parseString(num2);\n  } else {\n    num1 = parseNumber(num1);\n    num2 = parseNumber(num2);\n  }\n\n  const anyError$1 = anyError(num1, num2);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return num1 > num2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} num1\n * @param {*} num2\n * @returns\n */\nfunction GTE(num1, num2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (anyIsString(num1, num2)) {\n    num1 = parseString(num1);\n    num2 = parseString(num2);\n  } else {\n    num1 = parseNumber(num1);\n    num2 = parseNumber(num2);\n  }\n\n  const anyError$1 = anyError(num1, num2);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return num1 >= num2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} num1\n * @param {*} num2\n * @returns\n */\nfunction LT(num1, num2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (anyIsString(num1, num2)) {\n    num1 = parseString(num1);\n    num2 = parseString(num2);\n  } else {\n    num1 = parseNumber(num1);\n    num2 = parseNumber(num2);\n  }\n\n  const anyError$1 = anyError(num1, num2);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return num1 < num2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} num1\n * @param {*} num2\n * @returns\n */\nfunction LTE(num1, num2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (anyIsString(num1, num2)) {\n    num1 = parseString(num1);\n    num2 = parseString(num2);\n  } else {\n    num1 = parseNumber(num1);\n    num2 = parseNumber(num2);\n  }\n\n  const anyError$1 = anyError(num1, num2);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  return num1 <= num2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} value1\n * @param {*} value2\n * @returns\n */\nfunction EQ(value1, value2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (value1 instanceof Error) {\n    return value1\n  }\n\n  if (value2 instanceof Error) {\n    return value2\n  }\n\n  if (value1 === null) {\n    value1 = undefined;\n  }\n\n  if (value2 === null) {\n    value2 = undefined;\n  }\n\n  return value1 === value2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} value1\n * @param {*} value2\n * @returns\n */\nfunction NE(value1, value2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  if (value1 instanceof Error) {\n    return value1\n  }\n\n  if (value2 instanceof Error) {\n    return value2\n  }\n\n  if (value1 === null) {\n    value1 = undefined;\n  }\n\n  if (value2 === null) {\n    value2 = undefined;\n  }\n\n  return value1 !== value2\n}\n\n/**\n * Formula.js only\n *\n * @param {*} base\n * @param {*} exponent\n * @returns\n */\nfunction POW(base, exponent) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  return POWER(base, exponent)\n}\n\n/**\n * Adds its arguments.\n *\n * Category: Math and trigonometry\n *\n * @returns\n */\nfunction SUM() {\n  let result = 0;\n\n  arrayEach(argsToArray(arguments), (value) => {\n    if (result instanceof Error) {\n      return false\n    } else if (value instanceof Error) {\n      result = value;\n    } else if (typeof value === 'number') {\n      result += value;\n    } else if (typeof value === 'string') {\n      const parsed = parseFloat(value);\n\n      !isNaN(parsed) && (result += parsed);\n    } else if (Array.isArray(value)) {\n      const inner_result = SUM.apply(null, value);\n\n      if (inner_result instanceof Error) {\n        result = inner_result;\n      } else {\n        result += inner_result;\n      }\n    }\n  });\n\n  return result\n}\n\n/**\n * Adds the values specified by a given criteria.\n *\n * Category: Math and trigonometry\n *\n * @param {*} range The range of values that you want evaluated by criteria. Cells in each range must be numbers or names, arrays, or references that contain numbers. Blank and text values are ignored.\n * @param {*} criteria The criteria in the form of a number, expression, a value reference, text, or a function that defines which values will be added.\n * @param {*} sum_range Optional. The actual values to add, if you want to add values other than those specified in the range argument. If the sum_range argument is omitted, Excel adds the values that are specified in the range argument (the same values to which the criteria is applied). Sum_range should be the same size and shape as range. If it isn't, performance may suffer, and the formula will sum a range of values that starts with the first value in sum_range but has the same dimensions as range.\n * @returns\n */\nfunction SUMIF(range, criteria, sum_range) {\n  range = flatten(range);\n\n  sum_range = sum_range ? flatten(sum_range) : range;\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  if (criteria === undefined || criteria === null || criteria instanceof Error) {\n    return 0\n  }\n\n  let result = 0;\n  const isWildcard = criteria === '*';\n  const tokenizedCriteria = isWildcard ? null : parse(criteria + '');\n\n  for (let i = 0; i < range.length; i++) {\n    const value = range[i];\n    const sumValue = sum_range[i];\n\n    if (isWildcard) {\n      result += value;\n    } else {\n      const tokens = [createToken(value, TOKEN_TYPE_LITERAL)].concat(tokenizedCriteria);\n\n      result += compute(tokens) ? sumValue : 0;\n    }\n  }\n\n  return result\n}\n\n/**\n * Adds the values in a range that meet multiple criteria.\n *\n * Category: Math and trigonometry\n *\n * @returns\n */\nfunction SUMIFS() {\n  const args = argsToArray(arguments);\n  const range = parseNumberArray(flatten(args.shift()));\n\n  if (range instanceof Error) {\n    return range\n  }\n\n  const criterias = args;\n  const criteriaLength = criterias.length / 2;\n\n  for (let i = 0; i < criteriaLength; i++) {\n    criterias[i * 2] = flatten(criterias[i * 2]);\n  }\n\n  let result = 0;\n\n  for (let i = 0; i < range.length; i++) {\n    let isMeetCondition = false;\n\n    for (let j = 0; j < criteriaLength; j++) {\n      const valueToTest = criterias[j * 2][i];\n      const criteria = criterias[j * 2 + 1];\n      const isWildcard = criteria === void 0 || criteria === '*';\n      let computedResult = false;\n\n      if (isWildcard) {\n        computedResult = true;\n      } else {\n        const tokenizedCriteria = parse(criteria + '');\n        const tokens = [createToken(valueToTest, TOKEN_TYPE_LITERAL)].concat(\n          tokenizedCriteria\n        );\n\n        computedResult = compute(tokens);\n      }\n\n      // Criterias are calculated as AND so any `false` breakes the loop as unmeet condition\n      if (!computedResult) {\n        isMeetCondition = false;\n        break\n      }\n\n      isMeetCondition = true;\n    }\n\n    if (isMeetCondition) {\n      result += range[i];\n    }\n  }\n\n  return result\n}\n\n/**\n * Returns the sum of the products of corresponding array components.\n *\n * Category: Math and trigonometry\n *\n * @returns\n */\nfunction SUMPRODUCT() {\n  if (!arguments || arguments.length === 0) {\n    return value\n  }\n\n  const arrays = arguments.length + 1;\n  let result = 0;\n  let product;\n  let k;\n  let _i;\n  let _ij;\n\n  for (let i = 0; i < arguments[0].length; i++) {\n    if (!(arguments[0][i] instanceof Array)) {\n      product = 1;\n\n      for (k = 1; k < arrays; k++) {\n        const _i_arg = arguments[k - 1][i];\n\n        if (_i_arg instanceof Error) {\n          return _i_arg\n        }\n\n        _i = parseNumber(_i_arg);\n\n        if (_i instanceof Error) {\n          return _i\n        }\n\n        product *= _i;\n      }\n\n      result += product;\n    } else {\n      for (let j = 0; j < arguments[0][i].length; j++) {\n        product = 1;\n\n        for (k = 1; k < arrays; k++) {\n          const _ij_arg = arguments[k - 1][i][j];\n\n          if (_ij_arg instanceof Error) {\n            return _ij_arg\n          }\n\n          _ij = parseNumber(_ij_arg);\n\n          if (_ij instanceof Error) {\n            return _ij\n          }\n\n          product *= _ij;\n        }\n\n        result += product;\n      }\n    }\n  }\n\n  return result\n}\n\n/**\n * Returns the sum of the squares of the arguments.\n *\n * Category: Math and trigonometry\n *\n * @param {*} args number1, number2, ... Number1 is required, subsequent numbers are optional. 1 to 255 arguments for which you want the sum of the squares. You can also use a single array or a reference to an array instead of arguments separated by commas.\n * @returns\n */\nfunction SUMSQ() {\n  const numbers = parseNumberArray(flatten(arguments));\n\n  if (numbers instanceof Error) {\n    return numbers\n  }\n\n  let result = 0;\n  const length = numbers.length;\n\n  for (let i = 0; i < length; i++) {\n    result += ISNUMBER(numbers[i]) ? numbers[i] * numbers[i] : 0;\n  }\n\n  return result\n}\n\n/**\n * Returns the sum of the difference of squares of corresponding values in two arrays.\n *\n * Category: Math and trigonometry\n *\n * @param {*} array_x The first array or range of values.\n * @param {*} array_y The second array or range of values.\n * @returns\n */\nfunction SUMX2MY2(array_x, array_y) {\n  array_x = parseNumberArray(flatten(array_x));\n  array_y = parseNumberArray(flatten(array_y));\n\n  if (anyIsError(array_x, array_y)) {\n    return value\n  }\n\n  let result = 0;\n\n  for (let i = 0; i < array_x.length; i++) {\n    result += array_x[i] * array_x[i] - array_y[i] * array_y[i];\n  }\n\n  return result\n}\n\n/**\n * Returns the sum of the sum of squares of corresponding values in two arrays.\n *\n * Category: Math and trigonometry\n *\n * @param {*} array_x The first array or range of values.\n * @param {*} array_y The second array or range of values.\n * @returns\n */\nfunction SUMX2PY2(array_x, array_y) {\n  array_x = parseNumberArray(flatten(array_x));\n  array_y = parseNumberArray(flatten(array_y));\n\n  if (anyIsError(array_x, array_y)) {\n    return value\n  }\n\n  let result = 0;\n  array_x = parseNumberArray(flatten(array_x));\n  array_y = parseNumberArray(flatten(array_y));\n\n  for (let i = 0; i < array_x.length; i++) {\n    result += array_x[i] * array_x[i] + array_y[i] * array_y[i];\n  }\n\n  return result\n}\n\n/**\n * Returns the sum of squares of differences of corresponding values in two arrays.\n *\n * Category: Math and trigonometry\n *\n * @param {*} array_x The first array or range of values.\n * @param {*} array_y The second array or range of values.\n * @returns\n */\nfunction SUMXMY2(array_x, array_y) {\n  array_x = parseNumberArray(flatten(array_x));\n  array_y = parseNumberArray(flatten(array_y));\n\n  if (anyIsError(array_x, array_y)) {\n    return value\n  }\n\n  let result = 0;\n  array_x = flatten(array_x);\n  array_y = flatten(array_y);\n\n  for (let i = 0; i < array_x.length; i++) {\n    result += Math.pow(array_x[i] - array_y[i], 2);\n  }\n\n  return result\n}\n\n/**\n * Returns the tangent of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The angle in radians for which you want the tangent.\n * @returns\n */\nfunction TAN(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return Math.tan(number)\n}\n\n/**\n * Returns the hyperbolic tangent of a number.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number Any real number.\n * @returns\n */\nfunction TANH(number) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  const e2 = Math.exp(2 * number);\n\n  return (e2 - 1) / (e2 + 1)\n}\n\n/**\n * Truncates a number to an integer.\n *\n * Category: Math and trigonometry\n *\n * @param {*} number The number you want to truncate.\n * @param {*} num_digits Optional. A number specifying the precision of the truncation. The default value for num_digits is 0 (zero).\n * @returns\n */\nfunction TRUNC(number, num_digits) {\n  number = parseNumber(number);\n  num_digits = parseNumber(num_digits);\n  const anyError$1 = anyError(number, num_digits);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  const sign = number > 0 ? 1 : -1;\n\n  return (sign * Math.floor(Math.abs(number) * Math.pow(10, num_digits))) / Math.pow(10, num_digits)\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Changes full-width (double-byte) English letters or katakana within a character string to half-width (single-byte) characters.\n *\n * Category: Text\n *\n * @param {*} text The text or a reference to a value that contains the text you want to change. If text does not contain any full-width letters, text is not changed.\n * @returns\n */\nfunction ASC() {\n  throw new Error('ASC is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Converts a number to text, using the  (baht) currency format.\n *\n * Category: Text\n *\n * @param {*} number A number you want to convert to text, or a reference to a value containing a number, or a formula that evaluates to a number.\n * @returns\n */\nfunction BAHTTEXT() {\n  throw new Error('BAHTTEXT is not implemented')\n}\n\n/**\n * Returns the character specified by the code number.\n *\n * Category: Text\n *\n * @param {*} number A number between 1 and 255 specifying which character you want. The character is from the character set used by your computer. Note: Excel for the web supports only CHAR(9), CHAR(10), CHAR(13), and CHAR(32) and above.\n * @returns\n */\nfunction CHAR(number) {\n  number = parseNumber(number);\n\n  if (number === 0) {\n    return value\n  }\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  return String.fromCharCode(number)\n}\n\n/**\n * Removes all nonprintable characters from text.\n *\n * Category: Text\n *\n * @param {*} text Any worksheet information from which you want to remove nonprintable characters.\n * @returns\n */\nfunction CLEAN(text) {\n  if (anyIsError(text)) {\n    return text\n  }\n\n  text = text || '';\n  const re = /[\\0-\\x1F]/g;\n\n  return text.replace(re, '')\n}\n\n/**\n * Returns a numeric code for the first character in a text string.\n *\n * Category: Text\n *\n * @param {*} text The text for which you want the code of the first character.\n * @returns\n */\nfunction CODE(text) {\n  if (anyIsError(text)) {\n    return text\n  }\n\n  text = text || '';\n  let result = text.charCodeAt(0);\n\n  if (isNaN(result)) {\n    result = value;\n  }\n\n  return result\n}\n\n/**\n * Joins several text items into one text item.\n *\n * Category: Text\n *\n * @returns\n */\nfunction CONCATENATE() {\n  const args = flatten(arguments);\n  const someError = anyError.apply(undefined, args);\n\n  if (someError) {\n    return someError\n  }\n\n  let trueFound = 0;\n\n  while ((trueFound = args.indexOf(true)) > -1) {\n    args[trueFound] = 'TRUE';\n  }\n\n  let falseFound = 0;\n\n  while ((falseFound = args.indexOf(false)) > -1) {\n    args[falseFound] = 'FALSE';\n  }\n\n  return args.join('')\n}\n\nconst CONCAT = CONCATENATE;\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Changes half-width (single-byte) English letters or katakana within a character string to full-width (double-byte) characters.\n *\n * Category: Text\n *\n * @param {*} text The text or a reference to a value that contains the text you want to change. If text does not contain any half-width English letters or katakana, text is not changed.\n * @returns\n */\nfunction DBCS() {\n  throw new Error('DBCS is not implemented')\n}\n\n/**\n * Converts a number to text, using the $ (dollar) currency format.\n *\n * Category: Text\n *\n * @param {*} number A number, a reference to a value containing a number, or a formula that evaluates to a number.\n * @param {*} decimals Optional. The number of digits to the right of the decimal point. If this is negative, the number is rounded to the left of the decimal point. If you omit decimals, it is assumed to be 2.\n * @returns\n */\nfunction DOLLAR(number, decimals = 2) {\n  number = parseNumber(number);\n  if (isNaN(number)) {\n    return value\n  }\n\n  number = ROUND(number, decimals);\n\n  const options = {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: decimals >= 0 ? decimals : 0,\n    maximumFractionDigits: decimals >= 0 ? decimals : 0\n  };\n\n  const formattedNumber = number.toLocaleString('en-US', options);\n\n  if (number < 0) {\n    return '$(' + formattedNumber.slice(2) + ')'\n  }\n\n  return formattedNumber\n}\n\n/**\n * Checks to see if two text values are identical.\n *\n * Category: Text\n *\n * @param {*} text1 The first text string.\n * @param {*} text2 The second text string.\n * @returns\n */\nfunction EXACT(text1, text2) {\n  if (arguments.length !== 2) {\n    return na\n  }\n\n  const someError = anyError(text1, text2);\n\n  if (someError) {\n    return someError\n  }\n\n  text1 = parseString(text1);\n  text2 = parseString(text2);\n\n  return text1 === text2\n}\n\n/**\n * Locate one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string.\n *\n * Category: Text\n *\n * @param {*} find_text The text you want to find.\n * @param {*} within_text The text containing the text you want to find.\n * @param {*} start_num Optional. Specifies the character at which to start the search. The first character in within_text is character number 1. If you omit start_num, it is assumed to be 1.\n * @returns\n */\nfunction FIND(find_text, within_text, start_num) {\n  if (arguments.length < 2) {\n    return na\n  }\n\n  find_text = parseString(find_text);\n  within_text = parseString(within_text);\n  start_num = start_num === undefined ? 0 : start_num;\n  const found_index = within_text.indexOf(find_text, start_num - 1);\n\n  if (found_index === -1) {\n    return value\n  }\n\n  return found_index + 1\n}\n\n/**\n * Formats a number as text with a fixed number of decimals.\n *\n * Category: Text\n *\n * @param {*} number The number you want to round and convert to text.\n * @param {*} decimals Optional. The number of digits to the right of the decimal point.\n * @param {*} no_commas Optional. A logical value that, if TRUE, prevents FIXED from including commas in the returned text.\n * @returns\n */\nfunction FIXED(number, decimals = 2, no_commas = false) {\n  number = parseNumber(number);\n  if (isNaN(number)) {\n    return value\n  }\n\n  decimals = parseNumber(decimals);\n  if (isNaN(decimals)) {\n    return value\n  }\n\n  if (decimals < 0) {\n    const factor = Math.pow(10, -decimals);\n    number = Math.round(number / factor) * factor;\n  } else {\n    number = number.toFixed(decimals);\n  }\n\n  if (no_commas) {\n    number = number.toString().replace(/,/g, '');\n  } else {\n    const parts = number.toString().split('.');\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+$)/g, ',');\n    number = parts.join('.');\n  }\n\n  return number\n}\n\n/**\n * Formula.js only\n *\n * @param {*} value\n * @returns\n */\nfunction HTML2TEXT(value) {\n  if (anyIsError(value)) {\n    return value\n  }\n\n  let result = '';\n\n  if (value) {\n    if (value instanceof Array) {\n      value.forEach((line) => {\n        if (result !== '') {\n          result += '\\n';\n        }\n\n        result += line.replace(/<(?:.|\\n)*?>/gm, '');\n      });\n    } else {\n      result = value.replace(/<(?:.|\\n)*?>/gm, '');\n    }\n  }\n\n  return result\n}\n\n/**\n * Returns the leftmost characters from a text value.\n *\n * Category: Text\n *\n * @param {*} text The text string that contains the characters you want to extract.\n * @param {*} num_chars Optional. Specifies the number of characters you want LEFT to extract.\n * @returns\n */\nfunction LEFT(text, num_chars) {\n  const someError = anyError(text, num_chars);\n\n  if (someError) {\n    return someError\n  }\n\n  text = parseString(text);\n  num_chars = num_chars === undefined ? 1 : num_chars;\n  num_chars = parseNumber(num_chars);\n\n  if (num_chars instanceof Error || typeof text !== 'string') {\n    return value\n  }\n\n  return text.substring(0, num_chars)\n}\n\n/**\n * Returns the number of characters in a text string\n *\n * Category: Text\n *\n * @param {*} text The text whose length you want to find. Spaces count as characters.\n * @returns\n */\nfunction LEN(text) {\n  if (arguments.length === 0) {\n    return error\n  }\n\n  if (text instanceof Error) {\n    return text\n  }\n\n  if (Array.isArray(text)) {\n    return value\n  }\n\n  const textAsString = parseString(text);\n\n  return textAsString.length\n}\n\n/**\n * Converts text to lowercase.\n *\n * Category: Text\n *\n * @param {*} text The text you want to convert to lowercase. LOWER does not change characters in text that are not letters.\n * @returns\n */\nfunction LOWER(text) {\n  if (arguments.length !== 1) {\n    return value\n  }\n\n  text = parseString(text);\n\n  if (anyIsError(text)) {\n    return text\n  }\n\n  return text.toLowerCase()\n}\n\n/**\n * Returns a specific number of characters from a text string starting at the position you specify\n *\n * Category: Text\n *\n * @param {*} text The text string containing the characters you want to extract.\n * @param {*} start_num The position of the first character you want to extract in text. The first character in text has start_num 1, and so on.\n * @param {*} num_chars Specifies the number of characters you want MID to return from text.\n * @returns\n */\nfunction MID(text, start_num, num_chars) {\n  if (start_num === undefined || start_num === null) {\n    return value\n  }\n\n  start_num = parseNumber(start_num);\n  num_chars = parseNumber(num_chars);\n\n  if (anyIsError(start_num, num_chars) || typeof text !== 'string') {\n    return num_chars\n  }\n\n  const begin = start_num - 1;\n  const end = begin + num_chars;\n\n  return text.substring(begin, end)\n}\n\n// TODO\n/**\n * Converts text to number in a locale-independent manner.\n *\n * Category: Text\n *\n * @param {*} text The text to convert to a number.\n * @param {*} decimal_separator Optional. The character used to separate the integer and fractional part of the result.\n * @param {*} group_separator Optional. The character used to separate groupings of numbers, such as thousands from hundreds and millions from thousands.\n * @returns\n */\nfunction NUMBERVALUE(text, decimal_separator, group_separator) {\n  text = isDefined(text) ? text : '';\n\n  if (typeof text === 'number') {\n    return text\n  }\n\n  if (typeof text !== 'string') {\n    return na\n  }\n\n  decimal_separator = typeof decimal_separator === 'undefined' ? '.' : decimal_separator;\n  group_separator = typeof group_separator === 'undefined' ? ',' : group_separator;\n\n  return Number(text.replace(decimal_separator, '.').replace(group_separator, ''))\n}\n\n// TODO\n/**\n * -- Not implemented --\n */\nfunction PRONETIC() {\n  throw new Error('PRONETIC is not implemented')\n}\n\n/**\n * Capitalizes the first letter in each word of a text value.\n *\n * Category: Text\n *\n * @param {*} text Text enclosed in quotation marks, a formula that returns text, or a reference to a value containing the text you want to partially capitalize.\n * @returns\n */\nfunction PROPER(text) {\n  if (anyIsError(text)) {\n    return text\n  }\n\n  if (isNaN(text) && typeof text === 'number') {\n    return value\n  }\n\n  text = parseString(text);\n\n  return text.replace(/\\w\\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase())\n}\n\n/**\n * Formula.js only\n *\n * @param {*} text\n * @param {*} regular_expression\n * @returns\n */\nfunction REGEXEXTRACT(text, regular_expression) {\n  if (arguments.length < 2) {\n    return na\n  }\n\n  const match = text.match(new RegExp(regular_expression));\n\n  return match ? match[match.length > 1 ? match.length - 1 : 0] : null\n}\n\n/**\n * Formula.js only\n *\n * @param {*} text\n * @param {*} regular_expression\n * @param {*} full\n * @returns\n */\nfunction REGEXMATCH(text, regular_expression, full) {\n  if (arguments.length < 2) {\n    return na\n  }\n\n  const match = text.match(new RegExp(regular_expression));\n\n  return full ? match : !!match\n}\n\n/**\n * Formula.js only\n *\n * @param {*} text\n * @param {*} regular_expression\n * @param {*} replacement\n * @returns\n */\nfunction REGEXREPLACE(text, regular_expression, replacement) {\n  if (arguments.length < 3) {\n    return na\n  }\n\n  return text.replace(new RegExp(regular_expression), replacement)\n}\n\n/**\n * Replaces characters within text\n *\n * Category: Text\n *\n * @param {*} old_text Text in which you want to replace some characters.\n * @param {*} num_chars The number of characters in old_text that you want REPLACE to replace with new_text.\n * @param {*} length he number of characters in old_text that you want REPLACEB to replace with new_text.\n * @param {*} new_text he text that will replace characters in old_text.\n * @returns\n */\nfunction REPLACE(old_text, num_chars, length, new_text) {\n  num_chars = parseNumber(num_chars);\n  length = parseNumber(length);\n\n  if (anyIsError(num_chars, length) || typeof old_text !== 'string' || typeof new_text !== 'string') {\n    return value\n  }\n\n  return old_text.substr(0, num_chars - 1) + new_text + old_text.substr(num_chars - 1 + length)\n}\n\n/**\n * Repeats text a given number of times.\n *\n * Category: Text\n *\n * @param {*} text The text you want to repeat.\n * @param {*} number_times A positive number specifying the number of times to repeat text.\n * @returns\n */\nfunction REPT(text, number_times) {\n  const someError = anyError(text, number_times);\n\n  if (someError) {\n    return someError\n  }\n\n  text = parseString(text);\n  number_times = parseNumber(number_times);\n\n  if (number_times instanceof Error) {\n    return number_times\n  }\n\n  return new Array(number_times + 1).join(text)\n}\n\n/**\n * Returns the rightmost characters from a text value\n *\n * Category: Text\n *\n * @param {*} text The text string containing the characters you want to extract.\n * @param {*} num_chars Optional. Specifies the number of characters you want RIGHT to extract.\n * @returns\n */\nfunction RIGHT(text, num_chars) {\n  const someError = anyError(text, num_chars);\n\n  if (someError) {\n    return someError\n  }\n\n  text = parseString(text);\n  num_chars = num_chars === undefined ? 1 : num_chars;\n  num_chars = parseNumber(num_chars);\n\n  if (num_chars instanceof Error) {\n    return num_chars\n  }\n\n  return text.substring(text.length - num_chars)\n}\n\n/**\n * Finds one text value within another (not case-sensitive)\n *\n * Category: Text\n *\n * @param {*} find_text The text that you want to find.\n * @param {*} within_text The text in which you want to search for the value of the find_text argument.\n * @param {*} start_num Optional. The character number in the within_text argument at which you want to start searching.\n * @returns\n */\nfunction SEARCH(find_text, within_text, start_num) {\n  let foundAt;\n\n  if (typeof find_text !== 'string' || typeof within_text !== 'string') {\n    return value\n  }\n\n  start_num = start_num === undefined ? 0 : start_num;\n  foundAt = within_text.toLowerCase().indexOf(find_text.toLowerCase(), start_num - 1) + 1;\n\n  return foundAt === 0 ? value : foundAt\n}\n\n/**\n * Formula.js only\n *\n * @param {*} text\n * @param {*} separator\n * @returns\n */\nfunction SPLIT(text, separator) {\n  return text.split(separator)\n}\n\n/**\n * Substitutes new text for old text in a text string.\n *\n * Category: Text\n *\n * @param {*} text The text or the reference to a value containing text for which you want to substitute characters.\n * @param {*} old_text The text you want to replace.\n * @param {*} new_text The text you want to replace old_text with.\n * @param {*} instance_num Optional. Specifies which occurrence of old_text you want to replace with new_text. If you specify instance_num, only that instance of old_text is replaced. Otherwise, every occurrence of old_text in text is changed to new_text.\n * @returns\n */\nfunction SUBSTITUTE(text, old_text, new_text, instance_num) {\n  if (arguments.length < 3) {\n    return na\n  }\n\n  if (!text || !old_text) {\n    return text\n  } else if (instance_num === undefined) {\n    return text.split(old_text).join(new_text)\n  } else {\n    instance_num = Math.floor(Number(instance_num));\n\n    if (Number.isNaN(instance_num) || instance_num <= 0) {\n      return value\n    }\n\n    let index = 0;\n    let i = 0;\n\n    while (index > -1 && text.indexOf(old_text, index) > -1) {\n      index = text.indexOf(old_text, index + 1);\n      i++;\n\n      if (index > -1 && i === instance_num) {\n        return text.substring(0, index) + new_text + text.substring(index + old_text.length)\n      }\n    }\n\n    return text\n  }\n}\n\n/**\n * Converts its arguments to text.\n *\n * Category: Text\n *\n * @param {*} value The value you want to test.\n * @returns\n */\nfunction T(value) {\n  if (value instanceof Error) {\n    return value\n  }\n\n  return typeof value === 'string' ? value : ''\n}\n\n/**\n * Formats a number and converts it to text.\n *\n * Category: Text\n *\n * @param {*} number The number you want to format.\n * @param {*} format The format you want to use.\n * @returns\n */\nfunction TEXT(number, format) {\n  if (number === undefined || format === undefined) return na\n\n  const currencySymbol = format.startsWith('$') ? '$' : '';\n  const isPercent = format.endsWith('%');\n  format = format.replace(/%/g, '').replace(/\\$/g, '');\n\n  // count all 0s after the decimal point\n  const decimalPlaces = format.split('.')[1].match(/0/g).length;\n\n  const noCommas = !format.includes(',');\n\n  if (isPercent) {\n    number = number * 100;\n  }\n\n  number = FIXED(number, decimalPlaces, noCommas);\n\n  if (number.startsWith('-')) {\n    number = number.replace('-', '');\n    number = '-' + currencySymbol + number;\n  } else {\n    number = currencySymbol + number;\n  }\n\n  if (isPercent) {\n    number = number + '%';\n  }\n\n  return number\n}\n\n/**\n * Combines the text from multiple ranges and/or strings.\n *\n * Category: Text\n * @param {*} delimiter A text string, either empty, or one or more characters enclosed by double quotes, or a reference to a valid text string. If a number is supplied, it will be treated as text.\n * @param {*} ignore_empty If TRUE, ignores empty values.\n * @param {*} args Text item to be joined. A text string, or array of strings, such as a range of values.\n * @returns\n */\nfunction TEXTJOIN(delimiter, ignore_empty, ...args) {\n  if (typeof ignore_empty !== 'boolean') {\n    ignore_empty = parseBool(ignore_empty);\n  }\n\n  if (arguments.length < 3) {\n    return na\n  }\n\n  delimiter = delimiter !== null && delimiter !== undefined ? delimiter : '';\n\n  let flatArgs = flatten(args);\n  let textToJoin = ignore_empty ? flatArgs.filter((text) => text) : flatArgs;\n\n  if (Array.isArray(delimiter)) {\n    delimiter = flatten(delimiter);\n\n    let chunks = textToJoin.map((item) => [item]);\n    let index = 0;\n\n    for (let i = 0; i < chunks.length - 1; i++) {\n      chunks[i].push(delimiter[index]);\n      index++;\n\n      if (index === delimiter.length) {\n        index = 0;\n      }\n    }\n\n    textToJoin = flatten(chunks);\n\n    return textToJoin.join('')\n  }\n\n  return textToJoin.join(delimiter)\n}\n\n/**\n * Removes spaces from text.\n *\n * Category: Text\n *\n * @param {*} text The text from which you want spaces removed.\n * @returns\n */\nfunction TRIM(text) {\n  text = parseString(text);\n\n  if (text instanceof Error) {\n    return text\n  }\n\n  return text.replace(/\\s+/g, ' ').trim()\n}\n\nconst UNICHAR = CHAR;\n\nconst UNICODE = CODE;\n\n/**\n * Converts text to uppercase.\n *\n * Category: Text\n *\n * @param {*} text The text you want converted to uppercase. Text can be a reference or text string.\n * @returns\n */\nfunction UPPER(text) {\n  text = parseString(text);\n\n  if (text instanceof Error) {\n    return text\n  }\n\n  return text.toUpperCase()\n}\n\n/**\n * Converts a text argument to a number.\n *\n * Category: Text\n *\n * @param {*} text The text enclosed in quotation marks or a reference to a value containing the text you want to convert.\n * @returns\n */\nfunction VALUE(text) {\n  const anyError$1 = anyError(text);\n\n  if (anyError$1) {\n    return anyError$1\n  }\n\n  if (typeof text === 'number') {\n    return text\n  }\n\n  if (!isDefined(text)) {\n    text = '';\n  }\n\n  if (typeof text !== 'string') {\n    return value\n  }\n\n  const isPercent = /(%)$/.test(text) || /^(%)/.test(text);\n  text = text.replace(/^[^0-9-]{0,3}/, '');\n  text = text.replace(/[^0-9]{0,3}$/, '');\n  text = text.replace(/[ ,]/g, '');\n\n  if (text === '') {\n    return 0\n  }\n\n  let output = Number(text);\n\n  if (isNaN(output)) {\n    return value\n  }\n\n  output = output || 0;\n\n  if (isPercent) {\n    output = output * 0.01;\n  }\n\n  return output\n}\n\nfunction isValidBinaryNumber(number) {\n  return /^[01]{1,10}$/.test(number)\n}\n\n/**\n * Returns the modified Bessel function In(x).\n *\n * Category: Engineering\n *\n * @param {*} x The value at which to evaluate the function.\n * @param {*} n The order of the Bessel function. If n is not an integer, it is truncated.\n * @returns\n */\nfunction BESSELI(x, n) {\n  x = parseNumber(x);\n  n = parseNumber(n);\n\n  if (anyIsError(x, n)) {\n    return value\n  }\n\n  return bessel.besseli(x, n)\n}\n\n/**\n * Returns the Bessel function Jn(x).\n *\n * Category: Engineering\n *\n * @param {*} x The value at which to evaluate the function.\n * @param {*} n The order of the Bessel function. If n is not an integer, it is truncated.\n * @returns\n */\nfunction BESSELJ(x, n) {\n  x = parseNumber(x);\n  n = parseNumber(n);\n\n  if (anyIsError(x, n)) {\n    return value\n  }\n\n  return bessel.besselj(x, n)\n}\n\n/**\n * Returns the modified Bessel function Kn(x).\n *\n * Category: Engineering\n *\n * @param {*} x The value at which to evaluate the function.\n * @param {*} n The order of the function. If n is not an integer, it is truncated.\n * @returns\n */\nfunction BESSELK(x, n) {\n  x = parseNumber(x);\n  n = parseNumber(n);\n\n  if (anyIsError(x, n)) {\n    return value\n  }\n\n  return bessel.besselk(x, n)\n}\n\n/**\n * Returns the Bessel function Yn(x).\n *\n * Category: Engineering\n *\n * @param {*} x The value at which to evaluate the function.\n * @param {*} n The order of the function. If n is not an integer, it is truncated.\n * @returns\n */\nfunction BESSELY(x, n) {\n  x = parseNumber(x);\n  n = parseNumber(n);\n\n  if (anyIsError(x, n)) {\n    return value\n  }\n\n  return bessel.bessely(x, n)\n}\n\n/**\n * Converts a binary number to decimal.\n *\n * Category: Engineering\n *\n * @param {*} number The binary number you want to convert. Number cannot contain more than 10 characters (10 bits). The most significant bit of number is the sign bit. The remaining 9 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @returns\n */\nfunction BIN2DEC(number) {\n  // Return error if number is not binary or contains more than 10 characters (10 digits)\n  if (!isValidBinaryNumber(number)) {\n    return num\n  }\n\n  // Convert binary number to decimal\n  const result = parseInt(number, 2);\n\n  // Handle negative numbers\n  const stringified = number.toString();\n\n  if (stringified.length === 10 && stringified.substring(0, 1) === '1') {\n    return parseInt(stringified.substring(1), 2) - 512\n  } else {\n    return result\n  }\n}\n\n/**\n * Converts a binary number to hexadecimal.\n *\n * Category: Engineering\n *\n * @param {*} number The binary number you want to convert. Number cannot contain more than 10 characters (10 bits). The most significant bit of number is the sign bit. The remaining 9 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, BIN2HEX uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction BIN2HEX(number, places) {\n  // Return error if number is not binary or contains more than 10 characters (10 digits)\n  if (!isValidBinaryNumber(number)) {\n    return num\n  }\n\n  // Ignore places and return a 10-character hexadecimal number if number is negative\n  const stringified = number.toString();\n\n  if (stringified.length === 10 && stringified.substring(0, 1) === '1') {\n    return (1099511627264 + parseInt(stringified.substring(1), 2)).toString(16)\n  }\n\n  // Convert binary number to hexadecimal\n  const result = parseInt(number, 2).toString(16);\n\n  // Return hexadecimal number using the minimum number of characters necessary if places is undefined\n  if (places === undefined) {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\n/**\n * Converts a binary number to octal.\n *\n * Category: Engineering\n *\n * @param {*} number The binary number you want to convert. Number cannot contain more than 10 characters (10 bits). The most significant bit of number is the sign bit. The remaining 9 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, BIN2OCT uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction BIN2OCT(number, places) {\n  // Return error if number is not binary or contains more than 10 characters (10 digits)\n  if (!isValidBinaryNumber(number)) {\n    return num\n  }\n\n  // Ignore places and return a 10-character octal number if number is negative\n  const stringified = number.toString();\n\n  if (stringified.length === 10 && stringified.substring(0, 1) === '1') {\n    return (1073741312 + parseInt(stringified.substring(1), 2)).toString(8)\n  }\n\n  // Convert binary number to octal\n  const result = parseInt(number, 2).toString(8);\n\n  // Return octal number using the minimum number of characters necessary if places is undefined\n  if (places === undefined) {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\n/**\n * Returns a 'Bitwise And' of two numbers.\n *\n * Category: Engineering\n *\n * @param {*} number1 Must be in decimal form and greater than or equal to 0.\n * @param {*} number2 Must be in decimal form and greater than or equal to 0.\n * @returns\n */\nfunction BITAND(number1, number2) {\n  // Return error if either number is a non-numeric value\n  number1 = parseNumber(number1);\n  number2 = parseNumber(number2);\n\n  if (anyIsError(number1, number2)) {\n    return value\n  }\n\n  // Return error if either number is less than 0\n  if (number1 < 0 || number2 < 0) {\n    return num\n  }\n\n  // Return error if either number is a non-integer\n  if (Math.floor(number1) !== number1 || Math.floor(number2) !== number2) {\n    return num\n  }\n\n  // Return error if either number is greater than (2^48)-1\n  if (number1 > 281474976710655 || number2 > 281474976710655) {\n    return num\n  }\n\n  // Return bitwise AND of two numbers\n  return number1 & number2\n}\n\n/**\n * Returns a value number shifted left by shift_amount bits.\n *\n * Category: Engineering\n *\n * @param {*} number Number must be an integer greater than or equal to 0.\n * @param {*} shift_amount Shift_amount must be an integer.\n * @returns\n */\nfunction BITLSHIFT(number, shift_amount) {\n  number = parseNumber(number);\n  shift_amount = parseNumber(shift_amount);\n\n  if (anyIsError(number, shift_amount)) {\n    return value\n  }\n\n  // Return error if number is less than 0\n  if (number < 0) {\n    return num\n  }\n\n  // Return error if number is a non-integer\n  if (Math.floor(number) !== number) {\n    return num\n  }\n\n  // Return error if number is greater than (2^48)-1\n  if (number > 281474976710655) {\n    return num\n  }\n\n  // Return error if the absolute value of shift is greater than 53\n  if (Math.abs(shift_amount) > 53) {\n    return num\n  }\n\n  // Return number shifted by shift bits to the left or to the right if shift is negative\n  return shift_amount >= 0 ? number << shift_amount : number >> -shift_amount\n}\n\n/**\n * Returns a bitwise OR of 2 numbers.\n *\n * Category: Engineering\n *\n * @param {*} number1 Must be in decimal form and greater than or equal to 0.\n * @param {*} number2 Must be in decimal form and greater than or equal to 0.\n * @returns\n */\nfunction BITOR(number1, number2) {\n  number1 = parseNumber(number1);\n  number2 = parseNumber(number2);\n\n  if (anyIsError(number1, number2)) {\n    return value\n  }\n\n  // Return error if either number is less than 0\n  if (number1 < 0 || number2 < 0) {\n    return num\n  }\n\n  // Return error if either number is a non-integer\n  if (Math.floor(number1) !== number1 || Math.floor(number2) !== number2) {\n    return num\n  }\n\n  // Return error if either number is greater than (2^48)-1\n  if (number1 > 281474976710655 || number2 > 281474976710655) {\n    return num\n  }\n\n  // Return bitwise OR of two numbers\n  return number1 | number2\n}\n\n/**\n * Returns a value number shifted right by shift_amount bits.\n *\n * Category: Engineering\n *\n * @param {*} number Must be an integer greater than or equal to 0.\n * @param {*} shift_amount Must be an integer.\n * @returns\n */\nfunction BITRSHIFT(number, shift_amount) {\n  number = parseNumber(number);\n  shift_amount = parseNumber(shift_amount);\n\n  if (anyIsError(number, shift_amount)) {\n    return value\n  }\n\n  // Return error if number is less than 0\n  if (number < 0) {\n    return num\n  }\n\n  // Return error if number is a non-integer\n  if (Math.floor(number) !== number) {\n    return num\n  }\n\n  // Return error if number is greater than (2^48)-1\n  if (number > 281474976710655) {\n    return num\n  }\n\n  // Return error if the absolute value of shift is greater than 53\n  if (Math.abs(shift_amount) > 53) {\n    return num\n  }\n\n  // Return number shifted by shift bits to the right or to the left if shift is negative\n  return shift_amount >= 0 ? number >> shift_amount : number << -shift_amount\n}\n\n/**\n * Returns a bitwise 'Exclusive Or' of two numbers.\n *\n * Category: Engineering\n *\n * @param {*} number1 Must be greater than or equal to 0.\n * @param {*} number2 Must be greater than or equal to 0.\n * @returns\n */\nfunction BITXOR(number1, number2) {\n  number1 = parseNumber(number1);\n  number2 = parseNumber(number2);\n\n  if (anyIsError(number1, number2)) {\n    return value\n  }\n\n  // Return error if either number is less than 0\n  if (number1 < 0 || number2 < 0) {\n    return num\n  }\n\n  // Return error if either number is a non-integer\n  if (Math.floor(number1) !== number1 || Math.floor(number2) !== number2) {\n    return num\n  }\n\n  // Return error if either number is greater than (2^48)-1\n  if (number1 > 281474976710655 || number2 > 281474976710655) {\n    return num\n  }\n\n  // Return bitwise XOR of two numbers\n  return number1 ^ number2\n}\n\n/**\n * Converts real and imaginary coefficients into a complex number.\n *\n * Category: Engineering\n *\n * @param {*} real_num The real coefficient of the complex number.\n * @param {*} i_num The imaginary coefficient of the complex number.\n * @param {*} suffix Optional. The suffix for the imaginary component of the complex number. If omitted, suffix is assumed to be \"i\".\n * @returns\n */\nfunction COMPLEX(real_num, i_num, suffix) {\n  real_num = parseNumber(real_num);\n  i_num = parseNumber(i_num);\n\n  if (anyIsError(real_num, i_num)) {\n    return real_num\n  }\n\n  // Set suffix\n  suffix = suffix === undefined ? 'i' : suffix;\n\n  // Return error if suffix is neither \"i\" nor \"j\"\n  if (suffix !== 'i' && suffix !== 'j') {\n    return value\n  }\n\n  // Return complex number\n  if (real_num === 0 && i_num === 0) {\n    return 0\n  } else if (real_num === 0) {\n    return i_num === 1 ? suffix : i_num.toString() + suffix\n  } else if (i_num === 0) {\n    return real_num.toString()\n  } else {\n    const sign = i_num > 0 ? '+' : '';\n    return real_num.toString() + sign + (i_num === 1 ? suffix : i_num.toString() + suffix)\n  }\n}\n\n/**\n * Converts a number from one measurement system to another.\n *\n * Category: Engineering\n *\n * @param {*} number is the value in from_units to convert.\n * @param {*} from_unit is the units for number.\n * @param {*} to_unit is the units for the result. CONVERT accepts the following text values (in quotation marks) for from_unit and to_unit.\n * @returns\n */\nfunction CONVERT(number, from_unit, to_unit) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  // List of units supported by CONVERT and units defined by the International System of Units\n  // [Name, Symbol, Alternate symbols, Quantity, ISU, CONVERT, Conversion ratio]\n  const units = [\n    ['a.u. of action', '?', null, 'action', false, false, 1.05457168181818e-34],\n    ['a.u. of charge', 'e', null, 'electric_charge', false, false, 1.60217653141414e-19],\n    ['a.u. of energy', 'Eh', null, 'energy', false, false, 4.35974417757576e-18],\n    ['a.u. of length', 'a?', null, 'length', false, false, 5.29177210818182e-11],\n    ['a.u. of mass', 'm?', null, 'mass', false, false, 9.10938261616162e-31],\n    ['a.u. of time', '?/Eh', null, 'time', false, false, 2.41888432650516e-17],\n    ['admiralty knot', 'admkn', null, 'speed', false, true, 0.514773333],\n    ['ampere', 'A', null, 'electric_current', true, false, 1],\n    ['ampere per meter', 'A/m', null, 'magnetic_field_intensity', true, false, 1],\n    ['ngstrm', '', ['ang'], 'length', false, true, 1e-10],\n    ['are', 'ar', null, 'area', false, true, 100],\n    ['astronomical unit', 'ua', null, 'length', false, false, 1.49597870691667e-11],\n    ['bar', 'bar', null, 'pressure', false, false, 100000],\n    ['barn', 'b', null, 'area', false, false, 1e-28],\n    ['becquerel', 'Bq', null, 'radioactivity', true, false, 1],\n    ['bit', 'bit', ['b'], 'information', false, true, 1],\n    ['btu', 'BTU', ['btu'], 'energy', false, true, 1055.05585262],\n    ['byte', 'byte', null, 'information', false, true, 8],\n    ['candela', 'cd', null, 'luminous_intensity', true, false, 1],\n    ['candela per square metre', 'cd/m?', null, 'luminance', true, false, 1],\n    ['coulomb', 'C', null, 'electric_charge', true, false, 1],\n    ['cubic ngstrm', 'ang3', ['ang^3'], 'volume', false, true, 1e-30],\n    ['cubic foot', 'ft3', ['ft^3'], 'volume', false, true, 0.028316846592],\n    ['cubic inch', 'in3', ['in^3'], 'volume', false, true, 0.000016387064],\n    ['cubic light-year', 'ly3', ['ly^3'], 'volume', false, true, 8.46786664623715e-47],\n    ['cubic metre', 'm?', null, 'volume', true, true, 1],\n    ['cubic mile', 'mi3', ['mi^3'], 'volume', false, true, 4168181825.44058],\n    ['cubic nautical mile', 'Nmi3', ['Nmi^3'], 'volume', false, true, 6352182208],\n    ['cubic Pica', 'Pica3', ['Picapt3', 'Pica^3', 'Picapt^3'], 'volume', false, true, 7.58660370370369e-8],\n    ['cubic yard', 'yd3', ['yd^3'], 'volume', false, true, 0.764554857984],\n    ['cup', 'cup', null, 'volume', false, true, 0.0002365882365],\n    ['dalton', 'Da', ['u'], 'mass', false, false, 1.66053886282828e-27],\n    ['day', 'd', ['day'], 'time', false, true, 86400],\n    ['degree', '', null, 'angle', false, false, 0.0174532925199433],\n    ['degrees Rankine', 'Rank', null, 'temperature', false, true, 0.555555555555556],\n    ['dyne', 'dyn', ['dy'], 'force', false, true, 0.00001],\n    ['electronvolt', 'eV', ['ev'], 'energy', false, true, 1.60217656514141],\n    ['ell', 'ell', null, 'length', false, true, 1.143],\n    ['erg', 'erg', ['e'], 'energy', false, true, 1e-7],\n    ['farad', 'F', null, 'electric_capacitance', true, false, 1],\n    ['fluid ounce', 'oz', null, 'volume', false, true, 0.0000295735295625],\n    ['foot', 'ft', null, 'length', false, true, 0.3048],\n    ['foot-pound', 'flb', null, 'energy', false, true, 1.3558179483314],\n    ['gal', 'Gal', null, 'acceleration', false, false, 0.01],\n    ['gallon', 'gal', null, 'volume', false, true, 0.003785411784],\n    ['gauss', 'G', ['ga'], 'magnetic_flux_density', false, true, 1],\n    ['grain', 'grain', null, 'mass', false, true, 0.0000647989],\n    ['gram', 'g', null, 'mass', false, true, 0.001],\n    ['gray', 'Gy', null, 'absorbed_dose', true, false, 1],\n    ['gross registered ton', 'GRT', ['regton'], 'volume', false, true, 2.8316846592],\n    ['hectare', 'ha', null, 'area', false, true, 10000],\n    ['henry', 'H', null, 'inductance', true, false, 1],\n    ['hertz', 'Hz', null, 'frequency', true, false, 1],\n    ['horsepower', 'HP', ['h'], 'power', false, true, 745.69987158227],\n    ['horsepower-hour', 'HPh', ['hh', 'hph'], 'energy', false, true, 2684519.538],\n    ['hour', 'h', ['hr'], 'time', false, true, 3600],\n    ['imperial gallon (U.K.)', 'uk_gal', null, 'volume', false, true, 0.00454609],\n    ['imperial hundredweight', 'lcwt', ['uk_cwt', 'hweight'], 'mass', false, true, 50.802345],\n    ['imperial quart (U.K)', 'uk_qt', null, 'volume', false, true, 0.0011365225],\n    ['imperial ton', 'brton', ['uk_ton', 'LTON'], 'mass', false, true, 1016.046909],\n    ['inch', 'in', null, 'length', false, true, 0.0254],\n    ['international acre', 'uk_acre', null, 'area', false, true, 4046.8564224],\n    ['IT calorie', 'cal', null, 'energy', false, true, 4.1868],\n    ['joule', 'J', null, 'energy', true, true, 1],\n    ['katal', 'kat', null, 'catalytic_activity', true, false, 1],\n    ['kelvin', 'K', ['kel'], 'temperature', true, true, 1],\n    ['kilogram', 'kg', null, 'mass', true, true, 1],\n    ['knot', 'kn', null, 'speed', false, true, 0.514444444444444],\n    ['light-year', 'ly', null, 'length', false, true, 9460730472580800],\n    ['litre', 'L', ['l', 'lt'], 'volume', false, true, 0.001],\n    ['lumen', 'lm', null, 'luminous_flux', true, false, 1],\n    ['lux', 'lx', null, 'illuminance', true, false, 1],\n    ['maxwell', 'Mx', null, 'magnetic_flux', false, false, 1e-18],\n    ['measurement ton', 'MTON', null, 'volume', false, true, 1.13267386368],\n    ['meter per hour', 'm/h', ['m/hr'], 'speed', false, true, 0.00027777777777778],\n    ['meter per second', 'm/s', ['m/sec'], 'speed', true, true, 1],\n    ['meter per second squared', 'm?s??', null, 'acceleration', true, false, 1],\n    ['parsec', 'pc', ['parsec'], 'length', false, true, 30856775814671900],\n    ['meter squared per second', 'm?/s', null, 'kinematic_viscosity', true, false, 1],\n    ['metre', 'm', null, 'length', true, true, 1],\n    ['miles per hour', 'mph', null, 'speed', false, true, 0.44704],\n    ['millimetre of mercury', 'mmHg', null, 'pressure', false, false, 133.322],\n    ['minute', '?', null, 'angle', false, false, 0.000290888208665722],\n    ['minute', 'min', ['mn'], 'time', false, true, 60],\n    ['modern teaspoon', 'tspm', null, 'volume', false, true, 0.000005],\n    ['mole', 'mol', null, 'amount_of_substance', true, false, 1],\n    ['morgen', 'Morgen', null, 'area', false, true, 2500],\n    ['n.u. of action', '?', null, 'action', false, false, 1.05457168181818e-34],\n    ['n.u. of mass', 'm?', null, 'mass', false, false, 9.10938261616162e-31],\n    ['n.u. of speed', 'c?', null, 'speed', false, false, 299792458],\n    ['n.u. of time', '?/(me?c??)', null, 'time', false, false, 1.28808866778687e-21],\n    ['nautical mile', 'M', ['Nmi'], 'length', false, true, 1852],\n    ['newton', 'N', null, 'force', true, true, 1],\n    ['rsted', 'Oe ', null, 'magnetic_field_intensity', false, false, 79.5774715459477],\n    ['ohm', '', null, 'electric_resistance', true, false, 1],\n    ['ounce mass', 'ozm', null, 'mass', false, true, 0.028349523125],\n    ['pascal', 'Pa', null, 'pressure', true, false, 1],\n    ['pascal second', 'Pa?s', null, 'dynamic_viscosity', true, false, 1],\n    ['pferdestrke', 'PS', null, 'power', false, true, 735.49875],\n    ['phot', 'ph', null, 'illuminance', false, false, 0.0001],\n    ['pica (1/6 inch)', 'pica', null, 'length', false, true, 0.00035277777777778],\n    ['pica (1/72 inch)', 'Pica', ['Picapt'], 'length', false, true, 0.00423333333333333],\n    ['poise', 'P', null, 'dynamic_viscosity', false, false, 0.1],\n    ['pond', 'pond', null, 'force', false, true, 0.00980665],\n    ['pound force', 'lbf', null, 'force', false, true, 4.4482216152605],\n    ['pound mass', 'lbm', null, 'mass', false, true, 0.45359237],\n    ['quart', 'qt', null, 'volume', false, true, 0.000946352946],\n    ['radian', 'rad', null, 'angle', true, false, 1],\n    ['second', '?', null, 'angle', false, false, 0.00000484813681109536],\n    ['second', 's', ['sec'], 'time', true, true, 1],\n    ['short hundredweight', 'cwt', ['shweight'], 'mass', false, true, 45.359237],\n    ['siemens', 'S', null, 'electrical_conductance', true, false, 1],\n    ['sievert', 'Sv', null, 'equivalent_dose', true, false, 1],\n    ['slug', 'sg', null, 'mass', false, true, 14.59390294],\n    ['square ngstrm', 'ang2', ['ang^2'], 'area', false, true, 1e-20],\n    ['square foot', 'ft2', ['ft^2'], 'area', false, true, 0.09290304],\n    ['square inch', 'in2', ['in^2'], 'area', false, true, 0.00064516],\n    ['square light-year', 'ly2', ['ly^2'], 'area', false, true, 8.95054210748189e31],\n    ['square meter', 'm?', null, 'area', true, true, 1],\n    ['square mile', 'mi2', ['mi^2'], 'area', false, true, 2589988.110336],\n    ['square nautical mile', 'Nmi2', ['Nmi^2'], 'area', false, true, 3429904],\n    ['square Pica', 'Pica2', ['Picapt2', 'Pica^2', 'Picapt^2'], 'area', false, true, 0.00001792111111111],\n    ['square yard', 'yd2', ['yd^2'], 'area', false, true, 0.83612736],\n    ['statute mile', 'mi', null, 'length', false, true, 1609.344],\n    ['steradian', 'sr', null, 'solid_angle', true, false, 1],\n    ['stilb', 'sb', null, 'luminance', false, false, 0.0001],\n    ['stokes', 'St', null, 'kinematic_viscosity', false, false, 0.0001],\n    ['stone', 'stone', null, 'mass', false, true, 6.35029318],\n    ['tablespoon', 'tbs', null, 'volume', false, true, 0.0000147868],\n    ['teaspoon', 'tsp', null, 'volume', false, true, 0.00000492892],\n    ['tesla', 'T', null, 'magnetic_flux_density', true, true, 1],\n    ['thermodynamic calorie', 'c', null, 'energy', false, true, 4.184],\n    ['ton', 'ton', null, 'mass', false, true, 907.18474],\n    ['tonne', 't', null, 'mass', false, false, 1000],\n    ['U.K. pint', 'uk_pt', null, 'volume', false, true, 0.00056826125],\n    ['U.S. bushel', 'bushel', null, 'volume', false, true, 0.03523907],\n    ['U.S. oil barrel', 'barrel', null, 'volume', false, true, 0.158987295],\n    ['U.S. pint', 'pt', ['us_pt'], 'volume', false, true, 0.000473176473],\n    ['U.S. survey mile', 'survey_mi', null, 'length', false, true, 1609.347219],\n    ['U.S. survey/statute acre', 'us_acre', null, 'area', false, true, 4046.87261],\n    ['volt', 'V', null, 'voltage', true, false, 1],\n    ['watt', 'W', null, 'power', true, true, 1],\n    ['watt-hour', 'Wh', ['wh'], 'energy', false, true, 3600],\n    ['weber', 'Wb', null, 'magnetic_flux', true, false, 1],\n    ['yard', 'yd', null, 'length', false, true, 0.9144],\n    ['year', 'yr', null, 'time', false, true, 31557600]\n  ];\n\n  // Binary prefixes\n  // [Name, Prefix power of 2 value, Previx value, Abbreviation, Derived from]\n  const binary_prefixes = {\n    Yi: ['yobi', 80, 1208925819614629174706176, 'Yi', 'yotta'],\n    Zi: ['zebi', 70, 1180591620717411303424, 'Zi', 'zetta'],\n    Ei: ['exbi', 60, 1152921504606846976, 'Ei', 'exa'],\n    Pi: ['pebi', 50, 1125899906842624, 'Pi', 'peta'],\n    Ti: ['tebi', 40, 1099511627776, 'Ti', 'tera'],\n    Gi: ['gibi', 30, 1073741824, 'Gi', 'giga'],\n    Mi: ['mebi', 20, 1048576, 'Mi', 'mega'],\n    ki: ['kibi', 10, 1024, 'ki', 'kilo']\n  };\n\n  // Unit prefixes\n  // [Name, Multiplier, Abbreviation]\n  const unit_prefixes = {\n    Y: ['yotta', 1e24, 'Y'],\n    Z: ['zetta', 1e21, 'Z'],\n    E: ['exa', 1e18, 'E'],\n    P: ['peta', 1e15, 'P'],\n    T: ['tera', 1e12, 'T'],\n    G: ['giga', 1e9, 'G'],\n    M: ['mega', 1e6, 'M'],\n    k: ['kilo', 1e3, 'k'],\n    h: ['hecto', 1e2, 'h'],\n    e: ['dekao', 1e1, 'e'],\n    d: ['deci', 1e-1, 'd'],\n    c: ['centi', 1e-2, 'c'],\n    m: ['milli', 1e-3, 'm'],\n    u: ['micro', 1e-6, 'u'],\n    n: ['nano', 1e-9, 'n'],\n    p: ['pico', 1e-12, 'p'],\n    f: ['femto', 1e-15, 'f'],\n    a: ['atto', 1e-18, 'a'],\n    z: ['zepto', 1e-21, 'z'],\n    y: ['yocto', 1e-24, 'y']\n  };\n\n  // Initialize units and multipliers\n  let from = null;\n  let to = null;\n  let base_from_unit = from_unit;\n  let base_to_unit = to_unit;\n  let from_multiplier = 1;\n  let to_multiplier = 1;\n  let alt;\n\n  // Lookup from and to units\n  for (let i = 0; i < units.length; i++) {\n    alt = units[i][2] === null ? [] : units[i][2];\n\n    if (units[i][1] === base_from_unit || alt.indexOf(base_from_unit) >= 0) {\n      from = units[i];\n    }\n\n    if (units[i][1] === base_to_unit || alt.indexOf(base_to_unit) >= 0) {\n      to = units[i];\n    }\n  }\n\n  // Lookup from prefix\n  if (from === null) {\n    const from_binary_prefix = binary_prefixes[from_unit.substring(0, 2)];\n    let from_unit_prefix = unit_prefixes[from_unit.substring(0, 1)];\n\n    // Handle dekao unit prefix (only unit prefix with two characters)\n    if (from_unit.substring(0, 2) === 'da') {\n      from_unit_prefix = ['dekao', 1e1, 'da'];\n    }\n\n    // Handle binary prefixes first (so that 'Yi' is processed before 'Y')\n    if (from_binary_prefix) {\n      from_multiplier = from_binary_prefix[2];\n      base_from_unit = from_unit.substring(2);\n    } else if (from_unit_prefix) {\n      from_multiplier = from_unit_prefix[1];\n      base_from_unit = from_unit.substring(from_unit_prefix[2].length);\n    }\n\n    // Lookup from unit\n    for (let j = 0; j < units.length; j++) {\n      alt = units[j][2] === null ? [] : units[j][2];\n\n      if (units[j][1] === base_from_unit || alt.indexOf(base_from_unit) >= 0) {\n        from = units[j];\n      }\n    }\n  }\n\n  // Lookup to prefix\n  if (to === null) {\n    const to_binary_prefix = binary_prefixes[to_unit.substring(0, 2)];\n    let to_unit_prefix = unit_prefixes[to_unit.substring(0, 1)];\n\n    // Handle dekao unit prefix (only unit prefix with two characters)\n    if (to_unit.substring(0, 2) === 'da') {\n      to_unit_prefix = ['dekao', 1e1, 'da'];\n    }\n\n    // Handle binary prefixes first (so that 'Yi' is processed before 'Y')\n    if (to_binary_prefix) {\n      to_multiplier = to_binary_prefix[2];\n      base_to_unit = to_unit.substring(2);\n    } else if (to_unit_prefix) {\n      to_multiplier = to_unit_prefix[1];\n      base_to_unit = to_unit.substring(to_unit_prefix[2].length);\n    }\n\n    // Lookup to unit\n    for (let k = 0; k < units.length; k++) {\n      alt = units[k][2] === null ? [] : units[k][2];\n\n      if (units[k][1] === base_to_unit || alt.indexOf(base_to_unit) >= 0) {\n        to = units[k];\n      }\n    }\n  }\n\n  // Return error if a unit does not exist\n  if (from === null || to === null) {\n    return na\n  }\n\n  // Return error if units represent different quantities\n  if (from[3] !== to[3]) {\n    return na\n  }\n\n  // Return converted number\n  return (number * from[6] * from_multiplier) / (to[6] * to_multiplier)\n}\n\n/**\n * Converts a decimal number to binary.\n *\n * Category: Engineering\n *\n * @param {*} number The decimal integer you want to convert. If number is negative, valid place values are ignored and DEC2BIN returns a 10-character (10-bit) binary number in which the most significant bit is the sign bit. The remaining 9 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, DEC2BIN uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction DEC2BIN(number, places) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  // Return error if number is not decimal, is lower than -512, or is greater than 511\n  if (!/^-?[0-9]{1,3}$/.test(number) || number < -512 || number > 511) {\n    return num\n  }\n\n  // Ignore places and return a 10-character binary number if number is negative\n  if (number < 0) {\n    return '1' + REPT('0', 9 - (512 + number).toString(2).length) + (512 + number).toString(2)\n  }\n\n  // Convert decimal number to binary\n  const result = parseInt(number, 10).toString(2);\n\n  // Return binary number using the minimum number of characters necessary if places is undefined\n  if (typeof places === 'undefined') {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\n/**\n * Converts a decimal number to hexadecimal.\n *\n * Category: Engineering\n *\n * @param {*} number The decimal integer you want to convert. If number is negative, places is ignored and DEC2HEX returns a 10-character (40-bit) hexadecimal number in which the most significant bit is the sign bit. The remaining 39 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, DEC2HEX uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction DEC2HEX(number, places) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  // Return error if number is not decimal, is lower than -549755813888, or is greater than 549755813887\n  if (!/^-?[0-9]{1,12}$/.test(number) || number < -549755813888 || number > 549755813887) {\n    return num\n  }\n\n  // Ignore places and return a 10-character hexadecimal number if number is negative\n  if (number < 0) {\n    return (1099511627776 + number).toString(16)\n  }\n\n  // Convert decimal number to hexadecimal\n  const result = parseInt(number, 10).toString(16);\n\n  // Return hexadecimal number using the minimum number of characters necessary if places is undefined\n  if (typeof places === 'undefined') {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\n/**\n * Converts a decimal number to octal.\n *\n * Category: Engineering\n *\n * @param {*} number The decimal integer you want to convert. If number is negative, places is ignored and DEC2OCT returns a 10-character (30-bit) octal number in which the most significant bit is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, DEC2OCT uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction DEC2OCT(number, places) {\n  number = parseNumber(number);\n\n  if (number instanceof Error) {\n    return number\n  }\n\n  // Return error if number is not decimal, is lower than -549755813888, or is greater than 549755813887\n  if (!/^-?[0-9]{1,9}$/.test(number) || number < -536870912 || number > 536870911) {\n    return num\n  }\n\n  // Ignore places and return a 10-character octal number if number is negative\n  if (number < 0) {\n    return (1073741824 + number).toString(8)\n  }\n\n  // Convert decimal number to octal\n  const result = parseInt(number, 10).toString(8);\n\n  // Return octal number using the minimum number of characters necessary if places is undefined\n  if (typeof places === 'undefined') {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\n/**\n * Tests whether two values are equal.\n *\n * Category: Engineering\n *\n * @param {*} number1 The first number.\n * @param {*} number2 Optional. The second number. If omitted, number2 is assumed to be zero.\n * @returns\n */\nfunction DELTA(number1, number2) {\n  // Set number2 to zero if undefined\n  number2 = number2 === undefined ? 0 : number2;\n  number1 = parseNumber(number1);\n  number2 = parseNumber(number2);\n\n  if (anyIsError(number1, number2)) {\n    return value\n  }\n\n  // Return delta\n  return number1 === number2 ? 1 : 0\n}\n\n// TODO: why is upper_bound not used ? The excel documentation has no examples with upper_bound\n/**\n * Returns the error function.\n *\n * Category: Engineering\n *\n * @param {*} lower_limit The lower bound for integrating ERF.\n * @param {*} upper_limit Optional. The upper bound for integrating ERF. If omitted, ERF integrates between zero and lower_limit.\n * @returns\n */\nfunction ERF(lower_limit, upper_limit) {\n  // Set number2 to zero if undefined\n  upper_limit = upper_limit === undefined ? 0 : upper_limit;\n\n  lower_limit = parseNumber(lower_limit);\n  upper_limit = parseNumber(upper_limit);\n\n  if (anyIsError(lower_limit, upper_limit)) {\n    return value\n  }\n\n  return jStat.erf(lower_limit)\n}\n\n// TODO\n\n/**\n * -- Not implemented --\n *\n * Returns the error function.\n *\n * Category: Engineering\n *\n * @param {*} x The lower bound for integrating ERF.PRECISE.\n * @returns\n */\nERF.PRECISE = () => {\n  throw new Error('ERF.PRECISE is not implemented')\n};\n\n/**\n * Returns the complementary error function.\n *\n * Category: Engineering\n *\n * @param {*} x The lower bound for integrating ERFC.\n * @returns\n */\nfunction ERFC(x) {\n  // Return error if x is not a number\n  if (isNaN(x)) {\n    return value\n  }\n\n  return jStat.erfc(x)\n}\n\n// TODO\n\n/**\n * -- Not implemented --\n *\n * Returns the complementary ERF function integrated between x and infinity.\n *\n * Category: Engineering\n *\n * @param {*} x The lower bound for integrating ERFC.PRECISE.\n * @returns\n */\nERFC.PRECISE = () => {\n  throw new Error('ERFC.PRECISE is not implemented')\n};\n\n/**\n * Tests whether a number is greater than a threshold value.\n *\n * Category: Engineering\n *\n * @param {*} number The value to test against step.\n * @param {*} step Optional. The threshold value. If you omit a value for step, GESTEP uses zero.\n * @returns\n */\nfunction GESTEP(number, step) {\n  step = step || 0;\n  number = parseNumber(number);\n\n  if (anyIsError(step, number)) {\n    return number\n  }\n\n  // Return delta\n  return number >= step ? 1 : 0\n}\n\n/**\n * Converts a hexadecimal number to binary.\n *\n * Category: Engineering\n *\n * @param {*} number The hexadecimal number you want to convert. Number cannot contain more than 10 characters. The most significant bit of number is the sign bit (40th bit from the right). The remaining 9 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, HEX2BIN uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction HEX2BIN(number, places) {\n  // Return error if number is not hexadecimal or contains more than ten characters (10 digits)\n  if (!/^[0-9A-Fa-f]{1,10}$/.test(number)) {\n    return num\n  }\n\n  // Check if number is negative\n  const negative = !!(number.length === 10 && number.substring(0, 1).toLowerCase() === 'f');\n\n  // Convert hexadecimal number to decimal\n  const decimal = negative ? parseInt(number, 16) - 1099511627776 : parseInt(number, 16);\n\n  // Return error if number is lower than -512 or greater than 511\n  if (decimal < -512 || decimal > 511) {\n    return num\n  }\n\n  // Ignore places and return a 10-character binary number if number is negative\n  if (negative) {\n    return '1' + REPT('0', 9 - (512 + decimal).toString(2).length) + (512 + decimal).toString(2)\n  }\n\n  // Convert decimal number to binary\n  const result = decimal.toString(2);\n\n  // Return binary number using the minimum number of characters necessary if places is undefined\n  if (places === undefined) {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\n/**\n * Converts a hexadecimal number to decimal.\n *\n * Category: Engineering\n *\n * @param {*} number The hexadecimal number you want to convert. Number cannot contain more than 10 characters (40 bits). The most significant bit of number is the sign bit. The remaining 39 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @returns\n */\nfunction HEX2DEC(number) {\n  // Return error if number is not hexadecimal or contains more than ten characters (10 digits)\n  if (!/^[0-9A-Fa-f]{1,10}$/.test(number)) {\n    return num\n  }\n\n  // Convert hexadecimal number to decimal\n  const decimal = parseInt(number, 16);\n\n  // Return decimal number\n  return decimal >= 549755813888 ? decimal - 1099511627776 : decimal\n}\n\n/**\n * Converts a hexadecimal number to octal.\n *\n * Category: Engineering\n *\n * @param {*} number The hexadecimal number you want to convert. Number cannot contain more than 10 characters. The most significant bit of number is the sign bit. The remaining 39 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, HEX2OCT uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction HEX2OCT(number, places) {\n  // Return error if number is not hexadecimal or contains more than ten characters (10 digits)\n  if (!/^[0-9A-Fa-f]{1,10}$/.test(number)) {\n    return num\n  }\n\n  // Convert hexadecimal number to decimal\n  const decimal = parseInt(number, 16);\n\n  // Return error if number is positive and greater than 0x1fffffff (536870911)\n  if (decimal > 536870911 && decimal < 1098974756864) {\n    return num\n  }\n\n  // Ignore places and return a 10-character octal number if number is negative\n  if (decimal >= 1098974756864) {\n    return (decimal - 1098437885952).toString(8)\n  }\n\n  // Convert decimal number to octal\n  const result = decimal.toString(8);\n\n  // Return octal number using the minimum number of characters necessary if places is undefined\n  if (places === undefined) {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\n/**\n * Returns the absolute value (modulus) of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the absolute value.\n * @returns\n */\nfunction IMABS(inumber) {\n  // Lookup real and imaginary coefficients using exports.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  // Return error if either coefficient is not a number\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Return absolute value of complex number\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))\n}\n\n/**\n * Returns the imaginary coefficient of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the imaginary coefficient.\n * @returns\n */\nfunction IMAGINARY(inumber) {\n  if (inumber === undefined || inumber === true || inumber === false) {\n    return value\n  }\n\n  // Return 0 if inumber is equal to 0\n  if (inumber === 0 || inumber === '0') {\n    return 0\n  }\n\n  // Handle special cases\n  if (['i', 'j'].indexOf(inumber) >= 0) {\n    return 1\n  }\n\n  // Force string type\n  inumber = inumber + '';\n\n  // Normalize imaginary coefficient\n  inumber = inumber.replace('+i', '+1i').replace('-i', '-1i').replace('+j', '+1j').replace('-j', '-1j');\n\n  // Lookup sign\n  let plus = inumber.indexOf('+');\n  let minus = inumber.indexOf('-');\n\n  if (plus === 0) {\n    plus = inumber.indexOf('+', 1);\n  }\n\n  if (minus === 0) {\n    minus = inumber.indexOf('-', 1);\n  }\n\n  // Lookup imaginary unit\n  const last = inumber.substring(inumber.length - 1, inumber.length);\n  const unit = last === 'i' || last === 'j';\n\n  if (plus >= 0 || minus >= 0) {\n    // Return error if imaginary unit is neither i nor j\n    if (!unit) {\n      return num\n    }\n\n    // Return imaginary coefficient of complex number\n    if (plus >= 0) {\n      return isNaN(inumber.substring(0, plus)) || isNaN(inumber.substring(plus + 1, inumber.length - 1))\n        ? num\n        : Number(inumber.substring(plus + 1, inumber.length - 1))\n    } else {\n      return isNaN(inumber.substring(0, minus)) || isNaN(inumber.substring(minus + 1, inumber.length - 1))\n        ? num\n        : -Number(inumber.substring(minus + 1, inumber.length - 1))\n    }\n  } else {\n    if (unit) {\n      return isNaN(inumber.substring(0, inumber.length - 1)) ? num : inumber.substring(0, inumber.length - 1)\n    } else {\n      return isNaN(inumber) ? num : 0\n    }\n  }\n}\n\n/**\n * Returns the argument theta, an angle expressed in radians.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the argument .\n * @returns\n */\nfunction IMARGUMENT(inumber) {\n  // Lookup real and imaginary coefficients using exports.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  // Return error if either coefficient is not a number\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Return error if inumber is equal to zero\n  if (x === 0 && y === 0) {\n    return div0\n  }\n\n  // Return PI/2 if x is equal to zero and y is positive\n  if (x === 0 && y > 0) {\n    return Math.PI / 2\n  }\n\n  // Return -PI/2 if x is equal to zero and y is negative\n  if (x === 0 && y < 0) {\n    return -Math.PI / 2\n  }\n\n  // Return zero if x is negative and y is equal to zero\n  if (y === 0 && x > 0) {\n    return 0\n  }\n\n  // Return zero if x is negative and y is equal to zero\n  if (y === 0 && x < 0) {\n    return -Math.PI\n  }\n\n  // Return argument of complex number\n  if (x > 0) {\n    return Math.atan(y / x)\n  } else if (x < 0 && y >= 0) {\n    return Math.atan(y / x) + Math.PI\n  } else {\n    return Math.atan(y / x) - Math.PI\n  }\n}\n\n/**\n * Returns the complex conjugate of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the conjugate.\n * @returns\n */\nfunction IMCONJUGATE(inumber) {\n  // Lookup real and imaginary coefficients using exports.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return conjugate of complex number\n  return y !== 0 ? COMPLEX(x, -y, unit) : inumber\n}\n\n/**\n * Returns the cosine of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the cosine.\n * @returns\n */\nfunction IMCOS(inumber) {\n  // Lookup real and imaginary coefficients using exports.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return cosine of complex number\n  return COMPLEX(\n    (Math.cos(x) * (Math.exp(y) + Math.exp(-y))) / 2,\n    (-Math.sin(x) * (Math.exp(y) - Math.exp(-y))) / 2,\n    unit\n  )\n}\n\n/**\n * Returns the hyperbolic cosine of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the hyperbolic cosine.\n * @returns\n */\nfunction IMCOSH(inumber) {\n  // Lookup real and imaginary coefficients using exports.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return hyperbolic cosine of complex number\n  return COMPLEX(\n    (Math.cos(y) * (Math.exp(x) + Math.exp(-x))) / 2,\n    (Math.sin(y) * (Math.exp(x) - Math.exp(-x))) / 2,\n    unit\n  )\n}\n\n/**\n * Returns the cotangent of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the cotangent.\n * @returns\n */\nfunction IMCOT(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Return cotangent of complex number\n  return IMDIV(IMCOS(inumber), IMSIN(inumber))\n}\n\n/**\n * Returns the quotient of two complex numbers.\n *\n * Category: Engineering\n *\n * @param {*} inumber1 The complex numerator or dividend.\n * @param {*} inumber2 The complex denominator or divisor.\n * @returns\n */\nfunction IMDIV(inumber1, inumber2) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const a = IMREAL(inumber1);\n  const b = IMAGINARY(inumber1);\n  const c = IMREAL(inumber2);\n  const d = IMAGINARY(inumber2);\n\n  if (anyIsError(a, b, c, d)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  const unit1 = inumber1.substring(inumber1.length - 1);\n  const unit2 = inumber2.substring(inumber2.length - 1);\n  let unit = 'i';\n\n  if (unit1 === 'j') {\n    unit = 'j';\n  } else if (unit2 === 'j') {\n    unit = 'j';\n  }\n\n  // Return error if inumber2 is null\n  if (c === 0 && d === 0) {\n    return num\n  }\n\n  // Return exponential of complex number\n  const den = c * c + d * d;\n  return COMPLEX((a * c + b * d) / den, (b * c - a * d) / den, unit)\n}\n\n/**\n * Returns the exponential of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the exponential.\n * @returns\n */\nfunction IMEXP(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return exponential of complex number\n  const e = Math.exp(x);\n  return COMPLEX(e * Math.cos(y), e * Math.sin(y), unit)\n}\n\n/**\n * Returns the natural logarithm of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the natural logarithm.\n * @returns\n */\nfunction IMLN(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return exponential of complex number\n  return COMPLEX(Math.log(Math.sqrt(x * x + y * y)), Math.atan(y / x), unit)\n}\n\n/**\n * Returns the base-10 logarithm of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the common logarithm.\n * @returns\n */\nfunction IMLOG10(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return exponential of complex number\n  return COMPLEX(Math.log(Math.sqrt(x * x + y * y)) / Math.log(10), Math.atan(y / x) / Math.log(10), unit)\n}\n\n/**\n * Returns the base-2 logarithm of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the base-2 logarithm.\n * @returns\n */\nfunction IMLOG2(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return exponential of complex number\n  return COMPLEX(Math.log(Math.sqrt(x * x + y * y)) / Math.log(2), Math.atan(y / x) / Math.log(2), unit)\n}\n\n/**\n * Returns a complex number raised to an integer power.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number you want to raise to a power.\n * @param {*} number The power to which you want to raise the complex number.\n * @returns\n */\nfunction IMPOWER(inumber, number) {\n  number = parseNumber(number);\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(number, x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Calculate power of modulus\n  const p = Math.pow(IMABS(inumber), number);\n\n  // Calculate argument\n  const t = IMARGUMENT(inumber);\n\n  // Return exponential of complex number\n  return COMPLEX(p * Math.cos(number * t), p * Math.sin(number * t), unit)\n}\n\n/**\n * Returns the product of complex numbers.\n *\n * Category: Engineering\n *\n * @param {*} args inumber1, [inumber2],  Inumber1 is required, subsequent inumbers are not. 1 to 255 complex numbers to multiply.\n * @returns\n */\nfunction IMPRODUCT() {\n  // Initialize result\n  let result = arguments[0];\n\n  if (!arguments.length) {\n    return value\n  }\n\n  // Loop on all numbers\n  for (let i = 1; i < arguments.length; i++) {\n    // Lookup coefficients of two complex numbers\n    const a = IMREAL(result);\n    const b = IMAGINARY(result);\n    const c = IMREAL(arguments[i]);\n    const d = IMAGINARY(arguments[i]);\n\n    if (anyIsError(a, b, c, d)) {\n      return value\n    }\n\n    // Complute product of two complex numbers\n    result = COMPLEX(a * c - b * d, a * d + b * c);\n  }\n\n  // Return product of complex numbers\n  return result\n}\n\n/**\n * Returns the real coefficient of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the real coefficient.\n * @returns\n */\nfunction IMREAL(inumber) {\n  if (inumber === undefined || inumber === true || inumber === false) {\n    return value\n  }\n\n  // Return 0 if inumber is equal to 0\n  if (inumber === 0 || inumber === '0') {\n    return 0\n  }\n\n  // Handle special cases\n  if (['i', '+i', '1i', '+1i', '-i', '-1i', 'j', '+j', '1j', '+1j', '-j', '-1j'].indexOf(inumber) >= 0) {\n    return 0\n  }\n\n  // Force String type\n  inumber = inumber + '';\n\n  // Lookup sign\n  let plus = inumber.indexOf('+');\n  let minus = inumber.indexOf('-');\n\n  if (plus === 0) {\n    plus = inumber.indexOf('+', 1);\n  }\n\n  if (minus === 0) {\n    minus = inumber.indexOf('-', 1);\n  }\n\n  // Lookup imaginary unit\n  const last = inumber.substring(inumber.length - 1, inumber.length);\n  const unit = last === 'i' || last === 'j';\n\n  if (plus >= 0 || minus >= 0) {\n    // Return error if imaginary unit is neither i nor j\n    if (!unit) {\n      return num\n    }\n\n    // Return real coefficient of complex number\n    if (plus >= 0) {\n      return isNaN(inumber.substring(0, plus)) || isNaN(inumber.substring(plus + 1, inumber.length - 1))\n        ? num\n        : Number(inumber.substring(0, plus))\n    } else {\n      return isNaN(inumber.substring(0, minus)) || isNaN(inumber.substring(minus + 1, inumber.length - 1))\n        ? num\n        : Number(inumber.substring(0, minus))\n    }\n  } else {\n    if (unit) {\n      return isNaN(inumber.substring(0, inumber.length - 1)) ? num : 0\n    } else {\n      return isNaN(inumber) ? num : inumber\n    }\n  }\n}\n\n/**\n * Returns the secant of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the secant.\n * @returns\n */\nfunction IMSEC(inumber) {\n  // Return error if inumber is a logical value\n  if (inumber === true || inumber === false) {\n    return value\n  }\n\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Return secant of complex number\n  return IMDIV('1', IMCOS(inumber))\n}\n\n/**\n * Returns the hyperbolic secant of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the hyperbolic secant.\n * @returns\n */\nfunction IMSECH(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Return hyperbolic secant of complex number\n  return IMDIV('1', IMCOSH(inumber))\n}\n\n/**\n * Returns the sine of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the sine.\n * @returns\n */\nfunction IMSIN(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return sine of complex number\n  return COMPLEX(\n    (Math.sin(x) * (Math.exp(y) + Math.exp(-y))) / 2,\n    (Math.cos(x) * (Math.exp(y) - Math.exp(-y))) / 2,\n    unit\n  )\n}\n\n/**\n * Returns the hyperbolic sine of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the hyperbolic sine.\n * @returns\n */\nfunction IMSINH(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Return hyperbolic sine of complex number\n  return COMPLEX(\n    (Math.cos(y) * (Math.exp(x) - Math.exp(-x))) / 2,\n    (Math.sin(y) * (Math.exp(x) + Math.exp(-x))) / 2,\n    unit\n  )\n}\n\n/**\n * Returns the square root of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the square root.\n * @returns\n */\nfunction IMSQRT(inumber) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  let unit = inumber.substring(inumber.length - 1);\n  unit = unit === 'i' || unit === 'j' ? unit : 'i';\n\n  // Calculate power of modulus\n  const s = Math.sqrt(IMABS(inumber));\n\n  // Calculate argument\n  const t = IMARGUMENT(inumber);\n\n  // Return exponential of complex number\n  return COMPLEX(s * Math.cos(t / 2), s * Math.sin(t / 2), unit)\n}\n\n/**\n * Returns the cosecant of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the cosecant.\n * @returns\n */\nfunction IMCSC(inumber) {\n  // Return error if inumber is a logical value\n  if (inumber === true || inumber === false) {\n    return value\n  }\n\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  // Return error if either coefficient is not a number\n  if (anyIsError(x, y)) {\n    return num\n  }\n\n  // Return cosecant of complex number\n  return IMDIV('1', IMSIN(inumber))\n}\n\n/**\n * Returns the hyperbolic cosecant of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the hyperbolic cosecant.\n * @returns\n */\nfunction IMCSCH(inumber) {\n  // Return error if inumber is a logical value\n  if (inumber === true || inumber === false) {\n    return value\n  }\n\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  // Return error if either coefficient is not a number\n  if (anyIsError(x, y)) {\n    return num\n  }\n\n  // Return hyperbolic cosecant of complex number\n  return IMDIV('1', IMSINH(inumber))\n}\n\n/**\n * Returns the difference between two complex numbers.\n *\n * Category: Engineering\n *\n * @param {*} inumber1 The complex number from which to subtract inumber2.\n * @param {*} inumber2 The complex number to subtract from inumber1.\n * @returns\n */\nfunction IMSUB(inumber1, inumber2) {\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const a = IMREAL(inumber1);\n  const b = IMAGINARY(inumber1);\n  const c = IMREAL(inumber2);\n  const d = IMAGINARY(inumber2);\n\n  if (anyIsError(a, b, c, d)) {\n    return value\n  }\n\n  // Lookup imaginary unit\n  const unit1 = inumber1.substring(inumber1.length - 1);\n  const unit2 = inumber2.substring(inumber2.length - 1);\n  let unit = 'i';\n\n  if (unit1 === 'j') {\n    unit = 'j';\n  } else if (unit2 === 'j') {\n    unit = 'j';\n  }\n\n  // Return _ of two complex numbers\n  return COMPLEX(a - c, b - d, unit)\n}\n\n/**\n * Returns the sum of complex numbers.\n *\n * Category: Engineering\n *\n * @param {*} args inumber1, [inumber2], ... Inumber1 is required, subsequent numbers are not. 1 to 255 complex numbers to add.\n * @returns\n */\nfunction IMSUM() {\n  if (!arguments.length) {\n    return value\n  }\n\n  const args = flatten(arguments);\n\n  // Initialize result\n  let result = args[0];\n\n  // Loop on all numbers\n  for (let i = 1; i < args.length; i++) {\n    // Lookup coefficients of two complex numbers\n    const a = IMREAL(result);\n    const b = IMAGINARY(result);\n    const c = IMREAL(args[i]);\n    const d = IMAGINARY(args[i]);\n\n    if (anyIsError(a, b, c, d)) {\n      return value\n    }\n\n    // Complute product of two complex numbers\n    result = COMPLEX(a + c, b + d);\n  }\n\n  // Return sum of complex numbers\n  return result\n}\n\n/**\n * Returns the tangent of a complex number.\n *\n * Category: Engineering\n *\n * @param {*} inumber A complex number for which you want the tangent.\n * @returns\n */\nfunction IMTAN(inumber) {\n  // Return error if inumber is a logical value\n  if (inumber === true || inumber === false) {\n    return value\n  }\n\n  // Lookup real and imaginary coefficients using Formula.js [http://formulajs.org]\n  const x = IMREAL(inumber);\n  const y = IMAGINARY(inumber);\n\n  if (anyIsError(x, y)) {\n    return value\n  }\n\n  // Return tangent of complex number\n  return IMDIV(IMSIN(inumber), IMCOS(inumber))\n}\n\n/**\n * Converts an octal number to binary.\n *\n * Category: Engineering\n *\n * @param {*} number The octal number you want to convert. Number may not contain more than 10 characters. The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, OCT2BIN uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction OCT2BIN(number, places) {\n  // Return error if number is not hexadecimal or contains more than ten characters (10 digits)\n  if (!/^[0-7]{1,10}$/.test(number)) {\n    return num\n  }\n\n  // Check if number is negative\n  const negative = !!(number.length === 10 && number.substring(0, 1) === '7');\n\n  // Convert octal number to decimal\n  const decimal = negative ? parseInt(number, 8) - 1073741824 : parseInt(number, 8);\n\n  // Return error if number is lower than -512 or greater than 511\n  if (decimal < -512 || decimal > 511) {\n    return num\n  }\n\n  // Ignore places and return a 10-character binary number if number is negative\n  if (negative) {\n    return '1' + REPT('0', 9 - (512 + decimal).toString(2).length) + (512 + decimal).toString(2)\n  }\n\n  // Convert decimal number to binary\n  const result = decimal.toString(2);\n\n  // Return binary number using the minimum number of characters necessary if places is undefined\n  if (typeof places === 'undefined') {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\n/**\n * Converts an octal number to decimal.\n *\n * Category: Engineering\n *\n * @param {*} number The octal number you want to convert. Number may not contain more than 10 octal characters (30 bits). The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @returns\n */\nfunction OCT2DEC(number) {\n  // Return error if number is not octal or contains more than ten characters (10 digits)\n  if (!/^[0-7]{1,10}$/.test(number)) {\n    return num\n  }\n\n  // Convert octal number to decimal\n  const decimal = parseInt(number, 8);\n\n  // Return decimal number\n  return decimal >= 536870912 ? decimal - 1073741824 : decimal\n}\n\n/**\n * Converts an octal number to hexadecimal.\n *\n * Category: Engineering\n *\n * @param {*} number The octal number you want to convert. Number may not contain more than 10 octal characters (30 bits). The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\n * @param {*} places Optional. The number of characters to use. If places is omitted, OCT2HEX uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\n * @returns\n */\nfunction OCT2HEX(number, places) {\n  // Return error if number is not octal or contains more than ten characters (10 digits)\n  if (!/^[0-7]{1,10}$/.test(number)) {\n    return num\n  }\n\n  // Convert octal number to decimal\n  const decimal = parseInt(number, 8);\n\n  // Ignore places and return a 10-character octal number if number is negative\n  if (decimal >= 536870912) {\n    return 'ff' + (decimal + 3221225472).toString(16)\n  }\n\n  // Convert decimal number to hexadecimal\n  const result = decimal.toString(16);\n\n  // Return hexadecimal number using the minimum number of characters necessary if places is undefined\n  if (places === undefined) {\n    return result\n  } else {\n    // Return error if places is nonnumeric\n    if (isNaN(places)) {\n      return value\n    }\n\n    // Return error if places is negative\n    if (places < 0) {\n      return num\n    }\n\n    // Truncate places in case it is not an integer\n    places = Math.floor(places);\n\n    // Pad return value with leading 0s (zeros) if necessary (using Underscore.string)\n    return places >= result.length ? REPT('0', places - result.length) + result : num\n  }\n}\n\nconst BETADIST = BETA.DIST;\nconst BETAINV = BETA.INV;\nconst BINOMDIST = BINOM.DIST;\nconst CEILINGMATH = CEILING.MATH;\nconst CEILINGPRECISE = CEILING.PRECISE;\nconst CHIDIST = CHISQ.DIST;\nconst CHIDISTRT = CHISQ.DIST.RT;\nconst CHIINV = CHISQ.INV;\nconst CHIINVRT = CHISQ.INV.RT;\nconst CHITEST = CHISQ.TEST;\nconst COVAR = COVARIANCE.P;\nconst COVARIANCEP = COVARIANCE.P;\nconst COVARIANCES = COVARIANCE.S;\nconst CRITBINOM = BINOM.INV;\nconst ERFCPRECISE = ERFC.PRECISE;\nconst ERFPRECISE = ERF.PRECISE;\nconst EXPONDIST = EXPON.DIST;\nconst FDIST = F.DIST;\nconst FDISTRT = F.DIST.RT;\nconst FINV = F.INV;\nconst FINVRT = F.INV.RT;\nconst FLOORMATH = FLOOR.MATH;\nconst FLOORPRECISE = FLOOR.PRECISE;\nconst FTEST = F.TEST;\nconst GAMMADIST = GAMMA.DIST;\nconst GAMMAINV = GAMMA.INV;\nconst GAMMALNPRECISE = GAMMALN.PRECISE;\nconst HYPGEOMDIST = HYPGEOM.DIST;\nconst LOGINV = LOGNORM.INV;\nconst LOGNORMDIST = LOGNORM.DIST;\nconst LOGNORMINV = LOGNORM.INV;\nconst MODEMULT = MODE.MULT;\nconst MODESNGL = MODE.SNGL;\nconst NEGBINOMDIST = NEGBINOM.DIST;\nconst NETWORKDAYSINTL = NETWORKDAYS.INTL;\nconst NORMDIST = NORM.DIST;\nconst NORMINV = NORM.INV;\nconst NORMSDIST = NORM.S.DIST;\nconst NORMSINV = NORM.S.INV;\nconst PERCENTILEEXC = PERCENTILE.EXC;\nconst PERCENTILEINC = PERCENTILE.INC;\nconst PERCENTRANKEXC = PERCENTRANK.EXC;\nconst PERCENTRANKINC = PERCENTRANK.INC;\nconst POISSONDIST = POISSON.DIST;\nconst QUARTILEEXC = QUARTILE.EXC;\nconst QUARTILEINC = QUARTILE.INC;\nconst RANKAVG = RANK.AVG;\nconst RANKEQ = RANK.EQ;\nconst SKEWP = SKEW.P;\nconst STDEVP = STDEV.P;\nconst STDEVS = STDEV.S;\nconst TDIST = T$1.DIST;\nconst TDISTRT = T$1.DIST.RT;\nconst TINV = T$1.INV;\nconst TTEST = T$1.TEST;\nconst VARP = VAR.P;\nconst VARS = VAR.S;\nconst WEIBULLDIST = WEIBULL.DIST;\nconst WORKDAYINTL = WORKDAY.INTL;\nconst ZTEST = Z.TEST;\n\nfunction compact(array) {\n  const result = [];\n\n  arrayEach(array, (value) => {\n    if (value) {\n      result.push(value);\n    }\n  });\n\n  return result\n}\n\n/**\n * Formula.js only\n *\n * @param {*} database\n * @param {*} title\n * @returns\n */\nfunction FINDFIELD(database, title) {\n  let index = null;\n\n  arrayEach(database, (value, i) => {\n    if (value[0] === title) {\n      index = i;\n\n      return false\n    }\n  });\n\n  // Return error if the input field title is incorrect\n  if (index == null) {\n    return value\n  }\n\n  return index\n}\n\nfunction findResultIndex(database, criterias) {\n  const matches = {};\n\n  for (let i = 1; i < database[0].length; ++i) {\n    matches[i] = true;\n  }\n\n  let maxCriteriaLength = criterias[0].length;\n\n  for (let i = 1; i < criterias.length; ++i) {\n    if (criterias[i].length > maxCriteriaLength) {\n      maxCriteriaLength = criterias[i].length;\n    }\n  }\n\n  for (let k = 1; k < database.length; ++k) {\n    for (let l = 1; l < database[k].length; ++l) {\n      let currentCriteriaResult = false;\n      let hasMatchingCriteria = false;\n\n      for (let j = 0; j < criterias.length; ++j) {\n        const criteria = criterias[j];\n\n        if (criteria.length < maxCriteriaLength) {\n          continue\n        }\n\n        const criteriaField = criteria[0];\n\n        if (database[k][0] !== criteriaField) {\n          continue\n        }\n\n        hasMatchingCriteria = true;\n\n        for (let p = 1; p < criteria.length; ++p) {\n          if (!currentCriteriaResult) {\n            const isWildcard = criteria[p] === void 0 || criteria[p] === '*';\n\n            if (isWildcard) {\n              currentCriteriaResult = true;\n            } else {\n              const tokenizedCriteria = parse(criteria[p] + '');\n              const tokens = [createToken(database[k][l], TOKEN_TYPE_LITERAL)].concat(\n                tokenizedCriteria\n              );\n\n              currentCriteriaResult = compute(tokens);\n            }\n          }\n        }\n      }\n\n      if (hasMatchingCriteria) {\n        matches[l] = matches[l] && currentCriteriaResult;\n      }\n    }\n  }\n\n  const result = [];\n\n  for (let n = 0; n < database[0].length; ++n) {\n    if (matches[n]) {\n      result.push(n - 1);\n    }\n  }\n\n  return result\n}\n\n// Database functions\n/**\n * Returns the average of selected database entries.\n *\n * Category: Database\n *\n * @param {*} database Range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria Range of values that contains the conditions you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DAVERAGE(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  let sum = 0;\n\n  arrayEach(resultIndexes, (value) => {\n    sum += targetFields[value];\n  });\n\n  return resultIndexes.length === 0 ? div0 : sum / resultIndexes.length\n}\n\n/**\n * Counts the values that contain numbers in a database.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as the argument includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DCOUNT(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  const targetValues = [];\n\n  arrayEach(resultIndexes, (value) => {\n    targetValues.push(targetFields[value]);\n  });\n\n  return COUNT(targetValues)\n}\n\n/**\n * Counts nonblank values in a database.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Optional. Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DCOUNTA(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  const targetValues = [];\n\n  arrayEach(resultIndexes, (value) => {\n    targetValues.push(targetFields[value]);\n  });\n\n  return COUNTA(targetValues)\n}\n\n/**\n * Extracts from a database a single record that matches the specified criteria.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DGET(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  // Return error if no record meets the criteria\n  if (resultIndexes.length === 0) {\n    return value\n  }\n  // Returns the #NUM! error value because more than one record meets the\n  // criteria\n  if (resultIndexes.length > 1) {\n    return num\n  }\n\n  return targetFields[resultIndexes[0]]\n}\n\n/**\n * Returns the maximum value from selected database entries.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DMAX(database, field, criteria) {\n  // Return error if field is not a number and not a string\n\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  let maxValue = targetFields[resultIndexes[0]];\n\n  arrayEach(resultIndexes, (value) => {\n    if (maxValue < targetFields[value]) {\n      maxValue = targetFields[value];\n    }\n  });\n\n  return maxValue\n}\n\n/**\n * Returns the minimum value from selected database entries.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DMIN(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  let minValue = targetFields[resultIndexes[0]];\n\n  arrayEach(resultIndexes, (value) => {\n    if (minValue > targetFields[value]) {\n      minValue = targetFields[value];\n    }\n  });\n\n  return minValue\n}\n\n/**\n * Multiplies the values in a particular field of records that match the criteria in a database.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DPRODUCT(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  let targetValues = [];\n\n  arrayEach(resultIndexes, (value) => {\n    targetValues.push(targetFields[value]);\n  });\n  targetValues = compact(targetValues);\n\n  let result = 1;\n\n  arrayEach(targetValues, (value) => {\n    result *= value;\n  });\n\n  return result\n}\n\n/**\n * Estimates the standard deviation based on a sample of selected database entries.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DSTDEV(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  let targetValues = [];\n\n  arrayEach(resultIndexes, (value) => {\n    targetValues.push(targetFields[value]);\n  });\n\n  targetValues = compact(targetValues);\n\n  return STDEV.S(targetValues)\n}\n\n/**\n * Calculates the standard deviation based on the entire population of selected database entries.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DSTDEVP(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  let targetValues = [];\n\n  arrayEach(resultIndexes, (value) => {\n    targetValues.push(targetFields[value]);\n  });\n\n  targetValues = compact(targetValues);\n\n  return STDEV.P(targetValues)\n}\n\n/**\n * Adds the numbers in the field column of records in the database that match the criteria.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria Is the range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DSUM(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  const targetValues = [];\n\n  arrayEach(resultIndexes, (value) => {\n    targetValues.push(targetFields[value]);\n  });\n\n  return SUM(targetValues)\n}\n\n/**\n * Estimates variance based on a sample from selected database entries.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DVAR(database, field, criteria) {\n  // Return error if field is not a number and not a string\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  const targetValues = [];\n\n  arrayEach(resultIndexes, (value) => {\n    targetValues.push(targetFields[value]);\n  });\n\n  return VAR.S(targetValues)\n}\n\n/**\n * Calculates variance based on the entire population of selected database entries.\n *\n * Category: Database\n *\n * @param {*} database The range of values that makes up the list or database. A database is a list of related data in which rows of related information are records, and columns of data are fields. The first row of the list contains labels for each column.\n * @param {*} field Indicates which column is used in the function. Enter the column label enclosed between double quotation marks, such as \"Age\" or \"Yield,\" or a number (without quotation marks) that represents the position of the column within the list: 1 for the first column, 2 for the second column, and so on.\n * @param {*} criteria The range of values that contains the conditions that you specify. You can use any range for the criteria argument, as long as it includes at least one column label and at least one value below the column label in which you specify a condition for the column.\n * @returns\n */\nfunction DVARP(database, field, criteria) {\n  // Return error if field is not a number and not a string\n\n  if (isNaN(field) && typeof field !== 'string') {\n    return value\n  }\n\n  const resultIndexes = findResultIndex(database, criteria);\n  let targetFields = [];\n\n  if (typeof field === 'string') {\n    const index = FINDFIELD(database, field);\n    targetFields = rest(database[index]);\n  } else {\n    targetFields = rest(database[field]);\n  }\n\n  const targetValues = [];\n\n  arrayEach(resultIndexes, (value) => {\n    targetValues.push(targetFields[value]);\n  });\n\n  return VAR.P(targetValues)\n}\n\nfunction validDate(d) {\n  return d && d.getTime && !isNaN(d.getTime())\n}\n\nfunction ensureDate(d) {\n  return d instanceof Date ? d : new Date(d)\n}\n\n/**\n * Returns the accrued interest for a security that pays periodic interest.\n *\n * Category: Financial\n *\n * @param {*} issue The security's issue date.\n * @param {*} first_interest The security's first interest date.\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} rate The security's annual coupon rate.\n * @param {*} par The security's par value. If you omit par, ACCRINT uses $1,000.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @param {*} calc_method Optional. Not implemented in formulajs. A logical value that specifies the way to calculate the total accrued interest when the date of settlement is later than the date of first_interest. A value of TRUE (1) returns the total accrued interest from issue to settlement. A value of FALSE (0) returns the accrued interest from first_interest to settlement. If you do not enter the argument, it defaults to TRUE.\n * @returns\n */\nfunction ACCRINT(issue, first_interest, settlement, rate, par, frequency, basis) {\n  // Return error if either date is invalid\n  issue = ensureDate(issue);\n  first_interest = ensureDate(first_interest);\n  settlement = ensureDate(settlement);\n\n  if (!validDate(issue) || !validDate(first_interest) || !validDate(settlement)) {\n    return value\n  }\n\n  // Return error if either rate or par are lower than or equal to zero\n  if (rate <= 0 || par <= 0) {\n    return num\n  }\n\n  // Return error if frequency is neither 1, 2, or 4\n  if ([1, 2, 4].indexOf(frequency) === -1) {\n    return num\n  }\n\n  // Return error if basis is neither 0, 1, 2, 3, or 4\n  if ([0, 1, 2, 3, 4].indexOf(basis) === -1) {\n    return num\n  }\n\n  // Return error if settlement is before or equal to issue\n  if (settlement <= issue) {\n    return num\n  }\n\n  // Set default values\n  par = par || 0;\n  basis = basis || 0;\n\n  // Compute accrued interest\n  return par * rate * YEARFRAC(issue, settlement, basis)\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the accrued interest for a security that pays interest at maturity.\n *\n * Category: Financial\n *\n * @param {*} issue The security's issue date.\n * @param {*} settlement The security's maturity date.\n * @param {*} rate The security's annual coupon rate.\n * @param {*} par The security's par value. If you omit par, ACCRINTM uses $1,000.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction ACCRINTM() {\n  throw new Error('ACCRINTM is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the depreciation for each accounting period by using a depreciation coefficient.\n *\n * Category: Financial\n *\n * @param {*} cost The cost of the asset.\n * @param {*} date_purchased The date of the purchase of the asset.\n * @param {*} first_period The date of the end of the first period.\n * @param {*} salvage The salvage value at the end of the life of the asset.\n * @param {*} period The period.\n * @param {*} rate The rate of depreciation.\n * @param {*} basis Optional. The year basis to be used.\n * @returns\n */\nfunction AMORDEGRC() {\n  throw new Error('AMORDEGRC is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the depreciation for each accounting period.\n *\n * Category: Financial\n *\n * @param {*} cost The cost of the asset.\n * @param {*} date_purchased The date of the purchase of the asset.\n * @param {*} first_period The date of the end of the first period.\n * @param {*} salvage The salvage value at the end of the life of the asset.\n * @param {*} period The period.\n * @param {*} rate The rate of depreciation.\n * @param {*} basis Optional. The year basis to be used.\n * @returns\n */\nfunction AMORLINC() {\n  throw new Error('AMORLINC is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the number of days from the beginning of the coupon period to the settlement date.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction COUPDAYBS() {\n  throw new Error('COUPDAYBS is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the number of days in the coupon period that contains the settlement date.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction COUPDAYS() {\n  throw new Error('COUPDAYS is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the number of days from the settlement date to the next coupon date.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction COUPDAYSNC() {\n  throw new Error('COUPDAYSNC is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the next coupon date after the settlement date.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction COUPNCD() {\n  throw new Error('COUPNCD is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the number of coupons payable between the settlement date and maturity date.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction COUPNUM() {\n  throw new Error('COUPNUM is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the previous coupon date before the settlement date.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction COUPPCD() {\n  throw new Error('COUPPCD is not implemented')\n}\n\n/**\n * Returns the cumulative interest paid between two periods.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate.\n * @param {*} nper The total number of payment periods.\n * @param {*} pv The present value.\n * @param {*} start_period The first period in the calculation. Payment periods are numbered beginning with 1.\n * @param {*} end_period The last period in the calculation.\n * @param {*} type The timing of the payment.\n * @returns\n */\nfunction CUMIPMT(rate, nper, pv, start_period, end_period, type) {\n  rate = parseNumber(rate);\n  nper = parseNumber(nper);\n  pv = parseNumber(pv);\n\n  if (anyIsError(rate, nper, pv)) {\n    return value\n  }\n\n  if (rate <= 0 || nper <= 0 || pv <= 0) {\n    return num\n  }\n\n  if (start_period < 1 || end_period < 1 || start_period > end_period) {\n    return num\n  }\n\n  if (type !== 0 && type !== 1) {\n    return num\n  }\n\n  const payment = PMT(rate, nper, pv, 0, type);\n  let interest = 0;\n\n  if (start_period === 1) {\n    if (type === 0) {\n      interest = -pv;\n    }\n\n    start_period++;\n  }\n\n  for (let i = start_period; i <= end_period; i++) {\n    interest += type === 1 ? FV(rate, i - 2, payment, pv, 1) - payment : FV(rate, i - 1, payment, pv, 0);\n  }\n\n  interest *= rate;\n\n  return interest\n}\n\n/**\n * Returns the cumulative principal paid on a loan between two periods.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate.\n * @param {*} nper The total number of payment periods.\n * @param {*} pv The present value.\n * @param {*} start_period The first period in the calculation. Payment periods are numbered beginning with 1.\n * @param {*} end_period The last period in the calculation.\n * @param {*} type The timing of the payment.\n * @returns\n */\nfunction CUMPRINC(rate, nper, pv, start_period, end, type) {\n  // Credits: algorithm inspired by Apache OpenOffice\n  // Credits: Hannes Stiebitzhofer for the translations of function and variable names\n  rate = parseNumber(rate);\n  nper = parseNumber(nper);\n  pv = parseNumber(pv);\n\n  if (anyIsError(rate, nper, pv)) {\n    return value\n  }\n\n  // Return error if either rate, nper, or value are lower than or equal to zero\n  if (rate <= 0 || nper <= 0 || pv <= 0) {\n    return num\n  }\n\n  // Return error if start < 1, end < 1, or start > end\n  if (start_period < 1 || end < 1 || start_period > end) {\n    return num\n  }\n\n  // Return error if type is neither 0 nor 1\n  if (type !== 0 && type !== 1) {\n    return num\n  }\n\n  // Compute cumulative principal\n  const payment = PMT(rate, nper, pv, 0, type);\n  let principal = 0;\n\n  if (start_period === 1) {\n    principal = type === 0 ? payment + pv * rate : payment;\n\n    start_period++;\n  }\n\n  for (let i = start_period; i <= end; i++) {\n    principal +=\n      type > 0\n        ? payment - (FV(rate, i - 2, payment, pv, 1) - payment) * rate\n        : payment - FV(rate, i - 1, payment, pv, 0) * rate;\n  }\n\n  // Return cumulative principal\n  return principal\n}\n\n/**\n * Returns the depreciation of an asset for a specified period by using the fixed-declining balance method.\n *\n * Category: Financial\n *\n * @param {*} cost The initial cost of the asset.\n * @param {*} salvage The value at the end of the depreciation (sometimes called the salvage value of the asset).\n * @param {*} life The number of periods over which the asset is being depreciated (sometimes called the useful life of the asset).\n * @param {*} period The period for which you want to calculate the depreciation. Period must use the same units as life.\n * @param {*} month Optional. The number of months in the first year. If month is omitted, it is assumed to be 12.\n * @returns\n */\nfunction DB(cost, salvage, life, period, month) {\n  // Initialize month\n  month = month === undefined ? 12 : month;\n\n  cost = parseNumber(cost);\n  salvage = parseNumber(salvage);\n  life = parseNumber(life);\n  period = parseNumber(period);\n  month = parseNumber(month);\n\n  if (anyIsError(cost, salvage, life, period, month)) {\n    return value\n  }\n\n  // Return error if any of the parameters is negative\n  if (cost < 0 || salvage < 0 || life < 0 || period < 0) {\n    return num\n  }\n\n  // Return error if month is not an integer between 1 and 12\n  if ([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].indexOf(month) === -1) {\n    return num\n  }\n\n  // Return error if period is greater than life\n  if (period > life) {\n    return num\n  }\n\n  // Return 0 (zero) if salvage is greater than or equal to cost\n  if (salvage >= cost) {\n    return 0\n  }\n\n  // Rate is rounded to three decimals places\n  const rate = (1 - Math.pow(salvage / cost, 1 / life)).toFixed(3);\n\n  // Compute initial depreciation\n  const initial = (cost * rate * month) / 12;\n\n  // Compute total depreciation\n  let total = initial;\n  let current = 0;\n  const ceiling = period === life ? life - 1 : period;\n\n  for (let i = 2; i <= ceiling; i++) {\n    current = (cost - total) * rate;\n    total += current;\n  }\n\n  // Depreciation for the first and last periods are special cases\n  if (period === 1) {\n    // First period\n    return initial\n  } else if (period === life) {\n    // Last period\n\n    return (cost - total) * rate\n  } else {\n    return current\n  }\n}\n\n/**\n * Returns the depreciation of an asset for a specified period by using the double-declining balance method or some other method that you specify.\n *\n * Category: Financial\n *\n * @param {*} cost The initial cost of the asset.\n * @param {*} salvage The value at the end of the depreciation (sometimes called the salvage value of the asset). This value can be 0.\n * @param {*} life The number of periods over which the asset is being depreciated (sometimes called the useful life of the asset).\n * @param {*} period The period for which you want to calculate the depreciation. Period must use the same units as life.\n * @param {*} factor Optional. The rate at which the balance declines. If factor is omitted, it is assumed to be 2 (the double-declining balance method).\n * @returns\n */\nfunction DDB(cost, salvage, life, period, factor) {\n  // Initialize factor\n  factor = factor === undefined ? 2 : factor;\n\n  cost = parseNumber(cost);\n  salvage = parseNumber(salvage);\n  life = parseNumber(life);\n  period = parseNumber(period);\n  factor = parseNumber(factor);\n\n  if (anyIsError(cost, salvage, life, period, factor)) {\n    return value\n  }\n\n  // Return error if any of the parameters is negative or if factor is null\n  if (cost < 0 || salvage < 0 || life < 0 || period < 0 || factor <= 0) {\n    return num\n  }\n\n  // Return error if period is greater than life\n  if (period > life) {\n    return num\n  }\n\n  // Return 0 (zero) if salvage is greater than or equal to cost\n  if (salvage >= cost) {\n    return 0\n  }\n\n  // Compute depreciation\n  let total = 0;\n  let current = 0;\n\n  for (let i = 1; i <= period; i++) {\n    current = Math.min((cost - total) * (factor / life), cost - salvage - total);\n    total += current;\n  }\n\n  // Return depreciation\n  return current\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the discount rate for a security.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} pr The security's price per $100 face value.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction DISC() {\n  throw new Error('DISC is not implemented')\n}\n\n/**\n * Converts a dollar price, expressed as a fraction, into a dollar price, expressed as a decimal number.\n *\n * Category: Financial\n *\n * @param {*} fractional_dollar A number expressed as an integer part and a fraction part, separated by a decimal symbol.\n * @param {*} fraction The integer to use in the denominator of the fraction.\n * @returns\n */\nfunction DOLLARDE(fractional_dollar, fraction) {\n  // Credits: algorithm inspired by Apache OpenOffice\n  fractional_dollar = parseNumber(fractional_dollar);\n  fraction = parseNumber(fraction);\n\n  if (anyIsError(fractional_dollar, fraction)) {\n    return value\n  }\n\n  // Return error if fraction is negative\n  if (fraction < 0) {\n    return num\n  }\n\n  // Return error if fraction is greater than or equal to 0 and less than 1\n  if (fraction >= 0 && fraction < 1) {\n    return div0\n  }\n\n  // Truncate fraction if it is not an integer\n  fraction = parseInt(fraction, 10);\n\n  // Compute integer part\n  let result = parseInt(fractional_dollar, 10);\n\n  // Add decimal part\n  result += ((fractional_dollar % 1) * Math.pow(10, Math.ceil(Math.log(fraction) / Math.LN10))) / fraction;\n\n  // Round result\n  const power = Math.pow(10, Math.ceil(Math.log(fraction) / Math.LN2) + 1);\n  result = Math.round(result * power) / power;\n\n  // Return converted dollar price\n  return result\n}\n\n/**\n * Converts a dollar price, expressed as a decimal number, into a dollar price, expressed as a fraction.\n *\n * Category: Financial\n *\n * @param {*} decimal_dollar A decimal number.\n * @param {*} fraction The integer to use in the denominator of a fraction.\n * @returns\n */\nfunction DOLLARFR(decimal_dollar, fraction) {\n  // Credits: algorithm inspired by Apache OpenOffice\n  decimal_dollar = parseNumber(decimal_dollar);\n  fraction = parseNumber(fraction);\n\n  if (anyIsError(decimal_dollar, fraction)) {\n    return value\n  }\n\n  // Return error if fraction is negative\n  if (fraction < 0) {\n    return num\n  }\n\n  // Return error if fraction is greater than or equal to 0 and less than 1\n  if (fraction >= 0 && fraction < 1) {\n    return div0\n  }\n\n  // Truncate fraction if it is not an integer\n  fraction = parseInt(fraction, 10);\n\n  // Compute integer part\n  let result = parseInt(decimal_dollar, 10);\n\n  // Add decimal part\n  result += (decimal_dollar % 1) * Math.pow(10, -Math.ceil(Math.log(fraction) / Math.LN10)) * fraction;\n\n  // Return converted dollar price\n  return result\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the annual duration of a security with periodic interest payments.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} coupon The security's annual coupon rate.\n * @param {*} yld The security's annual yield.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction DURATION() {\n  throw new Error('DURATION is not implemented')\n}\n\n/**\n * Returns the effective annual interest rate.\n *\n * Category: Financial\n *\n * @param {*} nominal_rate The nominal interest rate.\n * @param {*} npery The number of compounding periods per year.\n * @returns\n */\nfunction EFFECT(nominal_rate, npery) {\n  nominal_rate = parseNumber(nominal_rate);\n  npery = parseNumber(npery);\n\n  if (anyIsError(nominal_rate, npery)) {\n    return value\n  }\n\n  // Return error if rate <=0 or periods < 1\n  if (nominal_rate <= 0 || npery < 1) {\n    return num\n  }\n\n  // Truncate periods if it is not an integer\n  npery = parseInt(npery, 10);\n\n  // Return effective annual interest rate\n  return Math.pow(1 + nominal_rate / npery, npery) - 1\n}\n\n/**\n * Returns the future value of an investment.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate per period.\n * @param {*} nper The total number of payment periods in an annuity.\n * @param {*} pmt The payment made each period; it cannot change over the life of the annuity. Typically, pmt contains principal and interest but no other fees or taxes. If pmt is omitted, you must include the pv argument.\n * @param {*} pv Optional. The present value, or the lump-sum amount that a series of future payments is worth right now. If pv is omitted, it is assumed to be 0 (zero), and you must include the pmt argument.\n * @param {*} type Optional. The number 0 or 1 and indicates when payments are due. If type is omitted, it is assumed to be 0.\n * @returns\n */\nfunction FV(rate, nper, payment, value$1, type) {\n  // Credits: algorithm inspired by Apache OpenOffice\n  value$1 = value$1 || 0;\n  type = type || 0;\n\n  rate = parseNumber(rate);\n  nper = parseNumber(nper);\n  payment = parseNumber(payment);\n  value$1 = parseNumber(value$1);\n  type = parseNumber(type);\n\n  if (anyIsError(rate, nper, payment, value$1, type)) {\n    return value\n  }\n\n  // Return future value\n  let result;\n\n  if (rate === 0) {\n    result = value$1 + payment * nper;\n  } else {\n    const term = Math.pow(1 + rate, nper);\n\n    result =\n      type === 1\n        ? value$1 * term + (payment * (1 + rate) * (term - 1)) / rate\n        : value$1 * term + (payment * (term - 1)) / rate;\n  }\n\n  return -result\n}\n\n/**\n * Returns the future value of an initial principal after applying a series of compound interest rates.\n *\n * Category: Financial\n *\n * @param {*} principal The present value.\n * @param {*} schedule An array of interest rates to apply.\n * @returns\n */\nfunction FVSCHEDULE(principal, schedule) {\n  principal = parseNumber(principal);\n  schedule = parseNumberArray(flatten(schedule));\n\n  if (anyIsError(principal, schedule)) {\n    return value\n  }\n\n  const n = schedule.length;\n  let future = principal;\n\n  // Apply all interests in schedule\n\n  for (let i = 0; i < n; i++) {\n    // Apply scheduled interest\n    future *= 1 + schedule[i];\n  }\n\n  // Return future value\n  return future\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the interest rate for a fully invested security.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} investment The amount invested in the security.\n * @param {*} redemption The amount to be received at maturity.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction INTRATE() {\n  throw new Error('INTRATE is not implemented')\n}\n\n/**\n * Returns the interest payment for an investment for a given period.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate per period.\n * @param {*} per The period for which you want to find the interest and must be in the range 1 to nper.\n * @param {*} nper The total number of payment periods in an annuity.\n * @param {*} pv The present value, or the lump-sum amount that a series of future payments is worth right now.\n * @param {*} fv Optional. The future value, or a cash balance you want to attain after the last payment is made. If fv is omitted, it is assumed to be 0 (the future value of a loan, for example, is 0).\n * @param {*} type Optional. The number 0 or 1 and indicates when payments are due. If type is omitted, it is assumed to be 0.\n * @returns\n */\nfunction IPMT(rate, per, nper, pv, fv, type) {\n  // Credits: algorithm inspired by Apache OpenOffice\n  fv = fv || 0;\n  type = type || 0;\n\n  rate = parseNumber(rate);\n  per = parseNumber(per);\n  nper = parseNumber(nper);\n  pv = parseNumber(pv);\n  fv = parseNumber(fv);\n  type = parseNumber(type);\n\n  if (anyIsError(rate, per, nper, pv, fv, type)) {\n    return value\n  }\n\n  // Compute payment\n  const payment = PMT(rate, nper, pv, fv, type);\n\n  // Compute interest\n  let interest =\n    per === 1\n      ? type === 1\n        ? 0\n        : -pv\n      : type === 1\n      ? FV(rate, per - 2, payment, pv, 1) - payment\n      : FV(rate, per - 1, payment, pv, 0);\n\n  // Return interest\n  return interest * rate\n}\n\n/**\n * Returns the internal rate of return for a series of cash flows.\n *\n * Category: Financial\n *\n * @param {*} values An array or a reference to values that contain numbers for which you want to calculate the internal rate of return.\n - Values must contain at least one positive value and one negative value to calculate the internal rate of return.\n - IRR uses the order of values to interpret the order of cash flows. Be sure to enter your payment and income values in the sequence you want.\n - If an array or reference argument contains text, logical values, or empty values, those values are ignored.\n * @param {*} guess Optional. A number that you guess is close to the result of IRR.\n - Microsoft Excel uses an iterative technique for calculating IRR. Starting with guess, IRR cycles through the calculation until the result is accurate within 0.00001 percent. If IRR can't find a result that works after 20 tries, the #NUM! error value is returned.\n - In most cases you do not need to provide guess for the IRR calculation. If guess is omitted, it is assumed to be 0.1 (10 percent).\n - If IRR gives the #NUM! error value, or if the result is not close to what you expected, try again with a different value for guess.\n * @returns\n */\nfunction IRR(values, guess) {\n  // Credits: algorithm inspired by Apache OpenOffice\n  guess = guess || 0;\n\n  values = parseNumberArray(flatten(values));\n  guess = parseNumber(guess);\n\n  if (anyIsError(values, guess)) {\n    return value\n  }\n\n  // Calculates the resulting amount\n  const irrResult = (values, dates, rate) => {\n    const r = rate + 1;\n    let result = values[0];\n\n    for (let i = 1; i < values.length; i++) {\n      result += values[i] / Math.pow(r, (dates[i] - dates[0]) / 365);\n    }\n\n    return result\n  };\n\n  // Calculates the first derivation\n  const irrResultDeriv = (values, dates, rate) => {\n    const r = rate + 1;\n    let result = 0;\n\n    for (let i = 1; i < values.length; i++) {\n      const frac = (dates[i] - dates[0]) / 365;\n      result -= (frac * values[i]) / Math.pow(r, frac + 1);\n    }\n\n    return result\n  };\n\n  // Initialize dates and check that values contains at least one positive value and one negative value\n  const dates = [];\n  let positive = false;\n  let negative = false;\n\n  for (let i = 0; i < values.length; i++) {\n    dates[i] = i === 0 ? 0 : dates[i - 1] + 365;\n\n    if (values[i] > 0) {\n      positive = true;\n    }\n\n    if (values[i] < 0) {\n      negative = true;\n    }\n  }\n\n  // Return error if values does not contain at least one positive value and one negative value\n  if (!positive || !negative) {\n    return num\n  }\n\n  // Initialize guess and resultRate\n  guess = guess === undefined ? 0.1 : guess;\n  let resultRate = guess;\n\n  // Set maximum epsilon for end of iteration\n  const epsMax = 1e-10;\n\n  // Implement Newton's method\n  let newRate, epsRate, resultValue;\n  let contLoop = true;\n  do {\n    resultValue = irrResult(values, dates, resultRate);\n    newRate = resultRate - resultValue / irrResultDeriv(values, dates, resultRate);\n    epsRate = Math.abs(newRate - resultRate);\n    resultRate = newRate;\n    contLoop = epsRate > epsMax && Math.abs(resultValue) > epsMax;\n  } while (contLoop)\n\n  // Return internal rate of return\n  return resultRate\n}\n\n/**\n * Calculates the interest paid during a specific period of an investment.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate for the investment.\n * @param {*} per The period for which you want to find the interest, and must be between 1 and Nper.\n * @param {*} nper The total number of payment periods for the investment.\n * @param {*} pv The present value of the investment. For a loan, Pv is the loan amount.\n *\n * @returns\n */\nfunction ISPMT(rate, per, nper, pv) {\n  rate = parseNumber(rate);\n  per = parseNumber(per);\n  nper = parseNumber(nper);\n  pv = parseNumber(pv);\n\n  if (anyIsError(rate, per, nper, pv)) {\n    return value\n  }\n\n  // Return interest\n  return pv * rate * (per / nper - 1)\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the Macauley modified duration for a security with an assumed par value of $100.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} coupon The security's annual coupon rate.\n * @param {*} yld The security's annual yield.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction MDURATION() {\n  throw new Error('MDURATION is not implemented')\n}\n\n/**\n * Returns the internal rate of return where positive and negative cash flows are financed at different rates.\n *\n * Category: Financial\n *\n * @param {*} values An array or a reference to values that contain numbers. These numbers represent a series of payments (negative values) and income (positive values) occurring at regular periods.\n - Values must contain at least one positive value and one negative value to calculate the modified internal rate of return. Otherwise, MIRR returns the #DIV/0! error value.\n - If an array or reference argument contains text, logical values, or empty values, those values are ignored; however, values with the value zero are included.\n * @param {*} finance_rate The interest rate you pay on the money used in the cash flows.\n * @param {*} reinvest_rate The interest rate you receive on the cash flows as you reinvest them.\n * @returns\n */\nfunction MIRR(values, finance_rate, reinvest_rate) {\n  values = parseNumberArray(flatten(values));\n  finance_rate = parseNumber(finance_rate);\n  reinvest_rate = parseNumber(reinvest_rate);\n\n  if (anyIsError(values, finance_rate, reinvest_rate)) {\n    return value\n  }\n\n  // Initialize number of values\n  const n = values.length;\n\n  // Lookup payments (negative values) and incomes (positive values)\n  const payments = [];\n  const incomes = [];\n\n  for (let i = 0; i < n; i++) {\n    if (values[i] < 0) {\n      payments.push(values[i]);\n    } else {\n      incomes.push(values[i]);\n    }\n  }\n\n  // Return modified internal rate of return\n  const num = -NPV(reinvest_rate, incomes) * Math.pow(1 + reinvest_rate, n - 1);\n  const den = NPV(finance_rate, payments) * (1 + finance_rate);\n\n  return Math.pow(num / den, 1 / (n - 1)) - 1\n}\n\n/**\n * Returns the annual nominal interest rate.\n *\n * Category: Financial\n *\n * @param {*} effect_rate The effective interest rate.\n * @param {*} npery The number of compounding periods per year.\n * @returns\n */\nfunction NOMINAL(effect_rate, npery) {\n  effect_rate = parseNumber(effect_rate);\n  npery = parseNumber(npery);\n\n  if (anyIsError(effect_rate, npery)) {\n    return value\n  }\n\n  // Return error if rate <=0 or periods < 1\n  if (effect_rate <= 0 || npery < 1) {\n    return num\n  }\n\n  // Truncate periods if it is not an integer\n  npery = parseInt(npery, 10);\n\n  // Return nominal annual interest rate\n  return (Math.pow(effect_rate + 1, 1 / npery) - 1) * npery\n}\n\n/**\n * Returns the number of periods for an investment.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate per period.\n * @param {*} pmt The payment made each period; it cannot change over the life of the annuity. Typically, pmt contains principal and interest but no other fees or taxes.\n * @param {*} pv The present value, or the lump-sum amount that a series of future payments is worth right now.\n * @param {*} fv Optional. The future value, or a cash balance you want to attain after the last payment is made. If fv is omitted, it is assumed to be 0 (the future value of a loan, for example, is 0).\n * @param {*} type Optional. The number 0 or 1 and indicates when payments are due.\n * @returns\n */\nfunction NPER(rate, pmt, pv, fv, type) {\n  type = type === undefined ? 0 : type;\n  fv = fv === undefined ? 0 : fv;\n\n  rate = parseNumber(rate);\n  pmt = parseNumber(pmt);\n  pv = parseNumber(pv);\n  fv = parseNumber(fv);\n  type = parseNumber(type);\n\n  if (anyIsError(rate, pmt, pv, fv, type)) {\n    return value\n  }\n\n  if (rate === 0) {\n    return -(pv + fv) / pmt\n  } else {\n    const num = pmt * (1 + rate * type) - fv * rate;\n    const den = pv * rate + pmt * (1 + rate * type);\n\n    return Math.log(num / den) / Math.log(1 + rate)\n  }\n}\n\n/**\n * Returns the net present value of an investment based on a series of periodic cash flows and a discount rate.\n *\n * Category: Financial\n *\n * @param {*} rate The rate of discount over the length of one period.\n * @param {*} args value1, value2, ... Value1 is required, subsequent values are optional. 1 to 254 arguments representing the payments and income.\n - value1, value2, ... must be equally spaced in time and occur at the end of each period.\n - NPV uses the order of value1, value2, ... to interpret the order of cash flows. Be sure to enter your payment and income values in the correct sequence.\n - Arguments that are empty values, logical values, or text representations of numbers, error values, or text that cannot be translated into numbers are ignored.\n - If an argument is an array or reference, only numbers in that array or reference are counted. Empty values, logical values, text, or error values in the array or reference are ignored.\n * @returns\n */\nfunction NPV() {\n  const args = parseNumberArray(flatten(arguments));\n\n  if (args instanceof Error) {\n    return args\n  }\n\n  // Lookup rate\n  const rate = args[0];\n\n  // Initialize net present value\n  let value = 0;\n\n  // Loop on all values\n  for (let j = 1; j < args.length; j++) {\n    value += args[j] / Math.pow(1 + rate, j);\n  }\n\n  // Return net present value\n  return value\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the price per $100 face value of a security with an odd first period.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} issue The security's issue date.\n * @param {*} first_coupon The security's first coupon date.\n * @param {*} rate The security's interest rate.\n * @param {*} yld The security's annual yield.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction ODDFPRICE() {\n  throw new Error('ODDFPRICE is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the yield of a security with an odd first period.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} issue The security's issue date.\n * @param {*} first_coupon The security's first coupon date.\n * @param {*} rate The security's interest rate.\n * @param {*} pr The security's price.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction ODDFYIELD() {\n  throw new Error('ODDFYIELD is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the price per $100 face value of a security with an odd last period.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} last_interest The security's last coupon date.\n * @param {*} rate The security's interest rate.\n * @param {*} yld The security's annual yield.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction ODDLPRICE() {\n  throw new Error('ODDLPRICE is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the yield of a security with an odd last period.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} last_interest The security's last coupon date.\n * @param {*} rate The security's interest rate\n * @param {*} pr The security's price.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction ODDLYIELD() {\n  throw new Error('ODDLYIELD is not implemented')\n}\n\n/**\n * Returns the number of periods required by an investment to reach a specified value.\n *\n * Category: Financial\n *\n * @param {*} rate Rate is the interest rate per period.\n * @param {*} pv Pv is the present value of the investment.\n * @param {*} fv Fv is the desired future value of the investment.\n * @returns\n */\nfunction PDURATION(rate, pv, fv) {\n  rate = parseNumber(rate);\n  pv = parseNumber(pv);\n  fv = parseNumber(fv);\n\n  if (anyIsError(rate, pv, fv)) {\n    return value\n  }\n\n  // Return error if rate <=0\n  if (rate <= 0) {\n    return num\n  }\n\n  // Return number of periods\n  return (Math.log(fv) - Math.log(pv)) / Math.log(1 + rate)\n}\n\n/**\n * Returns the periodic payment for an annuity.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate for the loan.\n * @param {*} nper The total number of payments for the loan.\n * @param {*} pv The present value, or the total amount that a series of future payments is worth now; also known as the principal.\n * @param {*} fv Optional. The future value, or a cash balance you want to attain after the last payment is made. If fv is omitted, it is assumed to be 0 (zero), that is, the future value of a loan is 0.\n * @param {*} type Optional. The number 0 (zero) or 1 and indicates when payments are due.\n * @returns\n */\nfunction PMT(rate, nper, pv, fv, type) {\n  // Credits: algorithm inspired by Apache OpenOffice\n  fv = fv || 0;\n  type = type || 0;\n\n  rate = parseNumber(rate);\n  nper = parseNumber(nper);\n  pv = parseNumber(pv);\n  fv = parseNumber(fv);\n  type = parseNumber(type);\n\n  if (anyIsError(rate, nper, pv, fv, type)) {\n    return value\n  }\n\n  // Return payment\n  let result;\n\n  if (rate === 0) {\n    result = (pv + fv) / nper;\n  } else {\n    const term = Math.pow(1 + rate, nper);\n\n    result =\n      type === 1\n        ? ((fv * rate) / (term - 1) + (pv * rate) / (1 - 1 / term)) / (1 + rate)\n        : (fv * rate) / (term - 1) + (pv * rate) / (1 - 1 / term);\n  }\n\n  return -result\n}\n\n/**\n * Returns the payment on the principal for an investment for a given period.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate per period.\n * @param {*} per Specifies the period and must be in the range 1 to nper.\n * @param {*} nper The total number of payment periods in an annuity.\n * @param {*} pv The present value  the total amount that a series of future payments is worth now.\n * @param {*} fv Optional. The future value, or a cash balance you want to attain after the last payment is made. If fv is omitted, it is assumed to be 0 (zero), that is, the future value of a loan is 0.\n * @param {*} type Optional. The number 0 or 1 and indicates when payments are due.\n * @returns\n */\nfunction PPMT(rate, per, nper, pv, fv, type) {\n  fv = fv || 0;\n  type = type || 0;\n\n  rate = parseNumber(rate);\n  nper = parseNumber(nper);\n  pv = parseNumber(pv);\n  fv = parseNumber(fv);\n  type = parseNumber(type);\n\n  if (anyIsError(rate, nper, pv, fv, type)) {\n    return value\n  }\n\n  return PMT(rate, nper, pv, fv, type) - IPMT(rate, per, nper, pv, fv, type)\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the price per $100 face value of a security that pays periodic interest.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} rate The security's annual coupon rate.\n * @param {*} yld The security's annual yield.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction PRICE() {\n  throw new Error('PRICE is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the price per $100 face value of a discounted security.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} discount The security's discount rate.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction PRICEDISC() {\n  throw new Error('PRICEDISC is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the price per $100 face value of a security that pays interest at maturity.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} issue The security's issue date, expressed as a serial date number.\n * @param {*} rate The security's interest rate at date of issue.\n * @param {*} yld The security's annual yield.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction PRICEMAT() {\n  throw new Error('PRICEMAT is not implemented')\n}\n\n/**\n * Returns the present value of an investment.\n *\n * Category: Financial\n *\n * @param {*} rate The interest rate per period. For example, if you obtain an automobile loan at a 10 percent annual interest rate and make monthly payments, your interest rate per month is 10%/12, or 0.83%. You would enter 10%/12, or 0.83%, or 0.0083, into the formula as the rate.\n * @param {*} nper The total number of payment periods in an annuity. For example, if you get a four-year car loan and make monthly payments, your loan has 4*12 (or 48) periods. You would enter 48 into the formula for nper.\n * @param {*} pmt The payment made each period and cannot change over the life of the annuity. Typically, pmt includes principal and interest but no other fees or taxes. For example, the monthly payments on a $10,000, four-year car loan at 12 percent are $263.33. You would enter -263.33 into the formula as the pmt. If pmt is omitted, you must include the fv argument.\n * @param {*} fv Optional. The future value, or a cash balance you want to attain after the last payment is made. If fv is omitted, it is assumed to be 0 (the future value of a loan, for example, is 0). For example, if you want to save $50,000 to pay for a special project in 18 years, then $50,000 is the future value. You could then make a conservative guess at an interest rate and determine how much you must save each month. If fv is omitted, you must include the pmt argument.\n * @param {*} type Optional. The number 0 or 1 and indicates when payments are due.\n * @returns\n */\nfunction PV(rate, per, pmt, fv, type) {\n  fv = fv || 0;\n  type = type || 0;\n\n  rate = parseNumber(rate);\n  per = parseNumber(per);\n  pmt = parseNumber(pmt);\n  fv = parseNumber(fv);\n  type = parseNumber(type);\n\n  if (anyIsError(rate, per, pmt, fv, type)) {\n    return value\n  }\n\n  // Return present value\n  return rate === 0\n    ? -pmt * per - fv\n    : (((1 - Math.pow(1 + rate, per)) / rate) * pmt * (1 + rate * type) - fv) / Math.pow(1 + rate, per)\n}\n\n/**\n * Returns the interest rate per period of an annuity.\n *\n * Category: Financial\n *\n * @param {*} nper The total number of payment periods in an annuity.\n * @param {*} pmt The payment made each period and cannot change over the life of the annuity. Typically, pmt includes principal and interest but no other fees or taxes. If pmt is omitted, you must include the fv argument.\n * @param {*} pv The present value  the total amount that a series of future payments is worth now.\n * @param {*} fv Optional. The future value, or a cash balance you want to attain after the last payment is made. If fv is omitted, it is assumed to be 0 (the future value of a loan, for example, is 0). If fv is omitted, you must include the pmt argument.\n * @param {*} type Optional. The number 0 or 1 and indicates when payments are due.\n * @param {*} guess Optional. Your guess for what the rate will be. If you omit guess, it is assumed to be 10 percent. If RATE does not converge, try different values for guess. RATE usually converges if guess is between 0 and 1.\n - If you omit guess, it is assumed to be 10 percent.\n - If RATE does not converge, try different values for guess. RATE usually converges if guess is between 0 and 1.\n * @returns\n */\nfunction RATE(nper, pmt, pv, fv, type, guess) {\n  guess = guess === undefined ? 0.01 : guess;\n  fv = fv === undefined ? 0 : fv;\n  type = type === undefined ? 0 : type;\n\n  nper = parseNumber(nper);\n  pmt = parseNumber(pmt);\n  pv = parseNumber(pv);\n  fv = parseNumber(fv);\n  type = parseNumber(type);\n  guess = parseNumber(guess);\n\n  if (anyIsError(nper, pmt, pv, fv, type, guess)) {\n    return value\n  }\n\n  const epsMax = 1e-10;\n  const iterMax = 20;\n  let rate = guess;\n\n  type = type ? 1 : 0;\n\n  for (let i = 0; i < iterMax; i++) {\n    if (rate <= -1) {\n      return num\n    }\n\n    let y, f;\n\n    if (Math.abs(rate) < epsMax) {\n      y = pv * (1 + nper * rate) + pmt * (1 + rate * type) * nper + fv;\n    } else {\n      f = Math.pow(1 + rate, nper);\n      y = pv * f + pmt * (1 / rate + type) * (f - 1) + fv;\n    }\n\n    if (Math.abs(y) < epsMax) {\n      return rate\n    }\n\n    let dy;\n\n    if (Math.abs(rate) < epsMax) {\n      dy = pv * nper + pmt * type * nper;\n    } else {\n      f = Math.pow(1 + rate, nper);\n      const df = nper * Math.pow(1 + rate, nper - 1);\n      dy = pv * df + pmt * (1 / rate + type) * df + pmt * (-1 / (rate * rate)) * (f - 1);\n    }\n\n    rate -= y / dy;\n  }\n\n  return rate\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the amount received at maturity for a fully invested security.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} investment The amount invested in the security.\n * @param {*} discount The security's discount rate.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction RECEIVED() {\n  throw new Error('RECEIVED is not implemented')\n}\n\n/**\n * Returns an equivalent interest rate for the growth of an investment.\n *\n * Category: Financial\n *\n * @param {*} nper Nper is the number of periods for the investment.\n * @param {*} pv Pv is the present value of the investment.\n * @param {*} fv Fv is the future value of the investment.\n * @returns\n */\nfunction RRI(nper, pv, fv) {\n  nper = parseNumber(nper);\n  pv = parseNumber(pv);\n  fv = parseNumber(fv);\n\n  if (anyIsError(nper, pv, fv)) {\n    return value\n  }\n\n  // Return error if nper or present is equal to 0 (zero)\n  if (nper === 0 || pv === 0) {\n    return num\n  }\n\n  // Return equivalent interest rate\n  return Math.pow(fv / pv, 1 / nper) - 1\n}\n\n/**\n * Returns the straight-line depreciation of an asset for one period.\n *\n * Category: Financial\n *\n * @param {*} cost The initial cost of the asset.\n * @param {*} salvage The value at the end of the depreciation (sometimes called the salvage value of the asset).\n * @param {*} life The number of periods over which the asset is depreciated (sometimes called the useful life of the asset).\n * @returns\n */\nfunction SLN(cost, salvage, life) {\n  cost = parseNumber(cost);\n  salvage = parseNumber(salvage);\n  life = parseNumber(life);\n\n  if (anyIsError(cost, salvage, life)) {\n    return value\n  }\n\n  // Return error if life equal to 0 (zero)\n  if (life === 0) {\n    return num\n  }\n\n  // Return straight-line depreciation\n  return (cost - salvage) / life\n}\n\n/**\n * Returns the sum-of-years' digits depreciation of an asset for a specified period.\n *\n * Category: Financial\n *\n * @param {*} cost The initial cost of the asset.\n * @param {*} salvage The value at the end of the depreciation (sometimes called the salvage value of the asset).\n * @param {*} life The number of periods over which the asset is depreciated (sometimes called the useful life of the asset).\n * @param {*} per The period and must use the same units as life.\n * @returns\n */\nfunction SYD(cost, salvage, life, per) {\n  // Return error if any of the parameters is not a number\n  cost = parseNumber(cost);\n  salvage = parseNumber(salvage);\n  life = parseNumber(life);\n  per = parseNumber(per);\n\n  if (anyIsError(cost, salvage, life, per)) {\n    return value\n  }\n\n  // Return error if life equal to 0 (zero)\n  if (life === 0) {\n    return num\n  }\n\n  // Return error if period is lower than 1 or greater than life\n  if (per < 1 || per > life) {\n    return num\n  }\n\n  // Truncate period if it is not an integer\n  per = parseInt(per, 10);\n\n  // Return straight-line depreciation\n  return ((cost - salvage) * (life - per + 1) * 2) / (life * (life + 1))\n}\n\n/**\n * Returns the bond-equivalent yield for a Treasury bill.\n *\n * Category: Financial\n *\n * @param {*} settlement The Treasury bill's settlement date. The security settlement date is the date after the issue date when the Treasury bill is traded to the buyer.\n * @param {*} maturity The Treasury bill's maturity date. The maturity date is the date when the Treasury bill expires.\n * @param {*} discount The Treasury bill's discount rate.\n * @returns\n */\nfunction TBILLEQ(settlement, maturity, discount) {\n  settlement = parseDate(settlement);\n  maturity = parseDate(maturity);\n  discount = parseNumber(discount);\n\n  if (anyIsError(settlement, maturity, discount)) {\n    return value\n  }\n\n  // Return error if discount is lower than or equal to zero\n  if (discount <= 0) {\n    return num\n  }\n\n  // Return error if settlement is greater than maturity\n  if (settlement > maturity) {\n    return num\n  }\n\n  // Return error if maturity is more than one year after settlement\n  if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\n    return num\n  }\n\n  // Return bond-equivalent yield\n  return (365 * discount) / (360 - discount * DAYS360(settlement, maturity, false))\n}\n\n/**\n * Returns the price per $100 face value for a Treasury bill.\n *\n * Category: Financial\n *\n * @param {*} settlement The Treasury bill's settlement date. The security settlement date is the date after the issue date when the Treasury bill is traded to the buyer.\n * @param {*} maturity The Treasury bill's maturity date. The maturity date is the date when the Treasury bill expires.\n * @param {*} discount The Treasury bill's discount rate.\n * @returns\n */\nfunction TBILLPRICE(settlement, maturity, discount) {\n  settlement = parseDate(settlement);\n  maturity = parseDate(maturity);\n  discount = parseNumber(discount);\n\n  if (anyIsError(settlement, maturity, discount)) {\n    return value\n  }\n\n  // Return error if discount is lower than or equal to zero\n  if (discount <= 0) {\n    return num\n  }\n\n  // Return error if settlement is greater than maturity\n  if (settlement > maturity) {\n    return num\n  }\n\n  // Return error if maturity is more than one year after settlement\n  if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\n    return num\n  }\n\n  // Return bond-equivalent yield\n  return 100 * (1 - (discount * DAYS360(settlement, maturity, false)) / 360)\n}\n\n/**\n * Returns the yield for a Treasury bill.\n *\n * Category: Financial\n *\n * @param {*} settlement The Treasury bill's settlement date. The security settlement date is the date after the issue date when the Treasury bill is traded to the buyer.\n * @param {*} maturity The Treasury bill's maturity date. The maturity date is the date when the Treasury bill expires.\n * @param {*} pr The Treasury bill's price per $100 face value.\n * @returns\n */\nfunction TBILLYIELD(settlement, maturity, pr) {\n  settlement = parseDate(settlement);\n  maturity = parseDate(maturity);\n  pr = parseNumber(pr);\n\n  if (anyIsError(settlement, maturity, pr)) {\n    return value\n  }\n\n  // Return error if price is lower than or equal to zero\n  if (pr <= 0) {\n    return num\n  }\n\n  // Return error if settlement is greater than maturity\n  if (settlement > maturity) {\n    return num\n  }\n\n  // Return error if maturity is more than one year after settlement\n  if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\n    return num\n  }\n\n  // Return bond-equivalent yield\n  return ((100 - pr) * 360) / (pr * DAYS360(settlement, maturity, false))\n}\n\n// TODO\n/**\n * -- Not implemented --\n * \n * Returns the depreciation of an asset for a specified or partial period by using a declining balance method.\n *\n * Category: Financial\n *\n * @param {*} cost The initial cost of the asset.\n * @param {*} salvage The value at the end of the depreciation (sometimes called the salvage value of the asset). This value can be 0.\n * @param {*} life The number of periods over which the asset is depreciated (sometimes called the useful life of the asset).\n * @param {*} start_period The starting period for which you want to calculate the depreciation. Start_period must use the same units as life.\n * @param {*} end_period The ending period for which you want to calculate the depreciation. End_period must use the same units as life.\n * @param {*} factor Optional. The rate at which the balance declines. If factor is omitted, it is assumed to be 2 (the double-declining balance method). Change factor if you do not want to use the double-declining balance method. For a description of the double-declining balance method, see DDB.\n * @param {*} no_switch Optional. A logical value specifying whether to switch to straight-line depreciation when depreciation is greater than the declining balance calculation.\n - If no_switch is TRUE, Microsoft Excel does not switch to straight-line depreciation even when the depreciation is greater than the declining balance calculation.\n - If no_switch is FALSE or omitted, Excel switches to straight-line depreciation when depreciation is greater than the declining balance calculation.\n * @returns\n */\nfunction VDB() {\n  throw new Error('VDB is not implemented')\n}\n\n/**\n * Returns the internal rate of return for a schedule of cash flows that is not necessarily periodic.\n *\n * Category: Financial\n *\n * @param {*} values A series of cash flows that corresponds to a schedule of payments in dates. The first payment is optional and corresponds to a cost or payment that occurs at the beginning of the investment. If the first value is a cost or payment, it must be a negative value. All succeeding payments are discounted based on a 365-day year. The series of values must contain at least one positive and one negative value.\n * @param {*} dates A schedule of payment dates that corresponds to the cash flow payments. Dates may occur in any order. Dates should be entered by using the DATE function, or as results of other formulas or functions. For example, use DATE(2008,5,23) for the 23rd day of May, 2008. Problems can occur if dates are entered as text. .\n * @param {*} guess Optional. A number that you guess is close to the result of XIRR.\n * @returns\n */\nfunction XIRR(values, dates, guess) {\n  // Credits: algorithm inspired by Apache OpenOffice\n  values = parseNumberArray(flatten(values));\n  dates = parseDateArray(flatten(dates));\n  guess = parseNumber(guess);\n\n  if (anyIsError(values, dates, guess)) {\n    return value\n  }\n\n  // Calculates the resulting amount\n  const irrResult = (values, dates, rate) => {\n    const r = rate + 1;\n    let result = values[0];\n\n    for (let i = 1; i < values.length; i++) {\n      result += values[i] / Math.pow(r, DAYS(dates[i], dates[0]) / 365);\n    }\n\n    return result\n  };\n\n  // Calculates the first derivation\n  const irrResultDeriv = (values, dates, rate) => {\n    const r = rate + 1;\n    let result = 0;\n\n    for (let i = 1; i < values.length; i++) {\n      const frac = DAYS(dates[i], dates[0]) / 365;\n      result -= (frac * values[i]) / Math.pow(r, frac + 1);\n    }\n\n    return result\n  };\n\n  // Check that values contains at least one positive value and one negative value\n  let positive = false;\n  let negative = false;\n\n  for (let i = 0; i < values.length; i++) {\n    if (values[i] > 0) {\n      positive = true;\n    }\n\n    if (values[i] < 0) {\n      negative = true;\n    }\n  }\n\n  // Return error if values does not contain at least one positive value and one negative value\n  if (!positive || !negative) {\n    return num\n  }\n\n  // Initialize guess and resultRate\n  guess = guess || 0.1;\n  let resultRate = guess;\n\n  // Set maximum epsilon for end of iteration\n  const epsMax = 1e-10;\n\n  // Implement Newton's method\n  let newRate, epsRate, resultValue;\n  let contLoop = true;\n\n  do {\n    resultValue = irrResult(values, dates, resultRate);\n    newRate = resultRate - resultValue / irrResultDeriv(values, dates, resultRate);\n    epsRate = Math.abs(newRate - resultRate);\n    resultRate = newRate;\n    contLoop = epsRate > epsMax && Math.abs(resultValue) > epsMax;\n  } while (contLoop)\n\n  // Return internal rate of return\n  return resultRate\n}\n\n/**\n * Returns the net present value for a schedule of cash flows that is not necessarily periodic.\n *\n * Category: Financial\n *\n * @param {*} rate The discount rate to apply to the cash flows.\n * @param {*} values A series of cash flows that corresponds to a schedule of payments in dates. The first payment is optional and corresponds to a cost or payment that occurs at the beginning of the investment. If the first value is a cost or payment, it must be a negative value. All succeeding payments are discounted based on a 365-day year. The series of values must contain at least one positive value and one negative value.\n * @param {*} dates A schedule of payment dates that corresponds to the cash flow payments. The first payment date indicates the beginning of the schedule of payments. All other dates must be later than this date, but they may occur in any order.\n * @returns\n */\nfunction XNPV(rate, values, dates) {\n  rate = parseNumber(rate);\n  values = parseNumberArray(flatten(values));\n  dates = parseDateArray(flatten(dates));\n\n  if (anyIsError(rate, values, dates)) {\n    return value\n  }\n\n  let result = 0;\n\n  for (let i = 0; i < values.length; i++) {\n    result += values[i] / Math.pow(1 + rate, DAYS(dates[i], dates[0]) / 365);\n  }\n\n  return result\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the yield on a security that pays periodic interest.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} rate The security's annual coupon rate.\n * @param {*} pr The security's price per $100 face value.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} frequency The number of coupon payments per year. For annual payments, frequency = 1; for semiannual, frequency = 2; for quarterly, frequency = 4.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction YIELD() {\n  throw new Error('YIELD is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the annual yield for a discounted security; for example, a Treasury bill.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} pr The security's price per $100 face value.\n * @param {*} redemption The security's redemption value per $100 face value.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction YIELDDISC() {\n  throw new Error('YIELDDISC is not implemented')\n}\n\n// TODO\n/**\n * -- Not implemented --\n *\n * Returns the annual yield of a security that pays interest at maturity.\n *\n * Category: Financial\n *\n * @param {*} settlement The security's settlement date. The security settlement date is the date after the issue date when the security is traded to the buyer.\n * @param {*} maturity The security's maturity date. The maturity date is the date when the security expires.\n * @param {*} issue The security's issue date, expressed as a serial date number.\n * @param {*} rate The security's interest rate at date of issue.\n * @param {*} pr The security's price per $100 face value.\n * @param {*} basis Optional. The type of day count basis to use.\n * @returns\n */\nfunction YIELDMAT() {\n  throw new Error('YIELDMAT is not implemented')\n}\n\n/**\n * Returns TRUE if all of its arguments are TRUE.\n *\n * Category: Logical\n *\n * @returns\n */\nfunction AND() {\n  const args = flatten(arguments);\n  let result = value;\n\n  for (let i = 0; i < args.length; i++) {\n    if (args[i] instanceof Error) {\n      return args[i]\n    }\n\n    if (args[i] === undefined || args[i] === null || typeof args[i] === 'string') {\n      continue\n    }\n\n    if (result === value) {\n      result = true;\n    }\n\n    if (!args[i]) {\n      result = false;\n    }\n  }\n\n  return result\n}\n\n/**\n * Returns the logical value FALSE.\n *\n * Category: Logical\n *\n * @returns\n */\nfunction FALSE() {\n  return false\n}\n\n/**\n * Specifies a logical test to perform.\n *\n * Category: Logical\n *\n * @param {*} logical_test\n * @param {*} value_if_true\n * @param {*} value_if_false\n *\n * @returns\n */\nfunction IF(logical_test, value_if_true, value_if_false) {\n  if (logical_test instanceof Error) {\n    return logical_test\n  }\n\n  value_if_true = arguments.length >= 2 ? value_if_true : true;\n\n  if (value_if_true === undefined || value_if_true === null) {\n    value_if_true = 0;\n  }\n\n  value_if_false = arguments.length === 3 ? value_if_false : false;\n\n  if (value_if_false === undefined || value_if_false === null) {\n    value_if_false = 0;\n  }\n\n  return logical_test ? value_if_true : value_if_false\n}\n\n/**\n * Checks whether one or more conditions are met and returns a value that corresponds to the first TRUE condition.\n *\n * Category: Logical\n *\n * @returns\n */\nfunction IFS() {\n  for (let i = 0; i < arguments.length / 2; i++) {\n    if (arguments[i * 2]) {\n      return arguments[i * 2 + 1]\n    }\n  }\n\n  return na\n}\n\n/**\n * Returns a value you specify if a formula evaluates to an error; otherwise, returns the result of the formula.\n *\n * Category: Logical\n *\n * @param {*} value The argument that is checked for an error.\n * @param {*} value_if_error The value to return if the formula evaluates to an error. The following error types are evaluated: #N/A, #VALUE!, #REF!, #DIV/0!, #NUM!, #NAME?, or #NULL!.\n * @returns\n */\nfunction IFERROR(value, value_if_error) {\n  if (ISERROR(value)) {\n    return value_if_error\n  }\n\n  return value\n}\n\n/**\n * Returns the value you specify if the expression resolves to #N/A, otherwise returns the result of the expression.\n *\n * Category: Logical\n *\n * @returns\n */\nfunction IFNA(value, value_if_na) {\n  return value === na ? value_if_na : value\n}\n\n/**\n * Reverses the logic of its argument.\n *\n * Category: Logical\n *\n * @returns\n */\nfunction NOT(logical) {\n  if (typeof logical === 'string') {\n    return value\n  }\n\n  if (logical instanceof Error) {\n    return logical\n  }\n\n  return !logical\n}\n\n/**\n * Returns TRUE if any argument is TRUE.\n *\n * Category: Logical\n *\n * @returns\n */\nfunction OR() {\n  const args = flatten(arguments);\n  let result = value;\n\n  for (let i = 0; i < args.length; i++) {\n    if (args[i] instanceof Error) {\n      return args[i]\n    }\n\n    if (args[i] === undefined || args[i] === null || typeof args[i] === 'string') {\n      continue\n    }\n\n    if (result === value) {\n      result = false;\n    }\n\n    if (args[i]) {\n      result = true;\n    }\n  }\n\n  return result\n}\n\n/**\n * Returns the logical value TRUE.\n *\n * Category: Logical\n *\n * @returns\n */\nfunction TRUE() {\n  return true\n}\n\n/**\n * Returns a logical exclusive OR of all arguments.\n *\n * Category: Logical\n *\n * @param {*} args logical1, logical2, Logical 1 is required, subsequent logical values are optional. 1 to 254 conditions you want to test that can be either TRUE or FALSE, and can be logical values, arrays, or references.\n * @returns\n */\nfunction XOR() {\n  const args = flatten(arguments);\n  let result = value;\n\n  for (let i = 0; i < args.length; i++) {\n    if (args[i] instanceof Error) {\n      return args[i]\n    }\n\n    if (args[i] === undefined || args[i] === null || typeof args[i] === 'string') {\n      continue\n    }\n\n    if (result === value) {\n      result = 0;\n    }\n\n    if (args[i]) {\n      result++;\n    }\n  }\n\n  if (result === value) {\n    return result\n  }\n\n  return !!(Math.floor(Math.abs(result)) & 1)\n}\n\n/**\n * Evaluates an expression against a list of values and returns the result corresponding to the first matching value. If there is no match, an optional default value may be returned.\n *\n * Category: Logical\n *\n * @returns\n */\nfunction SWITCH() {\n  let result;\n\n  if (arguments.length > 0) {\n    const targetValue = arguments[0];\n    const argc = arguments.length - 1;\n    const switchCount = Math.floor(argc / 2);\n    let switchSatisfied = false;\n    const hasDefaultClause = argc % 2 !== 0;\n    const defaultClause = argc % 2 === 0 ? null : arguments[arguments.length - 1];\n\n    if (switchCount) {\n      for (let index = 0; index < switchCount; index++) {\n        if (targetValue === arguments[index * 2 + 1]) {\n          result = arguments[index * 2 + 2];\n          switchSatisfied = true;\n          break\n        }\n      }\n    }\n\n    if (!switchSatisfied) {\n      result = hasDefaultClause ? defaultClause : na;\n    }\n  } else {\n    result = value;\n  }\n\n  return result\n}\n\nconst FLATTEN = flatten;\n\nfunction ARGS2ARRAY() {\n  return Array.prototype.slice.call(arguments, 0)\n}\n\n/**\n * Formula.js only\n *\n * @param {*} context\n * @param {*} reference\n * @returns\n */\nfunction REFERENCE(context, reference) {\n  if (!arguments.length) {\n    return error\n  }\n\n  try {\n    const path = reference.split('.');\n    let result = context;\n\n    for (let i = 0; i < path.length; ++i) {\n      const step = path[i];\n\n      if (step[step.length - 1] === ']') {\n        const opening = step.indexOf('[');\n        const index = step.substring(opening + 1, step.length - 1);\n        result = result[step.substring(0, opening)][index];\n      } else {\n        result = result[step];\n      }\n    }\n\n    return result\n  } catch (error) {}\n}\n\n/**\n * Formula.js only\n *\n * @param {*} array\n * @param {*} separator\n * @returns\n */\nfunction JOIN(array, separator) {\n  return array.join(separator)\n}\n\n/**\n * Formula.js only\n *\n * @returns\n */\nfunction NUMBERS() {\n  const possibleNumbers = flatten(arguments);\n\n  return possibleNumbers.filter((el) => typeof el === 'number')\n}\n\nexport { ABS, ACCRINT, ACCRINTM, ACOS, ACOSH, ACOT, ACOTH, ADD, AGGREGATE, AMORDEGRC, AMORLINC, AND, ARABIC, ARGS2ARRAY, ASC, ASIN, ASINH, ATAN, ATAN2, ATANH, AVEDEV, AVERAGE, AVERAGEA, AVERAGEIF, AVERAGEIFS, BAHTTEXT, BASE, BESSELI, BESSELJ, BESSELK, BESSELY, BETA, BETADIST, BETAINV, BIN2DEC, BIN2HEX, BIN2OCT, BINOM, BINOMDIST, BITAND, BITLSHIFT, BITOR, BITRSHIFT, BITXOR, CEILING, CEILINGMATH, CEILINGPRECISE, CELL, CHAR, CHIDIST, CHIDISTRT, CHIINV, CHIINVRT, CHISQ, CHITEST, CHOOSE, CLEAN, CODE, COLUMN, COLUMNS, COMBIN, COMBINA, COMPLEX, CONCAT, CONCATENATE, CONFIDENCE, CONVERT, CORREL, COS, COSH, COT, COTH, COUNT, COUNTA, COUNTBLANK, COUNTIF, COUNTIFS, COUNTIN, COUNTUNIQUE, COUPDAYBS, COUPDAYS, COUPDAYSNC, COUPNCD, COUPNUM, COUPPCD, COVAR, COVARIANCE, COVARIANCEP, COVARIANCES, CRITBINOM, CSC, CSCH, CUMIPMT, CUMPRINC, DATE, DATEDIF, DATEVALUE, DAVERAGE, DAY, DAYS, DAYS360, DB, DBCS, DCOUNT, DCOUNTA, DDB, DEC2BIN, DEC2HEX, DEC2OCT, DECIMAL, DEGREES, DELTA, DEVSQ, DGET, DISC, DIVIDE, DMAX, DMIN, DOLLAR, DOLLARDE, DOLLARFR, DPRODUCT, DSTDEV, DSTDEVP, DSUM, DURATION, DVAR, DVARP, E, EDATE, EFFECT, EOMONTH, EQ, ERF, ERFC, ERFCPRECISE, ERFPRECISE, ERROR, EVEN, EXACT, EXP, EXPON, EXPONDIST, F, FACT, FACTDOUBLE, FALSE, FDIST, FDISTRT, FIND, FINDFIELD, FINV, FINVRT, FISHER, FISHERINV, FIXED, FLATTEN, FLOOR, FLOORMATH, FLOORPRECISE, FORECAST, FREQUENCY, FTEST, FV, FVSCHEDULE, GAMMA, GAMMADIST, GAMMAINV, GAMMALN, GAMMALNPRECISE, GAUSS, GCD, GEOMEAN, GESTEP, GROWTH, GT, GTE, HARMEAN, HEX2BIN, HEX2DEC, HEX2OCT, HLOOKUP, HOUR, HTML2TEXT, HYPGEOM, HYPGEOMDIST, IF, IFERROR, IFNA, IFS, IMABS, IMAGINARY, IMARGUMENT, IMCONJUGATE, IMCOS, IMCOSH, IMCOT, IMCSC, IMCSCH, IMDIV, IMEXP, IMLN, IMLOG10, IMLOG2, IMPOWER, IMPRODUCT, IMREAL, IMSEC, IMSECH, IMSIN, IMSINH, IMSQRT, IMSUB, IMSUM, IMTAN, INDEX, INFO, INT, INTERCEPT, INTERVAL, INTRATE, IPMT, IRR, ISBINARY, ISBLANK, ISERR, ISERROR, ISEVEN, ISFORMULA, ISLOGICAL, ISNA, ISNONTEXT, ISNUMBER, ISO, ISODD, ISOWEEKNUM, ISPMT, ISREF, ISTEXT, JOIN, KURT, LARGE, LCM, LEFT, LEN, LINEST, LN, LN10, LN2, LOG, LOG10, LOG10E, LOG2E, LOGEST, LOGINV, LOGNORM, LOGNORMDIST, LOGNORMINV, LOOKUP, LOWER, LT, LTE, MATCH, MAX, MAXA, MDURATION, MEDIAN, MID, MIN, MINA, MINUS, MINUTE, MIRR, MOD, MODE, MODEMULT, MODESNGL, MONTH, MROUND, MULTINOMIAL, MULTIPLY, N, NA, NE, NEGBINOM, NEGBINOMDIST, NETWORKDAYS, NETWORKDAYSINTL, NOMINAL, NORM, NORMDIST, NORMINV, NORMSDIST, NORMSINV, NOT, NOW, NPER, NPV, NUMBERS, NUMBERVALUE, OCT2BIN, OCT2DEC, OCT2HEX, ODD, ODDFPRICE, ODDFYIELD, ODDLPRICE, ODDLYIELD, OR, PDURATION, PEARSON, PERCENTILE, PERCENTILEEXC, PERCENTILEINC, PERCENTRANK, PERCENTRANKEXC, PERCENTRANKINC, PERMUT, PERMUTATIONA, PHI, PI, PMT, POISSON, POISSONDIST, POW, POWER, PPMT, PRICE, PRICEDISC, PRICEMAT, PROB, PRODUCT, PRONETIC, PROPER, PV, QUARTILE, QUARTILEEXC, QUARTILEINC, QUOTIENT, RADIANS, RAND, RANDBETWEEN, RANK, RANKAVG, RANKEQ, RATE, RECEIVED, REFERENCE, REGEXEXTRACT, REGEXMATCH, REGEXREPLACE, REPLACE, REPT, RIGHT, ROMAN, ROUND, ROUNDDOWN, ROUNDUP, ROW, ROWS, RRI, RSQ, SEARCH, SEC, SECH, SECOND, SERIESSUM, SHEET, SHEETS, SIGN, SIN, SINH, SKEW, SKEWP, SLN, SLOPE, SMALL, SPLIT, SQRT, SQRT1_2, SQRT2, SQRTPI, STANDARDIZE, STDEV, STDEVA, STDEVP, STDEVPA, STDEVS, STEYX, SUBSTITUTE, SUBTOTAL, SUM, SUMIF, SUMIFS, SUMPRODUCT, SUMSQ, SUMX2MY2, SUMX2PY2, SUMXMY2, SWITCH, SYD, T, TAN, TANH, TBILLEQ, TBILLPRICE, TBILLYIELD, TDIST, TDISTRT, TEXT, TEXTJOIN, TIME, TIMEVALUE, TINV, TODAY, TRANSPOSE, TREND, TRIM, TRIMMEAN, TRUE, TRUNC, TTEST, TYPE, UNICHAR, UNICODE, UNIQUE, UPPER, VALUE, VAR, VARA, VARP, VARPA, VARS, VDB, VLOOKUP, WEEKDAY, WEEKNUM, WEIBULL, WEIBULLDIST, WORKDAY, WORKDAYINTL, XIRR, XNPV, XOR, YEAR, YEARFRAC, YIELD, YIELDDISC, YIELDMAT, Z, ZTEST };\n","import * as formulajs from '@formulajs/formulajs';\nimport { SharedContext } from '../Parser/SharedContext';\nimport { ArrayResult } from '../Cell/ArrayResult';\n\n/**\n * FormulaJS Wrapper for Calx Environment\n *\n * This wrapper provides access to FormulaJS functions in the Calx context.\n * It handles type conversions and provides a consistent interface.\n */\nexport class FormulaJSWrapper {\n    private context: SharedContext;\n\n    constructor(context: SharedContext) {\n        this.context = context;\n    }\n\n    /**\n     * Get a FormulaJS function by name\n     */\n    getFunction(name: string): Function | undefined {\n        const upperName = name.toUpperCase();\n\n        // Check for custom user functions first (registered via Calx.setFormula)\n        // Access via require to avoid circular dependency\n        try {\n            const { Calx } = require('../../Calx');\n            if (Calx.formulae && Calx.formulae[upperName]) {\n                return Calx.formulae[upperName];\n            }\n        } catch (e) {\n            // Ignore if Calx is not available yet\n        }\n\n        // Check for custom implementations\n        if (upperName === 'SEQUENCE') {\n            return this.sequenceFunction.bind(this);\n        }\n        if (upperName === 'SORT') {\n            return this.sortFunction.bind(this);\n        }\n        if (upperName === 'FILTER') {\n            return this.filterFunction.bind(this);\n        }\n        if (upperName === 'UNIQUE') {\n            return this.uniqueFunction.bind(this);\n        }\n\n        // Check if function exists in formulajs\n        let fn = (formulajs as any)[upperName];\n\n        // Some functions like STDEV are objects with sub-functions (STDEV.S, STDEV.P)\n        // For backward compatibility, use STDEV.S as default\n        if (fn && typeof fn === 'object' && !Array.isArray(fn)) {\n            // Try .S first (sample standard deviation, most common)\n            if (typeof fn.S === 'function') {\n                fn = fn.S;\n            }\n            // Then try .P (population standard deviation)\n            else if (typeof fn.P === 'function') {\n                fn = fn.P;\n            }\n        }\n\n        if (typeof fn === 'function') {\n            return fn;\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Custom SEQUENCE function (Excel 365 dynamic array function)\n     * SEQUENCE(rows, [columns], [start], [step])\n     */\n    private sequenceFunction(rows: number, columns: number = 1, start: number = 1, step: number = 1): any {\n        const result: number[][] = [];\n        let value = start;\n\n        for (let r = 0; r < rows; r++) {\n            const row: number[] = [];\n            for (let c = 0; c < columns; c++) {\n                row.push(value);\n                value += step;\n            }\n            result.push(row);\n        }\n\n        // If single column, return as 1D array\n        if (columns === 1) {\n            return result.map(row => row[0]);\n        }\n\n        return result;\n    }\n\n    /**\n     * Custom SORT function (Excel 365 dynamic array function)\n     * SORT(array, [sort_index], [sort_order], [by_col])\n     */\n    private sortFunction(array: any, sortIndex: number = 1, sortOrder: number = 1, byCol: boolean = false): any {\n        // Convert array to 2D if needed\n        let arr2D: any[][];\n        if (!Array.isArray(array)) {\n            arr2D = [[array]];\n        } else if (!Array.isArray(array[0])) {\n            // 1D array - convert to column\n            arr2D = array.map(val => [val]);\n        } else {\n            arr2D = array;\n        }\n\n        // Make a copy to avoid mutating original\n        const sorted = arr2D.map(row => [...row]);\n\n        // Sort by column (default) or by row\n        if (!byCol) {\n            // Sort rows based on the specified column index (1-based)\n            const colIdx = sortIndex - 1;\n            sorted.sort((a, b) => {\n                const aVal = a[colIdx];\n                const bVal = b[colIdx];\n\n                // Handle nulls/undefined\n                if (aVal == null && bVal == null) return 0;\n                if (aVal == null) return sortOrder === 1 ? 1 : -1;\n                if (bVal == null) return sortOrder === 1 ? -1 : 1;\n\n                // Compare values\n                if (aVal < bVal) return sortOrder === 1 ? -1 : 1;\n                if (aVal > bVal) return sortOrder === 1 ? 1 : -1;\n                return 0;\n            });\n        }\n\n        // Return as 1D array if it was originally 1D\n        if (!Array.isArray(array[0])) {\n            return sorted.map(row => row[0]);\n        }\n\n        return sorted;\n    }\n\n    /**\n     * Custom FILTER function (Excel 365 dynamic array function)\n     * FILTER(array, include, [if_empty])\n     */\n    private filterFunction(array: any, include: any, ifEmpty: any = '#N/A'): any {\n        // Convert arrays to 2D if needed\n        let arr2D: any[][];\n        if (!Array.isArray(array)) {\n            arr2D = [[array]];\n        } else if (!Array.isArray(array[0])) {\n            arr2D = array.map(val => [val]);\n        } else {\n            arr2D = array;\n        }\n\n        let include1D: any[];\n        if (!Array.isArray(include)) {\n            include1D = [include];\n        } else if (Array.isArray(include[0])) {\n            // 2D include array - flatten to 1D\n            include1D = include.map(row => row[0]);\n        } else {\n            include1D = include;\n        }\n\n        // Filter rows based on include array\n        const filtered = arr2D.filter((row, idx) => {\n            const includeVal = include1D[idx];\n            // In Excel, any non-zero/non-false value is truthy\n            return includeVal !== false && includeVal !== 0 && includeVal != null;\n        });\n\n        // Return if_empty if no matches\n        if (filtered.length === 0) {\n            return ifEmpty;\n        }\n\n        // Return as 1D array if original was 1D\n        if (!Array.isArray(array[0])) {\n            return filtered.map(row => row[0]);\n        }\n\n        return filtered;\n    }\n\n    /**\n     * Custom UNIQUE function (Excel 365 dynamic array function)\n     * UNIQUE(array, [by_col], [exactly_once])\n     */\n    private uniqueFunction(array: any, byCol: boolean = false, exactlyOnce: boolean = false): any {\n        // Convert to 2D array if needed\n        let arr2D: any[][];\n        let was1D = false;\n\n        if (!Array.isArray(array)) {\n            arr2D = [[array]];\n            was1D = true;\n        } else if (!Array.isArray(array[0])) {\n            arr2D = array.map(val => [val]);\n            was1D = true;\n        } else {\n            arr2D = array;\n        }\n\n        const unique: any[][] = [];\n        const seen = new Map<string, number>();\n\n        // Process each row\n        for (const row of arr2D) {\n            const key = JSON.stringify(row);\n            const count = seen.get(key) || 0;\n            seen.set(key, count + 1);\n\n            if (count === 0) {\n                unique.push(row);\n            }\n        }\n\n        // If exactly_once is true, filter to only values that appear once\n        if (exactlyOnce) {\n            const result = unique.filter(row => {\n                const key = JSON.stringify(row);\n                return seen.get(key) === 1;\n            });\n\n            if (result.length === 0) {\n                return '#N/A';\n            }\n\n            return was1D ? result.map(row => row[0]) : result;\n        }\n\n        // Return as 1D array if original was 1D\n        return was1D ? unique.map(row => row[0]) : unique;\n    }\n\n    /**\n     * Call a FormulaJS function with arguments\n     */\n    callFunction(name: string, args: any[]): any {\n        const fn = this.getFunction(name);\n\n        if (!fn) {\n            throw new Error(`Function ${name} not found`);\n        }\n\n        try {\n            // Convert Range objects to arrays if needed\n            const convertedArgs = args.map(arg => this.convertArg(arg));\n\n            // Call the function\n            let result = fn(...convertedArgs);\n\n            // Handle Date objects - convert to Excel serial number\n            if (result instanceof Date) {\n                // Excel's epoch is December 30, 1899\n                const excelEpoch = new Date(1899, 11, 30).getTime();\n                const msPerDay = 24 * 60 * 60 * 1000;\n                result = Math.floor((result.getTime() - excelEpoch) / msPerDay);\n            }\n\n            // Handle array results from dynamic array functions (SEQUENCE, SORT, UNIQUE, etc.)\n            // Convert to ArrayResult for spilling behavior\n            if (Array.isArray(result) && this.isDynamicArrayFunction(name)) {\n                // Check if it's a 2D array\n                if (result.length > 0 && Array.isArray(result[0])) {\n                    return ArrayResult.from2DArray(result);\n                } else {\n                    // 1D array - return as vertical array for spilling\n                    return ArrayResult.fromVerticalArray(result);\n                }\n            }\n\n            // Handle error results\n            if (result && typeof result === 'object' && result.error) {\n                return '#ERROR!';\n            }\n\n            return result;\n        } catch (error) {\n            console.error(`Error calling function ${name}:`, error);\n            return '#ERROR!';\n        }\n    }\n\n    /**\n     * Check if a function is a dynamic array function that should spill\n     */\n    private isDynamicArrayFunction(name: string): boolean {\n        const dynamicArrayFunctions = [\n            'SEQUENCE', 'SORT', 'UNIQUE', 'FILTER', 'RANDARRAY',\n            'SORTBY', 'XLOOKUP', 'XMATCH'\n        ];\n        return dynamicArrayFunctions.includes(name.toUpperCase());\n    }\n\n    /**\n     * Convert argument to appropriate type for FormulaJS\n     */\n    private convertArg(arg: any): any {\n        // If it's null or undefined, return as-is\n        if (arg == null) {\n            return arg;\n        }\n\n        // If it's an array, recursively convert elements\n        if (Array.isArray(arg)) {\n            return arg.map(item => this.convertArg(item));\n        }\n\n        // If it's a Range object, convert to value or array\n        if (arg && typeof arg === 'object' && typeof arg.toArray === 'function') {\n            const values = arg.toArray();\n            // If single cell, return single value\n            return values.length === 1 ? values[0] : values;\n        }\n\n        // If it's a Cell object, return its value\n        if (arg && typeof arg === 'object' && 'value' in arg) {\n            return arg.value;\n        }\n\n        // Return as-is for primitives\n        return arg;\n    }\n\n    /**\n     * Get all available FormulaJS functions\n     */\n    getAvailableFunctions(): string[] {\n        return Object.keys(formulajs).filter(key => {\n            return typeof (formulajs as any)[key] === 'function';\n        });\n    }\n\n    /**\n     * Check if a function exists\n     */\n    hasFunction(name: string): boolean {\n        return this.getFunction(name) !== undefined;\n    }\n}\n\n/**\n * Create a FormulaJS wrapper instance\n */\nexport function createFormulaJSWrapper(context: SharedContext): FormulaJSWrapper {\n    return new FormulaJSWrapper(context);\n}\n\n/**\n * Export commonly used FormulaJS functions for convenience\n */\nexport const FormulaJSFunctions = {\n    // Math functions\n    SUM: formulajs.SUM,\n    AVERAGE: formulajs.AVERAGE,\n    MIN: formulajs.MIN,\n    MAX: formulajs.MAX,\n    COUNT: formulajs.COUNT,\n    COUNTA: formulajs.COUNTA,\n    ROUND: formulajs.ROUND,\n    ROUNDUP: formulajs.ROUNDUP,\n    ROUNDDOWN: formulajs.ROUNDDOWN,\n    ABS: formulajs.ABS,\n    SQRT: formulajs.SQRT,\n    POWER: formulajs.POWER,\n    MOD: formulajs.MOD,\n\n    // Statistical functions\n    MEDIAN: formulajs.MEDIAN,\n    MODE: formulajs.MODE,\n    STDEV: formulajs.STDEV,\n    VAR: formulajs.VAR,\n\n    // Logical functions\n    IF: formulajs.IF,\n    AND: formulajs.AND,\n    OR: formulajs.OR,\n    NOT: formulajs.NOT,\n    XOR: formulajs.XOR,\n\n    // Text functions\n    CONCATENATE: formulajs.CONCATENATE,\n    LEFT: formulajs.LEFT,\n    RIGHT: formulajs.RIGHT,\n    MID: formulajs.MID,\n    LEN: formulajs.LEN,\n    LOWER: formulajs.LOWER,\n    UPPER: formulajs.UPPER,\n    TRIM: formulajs.TRIM,\n    TEXT: formulajs.TEXT,\n\n    // Lookup functions\n    VLOOKUP: formulajs.VLOOKUP,\n    HLOOKUP: formulajs.HLOOKUP,\n    MATCH: formulajs.MATCH,\n    INDEX: formulajs.INDEX,\n\n    // Date functions\n    DATE: formulajs.DATE,\n    TODAY: formulajs.TODAY,\n    NOW: formulajs.NOW,\n    YEAR: formulajs.YEAR,\n    MONTH: formulajs.MONTH,\n    DAY: formulajs.DAY,\n\n    // Financial functions\n    PMT: formulajs.PMT,\n    FV: formulajs.FV,\n    PV: formulajs.PV,\n    RATE: formulajs.RATE,\n    NPV: formulajs.NPV,\n    IRR: formulajs.IRR,\n};\n","import { Sheet } from \"../Sheet\"\nimport { Workbook } from \"../Workbook\"\nimport { FormulaJSWrapper, createFormulaJSWrapper } from \"../Formula/FormulaJSWrapper\";\n\nexport type SharedContextInterface = {\n    /**\n     * The workbook as main context of the parser\n     */\n    workbook ?: Workbook,\n\n    /**\n     * Collection of sheets in the workbook\n     */\n    sheets : Record<string, Sheet>,\n\n    /**\n     * Current active sheet which the parser will refer to when parsing formula\n     */\n    activeSheet ?: Sheet,\n\n    /**\n     * Utility that can be used inside the parser\n     */\n    utility : object,\n\n    /**\n     * Default comparator for comparing cell and value\n     */\n    comparator ?: {\n        equal : (a : any, b : any) => boolean,\n        notEqual : (a : any, b : any) => boolean,\n        lessThan : (a : any, b : any) => boolean,\n        greaterThan : (a : any, b : any) => boolean,\n        lessEqualThan : (a : any, b : any) => boolean,\n        greaterEqualThan : (a : any, b : any) => boolean,\n    }\n\n    /**\n     * Methods for getting values from the workbook\n     */\n    getFunction?: (name: string) => Function | undefined;\n    getVariable?: (name: string, sheetName?: string) => any;\n    getCellValue?: (ref: string, sheetName?: string) => any;\n    getCellRange?: (range: string, sheetName?: string) => any[];\n    getRowRange?: (range: string, sheetName?: string) => any[];\n    getColumnRange?: (range: string, sheetName?: string) => any[];\n    getNamedRange?: (name: string) => any;\n}\n\nexport class SharedContext implements SharedContextInterface {\n\n    public workbook ?: Workbook;\n\n    public sheets : Record<string, Sheet> = {};\n\n    public activeSheet ?: Sheet;\n\n    public utility!: object;\n\n    private _formulaJSWrapper?: FormulaJSWrapper;\n\n    public comparator ?: {\n        equal : (a : any, b : any) => boolean,\n        notEqual : (a : any, b : any) => boolean,\n        lessThan : (a : any, b : any) => boolean,\n        greaterThan : (a : any, b : any) => boolean,\n        lessEqualThan : (a : any, b : any) => boolean,\n        greaterEqualThan : (a : any, b : any) => boolean,\n    };\n\n    constructor(init ?: Partial<SharedContextInterface>) {\n        Object.assign(this, init);\n        this._formulaJSWrapper = createFormulaJSWrapper(this);\n    }\n\n    setActiveSheet(sheet : Sheet) {\n        this.activeSheet = sheet;\n    }\n\n    setWorkbook(workbook : Workbook) {\n        this.workbook = workbook;\n    }\n\n    addSheet(sheet : Sheet) {\n        this.sheets[sheet.id] = sheet;\n    }\n\n    callFunction(name : string, args : any[]) : any {\n        // Use FormulaJS wrapper\n        if (this._formulaJSWrapper) {\n            return this._formulaJSWrapper.callFunction(name, args);\n        }\n        return '#NAME?';\n    }\n\n    getFunction(name: string): Function | undefined {\n        // Check FormulaJS first (workbook custom functions can be added later)\n        if (this._formulaJSWrapper) {\n            return this._formulaJSWrapper.getFunction(name);\n        }\n\n        return undefined;\n    }\n\n    getVariable(name: string, sheetName?: string): any {\n        const sheet = sheetName ? this.sheets[sheetName] : this.activeSheet;\n        if (sheet) {\n            // Variables are managed by the sheet\n            return sheet.getVariable(name);\n        }\n        return \"#NAME?\";\n    }\n\n    getCellValue(ref: string, sheetName?: string): any {\n        let sheet = this.activeSheet;\n\n        if (sheetName) {\n            // Try to find sheet by name or id\n            sheet = this.sheets[sheetName] || Object.values(this.sheets).find(s => s.name === sheetName);\n        }\n\n        if (sheet) {\n            return sheet.getCellValue(ref);\n        }\n        return \"#REF!\";\n    }\n\n    getCellRange(range: string, sheetName?: string): any[] {\n        const sheet = sheetName ? this.sheets[sheetName] : this.activeSheet;\n        if (sheet) {\n            // Parse range like \"A1:B2\"\n            const [start, end] = range.split(':');\n            return sheet.getCellRangeValues(start, end);\n        }\n        return [];\n    }\n\n    getRowRange(range: string, sheetName?: string): any[] {\n        const sheet = sheetName ? this.sheets[sheetName] : this.activeSheet;\n        if (sheet) {\n            // Parse range like \"1:3\" (rows 1 to 3)\n            return sheet.getRowRangeValues(range);\n        }\n        return [];\n    }\n\n    getColumnRange(range: string, sheetName?: string): any[] {\n        const sheet = sheetName ? this.sheets[sheetName] : this.activeSheet;\n        if (sheet) {\n            // Parse range like \"A:C\" (columns A to C)\n            return sheet.getColumnRangeValues(range);\n        }\n        return [];\n    }\n\n    getNamedRange(name: string): any {\n        if (this.workbook) {\n            return this.workbook.nameManager.resolve(name);\n        }\n        return \"#NAME?\";\n    }\n}","import { Workbook } from \"../Workbook\";\n\n/**\n * Named range definition\n */\nexport interface NamedRange {\n    name: string;\n    reference: string;\n    sheetName?: string;\n    comment?: string;\n}\n\n/**\n * Manage named cell or cell range\n */\nexport class NameManager {\n    private _workbook : Workbook\n    private _nameRegistry : Record<string, NamedRange> = {};\n\n    public setContext(workbook : Workbook) {\n        this._workbook = workbook;\n    }\n\n    /**\n     * Define named cell or cell range.\n     *\n     * @param name the alias name (e.g., \"SalesData\", \"TaxRate\")\n     * @param reference the cell or cell range to be aliased (e.g., \"A1\", \"A1:B10\", \"Sheet1!A1:B10\")\n     * @param sheetName optional sheet name to scope this name to a specific sheet\n     * @param comment optional comment describing the named range\n     * @returns true if defined successfully, false if name is invalid\n     */\n    public define(name : string, reference : string, sheetName?: string, comment?: string): boolean {\n        // Validate name: must start with letter or underscore, can contain letters, numbers, underscores\n        // Cannot be a cell reference (e.g., \"A1\")\n        if (!this.isValidName(name)) {\n            return false;\n        }\n\n        this._nameRegistry[name] = {\n            name,\n            reference,\n            sheetName,\n            comment\n        };\n        return true;\n    }\n\n    /**\n     * Check if a name is valid for a named range\n     * - Must start with letter or underscore\n     * - Can contain letters, numbers, underscores, dots\n     * - Cannot be a cell reference (A1, B2, etc.)\n     * - Cannot be a reserved keyword\n     */\n    private isValidName(name: string): boolean {\n        // Must start with letter or underscore\n        if (!/^[a-zA-Z_]/.test(name)) {\n            return false;\n        }\n\n        // Can only contain letters, numbers, underscores, dots\n        if (!/^[a-zA-Z_][a-zA-Z0-9_\\.]*$/.test(name)) {\n            return false;\n        }\n\n        // Cannot be a cell reference\n        if (/^[A-Z]+[0-9]+$/.test(name)) {\n            return false;\n        }\n\n        // Reserved keywords\n        const reserved = ['TRUE', 'FALSE', 'NULL'];\n        if (reserved.includes(name.toUpperCase())) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Get the reference string for a named range\n     *\n     * @param name the alias name\n     * @returns the reference string or undefined if not found\n     */\n    public getReference(name: string): string | undefined {\n        const namedRange = this._nameRegistry[name];\n        return namedRange?.reference;\n    }\n\n    /**\n     * Resolve a named range to its value(s)\n     *\n     * @param name the alias name\n     * @returns target cell value or array of values\n     */\n    public resolve(name : string) {\n        const namedRange = this._nameRegistry[name];\n        if (!namedRange) {\n            return '#NAME?';\n        }\n\n        // Find the first sheet to use as context if no active sheet\n        let targetSheet = this._workbook.getActiveSheet();\n        if (!targetSheet) {\n            const sheets = this._workbook.getSheets();\n            const sheetNames = Object.keys(sheets);\n            if (sheetNames.length > 0) {\n                targetSheet = sheets[sheetNames[0]];\n            }\n        }\n\n        // Set active sheet temporarily\n        if (targetSheet) {\n            this._workbook.setActiveSheet(targetSheet);\n        }\n\n        // If the reference includes sheet name, parse it as-is\n        // Otherwise, prepend with \"=\" to make it a formula\n        const formula = namedRange.reference.startsWith('=')\n            ? namedRange.reference\n            : `=${namedRange.reference}`;\n\n        return this._workbook.parser.parse(formula);\n    }\n\n    /**\n     * Check if a named range exists\n     *\n     * @param name the alias name\n     * @returns true if the named range exists\n     */\n    public has(name: string): boolean {\n        return name in this._nameRegistry;\n    }\n\n    /**\n     * Get all named ranges\n     *\n     * @returns array of all named range definitions\n     */\n    public getAll(): NamedRange[] {\n        return Object.values(this._nameRegistry);\n    }\n\n    /**\n     * Get a named range definition\n     *\n     * @param name the alias name\n     * @returns the named range definition or undefined\n     */\n    public get(name: string): NamedRange | undefined {\n        return this._nameRegistry[name];\n    }\n\n    /**\n     * Remove the alias\n     *\n     * @param name the alias name\n     * @returns true if removed, false if not found\n     */\n    public remove(name : string): boolean {\n        if (name in this._nameRegistry) {\n            delete this._nameRegistry[name];\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Clear all named ranges\n     */\n    public clear(): void {\n        this._nameRegistry = {};\n    }\n}","export const Comparator = {\n    equal(a : any, b : any) : boolean {\n        /** ignore case as excel does */\n        if (typeof a == 'string') {\n            return a.toLowerCase() == ('' + b).toLowerCase();\n        }\n\n        return a == b;\n    },\n\n    notEqual(a : any, b : any) : boolean {\n        /** ignore case as excel does */\n        if (typeof a == 'string') {\n            return a.toLowerCase() != ('' + b).toLowerCase();\n        }\n\n        return a != b;\n    },\n\n    lessThan(a : any, b : any) : boolean {\n        return a < b;\n    },\n\n    greaterThan(a : any, b : any) : boolean {\n        return a > b;\n    },\n\n    lessEqualThan(a : any, b : any) : boolean {\n        return a <= b;\n    },\n\n    greaterEqualThan(a : any, b : any) : boolean {\n        return a >= b;\n    }\n}","import { Sheet } from \"./Sheet\";\nimport { CalxInterpreter } from \"./Parser/Chevrotain/Interpreter\";\nimport { CalxParser } from \"./Parser/Chevrotain/Parser\";\nimport { SharedContext } from \"./Parser/SharedContext\";\nimport * as Utility from './Utility/Utility';\nimport { EventDispatcher } from \"./Utility/EventDispatcher\";\nimport { NameManager } from \"./Workbook/NameManager\";\nimport { CellData, Data } from \"./Workbook/Data\";\nimport { Comparator } from \"./Utility/Comparator\";\nimport { DependencyTree } from \"./Workbook/DependencyTree\";\nimport { DependencyBuilder } from \"./Workbook/DependencyBuilder\";\nimport { FormatterInterface } from \"./Cell/Formatter\";\nimport { DataType } from \"./Cell/DataType\";\n\n/**\n * Create parser instance with shared context\n */\nfunction createParser(context: SharedContext): CalxInterpreter {\n    const interpreter = new CalxInterpreter();\n    interpreter.setContext(context);\n    return interpreter;\n}\n\n/**\n * Type definition for style formatters\n */\nexport type StyleFormatterFunction = (value: any, element: any) => Record<string, string> | void;\n\n/**\n * Global formatter registry with predefined formatters\n */\nconst globalFormatterRegistry: Record<string, FormatterInterface> = {\n    currency: {\n        format: (value: any): string => {\n            if (value == null || isNaN(value)) return '';\n            return '$' + Number(value).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        },\n        parse: (input: string): any => {\n            const cleaned = String(input).replace(/[$,\\s]/g, '');\n            const num = parseFloat(cleaned);\n            return isNaN(num) ? null : num;\n        }\n    },\n    percent: {\n        format: (value: any): string => {\n            if (value == null || isNaN(value)) return '';\n            return (Number(value) * 100).toFixed(2) + '%';\n        },\n        parse: (input: string): any => {\n            const inputStr = String(input).trim();\n            const hasPercent = inputStr.includes('%');\n            const cleaned = inputStr.replace(/[%\\s]/g, '');\n            const num = parseFloat(cleaned);\n            if (isNaN(num)) return null;\n            return hasPercent ? num / 100 : num;\n        }\n    },\n    number: {\n        format: (value: any): string => {\n            if (value == null || isNaN(value)) return '';\n            return Number(value).toFixed(2);\n        },\n        parse: (input: string): any => {\n            const num = parseFloat(String(input));\n            return isNaN(num) ? null : num;\n        }\n    },\n    integer: {\n        format: (value: any): string => {\n            if (value == null || isNaN(value)) return '';\n            return Math.round(Number(value)).toString();\n        },\n        parse: (input: string): any => {\n            const num = parseFloat(String(input));\n            return isNaN(num) ? null : Math.round(num);\n        }\n    },\n    text: {\n        format: (value: any): string => {\n            return value != null ? String(value) : '';\n        },\n        parse: (input: string): any => {\n            return input;\n        }\n    }\n};\n\n/**\n * Global style formatter registry\n */\nconst globalStyleFormatterRegistry: Record<string, StyleFormatterFunction> = {\n    negative: (value: any, element: any) => {\n        if (value < 0) {\n            return { color: 'red' };\n        }\n        return { color: '' };\n    },\n    positive: (value: any, element: any) => {\n        if (value > 0) {\n            return { color: 'green' };\n        }\n        return { color: '' };\n    },\n    zero: (value: any, element: any) => {\n        if (value === 0) {\n            return { color: 'gray' };\n        }\n        return { color: '' };\n    }\n};\n\nexport class Workbook {\n    private _sheets : Record<string, Sheet>;\n    private _functions!: Record<string, Function>;\n    private _parser : CalxInterpreter;\n    private _dispatcher : EventDispatcher;\n    private _nameManager : NameManager\n    private _autoCalculate : boolean = true;\n\n    private _deps!: DependencyTree;\n    private _depsBuilder!: DependencyBuilder;\n\n    // Element tracking for DOM integration\n    private _elements: Set<any> = new Set();\n    private _eventListeners: Map<any, Array<{event: string, handler: any, element: any}>> = new Map();\n\n    // Formatter registries\n    private _formatters: Record<string, FormatterInterface> = {};\n    private _styleFormatters: Record<string, StyleFormatterFunction> = {};\n\n    private constructor(\n        parser      : CalxInterpreter,\n        nameManager : NameManager,\n        dispatcher  : EventDispatcher,\n    ) {\n        this._sheets        = {};\n        this._parser        = parser;\n        this._dispatcher    = dispatcher;\n        this._nameManager   = nameManager;\n\n        this._nameManager.setContext(this);\n    }\n\n    public get parser() {\n        return this._parser;\n    }\n\n    public get dispatcher() {\n        return this._dispatcher;\n    }\n\n    /**\n     * Get the name manager for managing named ranges\n     */\n    public get nameManager(): NameManager {\n        return this._nameManager;\n    }\n\n    /**\n     * Get autoCalculate option\n     */\n    public get autoCalculate(): boolean {\n        return this._autoCalculate;\n    }\n\n    /**\n     * Set autoCalculate option\n     * When true, changes to cell values automatically trigger recalculation of all sheets\n     * When false, manual calculation is required\n     * This also updates all sheets' autoCalculate settings\n     */\n    public set autoCalculate(value: boolean) {\n        this._autoCalculate = value;\n        // Propagate to all sheets\n        for (const sheetName in this._sheets) {\n            this._sheets[sheetName].autoCalculate = value;\n        }\n    }\n\n    public setActiveSheet(sheet : Sheet) {\n        if (this._parser) {\n            const context = this._parser.getContext();\n            if (context) {\n                context.activeSheet = sheet;\n                context.setActiveSheet(sheet);\n            }\n        }\n    }\n\n    public getActiveSheet() {\n        return this._parser.yy?.activeSheet;\n    }\n\n    public isValidCellAddress(address : string) {\n        return address.match(/^[A-Z]+\\d+$/);\n    }\n\n    /**\n     * Calculate the whole workbook\n     */\n    public calculate() {\n        // Build dependency tree if not already built\n        if (!this._deps) {\n            this.build();\n        }\n\n        // Calculate all sheets in dependency order\n        for (const sheetName in this._sheets) {\n            this._sheets[sheetName].calculate();\n        }\n    }\n\n    /**\n     * Build the workbook, create dependency tree, and other necessary things\n     */\n    public build() {\n        // Initialize dependency builder\n        this._depsBuilder = new DependencyBuilder();\n\n        // Build dependency trees for each sheet\n        for (const sheetName in this._sheets) {\n            this._sheets[sheetName].buildDependencyTree();\n        }\n\n        // Build workbook-level dependency tree (for cross-sheet dependencies)\n        // This will be implemented when we have a complete cell registry\n    }\n\n    /**\n     * Hydrate object using data from the workbook recusively\n     *\n     * {\n     *   someKey : '#sheet1!A1',\n     *   anotherKey : '#sheet2!B2',\n     *   nested : {\n     *    key : '#sheet3!C3'\n     *   }\n     * }\n     *\n     * @param obj\n     */\n    public hydrateObj(obj : any) {\n        for (const key in obj) {\n            if (typeof obj[key] === 'object') {\n                this.hydrateObj(obj[key]);\n            } else {\n                if (typeof obj[key] === 'string' && obj[key].startsWith('#')) {\n                    const [sheetName, address] = obj[key].split('!');\n\n                    if (sheetName in this._sheets) {\n                        obj[key] = this._sheets[sheetName].getCell(address).value;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Attach an element to this workbook for DOM integration\n     */\n    public attachElement(element: any): void {\n        this._elements.add(element);\n    }\n\n    /**\n     * Detach an element from this workbook\n     */\n    public detachElement(element: any): void {\n        this._elements.delete(element);\n        this._removeElementListeners(element);\n    }\n\n    /**\n     * Register an event listener for cleanup\n     */\n    public _addElementListener(element: any, eventName: string, handler: any, target: any): void {\n        if (!this._eventListeners.has(element)) {\n            this._eventListeners.set(element, []);\n        }\n        this._eventListeners.get(element)!.push({ event: eventName, handler, element: target });\n    }\n\n    /**\n     * Remove all event listeners for an element\n     */\n    private _removeElementListeners(element: any): void {\n        const listeners = this._eventListeners.get(element);\n        if (listeners) {\n            listeners.forEach(({ event, handler, element: target }) => {\n                target.removeEventListener(event, handler);\n            });\n            this._eventListeners.delete(element);\n        }\n    }\n\n    /**\n     * Register a custom formatter\n     */\n    public registerFormatter(name: string, formatter: FormatterInterface): void {\n        this._formatters[name] = formatter;\n    }\n\n    /**\n     * Register a custom style formatter\n     */\n    public registerStyleFormatter(name: string, formatter: StyleFormatterFunction): void {\n        this._styleFormatters[name] = formatter;\n    }\n\n    /**\n     * Get a formatter by name (checks instance formatters first, then global)\n     */\n    public getFormatter(name: string): FormatterInterface | undefined {\n        return this._formatters[name] || globalFormatterRegistry[name];\n    }\n\n    /**\n     * Get a style formatter by name (checks instance formatters first, then global)\n     */\n    public getStyleFormatter(name: string): StyleFormatterFunction | undefined {\n        return this._styleFormatters[name] || globalStyleFormatterRegistry[name];\n    }\n\n    /**\n     * Register a global formatter (static method)\n     */\n    public static registerGlobalFormatter(name: string, formatter: FormatterInterface): void {\n        globalFormatterRegistry[name] = formatter;\n    }\n\n    /**\n     * Register a global style formatter (static method)\n     */\n    public static registerGlobalStyleFormatter(name: string, formatter: StyleFormatterFunction): void {\n        globalStyleFormatterRegistry[name] = formatter;\n    }\n\n    /**\n     * Get a global formatter (static method)\n     */\n    public static getGlobalFormatter(name: string): FormatterInterface | undefined {\n        return globalFormatterRegistry[name];\n    }\n\n    /**\n     * Destroy the workbook and clean up all resources\n     */\n    public destroy(): void {\n        // Remove all event listeners\n        this._elements.forEach(element => {\n            this._removeElementListeners(element);\n        });\n\n        // Clear elements\n        this._elements.clear();\n        this._eventListeners.clear();\n\n        // Clear sheets\n        for (const sheetName in this._sheets) {\n            delete this._sheets[sheetName];\n        }\n\n        // Clear parser context\n        if (this._parser && this._parser.yy) {\n            this._parser.yy.sheets = {};\n        }\n    }\n\n    /**\n     * Create new sheet object and register it to workbook sheet registry and parser shared context.\n     */\n    public createSheet(name: string, element ?: any) :Sheet\n    {\n        if (!name) {\n            throw new Error('Sheet should have a name');\n        }\n\n        if (this._sheets[name]) {\n            throw new Error(`Sheet with the name \"${name}\" is already exists`);\n        }\n\n        const sheet = new Sheet(this, name);\n\n        // Inherit workbook's autoCalculate setting\n        sheet.autoCalculate = this._autoCalculate;\n\n        if (element) {\n            sheet.element = element;\n        }\n\n        this._sheets[name] = sheet;\n        if (this._parser && this._parser.yy) {\n            this._parser.yy.sheets[name] = sheet;\n        }\n\n        return sheet;\n    }\n\n    /**\n     * Get sheets collection from the workbook\n     */\n    public getSheets() : Record<string, Sheet> {\n        return this._sheets;\n    }\n\n    /**\n     * Get particular sheet in the workbook sheet registry\n     */\n    public getSheet(name : string) : Sheet | void {\n        if (name in this._sheets) {\n            return this._sheets[name];\n        }\n\n        throw Error(`Sheet not found with name ${name}`);\n    }\n\n\n    /**\n     * Load configuration to workbook\n     */\n    public loadData(data : Data) {\n        for (const sheetName in data.sheets) {\n            const sheet = this.createSheet(sheetName, data.sheets[sheetName]?.element);\n\n            for (const cellKey in data.sheets[sheetName].cells) {\n                const cellData = data.sheets[sheetName].cells[cellKey];\n                sheet.createCell(cellKey, cellData);\n            }\n        }\n    }\n\n    /**\n     * Export workbook to JSON Data format\n     * Returns a Data object that can be used with createWorkbookFromData()\n     */\n    public exportJSON(): Data {\n        const data: Data = {\n            sheets: {}\n        };\n\n        for (const sheetName in this._sheets) {\n            const sheet = this._sheets[sheetName];\n            const allCells = sheet.cells;\n\n            data.sheets[sheetName] = {\n                element: sheet.element,\n                cells: {},\n                variables: {}\n            };\n\n            // Export each cell's data\n            for (const address in allCells) {\n                const cell = allCells[address];\n                const cellData: CellData = {};\n\n                if (cell.formula) {\n                    cellData.formula = cell.formula;\n                } else if (cell.value !== undefined) {\n                    cellData.value = cell.value;\n                }\n\n                if (cell.type) {\n                    cellData.type = cell.type;\n                }\n\n                // Only include cells that have data\n                if (cellData.formula || cellData.value !== undefined) {\n                    data.sheets[sheetName].cells[address] = cellData;\n                }\n            }\n        }\n\n        return data;\n    }\n\n    /**\n     * Create workbook object from given config\n     */\n    public static createFromData(data : Data) {\n        const sharedContext = new SharedContext({\n            sheets : {},\n            utility : Utility,\n            comparator : Comparator,\n        });\n\n        const parser = createParser(sharedContext);\n        const dispatcher = new EventDispatcher();\n        const nameManager = new NameManager();\n\n        const workbook = new Workbook(parser, nameManager, dispatcher);\n\n        sharedContext.workbook = workbook;\n\n        /** TODO : read the configuration and configure the workbook */\n        workbook.loadData(data);\n\n        return workbook;\n    }\n\n    /**\n     * Create workbook object from given element(s), and parse related data-tag\n     * Reads data-cell, data-formula, data-format attributes and sets up event listeners\n     * @param element - Single element, array of elements, or NodeList\n     * @param data - Optional data configuration\n     */\n    public static createFromElement(element : any | any[] | NodeList, data ?: Data) {\n        const sharedContext = new SharedContext({\n            sheets : {},\n            utility : Utility,\n            comparator : Comparator,\n        });\n\n        const parser = createParser(sharedContext);\n        const dispatcher    = new EventDispatcher();\n        const nameManager   = new NameManager();\n        const workbook      = new Workbook(parser, nameManager, dispatcher);\n\n        sharedContext.workbook = workbook;\n\n        // Enable auto-calculation by default for DOM-based workbooks\n        workbook._autoCalculate = data?.autoCalculate !== false;\n\n        // Convert element to array for uniform processing\n        // Handle NodeList (browser), array, or single element\n        let elements: any[];\n        if (typeof NodeList !== 'undefined' && element instanceof NodeList) {\n            elements = Array.from(element);\n        } else if (Array.isArray(element)) {\n            elements = element;\n        } else {\n            elements = [element];\n        }\n\n        // Process variables if provided (before creating sheets)\n        if (data && (data as any).variables) {\n            const variables = (data as any).variables;\n            Object.keys(variables).forEach(varName => {\n                const reference = variables[varName];\n                workbook.nameManager.define(varName, reference);\n            });\n        }\n\n        // Determine if data has sheet structure or flat cell structure\n        const hasSheetStructure = data?.sheets !== undefined;\n\n        // Load data from config first (if provided)\n        if (data && hasSheetStructure) {\n            // Standard Data format with sheets property\n            workbook.loadData(data);\n        }\n\n        // Process each element as a sheet\n        elements.forEach((el: any, index: number) => {\n            // Attach element to workbook\n            workbook.attachElement(el);\n\n            // Determine sheet name from element\n            const sheetName = el.id || el.getAttribute('data-sheet') || `Sheet${index + 1}`;\n\n            // Handle flat data format (jQuery style) for this specific sheet\n            if (data && !hasSheetStructure) {\n                // Flat format (jQuery style): { A1: { value: 10 }, A2: { formula: \"A1*2\" } }\n                // Convert to structured format for this sheet\n                const flatData = data as any;\n                const cellData: Record<string, any> = {};\n\n                // Extract cell definitions (skip special keys like autoCalculate, variables)\n                Object.keys(flatData).forEach(key => {\n                    if (key !== 'autoCalculate' && key !== 'variables' && key !== 'sheets') {\n                        cellData[key] = flatData[key];\n                    }\n                });\n\n                // Only create sheet and load data if there are cells to load\n                if (Object.keys(cellData).length > 0) {\n                    const convertedData: Data = {\n                        sheets: {\n                            [sheetName]: {\n                                element: el,\n                                cells: cellData,\n                                variables: {}\n                            }\n                        }\n                    };\n                    workbook.loadData(convertedData);\n                }\n            }\n\n            // Get or create sheet\n            let sheet: Sheet;\n            try {\n                sheet = workbook.getSheet(sheetName) as Sheet;\n            } catch (e) {\n                sheet = workbook.createSheet(sheetName, el);\n            }\n\n            // Process data attributes from DOM\n            workbook._processDataAttributes(el, sheet);\n\n            // Set up event listeners for auto-calculation\n            workbook._setupEventListeners(el, sheet);\n        });\n\n        // Build and calculate once after all sheets are set up\n        workbook.build();\n        workbook.calculate();\n\n        // Update DOM with initial values for all elements\n        elements.forEach((el: any) => {\n            const sheetName = el.id || el.getAttribute('data-sheet') || 'Sheet1';\n            try {\n                const sheet = workbook.getSheet(sheetName);\n                if (sheet) {\n                    workbook._updateAllCells(el, sheet);\n                }\n            } catch (e) {\n                // Sheet not found, skip\n            }\n        });\n\n        return workbook;\n    }\n\n    /**\n     * Process data attributes on HTML elements\n     * @private\n     */\n    private _processDataAttributes(element: any, sheet: Sheet): void {\n        let calxCounter = 1;\n\n        // First pass: Auto-assign addresses to elements with data-formula but no data-cell\n        const formulaElements = element.querySelectorAll('[data-formula]:not([data-cell]');\n        formulaElements.forEach((el: any) => {\n            const autoAddress = `CALX${calxCounter}`;\n            el.setAttribute('data-cell', autoAddress);\n            calxCounter++;\n        });\n\n        // Second pass: Process all elements with data-cell\n        const cellElements = element.querySelectorAll('[data-cell]');\n        cellElements.forEach((el: any) => {\n            const cellAddress = el.getAttribute('data-cell');\n            if (!cellAddress) return;\n\n            // Register named variable if data-var is specified\n            const varName = el.getAttribute('data-var');\n            if (varName) {\n                this.nameManager.define(varName, cellAddress);\n            }\n\n            // Get cell configuration from attributes\n            const formula = el.getAttribute('data-formula');\n            const format = el.getAttribute('data-format');\n            const dataType = el.getAttribute('data-type');\n\n            // Get initial value from element\n            const tagName = el.tagName.toLowerCase();\n            let initialValue: any = null;\n\n            if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\n                // For inputs, read from value attribute first (more reliable for initial values)\n                initialValue = el.getAttribute('value');\n                if (!initialValue) {\n                    // Fallback to value property or defaultValue\n                    initialValue = el.value || el.defaultValue || '';\n                }\n            } else {\n                initialValue = el.textContent?.trim() || '';\n            }\n\n            // Get or create cell\n            const cell = sheet.getCell(cellAddress);\n\n            // Set type if specified (BEFORE setting value)\n            if (dataType) {\n                const typeMap: Record<string, DataType> = {\n                    'number': DataType.NUMBER,\n                    'text': DataType.TEXT,\n                    'boolean': DataType.BOOLEAN,\n                    'date': DataType.DATE\n                };\n                cell.type = typeMap[dataType.toLowerCase()] || dataType as any;\n            }\n\n            // Parse initial value if formatter is present and has parse method\n            if (initialValue && format) {\n                const formatter = this.getFormatter(format);\n                if (formatter && formatter.parse) {\n                    initialValue = formatter.parse(initialValue);\n                }\n            }\n\n            // Set formula or value\n            if (formula) {\n                cell.formula = formula;\n            } else if (initialValue !== null && initialValue !== '') {\n                // Only set value if cell doesn't already have one (from data config)\n                if (cell.value === undefined) {\n                    cell.value = initialValue;\n                }\n            }\n\n            // Set format if specified (using setFormat method)\n            if (format) {\n                cell.setFormat(format);\n            }\n        });\n    }\n\n    /**\n     * Set up event listeners for auto-calculation\n     * @private\n     */\n    private _setupEventListeners(element: any, sheet: Sheet): void {\n        // Handle focus on formatted inputs: show raw value for editing\n        const focusHandler = (event: any) => {\n            const target = event.target;\n            const format = target.getAttribute('data-format');\n            const cellRef = target.getAttribute('data-cell');\n\n            if (format && cellRef) {\n                const cell = sheet.getCellDirect(cellRef);\n                if (cell) {\n                    const rawValue = cell.value;\n                    target.value = rawValue != null ? String(rawValue) : '';\n                }\n            }\n        };\n\n        // Handle blur on formatted inputs: parse and format value\n        const blurHandler = (event: any) => {\n            const target = event.target;\n            const format = target.getAttribute('data-format');\n            const cellRef = target.getAttribute('data-cell');\n\n            if (format && cellRef) {\n                const cell = sheet.getCellDirect(cellRef);\n                if (cell) {\n                    const formatter = this.getFormatter(format);\n                    if (formatter) {\n                        const formattedValue = formatter.format(cell.value);\n                        target.value = formattedValue;\n                    }\n                }\n            }\n        };\n\n        // Handle change on formatted inputs: parse and calculate\n        const changeHandler = (event: any) => {\n            const target = event.target;\n            const format = target.getAttribute('data-format');\n            const cellRef = target.getAttribute('data-cell');\n\n            if (format && cellRef) {\n                const cell = sheet.getCellDirect(cellRef);\n                if (cell) {\n                    const rawInput = target.value;\n                    const formatter = this.getFormatter(format);\n\n                    if (formatter && formatter.parse) {\n                        const isReadonly = target.readOnly || target.readonly;\n                        const hasFormula = !!target.getAttribute('data-formula');\n\n                        if (!isReadonly && !hasFormula) {\n                            const parsedValue = formatter.parse(rawInput);\n\n                            if (parsedValue !== null && parsedValue !== cell.value) {\n                                cell.value = parsedValue;\n\n                                if (this._autoCalculate) {\n                                    this.calculate();\n                                    this._updateAllCells(element, sheet);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        };\n\n        // Handle input/change events for auto-calculation (non-formatted inputs)\n        const inputHandler = (event: any) => {\n            const target = event.target;\n            const format = target.getAttribute('data-format');\n            const cellRef = target.getAttribute('data-cell');\n\n            // Skip formatted inputs - they use change handler\n            if (format) {\n                return;\n            }\n\n            if (cellRef) {\n                const cell = sheet.getCellDirect(cellRef);\n                if (cell && !cell.formula) {\n                    const newValue = target.value;\n                    cell.value = newValue;\n\n                    if (this._autoCalculate) {\n                        this.calculate();\n                        this._updateAllCells(element, sheet);\n                    }\n                }\n            }\n        };\n\n        // Add event listeners to input elements\n        const inputElements = element.querySelectorAll('[data-cell]');\n        inputElements.forEach((el: any) => {\n            const tagName = el.tagName.toLowerCase();\n\n            if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\n                const hasFormat = el.getAttribute('data-format');\n\n                if (hasFormat) {\n                    // Formatted inputs: focus/blur/change\n                    el.addEventListener('focus', focusHandler);\n                    el.addEventListener('blur', blurHandler);\n                    el.addEventListener('change', changeHandler);\n                    this._addElementListener(element, 'focus', focusHandler, el);\n                    this._addElementListener(element, 'blur', blurHandler, el);\n                    this._addElementListener(element, 'change', changeHandler, el);\n                } else {\n                    // Non-formatted inputs: input/change\n                    el.addEventListener('input', inputHandler);\n                    el.addEventListener('change', inputHandler);\n                    this._addElementListener(element, 'input', inputHandler, el);\n                    this._addElementListener(element, 'change', inputHandler, el);\n                }\n            }\n        });\n    }\n\n    /**\n     * Update all cell elements with their current values\n     * @private\n     */\n    private _updateAllCells(element: any, sheet: Sheet): void {\n        const cellElements = element.querySelectorAll('[data-cell]');\n\n        cellElements.forEach((el: any) => {\n            const cellAddress = el.getAttribute('data-cell');\n\n            if (!cellAddress) return;\n\n            const cell = sheet.getCellDirect(cellAddress);\n            if (!cell) return;\n\n            const value = cell.value;\n            const tagName = el.tagName.toLowerCase();\n\n            // Don't update if this is the active element (user is typing)\n            // Check if global document exists (browser environment)\n            const globalDoc = typeof globalThis !== 'undefined' && (globalThis as any).document;\n            if (globalDoc && globalDoc.activeElement === el) {\n                return;\n            }\n\n            // Apply formatter: data-format attribute > cell.format property > raw value\n            const dataFormat = el.getAttribute('data-format');\n            const cellFormat = cell.getFormat();\n            let displayValue: string;\n\n            if (dataFormat) {\n                const formatter = this.getFormatter(dataFormat);\n                if (formatter) {\n                    displayValue = formatter.format(value);\n                } else {\n                    displayValue = value != null ? String(value) : '';\n                }\n            } else if (cellFormat) {\n                const formatter = this.getFormatter(cellFormat);\n                if (formatter) {\n                    displayValue = formatter.format(value);\n                } else {\n                    displayValue = value != null ? String(value) : '';\n                }\n            } else {\n                displayValue = value != null ? String(value) : '';\n            }\n\n            if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\n                if (el.value !== displayValue) {\n                    el.value = displayValue;\n                }\n            } else {\n                el.textContent = displayValue;\n            }\n\n            // Apply style formatter\n            this._applyStyleFormatter(value, el);\n        });\n    }\n\n    /**\n     * Apply conditional styling to a cell element\n     * @private\n     */\n    private _applyStyleFormatter(value: any, element: any): void {\n        const styleFormatterName = element.getAttribute('data-style-if');\n\n        if (styleFormatterName) {\n            const styleFormatter = this.getStyleFormatter(styleFormatterName);\n            if (styleFormatter) {\n                const css = styleFormatter(value, element);\n                if (css && typeof css === 'object') {\n                    // Apply CSS styles\n                    for (const property in css) {\n                        element.style[property] = css[property];\n                    }\n                }\n            }\n        }\n    }\n}\n","import { CalxInterpreter } from \"./Calx/Parser/Chevrotain/Interpreter\";\nimport { CalxParser } from \"./Calx/Parser/Chevrotain/Parser\";\nimport { Workbook } from \"./Calx/Workbook\";\nimport { Data } from \"./Calx/Workbook/Data\";\nimport { DateUtil } from \"./Calx/Utility/DateUtil\";\n\n// Export utilities\nexport { DateUtil };\n\n// Export types\nexport type { Data };\n\nexport class Calx {\n\n    static formulae : Record<string, Function> = {};\n\n    static setFormula(name : string, formula : Function) {\n        Calx.formulae[name] = formula;\n    }\n\n    static setFormulae(formulae : Record<string, Function>) {\n        Calx.formulae = {\n            ...Calx.formulae,\n            ...formulae,\n        };\n    }\n\n    static createWorkbook() {\n        const data : Data = {\n            sheets : {},\n        }\n\n        return Calx.createWorkbookFromData(data);\n    }\n\n    static createWorkbookFromData(data : Data) {\n        return Workbook.createFromData(data);\n    }\n\n    static createWorkbookFromElement(element : any, data ?: Data) {\n        return Workbook.createFromElement(element, data);\n    }\n\n    static createParser() {\n        return new CalxParser();\n    }\n\n    static createInterpreter() {\n        return new CalxInterpreter();\n    }\n\n    static exportJSON(workbook: Workbook): Data {\n        return workbook.exportJSON();\n    }\n}","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getProductionDslName = exports.isBranchingProd = exports.isOptionalProd = exports.isSequenceProd = void 0;\nvar some_1 = __importDefault(require(\"lodash/some\"));\nvar every_1 = __importDefault(require(\"lodash/every\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar model_1 = require(\"./model\");\nfunction isSequenceProd(prod) {\n    return (prod instanceof model_1.Alternative ||\n        prod instanceof model_1.Option ||\n        prod instanceof model_1.Repetition ||\n        prod instanceof model_1.RepetitionMandatory ||\n        prod instanceof model_1.RepetitionMandatoryWithSeparator ||\n        prod instanceof model_1.RepetitionWithSeparator ||\n        prod instanceof model_1.Terminal ||\n        prod instanceof model_1.Rule);\n}\nexports.isSequenceProd = isSequenceProd;\nfunction isOptionalProd(prod, alreadyVisited) {\n    if (alreadyVisited === void 0) { alreadyVisited = []; }\n    var isDirectlyOptional = prod instanceof model_1.Option ||\n        prod instanceof model_1.Repetition ||\n        prod instanceof model_1.RepetitionWithSeparator;\n    if (isDirectlyOptional) {\n        return true;\n    }\n    // note that this can cause infinite loop if one optional empty TOP production has a cyclic dependency with another\n    // empty optional top rule\n    // may be indirectly optional ((A?B?C?) | (D?E?F?))\n    if (prod instanceof model_1.Alternation) {\n        // for OR its enough for just one of the alternatives to be optional\n        return (0, some_1.default)(prod.definition, function (subProd) {\n            return isOptionalProd(subProd, alreadyVisited);\n        });\n    }\n    else if (prod instanceof model_1.NonTerminal && (0, includes_1.default)(alreadyVisited, prod)) {\n        // avoiding stack overflow due to infinite recursion\n        return false;\n    }\n    else if (prod instanceof model_1.AbstractProduction) {\n        if (prod instanceof model_1.NonTerminal) {\n            alreadyVisited.push(prod);\n        }\n        return (0, every_1.default)(prod.definition, function (subProd) {\n            return isOptionalProd(subProd, alreadyVisited);\n        });\n    }\n    else {\n        return false;\n    }\n}\nexports.isOptionalProd = isOptionalProd;\nfunction isBranchingProd(prod) {\n    return prod instanceof model_1.Alternation;\n}\nexports.isBranchingProd = isBranchingProd;\nfunction getProductionDslName(prod) {\n    /* istanbul ignore else */\n    if (prod instanceof model_1.NonTerminal) {\n        return \"SUBRULE\";\n    }\n    else if (prod instanceof model_1.Option) {\n        return \"OPTION\";\n    }\n    else if (prod instanceof model_1.Alternation) {\n        return \"OR\";\n    }\n    else if (prod instanceof model_1.RepetitionMandatory) {\n        return \"AT_LEAST_ONE\";\n    }\n    else if (prod instanceof model_1.RepetitionMandatoryWithSeparator) {\n        return \"AT_LEAST_ONE_SEP\";\n    }\n    else if (prod instanceof model_1.RepetitionWithSeparator) {\n        return \"MANY_SEP\";\n    }\n    else if (prod instanceof model_1.Repetition) {\n        return \"MANY\";\n    }\n    else if (prod instanceof model_1.Terminal) {\n        return \"CONSUME\";\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.getProductionDslName = getProductionDslName;\n//# sourceMappingURL=helpers.js.map","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = compact;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var baseSlice = require('./_baseSlice'),\n    toInteger = require('./toInteger');\n\n/**\n * Creates a slice of `array` with `n` elements dropped from the beginning.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=1] The number of elements to drop.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.drop([1, 2, 3]);\n * // => [2, 3]\n *\n * _.drop([1, 2, 3], 2);\n * // => [3]\n *\n * _.drop([1, 2, 3], 5);\n * // => []\n *\n * _.drop([1, 2, 3], 0);\n * // => [1, 2, 3]\n */\nfunction drop(array, n, guard) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  n = (guard || n === undefined) ? 1 : toInteger(n);\n  return baseSlice(array, n < 0 ? 0 : n, length);\n}\n\nmodule.exports = drop;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.every` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`\n */\nfunction baseEvery(collection, predicate) {\n  var result = true;\n  baseEach(collection, function(value, index, collection) {\n    result = !!predicate(value, index, collection);\n    return result;\n  });\n  return result;\n}\n\nmodule.exports = baseEvery;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GastRefResolverVisitor = exports.resolveGrammar = void 0;\nvar parser_1 = require(\"../parser/parser\");\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar gast_1 = require(\"@chevrotain/gast\");\nfunction resolveGrammar(topLevels, errMsgProvider) {\n    var refResolver = new GastRefResolverVisitor(topLevels, errMsgProvider);\n    refResolver.resolveRefs();\n    return refResolver.errors;\n}\nexports.resolveGrammar = resolveGrammar;\nvar GastRefResolverVisitor = /** @class */ (function (_super) {\n    __extends(GastRefResolverVisitor, _super);\n    function GastRefResolverVisitor(nameToTopRule, errMsgProvider) {\n        var _this = _super.call(this) || this;\n        _this.nameToTopRule = nameToTopRule;\n        _this.errMsgProvider = errMsgProvider;\n        _this.errors = [];\n        return _this;\n    }\n    GastRefResolverVisitor.prototype.resolveRefs = function () {\n        var _this = this;\n        (0, forEach_1.default)((0, values_1.default)(this.nameToTopRule), function (prod) {\n            _this.currTopLevel = prod;\n            prod.accept(_this);\n        });\n    };\n    GastRefResolverVisitor.prototype.visitNonTerminal = function (node) {\n        var ref = this.nameToTopRule[node.nonTerminalName];\n        if (!ref) {\n            var msg = this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel, node);\n            this.errors.push({\n                message: msg,\n                type: parser_1.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,\n                ruleName: this.currTopLevel.name,\n                unresolvedRefName: node.nonTerminalName\n            });\n        }\n        else {\n            node.referencedRule = ref;\n        }\n    };\n    return GastRefResolverVisitor;\n}(gast_1.GAstVisitor));\nexports.GastRefResolverVisitor = GastRefResolverVisitor;\n//# sourceMappingURL=resolver.js.map","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GAstVisitor = void 0;\nvar model_1 = require(\"./model\");\nvar GAstVisitor = /** @class */ (function () {\n    function GAstVisitor() {\n    }\n    GAstVisitor.prototype.visit = function (node) {\n        var nodeAny = node;\n        switch (nodeAny.constructor) {\n            case model_1.NonTerminal:\n                return this.visitNonTerminal(nodeAny);\n            case model_1.Alternative:\n                return this.visitAlternative(nodeAny);\n            case model_1.Option:\n                return this.visitOption(nodeAny);\n            case model_1.RepetitionMandatory:\n                return this.visitRepetitionMandatory(nodeAny);\n            case model_1.RepetitionMandatoryWithSeparator:\n                return this.visitRepetitionMandatoryWithSeparator(nodeAny);\n            case model_1.RepetitionWithSeparator:\n                return this.visitRepetitionWithSeparator(nodeAny);\n            case model_1.Repetition:\n                return this.visitRepetition(nodeAny);\n            case model_1.Alternation:\n                return this.visitAlternation(nodeAny);\n            case model_1.Terminal:\n                return this.visitTerminal(nodeAny);\n            case model_1.Rule:\n                return this.visitRule(nodeAny);\n            /* istanbul ignore next */\n            default:\n                throw Error(\"non exhaustive match\");\n        }\n    };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitNonTerminal = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitAlternative = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitOption = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRepetition = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRepetitionMandatory = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRepetitionMandatoryWithSeparator = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRepetitionWithSeparator = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitAlternation = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitTerminal = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRule = function (node) { };\n    return GAstVisitor;\n}());\nexports.GAstVisitor = GAstVisitor;\n//# sourceMappingURL=visitor.js.map","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nextPossibleTokensAfter = exports.possiblePathsFrom = exports.NextTerminalAfterAtLeastOneSepWalker = exports.NextTerminalAfterAtLeastOneWalker = exports.NextTerminalAfterManySepWalker = exports.NextTerminalAfterManyWalker = exports.AbstractNextTerminalAfterProductionWalker = exports.NextAfterTokenWalker = exports.AbstractNextPossibleTokensWalker = void 0;\nvar rest_1 = require(\"./rest\");\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar dropRight_1 = __importDefault(require(\"lodash/dropRight\"));\nvar drop_1 = __importDefault(require(\"lodash/drop\"));\nvar last_1 = __importDefault(require(\"lodash/last\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar first_2 = require(\"./first\");\nvar gast_1 = require(\"@chevrotain/gast\");\nvar AbstractNextPossibleTokensWalker = /** @class */ (function (_super) {\n    __extends(AbstractNextPossibleTokensWalker, _super);\n    function AbstractNextPossibleTokensWalker(topProd, path) {\n        var _this = _super.call(this) || this;\n        _this.topProd = topProd;\n        _this.path = path;\n        _this.possibleTokTypes = [];\n        _this.nextProductionName = \"\";\n        _this.nextProductionOccurrence = 0;\n        _this.found = false;\n        _this.isAtEndOfPath = false;\n        return _this;\n    }\n    AbstractNextPossibleTokensWalker.prototype.startWalking = function () {\n        this.found = false;\n        if (this.path.ruleStack[0] !== this.topProd.name) {\n            throw Error(\"The path does not start with the walker's top Rule!\");\n        }\n        // immutable for the win\n        this.ruleStack = (0, clone_1.default)(this.path.ruleStack).reverse(); // intelij bug requires assertion\n        this.occurrenceStack = (0, clone_1.default)(this.path.occurrenceStack).reverse(); // intelij bug requires assertion\n        // already verified that the first production is valid, we now seek the 2nd production\n        this.ruleStack.pop();\n        this.occurrenceStack.pop();\n        this.updateExpectedNext();\n        this.walk(this.topProd);\n        return this.possibleTokTypes;\n    };\n    AbstractNextPossibleTokensWalker.prototype.walk = function (prod, prevRest) {\n        if (prevRest === void 0) { prevRest = []; }\n        // stop scanning once we found the path\n        if (!this.found) {\n            _super.prototype.walk.call(this, prod, prevRest);\n        }\n    };\n    AbstractNextPossibleTokensWalker.prototype.walkProdRef = function (refProd, currRest, prevRest) {\n        // found the next production, need to keep walking in it\n        if (refProd.referencedRule.name === this.nextProductionName &&\n            refProd.idx === this.nextProductionOccurrence) {\n            var fullRest = currRest.concat(prevRest);\n            this.updateExpectedNext();\n            this.walk(refProd.referencedRule, fullRest);\n        }\n    };\n    AbstractNextPossibleTokensWalker.prototype.updateExpectedNext = function () {\n        // need to consume the Terminal\n        if ((0, isEmpty_1.default)(this.ruleStack)) {\n            // must reset nextProductionXXX to avoid walking down another Top Level production while what we are\n            // really seeking is the last Terminal...\n            this.nextProductionName = \"\";\n            this.nextProductionOccurrence = 0;\n            this.isAtEndOfPath = true;\n        }\n        else {\n            this.nextProductionName = this.ruleStack.pop();\n            this.nextProductionOccurrence = this.occurrenceStack.pop();\n        }\n    };\n    return AbstractNextPossibleTokensWalker;\n}(rest_1.RestWalker));\nexports.AbstractNextPossibleTokensWalker = AbstractNextPossibleTokensWalker;\nvar NextAfterTokenWalker = /** @class */ (function (_super) {\n    __extends(NextAfterTokenWalker, _super);\n    function NextAfterTokenWalker(topProd, path) {\n        var _this = _super.call(this, topProd, path) || this;\n        _this.path = path;\n        _this.nextTerminalName = \"\";\n        _this.nextTerminalOccurrence = 0;\n        _this.nextTerminalName = _this.path.lastTok.name;\n        _this.nextTerminalOccurrence = _this.path.lastTokOccurrence;\n        return _this;\n    }\n    NextAfterTokenWalker.prototype.walkTerminal = function (terminal, currRest, prevRest) {\n        if (this.isAtEndOfPath &&\n            terminal.terminalType.name === this.nextTerminalName &&\n            terminal.idx === this.nextTerminalOccurrence &&\n            !this.found) {\n            var fullRest = currRest.concat(prevRest);\n            var restProd = new gast_1.Alternative({ definition: fullRest });\n            this.possibleTokTypes = (0, first_2.first)(restProd);\n            this.found = true;\n        }\n    };\n    return NextAfterTokenWalker;\n}(AbstractNextPossibleTokensWalker));\nexports.NextAfterTokenWalker = NextAfterTokenWalker;\n/**\n * This walker only \"walks\" a single \"TOP\" level in the Grammar Ast, this means\n * it never \"follows\" production refs\n */\nvar AbstractNextTerminalAfterProductionWalker = /** @class */ (function (_super) {\n    __extends(AbstractNextTerminalAfterProductionWalker, _super);\n    function AbstractNextTerminalAfterProductionWalker(topRule, occurrence) {\n        var _this = _super.call(this) || this;\n        _this.topRule = topRule;\n        _this.occurrence = occurrence;\n        _this.result = {\n            token: undefined,\n            occurrence: undefined,\n            isEndOfRule: undefined\n        };\n        return _this;\n    }\n    AbstractNextTerminalAfterProductionWalker.prototype.startWalking = function () {\n        this.walk(this.topRule);\n        return this.result;\n    };\n    return AbstractNextTerminalAfterProductionWalker;\n}(rest_1.RestWalker));\nexports.AbstractNextTerminalAfterProductionWalker = AbstractNextTerminalAfterProductionWalker;\nvar NextTerminalAfterManyWalker = /** @class */ (function (_super) {\n    __extends(NextTerminalAfterManyWalker, _super);\n    function NextTerminalAfterManyWalker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NextTerminalAfterManyWalker.prototype.walkMany = function (manyProd, currRest, prevRest) {\n        if (manyProd.idx === this.occurrence) {\n            var firstAfterMany = (0, first_1.default)(currRest.concat(prevRest));\n            this.result.isEndOfRule = firstAfterMany === undefined;\n            if (firstAfterMany instanceof gast_1.Terminal) {\n                this.result.token = firstAfterMany.terminalType;\n                this.result.occurrence = firstAfterMany.idx;\n            }\n        }\n        else {\n            _super.prototype.walkMany.call(this, manyProd, currRest, prevRest);\n        }\n    };\n    return NextTerminalAfterManyWalker;\n}(AbstractNextTerminalAfterProductionWalker));\nexports.NextTerminalAfterManyWalker = NextTerminalAfterManyWalker;\nvar NextTerminalAfterManySepWalker = /** @class */ (function (_super) {\n    __extends(NextTerminalAfterManySepWalker, _super);\n    function NextTerminalAfterManySepWalker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NextTerminalAfterManySepWalker.prototype.walkManySep = function (manySepProd, currRest, prevRest) {\n        if (manySepProd.idx === this.occurrence) {\n            var firstAfterManySep = (0, first_1.default)(currRest.concat(prevRest));\n            this.result.isEndOfRule = firstAfterManySep === undefined;\n            if (firstAfterManySep instanceof gast_1.Terminal) {\n                this.result.token = firstAfterManySep.terminalType;\n                this.result.occurrence = firstAfterManySep.idx;\n            }\n        }\n        else {\n            _super.prototype.walkManySep.call(this, manySepProd, currRest, prevRest);\n        }\n    };\n    return NextTerminalAfterManySepWalker;\n}(AbstractNextTerminalAfterProductionWalker));\nexports.NextTerminalAfterManySepWalker = NextTerminalAfterManySepWalker;\nvar NextTerminalAfterAtLeastOneWalker = /** @class */ (function (_super) {\n    __extends(NextTerminalAfterAtLeastOneWalker, _super);\n    function NextTerminalAfterAtLeastOneWalker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NextTerminalAfterAtLeastOneWalker.prototype.walkAtLeastOne = function (atLeastOneProd, currRest, prevRest) {\n        if (atLeastOneProd.idx === this.occurrence) {\n            var firstAfterAtLeastOne = (0, first_1.default)(currRest.concat(prevRest));\n            this.result.isEndOfRule = firstAfterAtLeastOne === undefined;\n            if (firstAfterAtLeastOne instanceof gast_1.Terminal) {\n                this.result.token = firstAfterAtLeastOne.terminalType;\n                this.result.occurrence = firstAfterAtLeastOne.idx;\n            }\n        }\n        else {\n            _super.prototype.walkAtLeastOne.call(this, atLeastOneProd, currRest, prevRest);\n        }\n    };\n    return NextTerminalAfterAtLeastOneWalker;\n}(AbstractNextTerminalAfterProductionWalker));\nexports.NextTerminalAfterAtLeastOneWalker = NextTerminalAfterAtLeastOneWalker;\n// TODO: reduce code duplication in the AfterWalkers\nvar NextTerminalAfterAtLeastOneSepWalker = /** @class */ (function (_super) {\n    __extends(NextTerminalAfterAtLeastOneSepWalker, _super);\n    function NextTerminalAfterAtLeastOneSepWalker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NextTerminalAfterAtLeastOneSepWalker.prototype.walkAtLeastOneSep = function (atleastOneSepProd, currRest, prevRest) {\n        if (atleastOneSepProd.idx === this.occurrence) {\n            var firstAfterfirstAfterAtLeastOneSep = (0, first_1.default)(currRest.concat(prevRest));\n            this.result.isEndOfRule = firstAfterfirstAfterAtLeastOneSep === undefined;\n            if (firstAfterfirstAfterAtLeastOneSep instanceof gast_1.Terminal) {\n                this.result.token = firstAfterfirstAfterAtLeastOneSep.terminalType;\n                this.result.occurrence = firstAfterfirstAfterAtLeastOneSep.idx;\n            }\n        }\n        else {\n            _super.prototype.walkAtLeastOneSep.call(this, atleastOneSepProd, currRest, prevRest);\n        }\n    };\n    return NextTerminalAfterAtLeastOneSepWalker;\n}(AbstractNextTerminalAfterProductionWalker));\nexports.NextTerminalAfterAtLeastOneSepWalker = NextTerminalAfterAtLeastOneSepWalker;\nfunction possiblePathsFrom(targetDef, maxLength, currPath) {\n    if (currPath === void 0) { currPath = []; }\n    // avoid side effects\n    currPath = (0, clone_1.default)(currPath);\n    var result = [];\n    var i = 0;\n    // TODO: avoid inner funcs\n    function remainingPathWith(nextDef) {\n        return nextDef.concat((0, drop_1.default)(targetDef, i + 1));\n    }\n    // TODO: avoid inner funcs\n    function getAlternativesForProd(definition) {\n        var alternatives = possiblePathsFrom(remainingPathWith(definition), maxLength, currPath);\n        return result.concat(alternatives);\n    }\n    /**\n     * Mandatory productions will halt the loop as the paths computed from their recursive calls will already contain the\n     * following (rest) of the targetDef.\n     *\n     * For optional productions (Option/Repetition/...) the loop will continue to represent the paths that do not include the\n     * the optional production.\n     */\n    while (currPath.length < maxLength && i < targetDef.length) {\n        var prod = targetDef[i];\n        /* istanbul ignore else */\n        if (prod instanceof gast_1.Alternative) {\n            return getAlternativesForProd(prod.definition);\n        }\n        else if (prod instanceof gast_1.NonTerminal) {\n            return getAlternativesForProd(prod.definition);\n        }\n        else if (prod instanceof gast_1.Option) {\n            result = getAlternativesForProd(prod.definition);\n        }\n        else if (prod instanceof gast_1.RepetitionMandatory) {\n            var newDef = prod.definition.concat([\n                new gast_1.Repetition({\n                    definition: prod.definition\n                })\n            ]);\n            return getAlternativesForProd(newDef);\n        }\n        else if (prod instanceof gast_1.RepetitionMandatoryWithSeparator) {\n            var newDef = [\n                new gast_1.Alternative({ definition: prod.definition }),\n                new gast_1.Repetition({\n                    definition: [new gast_1.Terminal({ terminalType: prod.separator })].concat(prod.definition)\n                })\n            ];\n            return getAlternativesForProd(newDef);\n        }\n        else if (prod instanceof gast_1.RepetitionWithSeparator) {\n            var newDef = prod.definition.concat([\n                new gast_1.Repetition({\n                    definition: [new gast_1.Terminal({ terminalType: prod.separator })].concat(prod.definition)\n                })\n            ]);\n            result = getAlternativesForProd(newDef);\n        }\n        else if (prod instanceof gast_1.Repetition) {\n            var newDef = prod.definition.concat([\n                new gast_1.Repetition({\n                    definition: prod.definition\n                })\n            ]);\n            result = getAlternativesForProd(newDef);\n        }\n        else if (prod instanceof gast_1.Alternation) {\n            (0, forEach_1.default)(prod.definition, function (currAlt) {\n                // TODO: this is a limited check for empty alternatives\n                //   It would prevent a common case of infinite loops during parser initialization.\n                //   However **in-directly** empty alternatives may still cause issues.\n                if ((0, isEmpty_1.default)(currAlt.definition) === false) {\n                    result = getAlternativesForProd(currAlt.definition);\n                }\n            });\n            return result;\n        }\n        else if (prod instanceof gast_1.Terminal) {\n            currPath.push(prod.terminalType);\n        }\n        else {\n            throw Error(\"non exhaustive match\");\n        }\n        i++;\n    }\n    result.push({\n        partialPath: currPath,\n        suffixDef: (0, drop_1.default)(targetDef, i)\n    });\n    return result;\n}\nexports.possiblePathsFrom = possiblePathsFrom;\nfunction nextPossibleTokensAfter(initialDef, tokenVector, tokMatcher, maxLookAhead) {\n    var EXIT_NON_TERMINAL = \"EXIT_NONE_TERMINAL\";\n    // to avoid creating a new Array each time.\n    var EXIT_NON_TERMINAL_ARR = [EXIT_NON_TERMINAL];\n    var EXIT_ALTERNATIVE = \"EXIT_ALTERNATIVE\";\n    var foundCompletePath = false;\n    var tokenVectorLength = tokenVector.length;\n    var minimalAlternativesIndex = tokenVectorLength - maxLookAhead - 1;\n    var result = [];\n    var possiblePaths = [];\n    possiblePaths.push({\n        idx: -1,\n        def: initialDef,\n        ruleStack: [],\n        occurrenceStack: []\n    });\n    while (!(0, isEmpty_1.default)(possiblePaths)) {\n        var currPath = possiblePaths.pop();\n        // skip alternatives if no more results can be found (assuming deterministic grammar with fixed lookahead)\n        if (currPath === EXIT_ALTERNATIVE) {\n            if (foundCompletePath &&\n                (0, last_1.default)(possiblePaths).idx <= minimalAlternativesIndex) {\n                // remove irrelevant alternative\n                possiblePaths.pop();\n            }\n            continue;\n        }\n        var currDef = currPath.def;\n        var currIdx = currPath.idx;\n        var currRuleStack = currPath.ruleStack;\n        var currOccurrenceStack = currPath.occurrenceStack;\n        // For Example: an empty path could exist in a valid grammar in the case of an EMPTY_ALT\n        if ((0, isEmpty_1.default)(currDef)) {\n            continue;\n        }\n        var prod = currDef[0];\n        /* istanbul ignore else */\n        if (prod === EXIT_NON_TERMINAL) {\n            var nextPath = {\n                idx: currIdx,\n                def: (0, drop_1.default)(currDef),\n                ruleStack: (0, dropRight_1.default)(currRuleStack),\n                occurrenceStack: (0, dropRight_1.default)(currOccurrenceStack)\n            };\n            possiblePaths.push(nextPath);\n        }\n        else if (prod instanceof gast_1.Terminal) {\n            /* istanbul ignore else */\n            if (currIdx < tokenVectorLength - 1) {\n                var nextIdx = currIdx + 1;\n                var actualToken = tokenVector[nextIdx];\n                if (tokMatcher(actualToken, prod.terminalType)) {\n                    var nextPath = {\n                        idx: nextIdx,\n                        def: (0, drop_1.default)(currDef),\n                        ruleStack: currRuleStack,\n                        occurrenceStack: currOccurrenceStack\n                    };\n                    possiblePaths.push(nextPath);\n                }\n                // end of the line\n            }\n            else if (currIdx === tokenVectorLength - 1) {\n                // IGNORE ABOVE ELSE\n                result.push({\n                    nextTokenType: prod.terminalType,\n                    nextTokenOccurrence: prod.idx,\n                    ruleStack: currRuleStack,\n                    occurrenceStack: currOccurrenceStack\n                });\n                foundCompletePath = true;\n            }\n            else {\n                throw Error(\"non exhaustive match\");\n            }\n        }\n        else if (prod instanceof gast_1.NonTerminal) {\n            var newRuleStack = (0, clone_1.default)(currRuleStack);\n            newRuleStack.push(prod.nonTerminalName);\n            var newOccurrenceStack = (0, clone_1.default)(currOccurrenceStack);\n            newOccurrenceStack.push(prod.idx);\n            var nextPath = {\n                idx: currIdx,\n                def: prod.definition.concat(EXIT_NON_TERMINAL_ARR, (0, drop_1.default)(currDef)),\n                ruleStack: newRuleStack,\n                occurrenceStack: newOccurrenceStack\n            };\n            possiblePaths.push(nextPath);\n        }\n        else if (prod instanceof gast_1.Option) {\n            // the order of alternatives is meaningful, FILO (Last path will be traversed first).\n            var nextPathWithout = {\n                idx: currIdx,\n                def: (0, drop_1.default)(currDef),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWithout);\n            // required marker to avoid backtracking paths whose higher priority alternatives already matched\n            possiblePaths.push(EXIT_ALTERNATIVE);\n            var nextPathWith = {\n                idx: currIdx,\n                def: prod.definition.concat((0, drop_1.default)(currDef)),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWith);\n        }\n        else if (prod instanceof gast_1.RepetitionMandatory) {\n            // TODO:(THE NEW operators here take a while...) (convert once?)\n            var secondIteration = new gast_1.Repetition({\n                definition: prod.definition,\n                idx: prod.idx\n            });\n            var nextDef = prod.definition.concat([secondIteration], (0, drop_1.default)(currDef));\n            var nextPath = {\n                idx: currIdx,\n                def: nextDef,\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPath);\n        }\n        else if (prod instanceof gast_1.RepetitionMandatoryWithSeparator) {\n            // TODO:(THE NEW operators here take a while...) (convert once?)\n            var separatorGast = new gast_1.Terminal({\n                terminalType: prod.separator\n            });\n            var secondIteration = new gast_1.Repetition({\n                definition: [separatorGast].concat(prod.definition),\n                idx: prod.idx\n            });\n            var nextDef = prod.definition.concat([secondIteration], (0, drop_1.default)(currDef));\n            var nextPath = {\n                idx: currIdx,\n                def: nextDef,\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPath);\n        }\n        else if (prod instanceof gast_1.RepetitionWithSeparator) {\n            // the order of alternatives is meaningful, FILO (Last path will be traversed first).\n            var nextPathWithout = {\n                idx: currIdx,\n                def: (0, drop_1.default)(currDef),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWithout);\n            // required marker to avoid backtracking paths whose higher priority alternatives already matched\n            possiblePaths.push(EXIT_ALTERNATIVE);\n            var separatorGast = new gast_1.Terminal({\n                terminalType: prod.separator\n            });\n            var nthRepetition = new gast_1.Repetition({\n                definition: [separatorGast].concat(prod.definition),\n                idx: prod.idx\n            });\n            var nextDef = prod.definition.concat([nthRepetition], (0, drop_1.default)(currDef));\n            var nextPathWith = {\n                idx: currIdx,\n                def: nextDef,\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWith);\n        }\n        else if (prod instanceof gast_1.Repetition) {\n            // the order of alternatives is meaningful, FILO (Last path will be traversed first).\n            var nextPathWithout = {\n                idx: currIdx,\n                def: (0, drop_1.default)(currDef),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWithout);\n            // required marker to avoid backtracking paths whose higher priority alternatives already matched\n            possiblePaths.push(EXIT_ALTERNATIVE);\n            // TODO: an empty repetition will cause infinite loops here, will the parser detect this in selfAnalysis?\n            var nthRepetition = new gast_1.Repetition({\n                definition: prod.definition,\n                idx: prod.idx\n            });\n            var nextDef = prod.definition.concat([nthRepetition], (0, drop_1.default)(currDef));\n            var nextPathWith = {\n                idx: currIdx,\n                def: nextDef,\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWith);\n        }\n        else if (prod instanceof gast_1.Alternation) {\n            // the order of alternatives is meaningful, FILO (Last path will be traversed first).\n            for (var i = prod.definition.length - 1; i >= 0; i--) {\n                var currAlt = prod.definition[i];\n                var currAltPath = {\n                    idx: currIdx,\n                    def: currAlt.definition.concat((0, drop_1.default)(currDef)),\n                    ruleStack: currRuleStack,\n                    occurrenceStack: currOccurrenceStack\n                };\n                possiblePaths.push(currAltPath);\n                possiblePaths.push(EXIT_ALTERNATIVE);\n            }\n        }\n        else if (prod instanceof gast_1.Alternative) {\n            possiblePaths.push({\n                idx: currIdx,\n                def: prod.definition.concat((0, drop_1.default)(currDef)),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            });\n        }\n        else if (prod instanceof gast_1.Rule) {\n            // last because we should only encounter at most a single one of these per invocation.\n            possiblePaths.push(expandTopLevelRule(prod, currIdx, currRuleStack, currOccurrenceStack));\n        }\n        else {\n            throw Error(\"non exhaustive match\");\n        }\n    }\n    return result;\n}\nexports.nextPossibleTokensAfter = nextPossibleTokensAfter;\nfunction expandTopLevelRule(topRule, currIdx, currRuleStack, currOccurrenceStack) {\n    var newRuleStack = (0, clone_1.default)(currRuleStack);\n    newRuleStack.push(topRule.name);\n    var newCurrOccurrenceStack = (0, clone_1.default)(currOccurrenceStack);\n    // top rule is always assumed to have been called with occurrence index 1\n    newCurrOccurrenceStack.push(1);\n    return {\n        idx: currIdx,\n        def: topRule.definition,\n        ruleStack: newRuleStack,\n        occurrenceStack: newCurrOccurrenceStack\n    };\n}\n//# sourceMappingURL=interpreter.js.map","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defineNameProp = void 0;\nvar NAME = \"name\";\nfunction defineNameProp(obj, nameValue) {\n    Object.defineProperty(obj, NAME, {\n        enumerable: false,\n        configurable: true,\n        writable: false,\n        value: nameValue\n    });\n}\nexports.defineNameProp = defineNameProp;\n//# sourceMappingURL=lang_extensions.js.map","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nmodule.exports = findIndex;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","/* bessel.js (C) 2013-present SheetJS -- http://sheetjs.com */\n/* vim: set ts=2: */\n/*exported BESSEL */\nvar BESSEL;\n(function (factory) {\n  /*jshint ignore:start */\n  if(typeof DO_NOT_EXPORT_BESSEL === 'undefined') {\n    if('object' === typeof exports) {\n      factory(exports);\n    } else if ('function' === typeof define && define.amd) {\n      define(function () {\n        var module = {};\n        factory(module);\n        return module;\n      });\n    } else {\n      factory(BESSEL = {});\n    }\n  } else {\n    factory(BESSEL = {});\n  }\n  /*jshint ignore:end */\n}(function(BESSEL) {\nBESSEL.version = '1.0.2';\nvar M = Math;\n\nfunction _horner(arr, v) { for(var i = 0, z = 0; i < arr.length; ++i) z = v * z + arr[i]; return z; }\nfunction _bessel_iter(x, n, f0, f1, sign) {\n  if(n === 0) return f0;\n  if(n === 1) return f1;\n  var tdx = 2 / x, f2 = f1;\n  for(var o = 1; o < n; ++o) {\n    f2 = f1 * o * tdx + sign * f0;\n    f0 = f1; f1 = f2;\n  }\n  return f2;\n}\nfunction _bessel_wrap(bessel0, bessel1, name, nonzero, sign) {\n  return function bessel(x,n) {\n    if(nonzero) {\n      if(x === 0) return (nonzero == 1 ? -Infinity : Infinity);\n      else if(x < 0) return NaN;\n    }\n    if(n === 0) return bessel0(x);\n    if(n === 1) return bessel1(x);\n    if(n < 0) return NaN;\n    n|=0;\n    var b0 = bessel0(x), b1 = bessel1(x);\n    return _bessel_iter(x, n, b0, b1, sign);\n  };\n}\nvar besselj = (function() {\n  var W = 0.636619772; // 2 / Math.PI\n\n  var b0_a1a = [57568490574.0, -13362590354.0, 651619640.7, -11214424.18, 77392.33017, -184.9052456].reverse();\n  var b0_a2a = [57568490411.0, 1029532985.0, 9494680.718, 59272.64853, 267.8532712, 1.0].reverse();\n  var b0_a1b = [1.0, -0.1098628627e-2, 0.2734510407e-4, -0.2073370639e-5, 0.2093887211e-6].reverse();\n  var b0_a2b = [-0.1562499995e-1, 0.1430488765e-3, -0.6911147651e-5, 0.7621095161e-6, -0.934935152e-7].reverse();\n\n  function bessel0(x) {\n    var a=0, a1=0, a2=0, y = x * x;\n    if(x < 8) {\n      a1 = _horner(b0_a1a, y);\n      a2 = _horner(b0_a2a, y);\n      a = a1 / a2;\n    } else {\n      var xx = x - 0.785398164;\n      y = 64 / y;\n      a1 = _horner(b0_a1b, y);\n      a2 = _horner(b0_a2b, y);\n      a = M.sqrt(W/x)*(M.cos(xx)*a1-M.sin(xx)*a2*8/x);\n    }\n    return a;\n  }\n\n  var b1_a1a = [72362614232.0, -7895059235.0, 242396853.1, -2972611.439, 15704.48260, -30.16036606].reverse();\n  var b1_a2a = [144725228442.0, 2300535178.0, 18583304.74, 99447.43394, 376.9991397, 1.0].reverse();\n  var b1_a1b = [1.0, 0.183105e-2, -0.3516396496e-4, 0.2457520174e-5, -0.240337019e-6].reverse();\n  var b1_a2b = [0.04687499995, -0.2002690873e-3, 0.8449199096e-5, -0.88228987e-6, 0.105787412e-6].reverse();\n\n  function bessel1(x) {\n    var a=0, a1=0, a2=0, y = x*x, xx = M.abs(x) - 2.356194491;\n    if(Math.abs(x)< 8) {\n      a1 = x*_horner(b1_a1a, y);\n      a2 = _horner(b1_a2a, y);\n      a = a1 / a2;\n    } else {\n      y = 64 / y;\n      a1=_horner(b1_a1b, y);\n      a2=_horner(b1_a2b, y);\n      a=M.sqrt(W/M.abs(x))*(M.cos(xx)*a1-M.sin(xx)*a2*8/M.abs(x));\n      if(x < 0) a = -a;\n    }\n    return a;\n  }\n\n  return function besselj(x, n) {\n    n = Math.round(n);\n    if(!isFinite(x)) return isNaN(x) ? x : 0;\n    if(n < 0) return ((n%2)?-1:1)*besselj(x, -n);\n    if(x < 0) return ((n%2)?-1:1)*besselj(-x, n);\n    if(n === 0) return bessel0(x);\n    if(n === 1) return bessel1(x);\n    if(x === 0) return 0;\n\n    var ret=0.0;\n    if(x > n) {\n      ret = _bessel_iter(x, n, bessel0(x), bessel1(x),-1);\n    } else {\n      var m=2*M.floor((n+M.floor(M.sqrt(40*n)))/2);\n      var jsum=false;\n      var bjp=0.0, sum=0.0;\n      var bj=1.0, bjm = 0.0;\n      var tox = 2 / x;\n      for (var j=m;j>0;j--) {\n        bjm=j*tox*bj-bjp;\n        bjp=bj;\n        bj=bjm;\n        if (M.abs(bj) > 1E10) {\n          bj *= 1E-10;\n          bjp *= 1E-10;\n          ret *= 1E-10;\n          sum *= 1E-10;\n        }\n        if (jsum) sum += bj;\n        jsum=!jsum;\n        if (j == n) ret=bjp;\n      }\n      sum=2.0*sum-bj;\n      ret /= sum;\n    }\n    return ret;\n  };\n})();\nvar bessely = (function() {\n  var W = 0.636619772;\n\n  var b0_a1a = [-2957821389.0, 7062834065.0, -512359803.6, 10879881.29, -86327.92757, 228.4622733].reverse();\n  var b0_a2a = [40076544269.0, 745249964.8, 7189466.438, 47447.26470, 226.1030244, 1.0].reverse();\n  var b0_a1b = [1.0, -0.1098628627e-2, 0.2734510407e-4, -0.2073370639e-5, 0.2093887211e-6].reverse();\n  var b0_a2b = [-0.1562499995e-1, 0.1430488765e-3, -0.6911147651e-5, 0.7621095161e-6, -0.934945152e-7].reverse();\n\n  function bessel0(x) {\n    var a=0, a1=0, a2=0, y = x * x, xx = x - 0.785398164;\n    if(x < 8) {\n      a1 = _horner(b0_a1a, y);\n      a2 = _horner(b0_a2a, y);\n      a = a1/a2 + W * besselj(x,0) * M.log(x);\n    } else {\n      y = 64 / y;\n      a1 = _horner(b0_a1b, y);\n      a2 = _horner(b0_a2b, y);\n      a = M.sqrt(W/x)*(M.sin(xx)*a1+M.cos(xx)*a2*8/x);\n    }\n    return a;\n  }\n\n  var b1_a1a = [-0.4900604943e13, 0.1275274390e13, -0.5153438139e11, 0.7349264551e9, -0.4237922726e7, 0.8511937935e4].reverse();\n  var b1_a2a = [0.2499580570e14, 0.4244419664e12, 0.3733650367e10, 0.2245904002e8, 0.1020426050e6, 0.3549632885e3, 1].reverse();\n  var b1_a1b = [1.0, 0.183105e-2, -0.3516396496e-4, 0.2457520174e-5, -0.240337019e-6].reverse();\n  var b1_a2b = [0.04687499995, -0.2002690873e-3, 0.8449199096e-5, -0.88228987e-6, 0.105787412e-6].reverse();\n\n  function bessel1(x) {\n    var a=0, a1=0, a2=0, y = x*x, xx = x - 2.356194491;\n    if(x < 8) {\n      a1 = x*_horner(b1_a1a, y);\n      a2 = _horner(b1_a2a, y);\n      a = a1/a2 + W * (besselj(x,1) * M.log(x) - 1 / x);\n    } else {\n      y = 64 / y;\n      a1=_horner(b1_a1b, y);\n      a2=_horner(b1_a2b, y);\n      a=M.sqrt(W/x)*(M.sin(xx)*a1+M.cos(xx)*a2*8/x);\n    }\n    return a;\n  }\n\n  return _bessel_wrap(bessel0, bessel1, 'BESSELY', 1, -1);\n})();\nvar besseli = (function() {\n  var b0_a = [1.0, 3.5156229, 3.0899424, 1.2067492, 0.2659732, 0.360768e-1, 0.45813e-2].reverse();\n  var b0_b = [0.39894228, 0.1328592e-1, 0.225319e-2, -0.157565e-2, 0.916281e-2, -0.2057706e-1, 0.2635537e-1, -0.1647633e-1, 0.392377e-2].reverse();\n\n  function bessel0(x) {\n    if(x <= 3.75) return _horner(b0_a, x*x/(3.75*3.75));\n    return M.exp(M.abs(x))/M.sqrt(M.abs(x))*_horner(b0_b, 3.75/M.abs(x));\n  }\n\n  var b1_a = [0.5, 0.87890594, 0.51498869, 0.15084934, 0.2658733e-1, 0.301532e-2, 0.32411e-3].reverse();\n  var b1_b = [0.39894228, -0.3988024e-1, -0.362018e-2, 0.163801e-2, -0.1031555e-1, 0.2282967e-1, -0.2895312e-1, 0.1787654e-1, -0.420059e-2].reverse();\n\n  function bessel1(x) {\n    if(x < 3.75) return x * _horner(b1_a, x*x/(3.75*3.75));\n    return (x < 0 ? -1 : 1) * M.exp(M.abs(x))/M.sqrt(M.abs(x))*_horner(b1_b, 3.75/M.abs(x));\n  }\n\n  return function besseli(x, n) {\n    n = Math.round(n);\n    if(n === 0) return bessel0(x);\n    if(n === 1) return bessel1(x);\n    if(n < 0) return NaN;\n    if(M.abs(x) === 0) return 0;\n    if(x == Infinity) return Infinity;\n\n    var ret = 0.0, j, tox = 2 / M.abs(x), bip = 0.0, bi=1.0, bim=0.0;\n    var m=2*M.round((n+M.round(M.sqrt(40*n)))/2);\n    for (j=m;j>0;j--) {\n      bim=j*tox*bi + bip;\n      bip=bi; bi=bim;\n      if (M.abs(bi) > 1E10) {\n        bi *= 1E-10;\n        bip *= 1E-10;\n        ret *= 1E-10;\n      }\n      if(j == n) ret = bip;\n    }\n    ret *= besseli(x, 0) / bi;\n    return x < 0 && (n%2) ? -ret : ret;\n  };\n\n})();\n\nvar besselk = (function() {\n  var b0_a = [-0.57721566, 0.42278420, 0.23069756, 0.3488590e-1, 0.262698e-2, 0.10750e-3, 0.74e-5].reverse();\n  var b0_b = [1.25331414, -0.7832358e-1, 0.2189568e-1, -0.1062446e-1, 0.587872e-2, -0.251540e-2, 0.53208e-3].reverse();\n\n  function bessel0(x) {\n    if(x <= 2) return -M.log(x/2) * besseli(x,0) + _horner(b0_a, x*x/4);\n    return M.exp(-x) / M.sqrt(x) * _horner(b0_b, 2/x);\n  }\n\n  var b1_a = [1.0, 0.15443144, -0.67278579, -0.18156897, -0.1919402e-1, -0.110404e-2, -0.4686e-4].reverse();\n  var b1_b = [1.25331414, 0.23498619, -0.3655620e-1, 0.1504268e-1, -0.780353e-2, 0.325614e-2, -0.68245e-3].reverse();\n\n  function bessel1(x) {\n    if(x <= 2) return M.log(x/2) * besseli(x,1) + (1/x) * _horner(b1_a, x*x/4);\n    return M.exp(-x)/M.sqrt(x)*_horner(b1_b, 2/x);\n  }\n\n  return _bessel_wrap(bessel0, bessel1, 'BESSELK', 2, 1);\n})();\nBESSEL.besselj = besselj;\nBESSEL.bessely = bessely;\nBESSEL.besseli = besseli;\nBESSEL.besselk = besselk;\n}));\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VERSION = void 0;\n// needs a separate module as this is required inside chevrotain productive code\n// and also in the entry point for webpack(api.ts).\n// A separate file avoids cyclic dependencies and webpack errors.\nexports.VERSION = \"10.5.0\";\n//# sourceMappingURL=version.js.map","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IN = void 0;\n// TODO: can this be removed? where is it used?\nexports.IN = \"_~IN~_\";\n//# sourceMappingURL=constants.js.map","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.charCodeToOptimizedIndex = exports.minOptimizationVal = exports.buildLineBreakIssueMessage = exports.LineTerminatorOptimizedTester = exports.isShortPattern = exports.isCustomPattern = exports.cloneEmptyGroups = exports.performWarningRuntimeChecks = exports.performRuntimeChecks = exports.addStickyFlag = exports.addStartOfInput = exports.findUnreachablePatterns = exports.findModesThatDoNotExist = exports.findInvalidGroupType = exports.findDuplicatePatterns = exports.findUnsupportedFlags = exports.findStartOfInputAnchor = exports.findEmptyMatchRegExps = exports.findEndOfInputAnchor = exports.findInvalidPatterns = exports.findMissingPatterns = exports.validatePatterns = exports.analyzeTokenTypes = exports.enableSticky = exports.disableSticky = exports.SUPPORT_STICKY = exports.MODES = exports.DEFAULT_MODE = void 0;\nvar regexp_to_ast_1 = require(\"regexp-to-ast\");\nvar lexer_public_1 = require(\"./lexer_public\");\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar compact_1 = __importDefault(require(\"lodash/compact\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar reject_1 = __importDefault(require(\"lodash/reject\"));\nvar difference_1 = __importDefault(require(\"lodash/difference\"));\nvar indexOf_1 = __importDefault(require(\"lodash/indexOf\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar isString_1 = __importDefault(require(\"lodash/isString\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar find_1 = __importDefault(require(\"lodash/find\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar keys_1 = __importDefault(require(\"lodash/keys\"));\nvar isRegExp_1 = __importDefault(require(\"lodash/isRegExp\"));\nvar filter_1 = __importDefault(require(\"lodash/filter\"));\nvar defaults_1 = __importDefault(require(\"lodash/defaults\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar reg_exp_1 = require(\"./reg_exp\");\nvar reg_exp_parser_1 = require(\"./reg_exp_parser\");\nvar PATTERN = \"PATTERN\";\nexports.DEFAULT_MODE = \"defaultMode\";\nexports.MODES = \"modes\";\nexports.SUPPORT_STICKY = typeof new RegExp(\"(?:)\").sticky === \"boolean\";\nfunction disableSticky() {\n    exports.SUPPORT_STICKY = false;\n}\nexports.disableSticky = disableSticky;\nfunction enableSticky() {\n    exports.SUPPORT_STICKY = true;\n}\nexports.enableSticky = enableSticky;\nfunction analyzeTokenTypes(tokenTypes, options) {\n    options = (0, defaults_1.default)(options, {\n        useSticky: exports.SUPPORT_STICKY,\n        debug: false,\n        safeMode: false,\n        positionTracking: \"full\",\n        lineTerminatorCharacters: [\"\\r\", \"\\n\"],\n        tracer: function (msg, action) { return action(); }\n    });\n    var tracer = options.tracer;\n    tracer(\"initCharCodeToOptimizedIndexMap\", function () {\n        initCharCodeToOptimizedIndexMap();\n    });\n    var onlyRelevantTypes;\n    tracer(\"Reject Lexer.NA\", function () {\n        onlyRelevantTypes = (0, reject_1.default)(tokenTypes, function (currType) {\n            return currType[PATTERN] === lexer_public_1.Lexer.NA;\n        });\n    });\n    var hasCustom = false;\n    var allTransformedPatterns;\n    tracer(\"Transform Patterns\", function () {\n        hasCustom = false;\n        allTransformedPatterns = (0, map_1.default)(onlyRelevantTypes, function (currType) {\n            var currPattern = currType[PATTERN];\n            /* istanbul ignore else */\n            if ((0, isRegExp_1.default)(currPattern)) {\n                var regExpSource = currPattern.source;\n                if (regExpSource.length === 1 &&\n                    // only these regExp meta characters which can appear in a length one regExp\n                    regExpSource !== \"^\" &&\n                    regExpSource !== \"$\" &&\n                    regExpSource !== \".\" &&\n                    !currPattern.ignoreCase) {\n                    return regExpSource;\n                }\n                else if (regExpSource.length === 2 &&\n                    regExpSource[0] === \"\\\\\" &&\n                    // not a meta character\n                    !(0, includes_1.default)([\n                        \"d\",\n                        \"D\",\n                        \"s\",\n                        \"S\",\n                        \"t\",\n                        \"r\",\n                        \"n\",\n                        \"t\",\n                        \"0\",\n                        \"c\",\n                        \"b\",\n                        \"B\",\n                        \"f\",\n                        \"v\",\n                        \"w\",\n                        \"W\"\n                    ], regExpSource[1])) {\n                    // escaped meta Characters: /\\+/ /\\[/\n                    // or redundant escaping: /\\a/\n                    // without the escaping \"\\\"\n                    return regExpSource[1];\n                }\n                else {\n                    return options.useSticky\n                        ? addStickyFlag(currPattern)\n                        : addStartOfInput(currPattern);\n                }\n            }\n            else if ((0, isFunction_1.default)(currPattern)) {\n                hasCustom = true;\n                // CustomPatternMatcherFunc - custom patterns do not require any transformations, only wrapping in a RegExp Like object\n                return { exec: currPattern };\n            }\n            else if (typeof currPattern === \"object\") {\n                hasCustom = true;\n                // ICustomPattern\n                return currPattern;\n            }\n            else if (typeof currPattern === \"string\") {\n                if (currPattern.length === 1) {\n                    return currPattern;\n                }\n                else {\n                    var escapedRegExpString = currPattern.replace(/[\\\\^$.*+?()[\\]{}|]/g, \"\\\\$&\");\n                    var wrappedRegExp = new RegExp(escapedRegExpString);\n                    return options.useSticky\n                        ? addStickyFlag(wrappedRegExp)\n                        : addStartOfInput(wrappedRegExp);\n                }\n            }\n            else {\n                throw Error(\"non exhaustive match\");\n            }\n        });\n    });\n    var patternIdxToType;\n    var patternIdxToGroup;\n    var patternIdxToLongerAltIdxArr;\n    var patternIdxToPushMode;\n    var patternIdxToPopMode;\n    tracer(\"misc mapping\", function () {\n        patternIdxToType = (0, map_1.default)(onlyRelevantTypes, function (currType) { return currType.tokenTypeIdx; });\n        patternIdxToGroup = (0, map_1.default)(onlyRelevantTypes, function (clazz) {\n            var groupName = clazz.GROUP;\n            /* istanbul ignore next */\n            if (groupName === lexer_public_1.Lexer.SKIPPED) {\n                return undefined;\n            }\n            else if ((0, isString_1.default)(groupName)) {\n                return groupName;\n            }\n            else if ((0, isUndefined_1.default)(groupName)) {\n                return false;\n            }\n            else {\n                throw Error(\"non exhaustive match\");\n            }\n        });\n        patternIdxToLongerAltIdxArr = (0, map_1.default)(onlyRelevantTypes, function (clazz) {\n            var longerAltType = clazz.LONGER_ALT;\n            if (longerAltType) {\n                var longerAltIdxArr = (0, isArray_1.default)(longerAltType)\n                    ? (0, map_1.default)(longerAltType, function (type) { return (0, indexOf_1.default)(onlyRelevantTypes, type); })\n                    : [(0, indexOf_1.default)(onlyRelevantTypes, longerAltType)];\n                return longerAltIdxArr;\n            }\n        });\n        patternIdxToPushMode = (0, map_1.default)(onlyRelevantTypes, function (clazz) { return clazz.PUSH_MODE; });\n        patternIdxToPopMode = (0, map_1.default)(onlyRelevantTypes, function (clazz) {\n            return (0, has_1.default)(clazz, \"POP_MODE\");\n        });\n    });\n    var patternIdxToCanLineTerminator;\n    tracer(\"Line Terminator Handling\", function () {\n        var lineTerminatorCharCodes = getCharCodes(options.lineTerminatorCharacters);\n        patternIdxToCanLineTerminator = (0, map_1.default)(onlyRelevantTypes, function (tokType) { return false; });\n        if (options.positionTracking !== \"onlyOffset\") {\n            patternIdxToCanLineTerminator = (0, map_1.default)(onlyRelevantTypes, function (tokType) {\n                if ((0, has_1.default)(tokType, \"LINE_BREAKS\")) {\n                    return !!tokType.LINE_BREAKS;\n                }\n                else {\n                    return (checkLineBreaksIssues(tokType, lineTerminatorCharCodes) === false &&\n                        (0, reg_exp_1.canMatchCharCode)(lineTerminatorCharCodes, tokType.PATTERN));\n                }\n            });\n        }\n    });\n    var patternIdxToIsCustom;\n    var patternIdxToShort;\n    var emptyGroups;\n    var patternIdxToConfig;\n    tracer(\"Misc Mapping #2\", function () {\n        patternIdxToIsCustom = (0, map_1.default)(onlyRelevantTypes, isCustomPattern);\n        patternIdxToShort = (0, map_1.default)(allTransformedPatterns, isShortPattern);\n        emptyGroups = (0, reduce_1.default)(onlyRelevantTypes, function (acc, clazz) {\n            var groupName = clazz.GROUP;\n            if ((0, isString_1.default)(groupName) && !(groupName === lexer_public_1.Lexer.SKIPPED)) {\n                acc[groupName] = [];\n            }\n            return acc;\n        }, {});\n        patternIdxToConfig = (0, map_1.default)(allTransformedPatterns, function (x, idx) {\n            return {\n                pattern: allTransformedPatterns[idx],\n                longerAlt: patternIdxToLongerAltIdxArr[idx],\n                canLineTerminator: patternIdxToCanLineTerminator[idx],\n                isCustom: patternIdxToIsCustom[idx],\n                short: patternIdxToShort[idx],\n                group: patternIdxToGroup[idx],\n                push: patternIdxToPushMode[idx],\n                pop: patternIdxToPopMode[idx],\n                tokenTypeIdx: patternIdxToType[idx],\n                tokenType: onlyRelevantTypes[idx]\n            };\n        });\n    });\n    var canBeOptimized = true;\n    var charCodeToPatternIdxToConfig = [];\n    if (!options.safeMode) {\n        tracer(\"First Char Optimization\", function () {\n            charCodeToPatternIdxToConfig = (0, reduce_1.default)(onlyRelevantTypes, function (result, currTokType, idx) {\n                if (typeof currTokType.PATTERN === \"string\") {\n                    var charCode = currTokType.PATTERN.charCodeAt(0);\n                    var optimizedIdx = charCodeToOptimizedIndex(charCode);\n                    addToMapOfArrays(result, optimizedIdx, patternIdxToConfig[idx]);\n                }\n                else if ((0, isArray_1.default)(currTokType.START_CHARS_HINT)) {\n                    var lastOptimizedIdx_1;\n                    (0, forEach_1.default)(currTokType.START_CHARS_HINT, function (charOrInt) {\n                        var charCode = typeof charOrInt === \"string\"\n                            ? charOrInt.charCodeAt(0)\n                            : charOrInt;\n                        var currOptimizedIdx = charCodeToOptimizedIndex(charCode);\n                        // Avoid adding the config multiple times\n                        /* istanbul ignore else */\n                        // - Difficult to check this scenario effects as it is only a performance\n                        //   optimization that does not change correctness\n                        if (lastOptimizedIdx_1 !== currOptimizedIdx) {\n                            lastOptimizedIdx_1 = currOptimizedIdx;\n                            addToMapOfArrays(result, currOptimizedIdx, patternIdxToConfig[idx]);\n                        }\n                    });\n                }\n                else if ((0, isRegExp_1.default)(currTokType.PATTERN)) {\n                    if (currTokType.PATTERN.unicode) {\n                        canBeOptimized = false;\n                        if (options.ensureOptimizations) {\n                            (0, utils_1.PRINT_ERROR)(\"\".concat(reg_exp_1.failedOptimizationPrefixMsg) +\n                                \"\\tUnable to analyze < \".concat(currTokType.PATTERN.toString(), \" > pattern.\\n\") +\n                                \"\\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\\n\" +\n                                \"\\tThis will disable the lexer's first char optimizations.\\n\" +\n                                \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE\");\n                        }\n                    }\n                    else {\n                        var optimizedCodes = (0, reg_exp_1.getOptimizedStartCodesIndices)(currTokType.PATTERN, options.ensureOptimizations);\n                        /* istanbul ignore if */\n                        // start code will only be empty given an empty regExp or failure of regexp-to-ast library\n                        // the first should be a different validation and the second cannot be tested.\n                        if ((0, isEmpty_1.default)(optimizedCodes)) {\n                            // we cannot understand what codes may start possible matches\n                            // The optimization correctness requires knowing start codes for ALL patterns.\n                            // Not actually sure this is an error, no debug message\n                            canBeOptimized = false;\n                        }\n                        (0, forEach_1.default)(optimizedCodes, function (code) {\n                            addToMapOfArrays(result, code, patternIdxToConfig[idx]);\n                        });\n                    }\n                }\n                else {\n                    if (options.ensureOptimizations) {\n                        (0, utils_1.PRINT_ERROR)(\"\".concat(reg_exp_1.failedOptimizationPrefixMsg) +\n                            \"\\tTokenType: <\".concat(currTokType.name, \"> is using a custom token pattern without providing <start_chars_hint> parameter.\\n\") +\n                            \"\\tThis will disable the lexer's first char optimizations.\\n\" +\n                            \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE\");\n                    }\n                    canBeOptimized = false;\n                }\n                return result;\n            }, []);\n        });\n    }\n    return {\n        emptyGroups: emptyGroups,\n        patternIdxToConfig: patternIdxToConfig,\n        charCodeToPatternIdxToConfig: charCodeToPatternIdxToConfig,\n        hasCustom: hasCustom,\n        canBeOptimized: canBeOptimized\n    };\n}\nexports.analyzeTokenTypes = analyzeTokenTypes;\nfunction validatePatterns(tokenTypes, validModesNames) {\n    var errors = [];\n    var missingResult = findMissingPatterns(tokenTypes);\n    errors = errors.concat(missingResult.errors);\n    var invalidResult = findInvalidPatterns(missingResult.valid);\n    var validTokenTypes = invalidResult.valid;\n    errors = errors.concat(invalidResult.errors);\n    errors = errors.concat(validateRegExpPattern(validTokenTypes));\n    errors = errors.concat(findInvalidGroupType(validTokenTypes));\n    errors = errors.concat(findModesThatDoNotExist(validTokenTypes, validModesNames));\n    errors = errors.concat(findUnreachablePatterns(validTokenTypes));\n    return errors;\n}\nexports.validatePatterns = validatePatterns;\nfunction validateRegExpPattern(tokenTypes) {\n    var errors = [];\n    var withRegExpPatterns = (0, filter_1.default)(tokenTypes, function (currTokType) {\n        return (0, isRegExp_1.default)(currTokType[PATTERN]);\n    });\n    errors = errors.concat(findEndOfInputAnchor(withRegExpPatterns));\n    errors = errors.concat(findStartOfInputAnchor(withRegExpPatterns));\n    errors = errors.concat(findUnsupportedFlags(withRegExpPatterns));\n    errors = errors.concat(findDuplicatePatterns(withRegExpPatterns));\n    errors = errors.concat(findEmptyMatchRegExps(withRegExpPatterns));\n    return errors;\n}\nfunction findMissingPatterns(tokenTypes) {\n    var tokenTypesWithMissingPattern = (0, filter_1.default)(tokenTypes, function (currType) {\n        return !(0, has_1.default)(currType, PATTERN);\n    });\n    var errors = (0, map_1.default)(tokenTypesWithMissingPattern, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- missing static 'PATTERN' property\",\n            type: lexer_public_1.LexerDefinitionErrorType.MISSING_PATTERN,\n            tokenTypes: [currType]\n        };\n    });\n    var valid = (0, difference_1.default)(tokenTypes, tokenTypesWithMissingPattern);\n    return { errors: errors, valid: valid };\n}\nexports.findMissingPatterns = findMissingPatterns;\nfunction findInvalidPatterns(tokenTypes) {\n    var tokenTypesWithInvalidPattern = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType[PATTERN];\n        return (!(0, isRegExp_1.default)(pattern) &&\n            !(0, isFunction_1.default)(pattern) &&\n            !(0, has_1.default)(pattern, \"exec\") &&\n            !(0, isString_1.default)(pattern));\n    });\n    var errors = (0, map_1.default)(tokenTypesWithInvalidPattern, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' can only be a RegExp, a\" +\n                \" Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.\",\n            type: lexer_public_1.LexerDefinitionErrorType.INVALID_PATTERN,\n            tokenTypes: [currType]\n        };\n    });\n    var valid = (0, difference_1.default)(tokenTypes, tokenTypesWithInvalidPattern);\n    return { errors: errors, valid: valid };\n}\nexports.findInvalidPatterns = findInvalidPatterns;\nvar end_of_input = /[^\\\\][$]/;\nfunction findEndOfInputAnchor(tokenTypes) {\n    var EndAnchorFinder = /** @class */ (function (_super) {\n        __extends(EndAnchorFinder, _super);\n        function EndAnchorFinder() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.found = false;\n            return _this;\n        }\n        EndAnchorFinder.prototype.visitEndAnchor = function (node) {\n            this.found = true;\n        };\n        return EndAnchorFinder;\n    }(regexp_to_ast_1.BaseRegExpVisitor));\n    var invalidRegex = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType.PATTERN;\n        try {\n            var regexpAst = (0, reg_exp_parser_1.getRegExpAst)(pattern);\n            var endAnchorVisitor = new EndAnchorFinder();\n            endAnchorVisitor.visit(regexpAst);\n            return endAnchorVisitor.found;\n        }\n        catch (e) {\n            // old behavior in case of runtime exceptions with regexp-to-ast.\n            /* istanbul ignore next - cannot ensure an error in regexp-to-ast*/\n            return end_of_input.test(pattern.source);\n        }\n    });\n    var errors = (0, map_1.default)(invalidRegex, function (currType) {\n        return {\n            message: \"Unexpected RegExp Anchor Error:\\n\" +\n                \"\\tToken Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' cannot contain end of input anchor '$'\\n\" +\n                \"\\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\" +\n                \"\\tfor details.\",\n            type: lexer_public_1.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findEndOfInputAnchor = findEndOfInputAnchor;\nfunction findEmptyMatchRegExps(tokenTypes) {\n    var matchesEmptyString = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType.PATTERN;\n        return pattern.test(\"\");\n    });\n    var errors = (0, map_1.default)(matchesEmptyString, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' must not match an empty string\",\n            type: lexer_public_1.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findEmptyMatchRegExps = findEmptyMatchRegExps;\nvar start_of_input = /[^\\\\[][\\^]|^\\^/;\nfunction findStartOfInputAnchor(tokenTypes) {\n    var StartAnchorFinder = /** @class */ (function (_super) {\n        __extends(StartAnchorFinder, _super);\n        function StartAnchorFinder() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.found = false;\n            return _this;\n        }\n        StartAnchorFinder.prototype.visitStartAnchor = function (node) {\n            this.found = true;\n        };\n        return StartAnchorFinder;\n    }(regexp_to_ast_1.BaseRegExpVisitor));\n    var invalidRegex = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType.PATTERN;\n        try {\n            var regexpAst = (0, reg_exp_parser_1.getRegExpAst)(pattern);\n            var startAnchorVisitor = new StartAnchorFinder();\n            startAnchorVisitor.visit(regexpAst);\n            return startAnchorVisitor.found;\n        }\n        catch (e) {\n            // old behavior in case of runtime exceptions with regexp-to-ast.\n            /* istanbul ignore next - cannot ensure an error in regexp-to-ast*/\n            return start_of_input.test(pattern.source);\n        }\n    });\n    var errors = (0, map_1.default)(invalidRegex, function (currType) {\n        return {\n            message: \"Unexpected RegExp Anchor Error:\\n\" +\n                \"\\tToken Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' cannot contain start of input anchor '^'\\n\" +\n                \"\\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\" +\n                \"\\tfor details.\",\n            type: lexer_public_1.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findStartOfInputAnchor = findStartOfInputAnchor;\nfunction findUnsupportedFlags(tokenTypes) {\n    var invalidFlags = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType[PATTERN];\n        return pattern instanceof RegExp && (pattern.multiline || pattern.global);\n    });\n    var errors = (0, map_1.default)(invalidFlags, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' may NOT contain global('g') or multiline('m')\",\n            type: lexer_public_1.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findUnsupportedFlags = findUnsupportedFlags;\n// This can only test for identical duplicate RegExps, not semantically equivalent ones.\nfunction findDuplicatePatterns(tokenTypes) {\n    var found = [];\n    var identicalPatterns = (0, map_1.default)(tokenTypes, function (outerType) {\n        return (0, reduce_1.default)(tokenTypes, function (result, innerType) {\n            if (outerType.PATTERN.source === innerType.PATTERN.source &&\n                !(0, includes_1.default)(found, innerType) &&\n                innerType.PATTERN !== lexer_public_1.Lexer.NA) {\n                // this avoids duplicates in the result, each Token Type may only appear in one \"set\"\n                // in essence we are creating Equivalence classes on equality relation.\n                found.push(innerType);\n                result.push(innerType);\n                return result;\n            }\n            return result;\n        }, []);\n    });\n    identicalPatterns = (0, compact_1.default)(identicalPatterns);\n    var duplicatePatterns = (0, filter_1.default)(identicalPatterns, function (currIdenticalSet) {\n        return currIdenticalSet.length > 1;\n    });\n    var errors = (0, map_1.default)(duplicatePatterns, function (setOfIdentical) {\n        var tokenTypeNames = (0, map_1.default)(setOfIdentical, function (currType) {\n            return currType.name;\n        });\n        var dupPatternSrc = (0, first_1.default)(setOfIdentical).PATTERN;\n        return {\n            message: \"The same RegExp pattern ->\".concat(dupPatternSrc, \"<-\") +\n                \"has been used in all of the following Token Types: \".concat(tokenTypeNames.join(\", \"), \" <-\"),\n            type: lexer_public_1.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,\n            tokenTypes: setOfIdentical\n        };\n    });\n    return errors;\n}\nexports.findDuplicatePatterns = findDuplicatePatterns;\nfunction findInvalidGroupType(tokenTypes) {\n    var invalidTypes = (0, filter_1.default)(tokenTypes, function (clazz) {\n        if (!(0, has_1.default)(clazz, \"GROUP\")) {\n            return false;\n        }\n        var group = clazz.GROUP;\n        return group !== lexer_public_1.Lexer.SKIPPED && group !== lexer_public_1.Lexer.NA && !(0, isString_1.default)(group);\n    });\n    var errors = (0, map_1.default)(invalidTypes, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String\",\n            type: lexer_public_1.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findInvalidGroupType = findInvalidGroupType;\nfunction findModesThatDoNotExist(tokenTypes, validModes) {\n    var invalidModes = (0, filter_1.default)(tokenTypes, function (clazz) {\n        return (clazz.PUSH_MODE !== undefined && !(0, includes_1.default)(validModes, clazz.PUSH_MODE));\n    });\n    var errors = (0, map_1.default)(invalidModes, function (tokType) {\n        var msg = \"Token Type: ->\".concat(tokType.name, \"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->\").concat(tokType.PUSH_MODE, \"<-\") +\n            \"which does not exist\";\n        return {\n            message: msg,\n            type: lexer_public_1.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,\n            tokenTypes: [tokType]\n        };\n    });\n    return errors;\n}\nexports.findModesThatDoNotExist = findModesThatDoNotExist;\nfunction findUnreachablePatterns(tokenTypes) {\n    var errors = [];\n    var canBeTested = (0, reduce_1.default)(tokenTypes, function (result, tokType, idx) {\n        var pattern = tokType.PATTERN;\n        if (pattern === lexer_public_1.Lexer.NA) {\n            return result;\n        }\n        // a more comprehensive validation for all forms of regExps would require\n        // deeper regExp analysis capabilities\n        if ((0, isString_1.default)(pattern)) {\n            result.push({ str: pattern, idx: idx, tokenType: tokType });\n        }\n        else if ((0, isRegExp_1.default)(pattern) && noMetaChar(pattern)) {\n            result.push({ str: pattern.source, idx: idx, tokenType: tokType });\n        }\n        return result;\n    }, []);\n    (0, forEach_1.default)(tokenTypes, function (tokType, testIdx) {\n        (0, forEach_1.default)(canBeTested, function (_a) {\n            var str = _a.str, idx = _a.idx, tokenType = _a.tokenType;\n            if (testIdx < idx && testTokenType(str, tokType.PATTERN)) {\n                var msg = \"Token: ->\".concat(tokenType.name, \"<- can never be matched.\\n\") +\n                    \"Because it appears AFTER the Token Type ->\".concat(tokType.name, \"<-\") +\n                    \"in the lexer's definition.\\n\" +\n                    \"See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE\";\n                errors.push({\n                    message: msg,\n                    type: lexer_public_1.LexerDefinitionErrorType.UNREACHABLE_PATTERN,\n                    tokenTypes: [tokType, tokenType]\n                });\n            }\n        });\n    });\n    return errors;\n}\nexports.findUnreachablePatterns = findUnreachablePatterns;\nfunction testTokenType(str, pattern) {\n    /* istanbul ignore else */\n    if ((0, isRegExp_1.default)(pattern)) {\n        var regExpArray = pattern.exec(str);\n        return regExpArray !== null && regExpArray.index === 0;\n    }\n    else if ((0, isFunction_1.default)(pattern)) {\n        // maintain the API of custom patterns\n        return pattern(str, 0, [], {});\n    }\n    else if ((0, has_1.default)(pattern, \"exec\")) {\n        // maintain the API of custom patterns\n        return pattern.exec(str, 0, [], {});\n    }\n    else if (typeof pattern === \"string\") {\n        return pattern === str;\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nfunction noMetaChar(regExp) {\n    //https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\n    var metaChars = [\n        \".\",\n        \"\\\\\",\n        \"[\",\n        \"]\",\n        \"|\",\n        \"^\",\n        \"$\",\n        \"(\",\n        \")\",\n        \"?\",\n        \"*\",\n        \"+\",\n        \"{\"\n    ];\n    return ((0, find_1.default)(metaChars, function (char) { return regExp.source.indexOf(char) !== -1; }) === undefined);\n}\nfunction addStartOfInput(pattern) {\n    var flags = pattern.ignoreCase ? \"i\" : \"\";\n    // always wrapping in a none capturing group preceded by '^' to make sure matching can only work on start of input.\n    // duplicate/redundant start of input markers have no meaning (/^^^^A/ === /^A/)\n    return new RegExp(\"^(?:\".concat(pattern.source, \")\"), flags);\n}\nexports.addStartOfInput = addStartOfInput;\nfunction addStickyFlag(pattern) {\n    var flags = pattern.ignoreCase ? \"iy\" : \"y\";\n    // always wrapping in a none capturing group preceded by '^' to make sure matching can only work on start of input.\n    // duplicate/redundant start of input markers have no meaning (/^^^^A/ === /^A/)\n    return new RegExp(\"\".concat(pattern.source), flags);\n}\nexports.addStickyFlag = addStickyFlag;\nfunction performRuntimeChecks(lexerDefinition, trackLines, lineTerminatorCharacters) {\n    var errors = [];\n    // some run time checks to help the end users.\n    if (!(0, has_1.default)(lexerDefinition, exports.DEFAULT_MODE)) {\n        errors.push({\n            message: \"A MultiMode Lexer cannot be initialized without a <\" +\n                exports.DEFAULT_MODE +\n                \"> property in its definition\\n\",\n            type: lexer_public_1.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE\n        });\n    }\n    if (!(0, has_1.default)(lexerDefinition, exports.MODES)) {\n        errors.push({\n            message: \"A MultiMode Lexer cannot be initialized without a <\" +\n                exports.MODES +\n                \"> property in its definition\\n\",\n            type: lexer_public_1.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY\n        });\n    }\n    if ((0, has_1.default)(lexerDefinition, exports.MODES) &&\n        (0, has_1.default)(lexerDefinition, exports.DEFAULT_MODE) &&\n        !(0, has_1.default)(lexerDefinition.modes, lexerDefinition.defaultMode)) {\n        errors.push({\n            message: \"A MultiMode Lexer cannot be initialized with a \".concat(exports.DEFAULT_MODE, \": <\").concat(lexerDefinition.defaultMode, \">\") +\n                \"which does not exist\\n\",\n            type: lexer_public_1.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST\n        });\n    }\n    if ((0, has_1.default)(lexerDefinition, exports.MODES)) {\n        (0, forEach_1.default)(lexerDefinition.modes, function (currModeValue, currModeName) {\n            (0, forEach_1.default)(currModeValue, function (currTokType, currIdx) {\n                if ((0, isUndefined_1.default)(currTokType)) {\n                    errors.push({\n                        message: \"A Lexer cannot be initialized using an undefined Token Type. Mode:\" +\n                            \"<\".concat(currModeName, \"> at index: <\").concat(currIdx, \">\\n\"),\n                        type: lexer_public_1.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED\n                    });\n                }\n                else if ((0, has_1.default)(currTokType, \"LONGER_ALT\")) {\n                    var longerAlt = (0, isArray_1.default)(currTokType.LONGER_ALT)\n                        ? currTokType.LONGER_ALT\n                        : [currTokType.LONGER_ALT];\n                    (0, forEach_1.default)(longerAlt, function (currLongerAlt) {\n                        if (!(0, isUndefined_1.default)(currLongerAlt) &&\n                            !(0, includes_1.default)(currModeValue, currLongerAlt)) {\n                            errors.push({\n                                message: \"A MultiMode Lexer cannot be initialized with a longer_alt <\".concat(currLongerAlt.name, \"> on token <\").concat(currTokType.name, \"> outside of mode <\").concat(currModeName, \">\\n\"),\n                                type: lexer_public_1.LexerDefinitionErrorType.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE\n                            });\n                        }\n                    });\n                }\n            });\n        });\n    }\n    return errors;\n}\nexports.performRuntimeChecks = performRuntimeChecks;\nfunction performWarningRuntimeChecks(lexerDefinition, trackLines, lineTerminatorCharacters) {\n    var warnings = [];\n    var hasAnyLineBreak = false;\n    var allTokenTypes = (0, compact_1.default)((0, flatten_1.default)((0, values_1.default)(lexerDefinition.modes)));\n    var concreteTokenTypes = (0, reject_1.default)(allTokenTypes, function (currType) { return currType[PATTERN] === lexer_public_1.Lexer.NA; });\n    var terminatorCharCodes = getCharCodes(lineTerminatorCharacters);\n    if (trackLines) {\n        (0, forEach_1.default)(concreteTokenTypes, function (tokType) {\n            var currIssue = checkLineBreaksIssues(tokType, terminatorCharCodes);\n            if (currIssue !== false) {\n                var message = buildLineBreakIssueMessage(tokType, currIssue);\n                var warningDescriptor = {\n                    message: message,\n                    type: currIssue.issue,\n                    tokenType: tokType\n                };\n                warnings.push(warningDescriptor);\n            }\n            else {\n                // we don't want to attempt to scan if the user explicitly specified the line_breaks option.\n                if ((0, has_1.default)(tokType, \"LINE_BREAKS\")) {\n                    if (tokType.LINE_BREAKS === true) {\n                        hasAnyLineBreak = true;\n                    }\n                }\n                else {\n                    if ((0, reg_exp_1.canMatchCharCode)(terminatorCharCodes, tokType.PATTERN)) {\n                        hasAnyLineBreak = true;\n                    }\n                }\n            }\n        });\n    }\n    if (trackLines && !hasAnyLineBreak) {\n        warnings.push({\n            message: \"Warning: No LINE_BREAKS Found.\\n\" +\n                \"\\tThis Lexer has been defined to track line and column information,\\n\" +\n                \"\\tBut none of the Token Types can be identified as matching a line terminator.\\n\" +\n                \"\\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \\n\" +\n                \"\\tfor details.\",\n            type: lexer_public_1.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS\n        });\n    }\n    return warnings;\n}\nexports.performWarningRuntimeChecks = performWarningRuntimeChecks;\nfunction cloneEmptyGroups(emptyGroups) {\n    var clonedResult = {};\n    var groupKeys = (0, keys_1.default)(emptyGroups);\n    (0, forEach_1.default)(groupKeys, function (currKey) {\n        var currGroupValue = emptyGroups[currKey];\n        /* istanbul ignore else */\n        if ((0, isArray_1.default)(currGroupValue)) {\n            clonedResult[currKey] = [];\n        }\n        else {\n            throw Error(\"non exhaustive match\");\n        }\n    });\n    return clonedResult;\n}\nexports.cloneEmptyGroups = cloneEmptyGroups;\n// TODO: refactor to avoid duplication\nfunction isCustomPattern(tokenType) {\n    var pattern = tokenType.PATTERN;\n    /* istanbul ignore else */\n    if ((0, isRegExp_1.default)(pattern)) {\n        return false;\n    }\n    else if ((0, isFunction_1.default)(pattern)) {\n        // CustomPatternMatcherFunc - custom patterns do not require any transformations, only wrapping in a RegExp Like object\n        return true;\n    }\n    else if ((0, has_1.default)(pattern, \"exec\")) {\n        // ICustomPattern\n        return true;\n    }\n    else if ((0, isString_1.default)(pattern)) {\n        return false;\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.isCustomPattern = isCustomPattern;\nfunction isShortPattern(pattern) {\n    if ((0, isString_1.default)(pattern) && pattern.length === 1) {\n        return pattern.charCodeAt(0);\n    }\n    else {\n        return false;\n    }\n}\nexports.isShortPattern = isShortPattern;\n/**\n * Faster than using a RegExp for default newline detection during lexing.\n */\nexports.LineTerminatorOptimizedTester = {\n    // implements /\\n|\\r\\n?/g.test\n    test: function (text) {\n        var len = text.length;\n        for (var i = this.lastIndex; i < len; i++) {\n            var c = text.charCodeAt(i);\n            if (c === 10) {\n                this.lastIndex = i + 1;\n                return true;\n            }\n            else if (c === 13) {\n                if (text.charCodeAt(i + 1) === 10) {\n                    this.lastIndex = i + 2;\n                }\n                else {\n                    this.lastIndex = i + 1;\n                }\n                return true;\n            }\n        }\n        return false;\n    },\n    lastIndex: 0\n};\nfunction checkLineBreaksIssues(tokType, lineTerminatorCharCodes) {\n    if ((0, has_1.default)(tokType, \"LINE_BREAKS\")) {\n        // if the user explicitly declared the line_breaks option we will respect their choice\n        // and assume it is correct.\n        return false;\n    }\n    else {\n        /* istanbul ignore else */\n        if ((0, isRegExp_1.default)(tokType.PATTERN)) {\n            try {\n                // TODO: why is the casting suddenly needed?\n                (0, reg_exp_1.canMatchCharCode)(lineTerminatorCharCodes, tokType.PATTERN);\n            }\n            catch (e) {\n                /* istanbul ignore next - to test this we would have to mock <canMatchCharCode> to throw an error */\n                return {\n                    issue: lexer_public_1.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,\n                    errMsg: e.message\n                };\n            }\n            return false;\n        }\n        else if ((0, isString_1.default)(tokType.PATTERN)) {\n            // string literal patterns can always be analyzed to detect line terminator usage\n            return false;\n        }\n        else if (isCustomPattern(tokType)) {\n            // custom token types\n            return { issue: lexer_public_1.LexerDefinitionErrorType.CUSTOM_LINE_BREAK };\n        }\n        else {\n            throw Error(\"non exhaustive match\");\n        }\n    }\n}\nfunction buildLineBreakIssueMessage(tokType, details) {\n    /* istanbul ignore else */\n    if (details.issue === lexer_public_1.LexerDefinitionErrorType.IDENTIFY_TERMINATOR) {\n        return (\"Warning: unable to identify line terminator usage in pattern.\\n\" +\n            \"\\tThe problem is in the <\".concat(tokType.name, \"> Token Type\\n\") +\n            \"\\t Root cause: \".concat(details.errMsg, \".\\n\") +\n            \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR\");\n    }\n    else if (details.issue === lexer_public_1.LexerDefinitionErrorType.CUSTOM_LINE_BREAK) {\n        return (\"Warning: A Custom Token Pattern should specify the <line_breaks> option.\\n\" +\n            \"\\tThe problem is in the <\".concat(tokType.name, \"> Token Type\\n\") +\n            \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK\");\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.buildLineBreakIssueMessage = buildLineBreakIssueMessage;\nfunction getCharCodes(charsOrCodes) {\n    var charCodes = (0, map_1.default)(charsOrCodes, function (numOrString) {\n        if ((0, isString_1.default)(numOrString)) {\n            return numOrString.charCodeAt(0);\n        }\n        else {\n            return numOrString;\n        }\n    });\n    return charCodes;\n}\nfunction addToMapOfArrays(map, key, value) {\n    if (map[key] === undefined) {\n        map[key] = [value];\n    }\n    else {\n        map[key].push(value);\n    }\n}\nexports.minOptimizationVal = 256;\n/**\n * We are mapping charCode above ASCI (256) into buckets each in the size of 256.\n * This is because ASCI are the most common start chars so each one of those will get its own\n * possible token configs vector.\n *\n * Tokens starting with charCodes \"above\" ASCI are uncommon, so we can \"afford\"\n * to place these into buckets of possible token configs, What we gain from\n * this is avoiding the case of creating an optimization 'charCodeToPatternIdxToConfig'\n * which would contain 10,000+ arrays of small size (e.g unicode Identifiers scenario).\n * Our 'charCodeToPatternIdxToConfig' max size will now be:\n * 256 + (2^16 / 2^8) - 1 === 511\n *\n * note the hack for fast division integer part extraction\n * See: https://stackoverflow.com/a/4228528\n */\nvar charCodeToOptimizedIdxMap = [];\nfunction charCodeToOptimizedIndex(charCode) {\n    return charCode < exports.minOptimizationVal\n        ? charCode\n        : charCodeToOptimizedIdxMap[charCode];\n}\nexports.charCodeToOptimizedIndex = charCodeToOptimizedIndex;\n/**\n * This is a compromise between cold start / hot running performance\n * Creating this array takes ~3ms on a modern machine,\n * But if we perform the computation at runtime as needed the CSS Lexer benchmark\n * performance degrades by ~10%\n *\n * TODO: Perhaps it should be lazy initialized only if a charCode > 255 is used.\n */\nfunction initCharCodeToOptimizedIndexMap() {\n    if ((0, isEmpty_1.default)(charCodeToOptimizedIdxMap)) {\n        charCodeToOptimizedIdxMap = new Array(65536);\n        for (var i = 0; i < 65536; i++) {\n            charCodeToOptimizedIdxMap[i] = i > 255 ? 255 + ~~(i / 255) : i;\n        }\n    }\n}\n//# sourceMappingURL=lexer.js.map","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","/**\n * Simple event dispatcher with pause and resume.\n *\n */\nexport class EventDispatcher {\n    private _listeners : Record<string, any> = {};\n    private _isEventPaused : boolean = false;\n\n    public listen (type : string, listener : Function) {\n        if (this._listeners === undefined) this._listeners = {};\n\n        var listeners = this._listeners;\n        if (listeners[type] === undefined) {\n            listeners[type] = [];\n        }\n\n        if (listeners[type].indexOf(listener) === - 1) {\n            listeners[type].push(listener);\n        }\n    }\n\n    public addListener (type : string, listener : Function) {\n        this.listen(type, listener);\n    }\n\n    public hasListener (type : string, listener : Function) {\n        if (this._listeners === undefined) return false;\n\n        return this._listeners[type] !== undefined && this._listeners[type].indexOf(listener) !== - 1;\n    }\n\n    public removeListener (type : string, listener : Function) {\n        if (this._listeners === undefined) return;\n\n        var listenerArray = this._listeners[type];\n\n        if (listenerArray !== undefined) {\n            var index = listenerArray.indexOf(listener);\n\n            if (index !== - 1) {\n                listenerArray.splice(index, 1);\n            }\n        }\n    }\n\n    public dispatch (eventName : string, eventData : Record<string, any> = {}) {\n        if (this._isEventPaused) return;\n\n        if (this._listeners === undefined) return;\n\n        var listeners = this._listeners[eventName];\n\n        if (listeners !== undefined) {\n            eventData.target = this;\n\n            var listeners = listeners.slice(0);\n\n            for (var i = 0, l = listeners.length; i < l; i ++) {\n                listeners[i].call(this, eventData);\n            }\n        }\n    }\n\n    public pauseListener () {\n        this._isEventPaused = true;\n    }\n\n    public resumeListener () {\n        this._isEventPaused = false;\n    }\n}\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LLkLookaheadStrategy = void 0;\nvar flatMap_1 = __importDefault(require(\"lodash/flatMap\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar errors_public_1 = require(\"../errors_public\");\nvar parser_1 = require(\"../parser/parser\");\nvar checks_1 = require(\"./checks\");\nvar lookahead_1 = require(\"./lookahead\");\nvar LLkLookaheadStrategy = /** @class */ (function () {\n    function LLkLookaheadStrategy(options) {\n        var _a;\n        this.maxLookahead =\n            (_a = options === null || options === void 0 ? void 0 : options.maxLookahead) !== null && _a !== void 0 ? _a : parser_1.DEFAULT_PARSER_CONFIG.maxLookahead;\n    }\n    LLkLookaheadStrategy.prototype.validate = function (options) {\n        var leftRecursionErrors = this.validateNoLeftRecursion(options.rules);\n        if ((0, isEmpty_1.default)(leftRecursionErrors)) {\n            var emptyAltErrors = this.validateEmptyOrAlternatives(options.rules);\n            var ambiguousAltsErrors = this.validateAmbiguousAlternationAlternatives(options.rules, this.maxLookahead);\n            var emptyRepetitionErrors = this.validateSomeNonEmptyLookaheadPath(options.rules, this.maxLookahead);\n            var allErrors = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], leftRecursionErrors, true), emptyAltErrors, true), ambiguousAltsErrors, true), emptyRepetitionErrors, true);\n            return allErrors;\n        }\n        return leftRecursionErrors;\n    };\n    LLkLookaheadStrategy.prototype.validateNoLeftRecursion = function (rules) {\n        return (0, flatMap_1.default)(rules, function (currTopRule) {\n            return (0, checks_1.validateNoLeftRecursion)(currTopRule, currTopRule, errors_public_1.defaultGrammarValidatorErrorProvider);\n        });\n    };\n    LLkLookaheadStrategy.prototype.validateEmptyOrAlternatives = function (rules) {\n        return (0, flatMap_1.default)(rules, function (currTopRule) {\n            return (0, checks_1.validateEmptyOrAlternative)(currTopRule, errors_public_1.defaultGrammarValidatorErrorProvider);\n        });\n    };\n    LLkLookaheadStrategy.prototype.validateAmbiguousAlternationAlternatives = function (rules, maxLookahead) {\n        return (0, flatMap_1.default)(rules, function (currTopRule) {\n            return (0, checks_1.validateAmbiguousAlternationAlternatives)(currTopRule, maxLookahead, errors_public_1.defaultGrammarValidatorErrorProvider);\n        });\n    };\n    LLkLookaheadStrategy.prototype.validateSomeNonEmptyLookaheadPath = function (rules, maxLookahead) {\n        return (0, checks_1.validateSomeNonEmptyLookaheadPath)(rules, maxLookahead, errors_public_1.defaultGrammarValidatorErrorProvider);\n    };\n    LLkLookaheadStrategy.prototype.buildLookaheadForAlternation = function (options) {\n        return (0, lookahead_1.buildLookaheadFuncForOr)(options.prodOccurrence, options.rule, options.maxLookahead, options.hasPredicates, options.dynamicTokensEnabled, lookahead_1.buildAlternativesLookAheadFunc);\n    };\n    LLkLookaheadStrategy.prototype.buildLookaheadForOptional = function (options) {\n        return (0, lookahead_1.buildLookaheadFuncForOptionalProd)(options.prodOccurrence, options.rule, options.maxLookahead, options.dynamicTokensEnabled, (0, lookahead_1.getProdType)(options.prodType), lookahead_1.buildSingleAlternativeLookaheadFunction);\n    };\n    return LLkLookaheadStrategy;\n}());\nexports.LLkLookaheadStrategy = LLkLookaheadStrategy;\n//# sourceMappingURL=llk_lookahead.js.map","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var createCaseFirst = require('./_createCaseFirst');\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nmodule.exports = upperFirst;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createSyntaxDiagramsCode = void 0;\nvar version_1 = require(\"../version\");\nfunction createSyntaxDiagramsCode(grammar, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.resourceBase, resourceBase = _c === void 0 ? \"https://unpkg.com/chevrotain@\".concat(version_1.VERSION, \"/diagrams/\") : _c, _d = _b.css, css = _d === void 0 ? \"https://unpkg.com/chevrotain@\".concat(version_1.VERSION, \"/diagrams/diagrams.css\") : _d;\n    var header = \"\\n<!-- This is a generated file -->\\n<!DOCTYPE html>\\n<meta charset=\\\"utf-8\\\">\\n<style>\\n  body {\\n    background-color: hsl(30, 20%, 95%)\\n  }\\n</style>\\n\\n\";\n    var cssHtml = \"\\n<link rel='stylesheet' href='\".concat(css, \"'>\\n\");\n    var scripts = \"\\n<script src='\".concat(resourceBase, \"vendor/railroad-diagrams.js'></script>\\n<script src='\").concat(resourceBase, \"src/diagrams_builder.js'></script>\\n<script src='\").concat(resourceBase, \"src/diagrams_behavior.js'></script>\\n<script src='\").concat(resourceBase, \"src/main.js'></script>\\n\");\n    var diagramsDiv = \"\\n<div id=\\\"diagrams\\\" align=\\\"center\\\"></div>    \\n\";\n    var serializedGrammar = \"\\n<script>\\n    window.serializedGrammar = \".concat(JSON.stringify(grammar, null, \"  \"), \";\\n</script>\\n\");\n    var initLogic = \"\\n<script>\\n    var diagramsDiv = document.getElementById(\\\"diagrams\\\");\\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\\n</script>\\n\";\n    return (header + cssHtml + scripts + diagramsDiv + serializedGrammar + initLogic);\n}\nexports.createSyntaxDiagramsCode = createSyntaxDiagramsCode;\n//# sourceMappingURL=render_public.js.map","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildModel = void 0;\nvar gast_1 = require(\"@chevrotain/gast\");\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar some_1 = __importDefault(require(\"lodash/some\"));\nvar groupBy_1 = __importDefault(require(\"lodash/groupBy\"));\nvar assign_1 = __importDefault(require(\"lodash/assign\"));\nfunction buildModel(productions) {\n    var generator = new CstNodeDefinitionGenerator();\n    var allRules = (0, values_1.default)(productions);\n    return (0, map_1.default)(allRules, function (rule) { return generator.visitRule(rule); });\n}\nexports.buildModel = buildModel;\nvar CstNodeDefinitionGenerator = /** @class */ (function (_super) {\n    __extends(CstNodeDefinitionGenerator, _super);\n    function CstNodeDefinitionGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CstNodeDefinitionGenerator.prototype.visitRule = function (node) {\n        var rawElements = this.visitEach(node.definition);\n        var grouped = (0, groupBy_1.default)(rawElements, function (el) { return el.propertyName; });\n        var properties = (0, map_1.default)(grouped, function (group, propertyName) {\n            var allNullable = !(0, some_1.default)(group, function (el) { return !el.canBeNull; });\n            // In an alternation with a label a property name can have\n            // multiple types.\n            var propertyType = group[0].type;\n            if (group.length > 1) {\n                propertyType = (0, map_1.default)(group, function (g) { return g.type; });\n            }\n            return {\n                name: propertyName,\n                type: propertyType,\n                optional: allNullable\n            };\n        });\n        return {\n            name: node.name,\n            properties: properties\n        };\n    };\n    CstNodeDefinitionGenerator.prototype.visitAlternative = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, { canBeNull: true });\n    };\n    CstNodeDefinitionGenerator.prototype.visitOption = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, { canBeNull: true });\n    };\n    CstNodeDefinitionGenerator.prototype.visitRepetition = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, { canBeNull: true });\n    };\n    CstNodeDefinitionGenerator.prototype.visitRepetitionMandatory = function (node) {\n        return this.visitEach(node.definition);\n    };\n    CstNodeDefinitionGenerator.prototype.visitRepetitionMandatoryWithSeparator = function (node) {\n        return this.visitEach(node.definition).concat({\n            propertyName: node.separator.name,\n            canBeNull: true,\n            type: getType(node.separator)\n        });\n    };\n    CstNodeDefinitionGenerator.prototype.visitRepetitionWithSeparator = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, {\n            canBeNull: true\n        }).concat({\n            propertyName: node.separator.name,\n            canBeNull: true,\n            type: getType(node.separator)\n        });\n    };\n    CstNodeDefinitionGenerator.prototype.visitAlternation = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, { canBeNull: true });\n    };\n    CstNodeDefinitionGenerator.prototype.visitTerminal = function (node) {\n        return [\n            {\n                propertyName: node.label || node.terminalType.name,\n                canBeNull: false,\n                type: getType(node)\n            }\n        ];\n    };\n    CstNodeDefinitionGenerator.prototype.visitNonTerminal = function (node) {\n        return [\n            {\n                propertyName: node.label || node.nonTerminalName,\n                canBeNull: false,\n                type: getType(node)\n            }\n        ];\n    };\n    CstNodeDefinitionGenerator.prototype.visitEachAndOverrideWith = function (definition, override) {\n        return (0, map_1.default)(this.visitEach(definition), function (definition) { return (0, assign_1.default)({}, definition, override); });\n    };\n    CstNodeDefinitionGenerator.prototype.visitEach = function (definition) {\n        var _this = this;\n        return (0, flatten_1.default)((0, map_1.default)(definition, function (definition) { return _this.visit(definition); }));\n    };\n    return CstNodeDefinitionGenerator;\n}(gast_1.GAstVisitor));\nfunction getType(production) {\n    if (production instanceof gast_1.NonTerminal) {\n        return {\n            kind: \"rule\",\n            name: production.referencedRule.name\n        };\n    }\n    return { kind: \"token\" };\n}\n//# sourceMappingURL=model.js.map","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","module.exports = require('./head');\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildInProdFollowPrefix = exports.buildBetweenProdsFollowPrefix = exports.computeAllProdsFollows = exports.ResyncFollowsWalker = void 0;\nvar rest_1 = require(\"./rest\");\nvar first_1 = require(\"./first\");\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar assign_1 = __importDefault(require(\"lodash/assign\"));\nvar constants_1 = require(\"../constants\");\nvar gast_1 = require(\"@chevrotain/gast\");\n// This ResyncFollowsWalker computes all of the follows required for RESYNC\n// (skipping reference production).\nvar ResyncFollowsWalker = /** @class */ (function (_super) {\n    __extends(ResyncFollowsWalker, _super);\n    function ResyncFollowsWalker(topProd) {\n        var _this = _super.call(this) || this;\n        _this.topProd = topProd;\n        _this.follows = {};\n        return _this;\n    }\n    ResyncFollowsWalker.prototype.startWalking = function () {\n        this.walk(this.topProd);\n        return this.follows;\n    };\n    ResyncFollowsWalker.prototype.walkTerminal = function (terminal, currRest, prevRest) {\n        // do nothing! just like in the public sector after 13:00\n    };\n    ResyncFollowsWalker.prototype.walkProdRef = function (refProd, currRest, prevRest) {\n        var followName = buildBetweenProdsFollowPrefix(refProd.referencedRule, refProd.idx) +\n            this.topProd.name;\n        var fullRest = currRest.concat(prevRest);\n        var restProd = new gast_1.Alternative({ definition: fullRest });\n        var t_in_topProd_follows = (0, first_1.first)(restProd);\n        this.follows[followName] = t_in_topProd_follows;\n    };\n    return ResyncFollowsWalker;\n}(rest_1.RestWalker));\nexports.ResyncFollowsWalker = ResyncFollowsWalker;\nfunction computeAllProdsFollows(topProductions) {\n    var reSyncFollows = {};\n    (0, forEach_1.default)(topProductions, function (topProd) {\n        var currRefsFollow = new ResyncFollowsWalker(topProd).startWalking();\n        (0, assign_1.default)(reSyncFollows, currRefsFollow);\n    });\n    return reSyncFollows;\n}\nexports.computeAllProdsFollows = computeAllProdsFollows;\nfunction buildBetweenProdsFollowPrefix(inner, occurenceInParent) {\n    return inner.name + occurenceInParent + constants_1.IN;\n}\nexports.buildBetweenProdsFollowPrefix = buildBetweenProdsFollowPrefix;\nfunction buildInProdFollowPrefix(terminal) {\n    var terminalName = terminal.terminalType.name;\n    return terminalName + terminal.idx + constants_1.IN;\n}\nexports.buildInProdFollowPrefix = buildInProdFollowPrefix;\n//# sourceMappingURL=follow.js.map","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canMatchCharCode = exports.firstCharOptimizedIndices = exports.getOptimizedStartCodesIndices = exports.failedOptimizationPrefixMsg = void 0;\nvar regexp_to_ast_1 = require(\"regexp-to-ast\");\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar every_1 = __importDefault(require(\"lodash/every\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar find_1 = __importDefault(require(\"lodash/find\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar reg_exp_parser_1 = require(\"./reg_exp_parser\");\nvar lexer_1 = require(\"./lexer\");\nvar complementErrorMessage = \"Complement Sets are not supported for first char optimization\";\nexports.failedOptimizationPrefixMsg = 'Unable to use \"first char\" lexer optimizations:\\n';\nfunction getOptimizedStartCodesIndices(regExp, ensureOptimizations) {\n    if (ensureOptimizations === void 0) { ensureOptimizations = false; }\n    try {\n        var ast = (0, reg_exp_parser_1.getRegExpAst)(regExp);\n        var firstChars = firstCharOptimizedIndices(ast.value, {}, ast.flags.ignoreCase);\n        return firstChars;\n    }\n    catch (e) {\n        /* istanbul ignore next */\n        // Testing this relies on the regexp-to-ast library having a bug... */\n        // TODO: only the else branch needs to be ignored, try to fix with newer prettier / tsc\n        if (e.message === complementErrorMessage) {\n            if (ensureOptimizations) {\n                (0, utils_1.PRINT_WARNING)(\"\".concat(exports.failedOptimizationPrefixMsg) +\n                    \"\\tUnable to optimize: < \".concat(regExp.toString(), \" >\\n\") +\n                    \"\\tComplement Sets cannot be automatically optimized.\\n\" +\n                    \"\\tThis will disable the lexer's first char optimizations.\\n\" +\n                    \"\\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.\");\n            }\n        }\n        else {\n            var msgSuffix = \"\";\n            if (ensureOptimizations) {\n                msgSuffix =\n                    \"\\n\\tThis will disable the lexer's first char optimizations.\\n\" +\n                        \"\\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.\";\n            }\n            (0, utils_1.PRINT_ERROR)(\"\".concat(exports.failedOptimizationPrefixMsg, \"\\n\") +\n                \"\\tFailed parsing: < \".concat(regExp.toString(), \" >\\n\") +\n                \"\\tUsing the regexp-to-ast library version: \".concat(regexp_to_ast_1.VERSION, \"\\n\") +\n                \"\\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues\" +\n                msgSuffix);\n        }\n    }\n    return [];\n}\nexports.getOptimizedStartCodesIndices = getOptimizedStartCodesIndices;\nfunction firstCharOptimizedIndices(ast, result, ignoreCase) {\n    switch (ast.type) {\n        case \"Disjunction\":\n            for (var i = 0; i < ast.value.length; i++) {\n                firstCharOptimizedIndices(ast.value[i], result, ignoreCase);\n            }\n            break;\n        case \"Alternative\":\n            var terms = ast.value;\n            for (var i = 0; i < terms.length; i++) {\n                var term = terms[i];\n                // skip terms that cannot effect the first char results\n                switch (term.type) {\n                    case \"EndAnchor\":\n                    // A group back reference cannot affect potential starting char.\n                    // because if a back reference is the first production than automatically\n                    // the group being referenced has had to come BEFORE so its codes have already been added\n                    case \"GroupBackReference\":\n                    // assertions do not affect potential starting codes\n                    case \"Lookahead\":\n                    case \"NegativeLookahead\":\n                    case \"StartAnchor\":\n                    case \"WordBoundary\":\n                    case \"NonWordBoundary\":\n                        continue;\n                }\n                var atom = term;\n                switch (atom.type) {\n                    case \"Character\":\n                        addOptimizedIdxToResult(atom.value, result, ignoreCase);\n                        break;\n                    case \"Set\":\n                        if (atom.complement === true) {\n                            throw Error(complementErrorMessage);\n                        }\n                        (0, forEach_1.default)(atom.value, function (code) {\n                            if (typeof code === \"number\") {\n                                addOptimizedIdxToResult(code, result, ignoreCase);\n                            }\n                            else {\n                                // range\n                                var range = code;\n                                // cannot optimize when ignoreCase is\n                                if (ignoreCase === true) {\n                                    for (var rangeCode = range.from; rangeCode <= range.to; rangeCode++) {\n                                        addOptimizedIdxToResult(rangeCode, result, ignoreCase);\n                                    }\n                                }\n                                // Optimization (2 orders of magnitude less work for very large ranges)\n                                else {\n                                    // handle unoptimized values\n                                    for (var rangeCode = range.from; rangeCode <= range.to && rangeCode < lexer_1.minOptimizationVal; rangeCode++) {\n                                        addOptimizedIdxToResult(rangeCode, result, ignoreCase);\n                                    }\n                                    // Less common charCode where we optimize for faster init time, by using larger \"buckets\"\n                                    if (range.to >= lexer_1.minOptimizationVal) {\n                                        var minUnOptVal = range.from >= lexer_1.minOptimizationVal\n                                            ? range.from\n                                            : lexer_1.minOptimizationVal;\n                                        var maxUnOptVal = range.to;\n                                        var minOptIdx = (0, lexer_1.charCodeToOptimizedIndex)(minUnOptVal);\n                                        var maxOptIdx = (0, lexer_1.charCodeToOptimizedIndex)(maxUnOptVal);\n                                        for (var currOptIdx = minOptIdx; currOptIdx <= maxOptIdx; currOptIdx++) {\n                                            result[currOptIdx] = currOptIdx;\n                                        }\n                                    }\n                                }\n                            }\n                        });\n                        break;\n                    case \"Group\":\n                        firstCharOptimizedIndices(atom.value, result, ignoreCase);\n                        break;\n                    /* istanbul ignore next */\n                    default:\n                        throw Error(\"Non Exhaustive Match\");\n                }\n                // reached a mandatory production, no more **start** codes can be found on this alternative\n                var isOptionalQuantifier = atom.quantifier !== undefined && atom.quantifier.atLeast === 0;\n                if (\n                // A group may be optional due to empty contents /(?:)/\n                // or if everything inside it is optional /((a)?)/\n                (atom.type === \"Group\" && isWholeOptional(atom) === false) ||\n                    // If this term is not a group it may only be optional if it has an optional quantifier\n                    (atom.type !== \"Group\" && isOptionalQuantifier === false)) {\n                    break;\n                }\n            }\n            break;\n        /* istanbul ignore next */\n        default:\n            throw Error(\"non exhaustive match!\");\n    }\n    // console.log(Object.keys(result).length)\n    return (0, values_1.default)(result);\n}\nexports.firstCharOptimizedIndices = firstCharOptimizedIndices;\nfunction addOptimizedIdxToResult(code, result, ignoreCase) {\n    var optimizedCharIdx = (0, lexer_1.charCodeToOptimizedIndex)(code);\n    result[optimizedCharIdx] = optimizedCharIdx;\n    if (ignoreCase === true) {\n        handleIgnoreCase(code, result);\n    }\n}\nfunction handleIgnoreCase(code, result) {\n    var char = String.fromCharCode(code);\n    var upperChar = char.toUpperCase();\n    /* istanbul ignore else */\n    if (upperChar !== char) {\n        var optimizedCharIdx = (0, lexer_1.charCodeToOptimizedIndex)(upperChar.charCodeAt(0));\n        result[optimizedCharIdx] = optimizedCharIdx;\n    }\n    else {\n        var lowerChar = char.toLowerCase();\n        if (lowerChar !== char) {\n            var optimizedCharIdx = (0, lexer_1.charCodeToOptimizedIndex)(lowerChar.charCodeAt(0));\n            result[optimizedCharIdx] = optimizedCharIdx;\n        }\n    }\n}\nfunction findCode(setNode, targetCharCodes) {\n    return (0, find_1.default)(setNode.value, function (codeOrRange) {\n        if (typeof codeOrRange === \"number\") {\n            return (0, includes_1.default)(targetCharCodes, codeOrRange);\n        }\n        else {\n            // range\n            var range_1 = codeOrRange;\n            return ((0, find_1.default)(targetCharCodes, function (targetCode) { return range_1.from <= targetCode && targetCode <= range_1.to; }) !== undefined);\n        }\n    });\n}\nfunction isWholeOptional(ast) {\n    var quantifier = ast.quantifier;\n    if (quantifier && quantifier.atLeast === 0) {\n        return true;\n    }\n    if (!ast.value) {\n        return false;\n    }\n    return (0, isArray_1.default)(ast.value)\n        ? (0, every_1.default)(ast.value, isWholeOptional)\n        : isWholeOptional(ast.value);\n}\nvar CharCodeFinder = /** @class */ (function (_super) {\n    __extends(CharCodeFinder, _super);\n    function CharCodeFinder(targetCharCodes) {\n        var _this = _super.call(this) || this;\n        _this.targetCharCodes = targetCharCodes;\n        _this.found = false;\n        return _this;\n    }\n    CharCodeFinder.prototype.visitChildren = function (node) {\n        // No need to keep looking...\n        if (this.found === true) {\n            return;\n        }\n        // switch lookaheads as they do not actually consume any characters thus\n        // finding a charCode at lookahead context does not mean that regexp can actually contain it in a match.\n        switch (node.type) {\n            case \"Lookahead\":\n                this.visitLookahead(node);\n                return;\n            case \"NegativeLookahead\":\n                this.visitNegativeLookahead(node);\n                return;\n        }\n        _super.prototype.visitChildren.call(this, node);\n    };\n    CharCodeFinder.prototype.visitCharacter = function (node) {\n        if ((0, includes_1.default)(this.targetCharCodes, node.value)) {\n            this.found = true;\n        }\n    };\n    CharCodeFinder.prototype.visitSet = function (node) {\n        if (node.complement) {\n            if (findCode(node, this.targetCharCodes) === undefined) {\n                this.found = true;\n            }\n        }\n        else {\n            if (findCode(node, this.targetCharCodes) !== undefined) {\n                this.found = true;\n            }\n        }\n    };\n    return CharCodeFinder;\n}(regexp_to_ast_1.BaseRegExpVisitor));\nfunction canMatchCharCode(charCodes, pattern) {\n    if (pattern instanceof RegExp) {\n        var ast = (0, reg_exp_parser_1.getRegExpAst)(pattern);\n        var charCodeFinder = new CharCodeFinder(charCodes);\n        charCodeFinder.visit(ast);\n        return charCodeFinder.found;\n    }\n    else {\n        return ((0, find_1.default)(pattern, function (char) {\n            return (0, includes_1.default)(charCodes, char.charCodeAt(0));\n        }) !== undefined);\n    }\n}\nexports.canMatchCharCode = canMatchCharCode;\n//# sourceMappingURL=reg_exp.js.map","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nmodule.exports = difference;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toFastProperties = void 0;\n// based on: https://github.com/petkaantonov/bluebird/blob/b97c0d2d487e8c5076e8bd897e0dcd4622d31846/src/util.js#L201-L216\nfunction toFastProperties(toBecomeFast) {\n    function FakeConstructor() { }\n    // If our object is used as a constructor it would receive\n    FakeConstructor.prototype = toBecomeFast;\n    var fakeInstance = new FakeConstructor();\n    function fakeAccess() {\n        return typeof fakeInstance.bar;\n    }\n    // help V8 understand this is a \"real\" prototype by actually using\n    // the fake instance.\n    fakeAccess();\n    fakeAccess();\n    // Always true condition to suppress the Firefox warning of unreachable\n    // code after a return statement.\n    if (1)\n        return toBecomeFast;\n    // Eval prevents optimization of this method (even though this is dead code)\n    /* istanbul ignore next */\n    // tslint:disable-next-line\n    eval(toBecomeFast);\n}\nexports.toFastProperties = toFastProperties;\n//# sourceMappingURL=to-fast-properties.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EmbeddedActionsParser = exports.CstParser = exports.Parser = exports.EMPTY_ALT = exports.ParserDefinitionErrorType = exports.DEFAULT_RULE_CONFIG = exports.DEFAULT_PARSER_CONFIG = exports.END_OF_FILE = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar follow_1 = require(\"../grammar/follow\");\nvar tokens_public_1 = require(\"../../scan/tokens_public\");\nvar errors_public_1 = require(\"../errors_public\");\nvar gast_resolver_public_1 = require(\"../grammar/gast/gast_resolver_public\");\nvar recoverable_1 = require(\"./traits/recoverable\");\nvar looksahead_1 = require(\"./traits/looksahead\");\nvar tree_builder_1 = require(\"./traits/tree_builder\");\nvar lexer_adapter_1 = require(\"./traits/lexer_adapter\");\nvar recognizer_api_1 = require(\"./traits/recognizer_api\");\nvar recognizer_engine_1 = require(\"./traits/recognizer_engine\");\nvar error_handler_1 = require(\"./traits/error_handler\");\nvar context_assist_1 = require(\"./traits/context_assist\");\nvar gast_recorder_1 = require(\"./traits/gast_recorder\");\nvar perf_tracer_1 = require(\"./traits/perf_tracer\");\nvar apply_mixins_1 = require(\"./utils/apply_mixins\");\nvar checks_1 = require(\"../grammar/checks\");\nexports.END_OF_FILE = (0, tokens_public_1.createTokenInstance)(tokens_public_1.EOF, \"\", NaN, NaN, NaN, NaN, NaN, NaN);\nObject.freeze(exports.END_OF_FILE);\nexports.DEFAULT_PARSER_CONFIG = Object.freeze({\n    recoveryEnabled: false,\n    maxLookahead: 3,\n    dynamicTokensEnabled: false,\n    outputCst: true,\n    errorMessageProvider: errors_public_1.defaultParserErrorProvider,\n    nodeLocationTracking: \"none\",\n    traceInitPerf: false,\n    skipValidations: false\n});\nexports.DEFAULT_RULE_CONFIG = Object.freeze({\n    recoveryValueFunc: function () { return undefined; },\n    resyncEnabled: true\n});\nvar ParserDefinitionErrorType;\n(function (ParserDefinitionErrorType) {\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"INVALID_RULE_NAME\"] = 0] = \"INVALID_RULE_NAME\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"DUPLICATE_RULE_NAME\"] = 1] = \"DUPLICATE_RULE_NAME\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"INVALID_RULE_OVERRIDE\"] = 2] = \"INVALID_RULE_OVERRIDE\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"DUPLICATE_PRODUCTIONS\"] = 3] = \"DUPLICATE_PRODUCTIONS\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"UNRESOLVED_SUBRULE_REF\"] = 4] = \"UNRESOLVED_SUBRULE_REF\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"LEFT_RECURSION\"] = 5] = \"LEFT_RECURSION\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"NONE_LAST_EMPTY_ALT\"] = 6] = \"NONE_LAST_EMPTY_ALT\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"AMBIGUOUS_ALTS\"] = 7] = \"AMBIGUOUS_ALTS\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"CONFLICT_TOKENS_RULES_NAMESPACE\"] = 8] = \"CONFLICT_TOKENS_RULES_NAMESPACE\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"INVALID_TOKEN_NAME\"] = 9] = \"INVALID_TOKEN_NAME\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"NO_NON_EMPTY_LOOKAHEAD\"] = 10] = \"NO_NON_EMPTY_LOOKAHEAD\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"AMBIGUOUS_PREFIX_ALTS\"] = 11] = \"AMBIGUOUS_PREFIX_ALTS\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"TOO_MANY_ALTS\"] = 12] = \"TOO_MANY_ALTS\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"CUSTOM_LOOKAHEAD_VALIDATION\"] = 13] = \"CUSTOM_LOOKAHEAD_VALIDATION\";\n})(ParserDefinitionErrorType = exports.ParserDefinitionErrorType || (exports.ParserDefinitionErrorType = {}));\nfunction EMPTY_ALT(value) {\n    if (value === void 0) { value = undefined; }\n    return function () {\n        return value;\n    };\n}\nexports.EMPTY_ALT = EMPTY_ALT;\nvar Parser = /** @class */ (function () {\n    function Parser(tokenVocabulary, config) {\n        this.definitionErrors = [];\n        this.selfAnalysisDone = false;\n        var that = this;\n        that.initErrorHandler(config);\n        that.initLexerAdapter();\n        that.initLooksAhead(config);\n        that.initRecognizerEngine(tokenVocabulary, config);\n        that.initRecoverable(config);\n        that.initTreeBuilder(config);\n        that.initContentAssist();\n        that.initGastRecorder(config);\n        that.initPerformanceTracer(config);\n        if ((0, has_1.default)(config, \"ignoredIssues\")) {\n            throw new Error(\"The <ignoredIssues> IParserConfig property has been deprecated.\\n\\t\" +\n                \"Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\\n\\t\" +\n                \"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\\n\\t\" +\n                \"For further details.\");\n        }\n        this.skipValidations = (0, has_1.default)(config, \"skipValidations\")\n            ? config.skipValidations // casting assumes the end user passing the correct type\n            : exports.DEFAULT_PARSER_CONFIG.skipValidations;\n    }\n    /**\n     *  @deprecated use the **instance** method with the same name instead\n     */\n    Parser.performSelfAnalysis = function (parserInstance) {\n        throw Error(\"The **static** `performSelfAnalysis` method has been deprecated.\" +\n            \"\\t\\nUse the **instance** method with the same name instead.\");\n    };\n    Parser.prototype.performSelfAnalysis = function () {\n        var _this = this;\n        this.TRACE_INIT(\"performSelfAnalysis\", function () {\n            var defErrorsMsgs;\n            _this.selfAnalysisDone = true;\n            var className = _this.className;\n            _this.TRACE_INIT(\"toFastProps\", function () {\n                // Without this voodoo magic the parser would be x3-x4 slower\n                // It seems it is better to invoke `toFastProperties` **before**\n                // Any manipulations of the `this` object done during the recording phase.\n                (0, utils_1.toFastProperties)(_this);\n            });\n            _this.TRACE_INIT(\"Grammar Recording\", function () {\n                try {\n                    _this.enableRecording();\n                    // Building the GAST\n                    (0, forEach_1.default)(_this.definedRulesNames, function (currRuleName) {\n                        var wrappedRule = _this[currRuleName];\n                        var originalGrammarAction = wrappedRule[\"originalGrammarAction\"];\n                        var recordedRuleGast;\n                        _this.TRACE_INIT(\"\".concat(currRuleName, \" Rule\"), function () {\n                            recordedRuleGast = _this.topLevelRuleRecord(currRuleName, originalGrammarAction);\n                        });\n                        _this.gastProductionsCache[currRuleName] = recordedRuleGast;\n                    });\n                }\n                finally {\n                    _this.disableRecording();\n                }\n            });\n            var resolverErrors = [];\n            _this.TRACE_INIT(\"Grammar Resolving\", function () {\n                resolverErrors = (0, gast_resolver_public_1.resolveGrammar)({\n                    rules: (0, values_1.default)(_this.gastProductionsCache)\n                });\n                _this.definitionErrors = _this.definitionErrors.concat(resolverErrors);\n            });\n            _this.TRACE_INIT(\"Grammar Validations\", function () {\n                // only perform additional grammar validations IFF no resolving errors have occurred.\n                // as unresolved grammar may lead to unhandled runtime exceptions in the follow up validations.\n                if ((0, isEmpty_1.default)(resolverErrors) && _this.skipValidations === false) {\n                    var validationErrors = (0, gast_resolver_public_1.validateGrammar)({\n                        rules: (0, values_1.default)(_this.gastProductionsCache),\n                        tokenTypes: (0, values_1.default)(_this.tokensMap),\n                        errMsgProvider: errors_public_1.defaultGrammarValidatorErrorProvider,\n                        grammarName: className\n                    });\n                    var lookaheadValidationErrors = (0, checks_1.validateLookahead)({\n                        lookaheadStrategy: _this.lookaheadStrategy,\n                        rules: (0, values_1.default)(_this.gastProductionsCache),\n                        tokenTypes: (0, values_1.default)(_this.tokensMap),\n                        grammarName: className\n                    });\n                    _this.definitionErrors = _this.definitionErrors.concat(validationErrors, lookaheadValidationErrors);\n                }\n            });\n            // this analysis may fail if the grammar is not perfectly valid\n            if ((0, isEmpty_1.default)(_this.definitionErrors)) {\n                // The results of these computations are not needed unless error recovery is enabled.\n                if (_this.recoveryEnabled) {\n                    _this.TRACE_INIT(\"computeAllProdsFollows\", function () {\n                        var allFollows = (0, follow_1.computeAllProdsFollows)((0, values_1.default)(_this.gastProductionsCache));\n                        _this.resyncFollows = allFollows;\n                    });\n                }\n                _this.TRACE_INIT(\"ComputeLookaheadFunctions\", function () {\n                    var _a, _b;\n                    (_b = (_a = _this.lookaheadStrategy).initialize) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                        rules: (0, values_1.default)(_this.gastProductionsCache)\n                    });\n                    _this.preComputeLookaheadFunctions((0, values_1.default)(_this.gastProductionsCache));\n                });\n            }\n            if (!Parser.DEFER_DEFINITION_ERRORS_HANDLING &&\n                !(0, isEmpty_1.default)(_this.definitionErrors)) {\n                defErrorsMsgs = (0, map_1.default)(_this.definitionErrors, function (defError) { return defError.message; });\n                throw new Error(\"Parser Definition Errors detected:\\n \".concat(defErrorsMsgs.join(\"\\n-------------------------------\\n\")));\n            }\n        });\n    };\n    // Set this flag to true if you don't want the Parser to throw error when problems in it's definition are detected.\n    // (normally during the parser's constructor).\n    // This is a design time flag, it will not affect the runtime error handling of the parser, just design time errors,\n    // for example: duplicate rule names, referencing an unresolved subrule, ect...\n    // This flag should not be enabled during normal usage, it is used in special situations, for example when\n    // needing to display the parser definition errors in some GUI(online playground).\n    Parser.DEFER_DEFINITION_ERRORS_HANDLING = false;\n    return Parser;\n}());\nexports.Parser = Parser;\n(0, apply_mixins_1.applyMixins)(Parser, [\n    recoverable_1.Recoverable,\n    looksahead_1.LooksAhead,\n    tree_builder_1.TreeBuilder,\n    lexer_adapter_1.LexerAdapter,\n    recognizer_engine_1.RecognizerEngine,\n    recognizer_api_1.RecognizerApi,\n    error_handler_1.ErrorHandler,\n    context_assist_1.ContentAssist,\n    gast_recorder_1.GastRecorder,\n    perf_tracer_1.PerformanceTracer\n]);\nvar CstParser = /** @class */ (function (_super) {\n    __extends(CstParser, _super);\n    function CstParser(tokenVocabulary, config) {\n        if (config === void 0) { config = exports.DEFAULT_PARSER_CONFIG; }\n        var configClone = (0, clone_1.default)(config);\n        configClone.outputCst = true;\n        return _super.call(this, tokenVocabulary, configClone) || this;\n    }\n    return CstParser;\n}(Parser));\nexports.CstParser = CstParser;\nvar EmbeddedActionsParser = /** @class */ (function (_super) {\n    __extends(EmbeddedActionsParser, _super);\n    function EmbeddedActionsParser(tokenVocabulary, config) {\n        if (config === void 0) { config = exports.DEFAULT_PARSER_CONFIG; }\n        var configClone = (0, clone_1.default)(config);\n        configClone.outputCst = false;\n        return _super.call(this, tokenVocabulary, configClone) || this;\n    }\n    return EmbeddedActionsParser;\n}(Parser));\nexports.EmbeddedActionsParser = EmbeddedActionsParser;\n//# sourceMappingURL=parser.js.map","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.genDts = void 0;\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar uniq_1 = __importDefault(require(\"lodash/uniq\"));\nvar upperFirst_1 = __importDefault(require(\"lodash/upperFirst\"));\nfunction genDts(model, options) {\n    var contentParts = [];\n    contentParts = contentParts.concat(\"import type { CstNode, ICstVisitor, IToken } from \\\"chevrotain\\\";\");\n    contentParts = contentParts.concat((0, flatten_1.default)((0, map_1.default)(model, function (node) { return genCstNodeTypes(node); })));\n    if (options.includeVisitorInterface) {\n        contentParts = contentParts.concat(genVisitor(options.visitorInterfaceName, model));\n    }\n    return contentParts.join(\"\\n\\n\") + \"\\n\";\n}\nexports.genDts = genDts;\nfunction genCstNodeTypes(node) {\n    var nodeCstInterface = genNodeInterface(node);\n    var nodeChildrenInterface = genNodeChildrenType(node);\n    return [nodeCstInterface, nodeChildrenInterface];\n}\nfunction genNodeInterface(node) {\n    var nodeInterfaceName = getNodeInterfaceName(node.name);\n    var childrenTypeName = getNodeChildrenTypeName(node.name);\n    return \"export interface \".concat(nodeInterfaceName, \" extends CstNode {\\n  name: \\\"\").concat(node.name, \"\\\";\\n  children: \").concat(childrenTypeName, \";\\n}\");\n}\nfunction genNodeChildrenType(node) {\n    var typeName = getNodeChildrenTypeName(node.name);\n    return \"export type \".concat(typeName, \" = {\\n  \").concat((0, map_1.default)(node.properties, function (property) { return genChildProperty(property); }).join(\"\\n  \"), \"\\n};\");\n}\nfunction genChildProperty(prop) {\n    var typeName = buildTypeString(prop.type);\n    return \"\".concat(prop.name).concat(prop.optional ? \"?\" : \"\", \": \").concat(typeName, \"[];\");\n}\nfunction genVisitor(name, nodes) {\n    return \"export interface \".concat(name, \"<IN, OUT> extends ICstVisitor<IN, OUT> {\\n  \").concat((0, map_1.default)(nodes, function (node) { return genVisitorFunction(node); }).join(\"\\n  \"), \"\\n}\");\n}\nfunction genVisitorFunction(node) {\n    var childrenTypeName = getNodeChildrenTypeName(node.name);\n    return \"\".concat(node.name, \"(children: \").concat(childrenTypeName, \", param?: IN): OUT;\");\n}\nfunction buildTypeString(type) {\n    if ((0, isArray_1.default)(type)) {\n        var typeNames = (0, uniq_1.default)((0, map_1.default)(type, function (t) { return getTypeString(t); }));\n        var typeString = (0, reduce_1.default)(typeNames, function (sum, t) { return sum + \" | \" + t; });\n        return \"(\" + typeString + \")\";\n    }\n    else {\n        return getTypeString(type);\n    }\n}\nfunction getTypeString(type) {\n    if (type.kind === \"token\") {\n        return \"IToken\";\n    }\n    return getNodeInterfaceName(type.name);\n}\nfunction getNodeInterfaceName(ruleName) {\n    return (0, upperFirst_1.default)(ruleName) + \"CstNode\";\n}\nfunction getNodeChildrenTypeName(ruleName) {\n    return (0, upperFirst_1.default)(ruleName) + \"CstChildren\";\n}\n//# sourceMappingURL=generate.js.map","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","(function (window, factory) {\n    if (typeof exports === 'object') {\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        define(factory);\n    } else {\n        window.jStat = factory();\n    }\n})(this, function () {\nvar jStat = (function(Math, undefined) {\n\n// For quick reference.\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\nvar toString = Object.prototype.toString;\n\n// Calculate correction for IEEE error\n// TODO: This calculation can be improved.\nfunction calcRdx(n, m) {\n  var val = n > m ? n : m;\n  return Math.pow(10,\n                  17 - ~~(Math.log(((val > 0) ? val : -val)) * Math.LOG10E));\n}\n\n\nvar isArray = Array.isArray || function isArray(arg) {\n  return toString.call(arg) === '[object Array]';\n};\n\n\nfunction isFunction(arg) {\n  return toString.call(arg) === '[object Function]';\n}\n\n\nfunction isNumber(num) {\n  return (typeof num === 'number') ? num - num === 0 : false;\n}\n\n\n// Converts the jStat matrix to vector.\nfunction toVector(arr) {\n  return concat.apply([], arr);\n}\n\n\n// The one and only jStat constructor.\nfunction jStat() {\n  return new jStat._init(arguments);\n}\n\n\n// TODO: Remove after all references in src files have been removed.\njStat.fn = jStat.prototype;\n\n\n// By separating the initializer from the constructor it's easier to handle\n// always returning a new instance whether \"new\" was used or not.\njStat._init = function _init(args) {\n  // If first argument is an array, must be vector or matrix.\n  if (isArray(args[0])) {\n    // Check if matrix.\n    if (isArray(args[0][0])) {\n      // See if a mapping function was also passed.\n      if (isFunction(args[1]))\n        args[0] = jStat.map(args[0], args[1]);\n      // Iterate over each is faster than this.push.apply(this, args[0].\n      for (var i = 0; i < args[0].length; i++)\n        this[i] = args[0][i];\n      this.length = args[0].length;\n\n    // Otherwise must be a vector.\n    } else {\n      this[0] = isFunction(args[1]) ? jStat.map(args[0], args[1]) : args[0];\n      this.length = 1;\n    }\n\n  // If first argument is number, assume creation of sequence.\n  } else if (isNumber(args[0])) {\n    this[0] = jStat.seq.apply(null, args);\n    this.length = 1;\n\n  // Handle case when jStat object is passed to jStat.\n  } else if (args[0] instanceof jStat) {\n    // Duplicate the object and pass it back.\n    return jStat(args[0].toArray());\n\n  // Unexpected argument value, return empty jStat object.\n  // TODO: This is strange behavior. Shouldn't this throw or some such to let\n  // the user know they had bad arguments?\n  } else {\n    this[0] = [];\n    this.length = 1;\n  }\n\n  return this;\n};\njStat._init.prototype = jStat.prototype;\njStat._init.constructor = jStat;\n\n\n// Utility functions.\n// TODO: for internal use only?\njStat.utils = {\n  calcRdx: calcRdx,\n  isArray: isArray,\n  isFunction: isFunction,\n  isNumber: isNumber,\n  toVector: toVector\n};\n\n\njStat._random_fn = Math.random;\njStat.setRandom = function setRandom(fn) {\n  if (typeof fn !== 'function')\n    throw new TypeError('fn is not a function');\n  jStat._random_fn = fn;\n};\n\n\n// Easily extend the jStat object.\n// TODO: is this seriously necessary?\njStat.extend = function extend(obj) {\n  var i, j;\n\n  if (arguments.length === 1) {\n    for (j in obj)\n      jStat[j] = obj[j];\n    return this;\n  }\n\n  for (i = 1; i < arguments.length; i++) {\n    for (j in arguments[i])\n      obj[j] = arguments[i][j];\n  }\n\n  return obj;\n};\n\n\n// Returns the number of rows in the matrix.\njStat.rows = function rows(arr) {\n  return arr.length || 1;\n};\n\n\n// Returns the number of columns in the matrix.\njStat.cols = function cols(arr) {\n  return arr[0].length || 1;\n};\n\n\n// Returns the dimensions of the object { rows: i, cols: j }\njStat.dimensions = function dimensions(arr) {\n  return {\n    rows: jStat.rows(arr),\n    cols: jStat.cols(arr)\n  };\n};\n\n\n// Returns a specified row as a vector or return a sub matrix by pick some rows\njStat.row = function row(arr, index) {\n  if (isArray(index)) {\n    return index.map(function(i) {\n      return jStat.row(arr, i);\n    })\n  }\n  return arr[index];\n};\n\n\n// return row as array\n// rowa([[1,2],[3,4]],0) -> [1,2]\njStat.rowa = function rowa(arr, i) {\n  return jStat.row(arr, i);\n};\n\n\n// Returns the specified column as a vector or return a sub matrix by pick some\n// columns\njStat.col = function col(arr, index) {\n  if (isArray(index)) {\n    var submat = jStat.arange(arr.length).map(function() {\n      return new Array(index.length);\n    });\n    index.forEach(function(ind, i){\n      jStat.arange(arr.length).forEach(function(j) {\n        submat[j][i] = arr[j][ind];\n      });\n    });\n    return submat;\n  }\n  var column = new Array(arr.length);\n  for (var i = 0; i < arr.length; i++)\n    column[i] = [arr[i][index]];\n  return column;\n};\n\n\n// return column as array\n// cola([[1,2],[3,4]],0) -> [1,3]\njStat.cola = function cola(arr, i) {\n  return jStat.col(arr, i).map(function(a){ return a[0] });\n};\n\n\n// Returns the diagonal of the matrix\njStat.diag = function diag(arr) {\n  var nrow = jStat.rows(arr);\n  var res = new Array(nrow);\n  for (var row = 0; row < nrow; row++)\n    res[row] = [arr[row][row]];\n  return res;\n};\n\n\n// Returns the anti-diagonal of the matrix\njStat.antidiag = function antidiag(arr) {\n  var nrow = jStat.rows(arr) - 1;\n  var res = new Array(nrow);\n  for (var i = 0; nrow >= 0; nrow--, i++)\n    res[i] = [arr[i][nrow]];\n  return res;\n};\n\n// Transpose a matrix or array.\njStat.transpose = function transpose(arr) {\n  var obj = [];\n  var objArr, rows, cols, j, i;\n\n  // Make sure arr is in matrix format.\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  rows = arr.length;\n  cols = arr[0].length;\n\n  for (i = 0; i < cols; i++) {\n    objArr = new Array(rows);\n    for (j = 0; j < rows; j++)\n      objArr[j] = arr[j][i];\n    obj.push(objArr);\n  }\n\n  // If obj is vector, return only single array.\n  return obj.length === 1 ? obj[0] : obj;\n};\n\n\n// Map a function to an array or array of arrays.\n// \"toAlter\" is an internal variable.\njStat.map = function map(arr, func, toAlter) {\n  var row, nrow, ncol, res, col;\n\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  nrow = arr.length;\n  ncol = arr[0].length;\n  res = toAlter ? arr : new Array(nrow);\n\n  for (row = 0; row < nrow; row++) {\n    // if the row doesn't exist, create it\n    if (!res[row])\n      res[row] = new Array(ncol);\n    for (col = 0; col < ncol; col++)\n      res[row][col] = func(arr[row][col], row, col);\n  }\n\n  return res.length === 1 ? res[0] : res;\n};\n\n\n// Cumulatively combine the elements of an array or array of arrays using a function.\njStat.cumreduce = function cumreduce(arr, func, toAlter) {\n  var row, nrow, ncol, res, col;\n\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  nrow = arr.length;\n  ncol = arr[0].length;\n  res = toAlter ? arr : new Array(nrow);\n\n  for (row = 0; row < nrow; row++) {\n    // if the row doesn't exist, create it\n    if (!res[row])\n      res[row] = new Array(ncol);\n    if (ncol > 0)\n      res[row][0] = arr[row][0];\n    for (col = 1; col < ncol; col++)\n      res[row][col] = func(res[row][col-1], arr[row][col]);\n  }\n  return res.length === 1 ? res[0] : res;\n};\n\n\n// Destructively alter an array.\njStat.alter = function alter(arr, func) {\n  return jStat.map(arr, func, true);\n};\n\n\n// Generate a rows x cols matrix according to the supplied function.\njStat.create = function  create(rows, cols, func) {\n  var res = new Array(rows);\n  var i, j;\n\n  if (isFunction(cols)) {\n    func = cols;\n    cols = rows;\n  }\n\n  for (i = 0; i < rows; i++) {\n    res[i] = new Array(cols);\n    for (j = 0; j < cols; j++)\n      res[i][j] = func(i, j);\n  }\n\n  return res;\n};\n\n\nfunction retZero() { return 0; }\n\n\n// Generate a rows x cols matrix of zeros.\njStat.zeros = function zeros(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retZero);\n};\n\n\nfunction retOne() { return 1; }\n\n\n// Generate a rows x cols matrix of ones.\njStat.ones = function ones(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retOne);\n};\n\n\n// Generate a rows x cols matrix of uniformly random numbers.\njStat.rand = function rand(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, jStat._random_fn);\n};\n\n\nfunction retIdent(i, j) { return i === j ? 1 : 0; }\n\n\n// Generate an identity matrix of size row x cols.\njStat.identity = function identity(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retIdent);\n};\n\n\n// Tests whether a matrix is symmetric\njStat.symmetric = function symmetric(arr) {\n  var size = arr.length;\n  var row, col;\n\n  if (arr.length !== arr[0].length)\n    return false;\n\n  for (row = 0; row < size; row++) {\n    for (col = 0; col < size; col++)\n      if (arr[col][row] !== arr[row][col])\n        return false;\n  }\n\n  return true;\n};\n\n\n// Set all values to zero.\njStat.clear = function clear(arr) {\n  return jStat.alter(arr, retZero);\n};\n\n\n// Generate sequence.\njStat.seq = function seq(min, max, length, func) {\n  if (!isFunction(func))\n    func = false;\n\n  var arr = [];\n  var hival = calcRdx(min, max);\n  var step = (max * hival - min * hival) / ((length - 1) * hival);\n  var current = min;\n  var cnt;\n\n  // Current is assigned using a technique to compensate for IEEE error.\n  // TODO: Needs better implementation.\n  for (cnt = 0;\n       current <= max && cnt < length;\n       cnt++, current = (min * hival + step * hival * cnt) / hival) {\n    arr.push((func ? func(current, cnt) : current));\n  }\n\n  return arr;\n};\n\n\n// arange(5) -> [0,1,2,3,4]\n// arange(1,5) -> [1,2,3,4]\n// arange(5,1,-1) -> [5,4,3,2]\njStat.arange = function arange(start, end, step) {\n  var rl = [];\n  var i;\n  step = step || 1;\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  }\n  if (start === end || step === 0) {\n    return [];\n  }\n  if (start < end && step < 0) {\n    return [];\n  }\n  if (start > end && step > 0) {\n    return [];\n  }\n  if (step > 0) {\n    for (i = start; i < end; i += step) {\n      rl.push(i);\n    }\n  } else {\n    for (i = start; i > end; i += step) {\n      rl.push(i);\n    }\n  }\n  return rl;\n};\n\n\n// A=[[1,2,3],[4,5,6],[7,8,9]]\n// slice(A,{row:{end:2},col:{start:1}}) -> [[2,3],[5,6]]\n// slice(A,1,{start:1}) -> [5,6]\n// as numpy code A[:2,1:]\njStat.slice = (function(){\n  function _slice(list, start, end, step) {\n    // note it's not equal to range.map mode it's a bug\n    var i;\n    var rl = [];\n    var length = list.length;\n    if (start === undefined && end === undefined && step === undefined) {\n      return jStat.copy(list);\n    }\n\n    start = start || 0;\n    end = end || list.length;\n    start = start >= 0 ? start : length + start;\n    end = end >= 0 ? end : length + end;\n    step = step || 1;\n    if (start === end || step === 0) {\n      return [];\n    }\n    if (start < end && step < 0) {\n      return [];\n    }\n    if (start > end && step > 0) {\n      return [];\n    }\n    if (step > 0) {\n      for (i = start; i < end; i += step) {\n        rl.push(list[i]);\n      }\n    } else {\n      for (i = start; i > end;i += step) {\n        rl.push(list[i]);\n      }\n    }\n    return rl;\n  }\n\n  function slice(list, rcSlice) {\n    var colSlice, rowSlice;\n    rcSlice = rcSlice || {};\n    if (isNumber(rcSlice.row)) {\n      if (isNumber(rcSlice.col))\n        return list[rcSlice.row][rcSlice.col];\n      var row = jStat.rowa(list, rcSlice.row);\n      colSlice = rcSlice.col || {};\n      return _slice(row, colSlice.start, colSlice.end, colSlice.step);\n    }\n\n    if (isNumber(rcSlice.col)) {\n      var col = jStat.cola(list, rcSlice.col);\n      rowSlice = rcSlice.row || {};\n      return _slice(col, rowSlice.start, rowSlice.end, rowSlice.step);\n    }\n\n    rowSlice = rcSlice.row || {};\n    colSlice = rcSlice.col || {};\n    var rows = _slice(list, rowSlice.start, rowSlice.end, rowSlice.step);\n    return rows.map(function(row) {\n      return _slice(row, colSlice.start, colSlice.end, colSlice.step);\n    });\n  }\n\n  return slice;\n}());\n\n\n// A=[[1,2,3],[4,5,6],[7,8,9]]\n// sliceAssign(A,{row:{start:1},col:{start:1}},[[0,0],[0,0]])\n// A=[[1,2,3],[4,0,0],[7,0,0]]\njStat.sliceAssign = function sliceAssign(A, rcSlice, B) {\n  var nl, ml;\n  if (isNumber(rcSlice.row)) {\n    if (isNumber(rcSlice.col))\n      return A[rcSlice.row][rcSlice.col] = B;\n    rcSlice.col = rcSlice.col || {};\n    rcSlice.col.start = rcSlice.col.start || 0;\n    rcSlice.col.end = rcSlice.col.end || A[0].length;\n    rcSlice.col.step = rcSlice.col.step || 1;\n    nl = jStat.arange(rcSlice.col.start,\n                          Math.min(A.length, rcSlice.col.end),\n                          rcSlice.col.step);\n    var m = rcSlice.row;\n    nl.forEach(function(n, i) {\n      A[m][n] = B[i];\n    });\n    return A;\n  }\n\n  if (isNumber(rcSlice.col)) {\n    rcSlice.row = rcSlice.row || {};\n    rcSlice.row.start = rcSlice.row.start || 0;\n    rcSlice.row.end = rcSlice.row.end || A.length;\n    rcSlice.row.step = rcSlice.row.step || 1;\n    ml = jStat.arange(rcSlice.row.start,\n                          Math.min(A[0].length, rcSlice.row.end),\n                          rcSlice.row.step);\n    var n = rcSlice.col;\n    ml.forEach(function(m, j) {\n      A[m][n] = B[j];\n    });\n    return A;\n  }\n\n  if (B[0].length === undefined) {\n    B = [B];\n  }\n  rcSlice.row.start = rcSlice.row.start || 0;\n  rcSlice.row.end = rcSlice.row.end || A.length;\n  rcSlice.row.step = rcSlice.row.step || 1;\n  rcSlice.col.start = rcSlice.col.start || 0;\n  rcSlice.col.end = rcSlice.col.end || A[0].length;\n  rcSlice.col.step = rcSlice.col.step || 1;\n  ml = jStat.arange(rcSlice.row.start,\n                        Math.min(A.length, rcSlice.row.end),\n                        rcSlice.row.step);\n  nl = jStat.arange(rcSlice.col.start,\n                        Math.min(A[0].length, rcSlice.col.end),\n                        rcSlice.col.step);\n  ml.forEach(function(m, i) {\n    nl.forEach(function(n, j) {\n      A[m][n] = B[i][j];\n    });\n  });\n  return A;\n};\n\n\n// [1,2,3] ->\n// [[1,0,0],[0,2,0],[0,0,3]]\njStat.diagonal = function diagonal(diagArray) {\n  var mat = jStat.zeros(diagArray.length, diagArray.length);\n  diagArray.forEach(function(t, i) {\n    mat[i][i] = t;\n  });\n  return mat;\n};\n\n\n// return copy of A\njStat.copy = function copy(A) {\n  return A.map(function(row) {\n    if (isNumber(row))\n      return row;\n    return row.map(function(t) {\n      return t;\n    });\n  });\n};\n\n\n// TODO: Go over this entire implementation. Seems a tragic waste of resources\n// doing all this work. Instead, and while ugly, use new Function() to generate\n// a custom function for each static method.\n\n// Quick reference.\nvar jProto = jStat.prototype;\n\n// Default length.\njProto.length = 0;\n\n// For internal use only.\n// TODO: Check if they're actually used, and if they are then rename them\n// to _*\njProto.push = Array.prototype.push;\njProto.sort = Array.prototype.sort;\njProto.splice = Array.prototype.splice;\njProto.slice = Array.prototype.slice;\n\n\n// Return a clean array.\njProto.toArray = function toArray() {\n  return this.length > 1 ? slice.call(this) : slice.call(this)[0];\n};\n\n\n// Map a function to a matrix or vector.\njProto.map = function map(func, toAlter) {\n  return jStat(jStat.map(this, func, toAlter));\n};\n\n\n// Cumulatively combine the elements of a matrix or vector using a function.\njProto.cumreduce = function cumreduce(func, toAlter) {\n  return jStat(jStat.cumreduce(this, func, toAlter));\n};\n\n\n// Destructively alter an array.\njProto.alter = function alter(func) {\n  jStat.alter(this, func);\n  return this;\n};\n\n\n// Extend prototype with methods that have no argument.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function(func) {\n      var self = this,\n      results;\n      // Check for callback.\n      if (func) {\n        setTimeout(function() {\n          func.call(self, jProto[passfunc].call(self));\n        });\n        return this;\n      }\n      results = jStat[passfunc](this);\n      return isArray(results) ? jStat(results) : results;\n    };\n  })(funcs[i]);\n})('transpose clear symmetric rows cols dimensions diag antidiag'.split(' '));\n\n\n// Extend prototype with methods that have one argument.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function(index, func) {\n      var self = this;\n      // check for callback\n      if (func) {\n        setTimeout(function() {\n          func.call(self, jProto[passfunc].call(self, index));\n        });\n        return this;\n      }\n      return jStat(jStat[passfunc](this, index));\n    };\n  })(funcs[i]);\n})('row col'.split(' '));\n\n\n// Extend prototype with simple shortcut methods.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function() {\n      return jStat(jStat[passfunc].apply(null, arguments));\n    };\n  })(funcs[i]);\n})('create zeros ones rand identity'.split(' '));\n\n\n// Exposing jStat.\nreturn jStat;\n\n}(Math));\n(function(jStat, Math) {\n\nvar isFunction = jStat.utils.isFunction;\n\n// Ascending functions for sort\nfunction ascNum(a, b) { return a - b; }\n\nfunction clip(arg, min, max) {\n  return Math.max(min, Math.min(arg, max));\n}\n\n\n// sum of an array\njStat.sum = function sum(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i];\n  return sum;\n};\n\n\n// sum squared\njStat.sumsqrd = function sumsqrd(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i] * arr[i];\n  return sum;\n};\n\n\n// sum of squared errors of prediction (SSE)\njStat.sumsqerr = function sumsqerr(arr) {\n  var mean = jStat.mean(arr);\n  var sum = 0;\n  var i = arr.length;\n  var tmp;\n  while (--i >= 0) {\n    tmp = arr[i] - mean;\n    sum += tmp * tmp;\n  }\n  return sum;\n};\n\n// sum of an array in each row\njStat.sumrow = function sumrow(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i];\n  return sum;\n};\n\n// product of an array\njStat.product = function product(arr) {\n  var prod = 1;\n  var i = arr.length;\n  while (--i >= 0)\n    prod *= arr[i];\n  return prod;\n};\n\n\n// minimum value of an array\njStat.min = function min(arr) {\n  var low = arr[0];\n  var i = 0;\n  while (++i < arr.length)\n    if (arr[i] < low)\n      low = arr[i];\n  return low;\n};\n\n\n// maximum value of an array\njStat.max = function max(arr) {\n  var high = arr[0];\n  var i = 0;\n  while (++i < arr.length)\n    if (arr[i] > high)\n      high = arr[i];\n  return high;\n};\n\n\n// unique values of an array\njStat.unique = function unique(arr) {\n  var hash = {}, _arr = [];\n  for(var i = 0; i < arr.length; i++) {\n    if (!hash[arr[i]]) {\n      hash[arr[i]] = true;\n      _arr.push(arr[i]);\n    }\n  }\n  return _arr;\n};\n\n\n// mean value of an array\njStat.mean = function mean(arr) {\n  return jStat.sum(arr) / arr.length;\n};\n\n\n// mean squared error (MSE)\njStat.meansqerr = function meansqerr(arr) {\n  return jStat.sumsqerr(arr) / arr.length;\n};\n\n\n// geometric mean of an array\njStat.geomean = function geomean(arr) {\n  var logs = arr.map(Math.log)\n  var meanOfLogs = jStat.mean(logs)\n  return Math.exp(meanOfLogs)\n};\n\n\n// median of an array\njStat.median = function median(arr) {\n  var arrlen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  // check if array is even or odd, then return the appropriate\n  return !(arrlen & 1)\n    ? (_arr[(arrlen / 2) - 1 ] + _arr[(arrlen / 2)]) / 2\n    : _arr[(arrlen / 2) | 0 ];\n};\n\n\n// cumulative sum of an array\njStat.cumsum = function cumsum(arr) {\n  return jStat.cumreduce(arr, function (a, b) { return a + b; });\n};\n\n\n// cumulative product of an array\njStat.cumprod = function cumprod(arr) {\n  return jStat.cumreduce(arr, function (a, b) { return a * b; });\n};\n\n\n// successive differences of a sequence\njStat.diff = function diff(arr) {\n  var diffs = [];\n  var arrLen = arr.length;\n  var i;\n  for (i = 1; i < arrLen; i++)\n    diffs.push(arr[i] - arr[i - 1]);\n  return diffs;\n};\n\n\n// ranks of an array\njStat.rank = function (arr) {\n  var i;\n  var distinctNumbers = [];\n  var numberCounts = {};\n  for (i = 0; i < arr.length; i++) {\n    var number = arr[i];\n    if (numberCounts[number]) {\n      numberCounts[number]++;\n    } else {\n      numberCounts[number] = 1;\n      distinctNumbers.push(number);\n    }\n  }\n\n  var sortedDistinctNumbers = distinctNumbers.sort(ascNum);\n  var numberRanks = {};\n  var currentRank = 1;\n  for (i = 0; i < sortedDistinctNumbers.length; i++) {\n    var number = sortedDistinctNumbers[i];\n    var count = numberCounts[number];\n    var first = currentRank;\n    var last = currentRank + count - 1;\n    var rank = (first + last) / 2;\n    numberRanks[number] = rank;\n    currentRank += count;\n  }\n\n  return arr.map(function (number) {\n    return numberRanks[number];\n  });\n};\n\n\n// mode of an array\n// if there are multiple modes of an array, return all of them\n// is this the appropriate way of handling it?\njStat.mode = function mode(arr) {\n  var arrLen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  var count = 1;\n  var maxCount = 0;\n  var numMaxCount = 0;\n  var mode_arr = [];\n  var i;\n\n  for (i = 0; i < arrLen; i++) {\n    if (_arr[i] === _arr[i + 1]) {\n      count++;\n    } else {\n      if (count > maxCount) {\n        mode_arr = [_arr[i]];\n        maxCount = count;\n        numMaxCount = 0;\n      }\n      // are there multiple max counts\n      else if (count === maxCount) {\n        mode_arr.push(_arr[i]);\n        numMaxCount++;\n      }\n      // resetting count for new value in array\n      count = 1;\n    }\n  }\n\n  return numMaxCount === 0 ? mode_arr[0] : mode_arr;\n};\n\n\n// range of an array\njStat.range = function range(arr) {\n  return jStat.max(arr) - jStat.min(arr);\n};\n\n// variance of an array\n// flag = true indicates sample instead of population\njStat.variance = function variance(arr, flag) {\n  return jStat.sumsqerr(arr) / (arr.length - (flag ? 1 : 0));\n};\n\n// pooled variance of an array of arrays\njStat.pooledvariance = function pooledvariance(arr) {\n  var sumsqerr = arr.reduce(function (a, samples) {return a + jStat.sumsqerr(samples);}, 0);\n  var count = arr.reduce(function (a, samples) {return a + samples.length;}, 0);\n  return sumsqerr / (count - arr.length);\n};\n\n// deviation of an array\njStat.deviation = function (arr) {\n  var mean = jStat.mean(arr);\n  var arrlen = arr.length;\n  var dev = new Array(arrlen);\n  for (var i = 0; i < arrlen; i++) {\n    dev[i] = arr[i] - mean;\n  }\n  return dev;\n};\n\n// standard deviation of an array\n// flag = true indicates sample instead of population\njStat.stdev = function stdev(arr, flag) {\n  return Math.sqrt(jStat.variance(arr, flag));\n};\n\n// pooled standard deviation of an array of arrays\njStat.pooledstdev = function pooledstdev(arr) {\n  return Math.sqrt(jStat.pooledvariance(arr));\n};\n\n// mean deviation (mean absolute deviation) of an array\njStat.meandev = function meandev(arr) {\n  var mean = jStat.mean(arr);\n  var a = [];\n  for (var i = arr.length - 1; i >= 0; i--) {\n    a.push(Math.abs(arr[i] - mean));\n  }\n  return jStat.mean(a);\n};\n\n\n// median deviation (median absolute deviation) of an array\njStat.meddev = function meddev(arr) {\n  var median = jStat.median(arr);\n  var a = [];\n  for (var i = arr.length - 1; i >= 0; i--) {\n    a.push(Math.abs(arr[i] - median));\n  }\n  return jStat.median(a);\n};\n\n\n// coefficient of variation\njStat.coeffvar = function coeffvar(arr) {\n  return jStat.stdev(arr) / jStat.mean(arr);\n};\n\n\n// quartiles of an array\njStat.quartiles = function quartiles(arr) {\n  var arrlen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  return [\n    _arr[ Math.round((arrlen) / 4) - 1 ],\n    _arr[ Math.round((arrlen) / 2) - 1 ],\n    _arr[ Math.round((arrlen) * 3 / 4) - 1 ]\n  ];\n};\n\n\n// Arbitary quantiles of an array. Direct port of the scipy.stats\n// implementation by Pierre GF Gerard-Marchant.\njStat.quantiles = function quantiles(arr, quantilesArray, alphap, betap) {\n  var sortedArray = arr.slice().sort(ascNum);\n  var quantileVals = [quantilesArray.length];\n  var n = arr.length;\n  var i, p, m, aleph, k, gamma;\n\n  if (typeof alphap === 'undefined')\n    alphap = 3 / 8;\n  if (typeof betap === 'undefined')\n    betap = 3 / 8;\n\n  for (i = 0; i < quantilesArray.length; i++) {\n    p = quantilesArray[i];\n    m = alphap + p * (1 - alphap - betap);\n    aleph = n * p + m;\n    k = Math.floor(clip(aleph, 1, n - 1));\n    gamma = clip(aleph - k, 0, 1);\n    quantileVals[i] = (1 - gamma) * sortedArray[k - 1] + gamma * sortedArray[k];\n  }\n\n  return quantileVals;\n};\n\n// Return the k-th percentile of values in a range, where k is in the range 0..1, inclusive.\n// Passing true for the exclusive parameter excludes both endpoints of the range.\njStat.percentile = function percentile(arr, k, exclusive) {\n  var _arr = arr.slice().sort(ascNum);\n  var realIndex = k * (_arr.length + (exclusive ? 1 : -1)) + (exclusive ? 0 : 1);\n  var index = parseInt(realIndex);\n  var frac = realIndex - index;\n  if (index + 1 < _arr.length) {\n    return _arr[index - 1] + frac * (_arr[index] - _arr[index - 1]);\n  } else {\n    return _arr[index - 1];\n  }\n}\n\n// The percentile rank of score in a given array. Returns the percentage\n// of all values in the input array that are less than (kind='strict') or\n// less or equal than (kind='weak') score. Default is weak.\njStat.percentileOfScore = function percentileOfScore(arr, score, kind) {\n  var counter = 0;\n  var len = arr.length;\n  var strict = false;\n  var value, i;\n\n  if (kind === 'strict')\n    strict = true;\n\n  for (i = 0; i < len; i++) {\n    value = arr[i];\n    if ((strict && value < score) ||\n        (!strict && value <= score)) {\n      counter++;\n    }\n  }\n\n  return counter / len;\n};\n\n\n// Histogram (bin count) data\njStat.histogram = function histogram(arr, binCnt) {\n  binCnt = binCnt || 4;\n  var first = jStat.min(arr);\n  var binWidth = (jStat.max(arr) - first) / binCnt;\n  var len = arr.length;\n  var bins = [];\n  var i;\n\n  for (i = 0; i < binCnt; i++)\n    bins[i] = 0;\n  for (i = 0; i < len; i++)\n    bins[Math.min(Math.floor(((arr[i] - first) / binWidth)), binCnt - 1)] += 1;\n\n  return bins;\n};\n\n\n// covariance of two arrays\njStat.covariance = function covariance(arr1, arr2) {\n  var u = jStat.mean(arr1);\n  var v = jStat.mean(arr2);\n  var arr1Len = arr1.length;\n  var sq_dev = new Array(arr1Len);\n  var i;\n\n  for (i = 0; i < arr1Len; i++)\n    sq_dev[i] = (arr1[i] - u) * (arr2[i] - v);\n\n  return jStat.sum(sq_dev) / (arr1Len - 1);\n};\n\n\n// (pearson's) population correlation coefficient, rho\njStat.corrcoeff = function corrcoeff(arr1, arr2) {\n  return jStat.covariance(arr1, arr2) /\n      jStat.stdev(arr1, 1) /\n      jStat.stdev(arr2, 1);\n};\n\n  // (spearman's) rank correlation coefficient, sp\njStat.spearmancoeff =  function (arr1, arr2) {\n  arr1 = jStat.rank(arr1);\n  arr2 = jStat.rank(arr2);\n  //return pearson's correlation of the ranks:\n  return jStat.corrcoeff(arr1, arr2);\n}\n\n\n// statistical standardized moments (general form of skew/kurt)\njStat.stanMoment = function stanMoment(arr, n) {\n  var mu = jStat.mean(arr);\n  var sigma = jStat.stdev(arr);\n  var len = arr.length;\n  var skewSum = 0;\n\n  for (var i = 0; i < len; i++)\n    skewSum += Math.pow((arr[i] - mu) / sigma, n);\n\n  return skewSum / arr.length;\n};\n\n// (pearson's) moment coefficient of skewness\njStat.skewness = function skewness(arr) {\n  return jStat.stanMoment(arr, 3);\n};\n\n// (pearson's) (excess) kurtosis\njStat.kurtosis = function kurtosis(arr) {\n  return jStat.stanMoment(arr, 4) - 3;\n};\n\n\nvar jProto = jStat.prototype;\n\n\n// Extend jProto with method for calculating cumulative sums and products.\n// This differs from the similar extension below as cumsum and cumprod should\n// not be run again in the case fullbool === true.\n// If a matrix is passed, automatically assume operation should be done on the\n// columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    // If a matrix is passed, automatically assume operation should be done on\n    // the columns.\n    jProto[passfunc] = function(fullbool, func) {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      // Assignment reassignation depending on how parameters were passed in.\n      if (isFunction(fullbool)) {\n        func = fullbool;\n        fullbool = false;\n      }\n      // Check if a callback was passed with the function.\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jProto[passfunc].call(tmpthis, fullbool));\n        });\n        return this;\n      }\n      // Check if matrix and run calculations.\n      if (this.length > 1) {\n        tmpthis = fullbool === true ? this : this.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = jStat[passfunc](tmpthis[i]);\n        return arr;\n      }\n      // Pass fullbool if only vector, not a matrix. for variance and stdev.\n      return jStat[passfunc](this[0], fullbool);\n    };\n  })(funcs[i]);\n})(('cumsum cumprod').split(' '));\n\n\n// Extend jProto with methods which don't require arguments and work on columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    // If a matrix is passed, automatically assume operation should be done on\n    // the columns.\n    jProto[passfunc] = function(fullbool, func) {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      // Assignment reassignation depending on how parameters were passed in.\n      if (isFunction(fullbool)) {\n        func = fullbool;\n        fullbool = false;\n      }\n      // Check if a callback was passed with the function.\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jProto[passfunc].call(tmpthis, fullbool));\n        });\n        return this;\n      }\n      // Check if matrix and run calculations.\n      if (this.length > 1) {\n        if (passfunc !== 'sumrow')\n          tmpthis = fullbool === true ? this : this.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = jStat[passfunc](tmpthis[i]);\n        return fullbool === true\n            ? jStat[passfunc](jStat.utils.toVector(arr))\n            : arr;\n      }\n      // Pass fullbool if only vector, not a matrix. for variance and stdev.\n      return jStat[passfunc](this[0], fullbool);\n    };\n  })(funcs[i]);\n})(('sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr ' +\n    'geomean median diff rank mode range variance deviation stdev meandev ' +\n    'meddev coeffvar quartiles histogram skewness kurtosis').split(' '));\n\n\n// Extend jProto with functions that take arguments. Operations on matrices are\n// done on columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function() {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      var args = Array.prototype.slice.call(arguments);\n      var callbackFunction;\n\n      // If the last argument is a function, we assume it's a callback; we\n      // strip the callback out and call the function again.\n      if (isFunction(args[args.length - 1])) {\n        callbackFunction = args[args.length - 1];\n        var argsToPass = args.slice(0, args.length - 1);\n\n        setTimeout(function() {\n          callbackFunction.call(tmpthis,\n                                jProto[passfunc].apply(tmpthis, argsToPass));\n        });\n        return this;\n\n      // Otherwise we curry the function args and call normally.\n      } else {\n        callbackFunction = undefined;\n        var curriedFunction = function curriedFunction(vector) {\n          return jStat[passfunc].apply(tmpthis, [vector].concat(args));\n        }\n      }\n\n      // If this is a matrix, run column-by-column.\n      if (this.length > 1) {\n        tmpthis = tmpthis.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = curriedFunction(tmpthis[i]);\n        return arr;\n      }\n\n      // Otherwise run on the vector.\n      return curriedFunction(this[0]);\n    };\n  })(funcs[i]);\n})('quantiles percentileOfScore'.split(' '));\n\n}(jStat, Math));\n// Special functions //\n(function(jStat, Math) {\n\n// Log-gamma function\njStat.gammaln = function gammaln(x) {\n  var j = 0;\n  var cof = [\n    76.18009172947146, -86.50532032941677, 24.01409824083091,\n    -1.231739572450155, 0.1208650973866179e-2, -0.5395239384953e-5\n  ];\n  var ser = 1.000000000190015;\n  var xx, y, tmp;\n  tmp = (y = xx = x) + 5.5;\n  tmp -= (xx + 0.5) * Math.log(tmp);\n  for (; j < 6; j++)\n    ser += cof[j] / ++y;\n  return Math.log(2.5066282746310005 * ser / xx) - tmp;\n};\n\n/*\n * log-gamma function to support poisson distribution sampling. The\n * algorithm comes from SPECFUN by Shanjie Zhang and Jianming Jin and their\n * book \"Computation of Special Functions\", 1996, John Wiley & Sons, Inc.\n */\njStat.loggam = function loggam(x) {\n  var x0, x2, xp, gl, gl0;\n  var k, n;\n\n  var a = [8.333333333333333e-02, -2.777777777777778e-03,\n          7.936507936507937e-04, -5.952380952380952e-04,\n          8.417508417508418e-04, -1.917526917526918e-03,\n          6.410256410256410e-03, -2.955065359477124e-02,\n          1.796443723688307e-01, -1.39243221690590e+00];\n  x0 = x;\n  n = 0;\n  if ((x == 1.0) || (x == 2.0)) {\n      return 0.0;\n  }\n  if (x <= 7.0) {\n      n = Math.floor(7 - x);\n      x0 = x + n;\n  }\n  x2 = 1.0 / (x0 * x0);\n  xp = 2 * Math.PI;\n  gl0 = a[9];\n  for (k = 8; k >= 0; k--) {\n      gl0 *= x2;\n      gl0 += a[k];\n  }\n  gl = gl0 / x0 + 0.5 * Math.log(xp) + (x0 - 0.5) * Math.log(x0) - x0;\n  if (x <= 7.0) {\n      for (k = 1; k <= n; k++) {\n          gl -= Math.log(x0 - 1.0);\n          x0 -= 1.0;\n      }\n  }\n  return gl;\n}\n\n// gamma of x\njStat.gammafn = function gammafn(x) {\n  var p = [-1.716185138865495, 24.76565080557592, -379.80425647094563,\n           629.3311553128184, 866.9662027904133, -31451.272968848367,\n           -36144.413418691176, 66456.14382024054\n  ];\n  var q = [-30.8402300119739, 315.35062697960416, -1015.1563674902192,\n           -3107.771671572311, 22538.118420980151, 4755.8462775278811,\n           -134659.9598649693, -115132.2596755535];\n  var fact = false;\n  var n = 0;\n  var xden = 0;\n  var xnum = 0;\n  var y = x;\n  var i, z, yi, res;\n  if (x > 171.6243769536076) {\n    return Infinity;\n  }\n  if (y <= 0) {\n    res = y % 1 + 3.6e-16;\n    if (res) {\n      fact = (!(y & 1) ? 1 : -1) * Math.PI / Math.sin(Math.PI * res);\n      y = 1 - y;\n    } else {\n      return Infinity;\n    }\n  }\n  yi = y;\n  if (y < 1) {\n    z = y++;\n  } else {\n    z = (y -= n = (y | 0) - 1) - 1;\n  }\n  for (i = 0; i < 8; ++i) {\n    xnum = (xnum + p[i]) * z;\n    xden = xden * z + q[i];\n  }\n  res = xnum / xden + 1;\n  if (yi < y) {\n    res /= yi;\n  } else if (yi > y) {\n    for (i = 0; i < n; ++i) {\n      res *= y;\n      y++;\n    }\n  }\n  if (fact) {\n    res = fact / res;\n  }\n  return res;\n};\n\n\n// lower incomplete gamma function, which is usually typeset with a\n// lower-case greek gamma as the function symbol\njStat.gammap = function gammap(a, x) {\n  return jStat.lowRegGamma(a, x) * jStat.gammafn(a);\n};\n\n\n// The lower regularized incomplete gamma function, usually written P(a,x)\njStat.lowRegGamma = function lowRegGamma(a, x) {\n  var aln = jStat.gammaln(a);\n  var ap = a;\n  var sum = 1 / a;\n  var del = sum;\n  var b = x + 1 - a;\n  var c = 1 / 1.0e-30;\n  var d = 1 / b;\n  var h = d;\n  var i = 1;\n  // calculate maximum number of itterations required for a\n  var ITMAX = -~(Math.log((a >= 1) ? a : 1 / a) * 8.5 + a * 0.4 + 17);\n  var an;\n\n  if (x < 0 || a <= 0) {\n    return NaN;\n  } else if (x < a + 1) {\n    for (; i <= ITMAX; i++) {\n      sum += del *= x / ++ap;\n    }\n    return (sum * Math.exp(-x + a * Math.log(x) - (aln)));\n  }\n\n  for (; i <= ITMAX; i++) {\n    an = -i * (i - a);\n    b += 2;\n    d = an * d + b;\n    c = b + an / c;\n    d = 1 / d;\n    h *= d * c;\n  }\n\n  return (1 - h * Math.exp(-x + a * Math.log(x) - (aln)));\n};\n\n// natural log factorial of n\njStat.factorialln = function factorialln(n) {\n  return n < 0 ? NaN : jStat.gammaln(n + 1);\n};\n\n// factorial of n\njStat.factorial = function factorial(n) {\n  return n < 0 ? NaN : jStat.gammafn(n + 1);\n};\n\n// combinations of n, m\njStat.combination = function combination(n, m) {\n  // make sure n or m don't exceed the upper limit of usable values\n  return (n > 170 || m > 170)\n      ? Math.exp(jStat.combinationln(n, m))\n      : (jStat.factorial(n) / jStat.factorial(m)) / jStat.factorial(n - m);\n};\n\n\njStat.combinationln = function combinationln(n, m){\n  return jStat.factorialln(n) - jStat.factorialln(m) - jStat.factorialln(n - m);\n};\n\n\n// permutations of n, m\njStat.permutation = function permutation(n, m) {\n  return jStat.factorial(n) / jStat.factorial(n - m);\n};\n\n\n// beta function\njStat.betafn = function betafn(x, y) {\n  // ensure arguments are positive\n  if (x <= 0 || y <= 0)\n    return undefined;\n  // make sure x + y doesn't exceed the upper limit of usable values\n  return (x + y > 170)\n      ? Math.exp(jStat.betaln(x, y))\n      : jStat.gammafn(x) * jStat.gammafn(y) / jStat.gammafn(x + y);\n};\n\n\n// natural logarithm of beta function\njStat.betaln = function betaln(x, y) {\n  return jStat.gammaln(x) + jStat.gammaln(y) - jStat.gammaln(x + y);\n};\n\n\n// Evaluates the continued fraction for incomplete beta function by modified\n// Lentz's method.\njStat.betacf = function betacf(x, a, b) {\n  var fpmin = 1e-30;\n  var m = 1;\n  var qab = a + b;\n  var qap = a + 1;\n  var qam = a - 1;\n  var c = 1;\n  var d = 1 - qab * x / qap;\n  var m2, aa, del, h;\n\n  // These q's will be used in factors that occur in the coefficients\n  if (Math.abs(d) < fpmin)\n    d = fpmin;\n  d = 1 / d;\n  h = d;\n\n  for (; m <= 100; m++) {\n    m2 = 2 * m;\n    aa = m * (b - m) * x / ((qam + m2) * (a + m2));\n    // One step (the even one) of the recurrence\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin)\n      d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin)\n      c = fpmin;\n    d = 1 / d;\n    h *= d * c;\n    aa = -(a + m) * (qab + m) * x / ((a + m2) * (qap + m2));\n    // Next step of the recurrence (the odd one)\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin)\n      d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin)\n      c = fpmin;\n    d = 1 / d;\n    del = d * c;\n    h *= del;\n    if (Math.abs(del - 1.0) < 3e-7)\n      break;\n  }\n\n  return h;\n};\n\n\n// Returns the inverse of the lower regularized inomplete gamma function\njStat.gammapinv = function gammapinv(p, a) {\n  var j = 0;\n  var a1 = a - 1;\n  var EPS = 1e-8;\n  var gln = jStat.gammaln(a);\n  var x, err, t, u, pp, lna1, afac;\n\n  if (p >= 1)\n    return Math.max(100, a + 100 * Math.sqrt(a));\n  if (p <= 0)\n    return 0;\n  if (a > 1) {\n    lna1 = Math.log(a1);\n    afac = Math.exp(a1 * (lna1 - 1) - gln);\n    pp = (p < 0.5) ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t * (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5)\n      x = -x;\n    x = Math.max(1e-3,\n                 a * Math.pow(1 - 1 / (9 * a) - x / (3 * Math.sqrt(a)), 3));\n  } else {\n    t = 1 - a * (0.253 + a * 0.12);\n    if (p < t)\n      x = Math.pow(p / t, 1 / a);\n    else\n      x = 1 - Math.log(1 - (p - t) / (1 - t));\n  }\n\n  for(; j < 12; j++) {\n    if (x <= 0)\n      return 0;\n    err = jStat.lowRegGamma(a, x) - p;\n    if (a > 1)\n      t = afac * Math.exp(-(x - a1) + a1 * (Math.log(x) - lna1));\n    else\n      t = Math.exp(-x + a1 * Math.log(x) - gln);\n    u = err / t;\n    x -= (t = u / (1 - 0.5 * Math.min(1, u * ((a - 1) / x - 1))));\n    if (x <= 0)\n      x = 0.5 * (x + t);\n    if (Math.abs(t) < EPS * x)\n      break;\n  }\n\n  return x;\n};\n\n\n// Returns the error function erf(x)\njStat.erf = function erf(x) {\n  var cof = [-1.3026537197817094, 6.4196979235649026e-1, 1.9476473204185836e-2,\n             -9.561514786808631e-3, -9.46595344482036e-4, 3.66839497852761e-4,\n             4.2523324806907e-5, -2.0278578112534e-5, -1.624290004647e-6,\n             1.303655835580e-6, 1.5626441722e-8, -8.5238095915e-8,\n             6.529054439e-9, 5.059343495e-9, -9.91364156e-10,\n             -2.27365122e-10, 9.6467911e-11, 2.394038e-12,\n             -6.886027e-12, 8.94487e-13, 3.13092e-13,\n             -1.12708e-13, 3.81e-16, 7.106e-15,\n             -1.523e-15, -9.4e-17, 1.21e-16,\n             -2.8e-17];\n  var j = cof.length - 1;\n  var isneg = false;\n  var d = 0;\n  var dd = 0;\n  var t, ty, tmp, res;\n\n  if (x < 0) {\n    x = -x;\n    isneg = true;\n  }\n\n  t = 2 / (2 + x);\n  ty = 4 * t - 2;\n\n  for(; j > 0; j--) {\n    tmp = d;\n    d = ty * d - dd + cof[j];\n    dd = tmp;\n  }\n\n  res = t * Math.exp(-x * x + 0.5 * (cof[0] + ty * d) - dd);\n  return isneg ? res - 1 : 1 - res;\n};\n\n\n// Returns the complmentary error function erfc(x)\njStat.erfc = function erfc(x) {\n  return 1 - jStat.erf(x);\n};\n\n\n// Returns the inverse of the complementary error function\njStat.erfcinv = function erfcinv(p) {\n  var j = 0;\n  var x, err, t, pp;\n  if (p >= 2)\n    return -100;\n  if (p <= 0)\n    return 100;\n  pp = (p < 1) ? p : 2 - p;\n  t = Math.sqrt(-2 * Math.log(pp / 2));\n  x = -0.70711 * ((2.30753 + t * 0.27061) /\n                  (1 + t * (0.99229 + t * 0.04481)) - t);\n  for (; j < 2; j++) {\n    err = jStat.erfc(x) - pp;\n    x += err / (1.12837916709551257 * Math.exp(-x * x) - x * err);\n  }\n  return (p < 1) ? x : -x;\n};\n\n\n// Returns the inverse of the incomplete beta function\njStat.ibetainv = function ibetainv(p, a, b) {\n  var EPS = 1e-8;\n  var a1 = a - 1;\n  var b1 = b - 1;\n  var j = 0;\n  var lna, lnb, pp, t, u, err, x, al, h, w, afac;\n  if (p <= 0)\n    return 0;\n  if (p >= 1)\n    return 1;\n  if (a >= 1 && b >= 1) {\n    pp = (p < 0.5) ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t* (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5)\n      x = -x;\n    al = (x * x - 3) / 6;\n    h = 2 / (1 / (2 * a - 1)  + 1 / (2 * b - 1));\n    w = (x * Math.sqrt(al + h) / h) - (1 / (2 * b - 1) - 1 / (2 * a - 1)) *\n        (al + 5 / 6 - 2 / (3 * h));\n    x = a / (a + b * Math.exp(2 * w));\n  } else {\n    lna = Math.log(a / (a + b));\n    lnb = Math.log(b / (a + b));\n    t = Math.exp(a * lna) / a;\n    u = Math.exp(b * lnb) / b;\n    w = t + u;\n    if (p < t / w)\n      x = Math.pow(a * w * p, 1 / a);\n    else\n      x = 1 - Math.pow(b * w * (1 - p), 1 / b);\n  }\n  afac = -jStat.gammaln(a) - jStat.gammaln(b) + jStat.gammaln(a + b);\n  for(; j < 10; j++) {\n    if (x === 0 || x === 1)\n      return x;\n    err = jStat.ibeta(x, a, b) - p;\n    t = Math.exp(a1 * Math.log(x) + b1 * Math.log(1 - x) + afac);\n    u = err / t;\n    x -= (t = u / (1 - 0.5 * Math.min(1, u * (a1 / x - b1 / (1 - x)))));\n    if (x <= 0)\n      x = 0.5 * (x + t);\n    if (x >= 1)\n      x = 0.5 * (x + t + 1);\n    if (Math.abs(t) < EPS * x && j > 0)\n      break;\n  }\n  return x;\n};\n\n\n// Returns the incomplete beta function I_x(a,b)\njStat.ibeta = function ibeta(x, a, b) {\n  // Factors in front of the continued fraction.\n  var bt = (x === 0 || x === 1) ?  0 :\n    Math.exp(jStat.gammaln(a + b) - jStat.gammaln(a) -\n             jStat.gammaln(b) + a * Math.log(x) + b *\n             Math.log(1 - x));\n  if (x < 0 || x > 1)\n    return false;\n  if (x < (a + 1) / (a + b + 2))\n    // Use continued fraction directly.\n    return bt * jStat.betacf(x, a, b) / a;\n  // else use continued fraction after making the symmetry transformation.\n  return 1 - bt * jStat.betacf(1 - x, b, a) / b;\n};\n\n\n// Returns a normal deviate (mu=0, sigma=1).\n// If n and m are specified it returns a object of normal deviates.\njStat.randn = function randn(n, m) {\n  var u, v, x, y, q;\n  if (!m)\n    m = n;\n  if (n)\n    return jStat.create(n, m, function() { return jStat.randn(); });\n  do {\n    u = jStat._random_fn();\n    v = 1.7156 * (jStat._random_fn() - 0.5);\n    x = u - 0.449871;\n    y = Math.abs(v) + 0.386595;\n    q = x * x + y * (0.19600 * y - 0.25472 * x);\n  } while (q > 0.27597 && (q > 0.27846 || v * v > -4 * Math.log(u) * u * u));\n  return v / u;\n};\n\n\n// Returns a gamma deviate by the method of Marsaglia and Tsang.\njStat.randg = function randg(shape, n, m) {\n  var oalph = shape;\n  var a1, a2, u, v, x, mat;\n  if (!m)\n    m = n;\n  if (!shape)\n    shape = 1;\n  if (n) {\n    mat = jStat.zeros(n,m);\n    mat.alter(function() { return jStat.randg(shape); });\n    return mat;\n  }\n  if (shape < 1)\n    shape += 1;\n  a1 = shape - 1 / 3;\n  a2 = 1 / Math.sqrt(9 * a1);\n  do {\n    do {\n      x = jStat.randn();\n      v = 1 + a2 * x;\n    } while(v <= 0);\n    v = v * v * v;\n    u = jStat._random_fn();\n  } while(u > 1 - 0.331 * Math.pow(x, 4) &&\n          Math.log(u) > 0.5 * x*x + a1 * (1 - v + Math.log(v)));\n  // alpha > 1\n  if (shape == oalph)\n    return a1 * v;\n  // alpha < 1\n  do {\n    u = jStat._random_fn();\n  } while(u === 0);\n  return Math.pow(u, 1 / oalph) * a1 * v;\n};\n\n\n// making use of static methods on the instance\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function() {\n      return jStat(\n          jStat.map(this, function(value) { return jStat[passfunc](value); }));\n    }\n  })(funcs[i]);\n})('gammaln gammafn factorial factorialln'.split(' '));\n\n\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function() {\n      return jStat(jStat[passfunc].apply(null, arguments));\n    };\n  })(funcs[i]);\n})('randn'.split(' '));\n\n}(jStat, Math));\n(function(jStat, Math) {\n\n// generate all distribution instance methods\n(function(list) {\n  for (var i = 0; i < list.length; i++) (function(func) {\n    // distribution instance method\n    jStat[func] = function f(a, b, c) {\n      if (!(this instanceof f))\n        return new f(a, b, c);\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      return this;\n    };\n    // distribution method to be used on a jStat instance\n    jStat.fn[func] = function(a, b, c) {\n      var newthis = jStat[func](a, b, c);\n      newthis.data = this;\n      return newthis;\n    };\n    // sample instance method\n    jStat[func].prototype.sample = function(arr) {\n      var a = this._a;\n      var b = this._b;\n      var c = this._c;\n      if (arr)\n        return jStat.alter(arr, function() {\n          return jStat[func].sample(a, b, c);\n        });\n      else\n        return jStat[func].sample(a, b, c);\n    };\n    // generate the pdf, cdf and inv instance methods\n    (function(vals) {\n      for (var i = 0; i < vals.length; i++) (function(fnfunc) {\n        jStat[func].prototype[fnfunc] = function(x) {\n          var a = this._a;\n          var b = this._b;\n          var c = this._c;\n          if (!x && x !== 0)\n            x = this.data;\n          if (typeof x !== 'number') {\n            return jStat.fn.map.call(x, function(x) {\n              return jStat[func][fnfunc](x, a, b, c);\n            });\n          }\n          return jStat[func][fnfunc](x, a, b, c);\n        };\n      })(vals[i]);\n    })('pdf cdf inv'.split(' '));\n    // generate the mean, median, mode and variance instance methods\n    (function(vals) {\n      for (var i = 0; i < vals.length; i++) (function(fnfunc) {\n        jStat[func].prototype[fnfunc] = function() {\n          return jStat[func][fnfunc](this._a, this._b, this._c);\n        };\n      })(vals[i]);\n    })('mean median mode variance'.split(' '));\n  })(list[i]);\n})((\n  'beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy ' +\n  'laplace lognormal noncentralt normal pareto studentt weibull uniform ' +\n  'binomial negbin hypgeom poisson triangular tukey arcsine'\n).split(' '));\n\n\n\n// extend beta function with static methods\njStat.extend(jStat.beta, {\n  pdf: function pdf(x, alpha, beta) {\n    // PDF is zero outside the support\n    if (x > 1 || x < 0)\n      return 0;\n    // PDF is one for the uniform case\n    if (alpha == 1 && beta == 1)\n      return 1;\n\n    if (alpha < 512 && beta < 512) {\n      return (Math.pow(x, alpha - 1) * Math.pow(1 - x, beta - 1)) /\n          jStat.betafn(alpha, beta);\n    } else {\n      return Math.exp((alpha - 1) * Math.log(x) +\n                      (beta - 1) * Math.log(1 - x) -\n                      jStat.betaln(alpha, beta));\n    }\n  },\n\n  cdf: function cdf(x, alpha, beta) {\n    return (x > 1 || x < 0) ? (x > 1) * 1 : jStat.ibeta(x, alpha, beta);\n  },\n\n  inv: function inv(x, alpha, beta) {\n    return jStat.ibetainv(x, alpha, beta);\n  },\n\n  mean: function mean(alpha, beta) {\n    return alpha / (alpha + beta);\n  },\n\n  median: function median(alpha, beta) {\n    return jStat.ibetainv(0.5, alpha, beta);\n  },\n\n  mode: function mode(alpha, beta) {\n    return (alpha - 1 ) / ( alpha + beta - 2);\n  },\n\n  // return a random sample\n  sample: function sample(alpha, beta) {\n    var u = jStat.randg(alpha);\n    return u / (u + jStat.randg(beta));\n  },\n\n  variance: function variance(alpha, beta) {\n    return (alpha * beta) / (Math.pow(alpha + beta, 2) * (alpha + beta + 1));\n  }\n});\n\n// extend F function with static methods\njStat.extend(jStat.centralF, {\n  // This implementation of the pdf function avoids float overflow\n  // See the way that R calculates this value:\n  // https://svn.r-project.org/R/trunk/src/nmath/df.c\n  pdf: function pdf(x, df1, df2) {\n    var p, q, f;\n\n    if (x < 0)\n      return 0;\n\n    if (df1 <= 2) {\n      if (x === 0 && df1 < 2) {\n        return Infinity;\n      }\n      if (x === 0 && df1 === 2) {\n        return 1;\n      }\n      return (1 / jStat.betafn(df1 / 2, df2 / 2)) *\n              Math.pow(df1 / df2, df1 / 2) *\n              Math.pow(x, (df1/2) - 1) *\n              Math.pow((1 + (df1 / df2) * x), -(df1 + df2) / 2);\n    }\n\n    p = (df1 * x) / (df2 + x * df1);\n    q = df2 / (df2 + x * df1);\n    f = df1 * q / 2.0;\n    return f * jStat.binomial.pdf((df1 - 2) / 2, (df1 + df2 - 2) / 2, p);\n  },\n\n  cdf: function cdf(x, df1, df2) {\n    if (x < 0)\n      return 0;\n    return jStat.ibeta((df1 * x) / (df1 * x + df2), df1 / 2, df2 / 2);\n  },\n\n  inv: function inv(x, df1, df2) {\n    return df2 / (df1 * (1 / jStat.ibetainv(x, df1 / 2, df2 / 2) - 1));\n  },\n\n  mean: function mean(df1, df2) {\n    return (df2 > 2) ? df2 / (df2 - 2) : undefined;\n  },\n\n  mode: function mode(df1, df2) {\n    return (df1 > 2) ? (df2 * (df1 - 2)) / (df1 * (df2 + 2)) : undefined;\n  },\n\n  // return a random sample\n  sample: function sample(df1, df2) {\n    var x1 = jStat.randg(df1 / 2) * 2;\n    var x2 = jStat.randg(df2 / 2) * 2;\n    return (x1 / df1) / (x2 / df2);\n  },\n\n  variance: function variance(df1, df2) {\n    if (df2 <= 4)\n      return undefined;\n    return 2 * df2 * df2 * (df1 + df2 - 2) /\n        (df1 * (df2 - 2) * (df2 - 2) * (df2 - 4));\n  }\n});\n\n\n// extend cauchy function with static methods\njStat.extend(jStat.cauchy, {\n  pdf: function pdf(x, local, scale) {\n    if (scale < 0) { return 0; }\n\n    return (scale / (Math.pow(x - local, 2) + Math.pow(scale, 2))) / Math.PI;\n  },\n\n  cdf: function cdf(x, local, scale) {\n    return Math.atan((x - local) / scale) / Math.PI + 0.5;\n  },\n\n  inv: function(p, local, scale) {\n    return local + scale * Math.tan(Math.PI * (p - 0.5));\n  },\n\n  median: function median(local/*, scale*/) {\n    return local;\n  },\n\n  mode: function mode(local/*, scale*/) {\n    return local;\n  },\n\n  sample: function sample(local, scale) {\n    return jStat.randn() *\n        Math.sqrt(1 / (2 * jStat.randg(0.5))) * scale + local;\n  }\n});\n\n\n\n// extend chisquare function with static methods\njStat.extend(jStat.chisquare, {\n  pdf: function pdf(x, dof) {\n    if (x < 0)\n      return 0;\n    return (x === 0 && dof === 2) ? 0.5 :\n        Math.exp((dof / 2 - 1) * Math.log(x) - x / 2 - (dof / 2) *\n                 Math.log(2) - jStat.gammaln(dof / 2));\n  },\n\n  cdf: function cdf(x, dof) {\n    if (x < 0)\n      return 0;\n    return jStat.lowRegGamma(dof / 2, x / 2);\n  },\n\n  inv: function(p, dof) {\n    return 2 * jStat.gammapinv(p, 0.5 * dof);\n  },\n\n  mean : function(dof) {\n    return dof;\n  },\n\n  // TODO: this is an approximation (is there a better way?)\n  median: function median(dof) {\n    return dof * Math.pow(1 - (2 / (9 * dof)), 3);\n  },\n\n  mode: function mode(dof) {\n    return (dof - 2 > 0) ? dof - 2 : 0;\n  },\n\n  sample: function sample(dof) {\n    return jStat.randg(dof / 2) * 2;\n  },\n\n  variance: function variance(dof) {\n    return 2 * dof;\n  }\n});\n\n\n\n// extend exponential function with static methods\njStat.extend(jStat.exponential, {\n  pdf: function pdf(x, rate) {\n    return x < 0 ? 0 : rate * Math.exp(-rate * x);\n  },\n\n  cdf: function cdf(x, rate) {\n    return x < 0 ? 0 : 1 - Math.exp(-rate * x);\n  },\n\n  inv: function(p, rate) {\n    return -Math.log(1 - p) / rate;\n  },\n\n  mean : function(rate) {\n    return 1 / rate;\n  },\n\n  median: function (rate) {\n    return (1 / rate) * Math.log(2);\n  },\n\n  mode: function mode(/*rate*/) {\n    return 0;\n  },\n\n  sample: function sample(rate) {\n    return -1 / rate * Math.log(jStat._random_fn());\n  },\n\n  variance : function(rate) {\n    return Math.pow(rate, -2);\n  }\n});\n\n\n\n// extend gamma function with static methods\njStat.extend(jStat.gamma, {\n  pdf: function pdf(x, shape, scale) {\n    if (x < 0)\n      return 0;\n    return (x === 0 && shape === 1) ? 1 / scale :\n            Math.exp((shape - 1) * Math.log(x) - x / scale -\n                    jStat.gammaln(shape) - shape * Math.log(scale));\n  },\n\n  cdf: function cdf(x, shape, scale) {\n    if (x < 0)\n      return 0;\n    return jStat.lowRegGamma(shape, x / scale);\n  },\n\n  inv: function(p, shape, scale) {\n    return jStat.gammapinv(p, shape) * scale;\n  },\n\n  mean : function(shape, scale) {\n    return shape * scale;\n  },\n\n  mode: function mode(shape, scale) {\n    if(shape > 1) return (shape - 1) * scale;\n    return undefined;\n  },\n\n  sample: function sample(shape, scale) {\n    return jStat.randg(shape) * scale;\n  },\n\n  variance: function variance(shape, scale) {\n    return shape * scale * scale;\n  }\n});\n\n// extend inverse gamma function with static methods\njStat.extend(jStat.invgamma, {\n  pdf: function pdf(x, shape, scale) {\n    if (x <= 0)\n      return 0;\n    return Math.exp(-(shape + 1) * Math.log(x) - scale / x -\n                    jStat.gammaln(shape) + shape * Math.log(scale));\n  },\n\n  cdf: function cdf(x, shape, scale) {\n    if (x <= 0)\n      return 0;\n    return 1 - jStat.lowRegGamma(shape, scale / x);\n  },\n\n  inv: function(p, shape, scale) {\n    return scale / jStat.gammapinv(1 - p, shape);\n  },\n\n  mean : function(shape, scale) {\n    return (shape > 1) ? scale / (shape - 1) : undefined;\n  },\n\n  mode: function mode(shape, scale) {\n    return scale / (shape + 1);\n  },\n\n  sample: function sample(shape, scale) {\n    return scale / jStat.randg(shape);\n  },\n\n  variance: function variance(shape, scale) {\n    if (shape <= 2)\n      return undefined;\n    return scale * scale / ((shape - 1) * (shape - 1) * (shape - 2));\n  }\n});\n\n\n// extend kumaraswamy function with static methods\njStat.extend(jStat.kumaraswamy, {\n  pdf: function pdf(x, alpha, beta) {\n    if (x === 0 && alpha === 1)\n      return beta;\n    else if (x === 1 && beta === 1)\n      return alpha;\n    return Math.exp(Math.log(alpha) + Math.log(beta) + (alpha - 1) *\n                    Math.log(x) + (beta - 1) *\n                    Math.log(1 - Math.pow(x, alpha)));\n  },\n\n  cdf: function cdf(x, alpha, beta) {\n    if (x < 0)\n      return 0;\n    else if (x > 1)\n      return 1;\n    return (1 - Math.pow(1 - Math.pow(x, alpha), beta));\n  },\n\n  inv: function inv(p, alpha, beta) {\n    return Math.pow(1 - Math.pow(1 - p, 1 / beta), 1 / alpha);\n  },\n\n  mean : function(alpha, beta) {\n    return (beta * jStat.gammafn(1 + 1 / alpha) *\n            jStat.gammafn(beta)) / (jStat.gammafn(1 + 1 / alpha + beta));\n  },\n\n  median: function median(alpha, beta) {\n    return Math.pow(1 - Math.pow(2, -1 / beta), 1 / alpha);\n  },\n\n  mode: function mode(alpha, beta) {\n    if (!(alpha >= 1 && beta >= 1 && (alpha !== 1 && beta !== 1)))\n      return undefined;\n    return Math.pow((alpha - 1) / (alpha * beta - 1), 1 / alpha);\n  },\n\n  variance: function variance(/*alpha, beta*/) {\n    throw new Error('variance not yet implemented');\n    // TODO: complete this\n  }\n});\n\n\n\n// extend lognormal function with static methods\njStat.extend(jStat.lognormal, {\n  pdf: function pdf(x, mu, sigma) {\n    if (x <= 0)\n      return 0;\n    return Math.exp(-Math.log(x) - 0.5 * Math.log(2 * Math.PI) -\n                    Math.log(sigma) - Math.pow(Math.log(x) - mu, 2) /\n                    (2 * sigma * sigma));\n  },\n\n  cdf: function cdf(x, mu, sigma) {\n    if (x < 0)\n      return 0;\n    return 0.5 +\n        (0.5 * jStat.erf((Math.log(x) - mu) / Math.sqrt(2 * sigma * sigma)));\n  },\n\n  inv: function(p, mu, sigma) {\n    return Math.exp(-1.41421356237309505 * sigma * jStat.erfcinv(2 * p) + mu);\n  },\n\n  mean: function mean(mu, sigma) {\n    return Math.exp(mu + sigma * sigma / 2);\n  },\n\n  median: function median(mu/*, sigma*/) {\n    return Math.exp(mu);\n  },\n\n  mode: function mode(mu, sigma) {\n    return Math.exp(mu - sigma * sigma);\n  },\n\n  sample: function sample(mu, sigma) {\n    return Math.exp(jStat.randn() * sigma + mu);\n  },\n\n  variance: function variance(mu, sigma) {\n    return (Math.exp(sigma * sigma) - 1) * Math.exp(2 * mu + sigma * sigma);\n  }\n});\n\n\n\n// extend noncentralt function with static methods\njStat.extend(jStat.noncentralt, {\n  pdf: function pdf(x, dof, ncp) {\n    var tol = 1e-14;\n    if (Math.abs(ncp) < tol)  // ncp approx 0; use student-t\n      return jStat.studentt.pdf(x, dof)\n\n    if (Math.abs(x) < tol) {  // different formula for x == 0\n      return Math.exp(jStat.gammaln((dof + 1) / 2) - ncp * ncp / 2 -\n                      0.5 * Math.log(Math.PI * dof) - jStat.gammaln(dof / 2));\n    }\n\n    // formula for x != 0\n    return dof / x *\n        (jStat.noncentralt.cdf(x * Math.sqrt(1 + 2 / dof), dof+2, ncp) -\n         jStat.noncentralt.cdf(x, dof, ncp));\n  },\n\n  cdf: function cdf(x, dof, ncp) {\n    var tol = 1e-14;\n    var min_iterations = 200;\n\n    if (Math.abs(ncp) < tol)  // ncp approx 0; use student-t\n      return jStat.studentt.cdf(x, dof);\n\n    // turn negative x into positive and flip result afterwards\n    var flip = false;\n    if (x < 0) {\n      flip = true;\n      ncp = -ncp;\n    }\n\n    var prob = jStat.normal.cdf(-ncp, 0, 1);\n    var value = tol + 1;\n    // use value at last two steps to determine convergence\n    var lastvalue = value;\n    var y = x * x / (x * x + dof);\n    var j = 0;\n    var p = Math.exp(-ncp * ncp / 2);\n    var q = Math.exp(-ncp * ncp / 2 - 0.5 * Math.log(2) -\n                     jStat.gammaln(3 / 2)) * ncp;\n    while (j < min_iterations || lastvalue > tol || value > tol) {\n      lastvalue = value;\n      if (j > 0) {\n        p *= (ncp * ncp) / (2 * j);\n        q *= (ncp * ncp) / (2 * (j + 1 / 2));\n      }\n      value = p * jStat.beta.cdf(y, j + 0.5, dof / 2) +\n          q * jStat.beta.cdf(y, j+1, dof/2);\n      prob += 0.5 * value;\n      j++;\n    }\n\n    return flip ? (1 - prob) : prob;\n  }\n});\n\n\n// extend normal function with static methods\njStat.extend(jStat.normal, {\n  pdf: function pdf(x, mean, std) {\n    return Math.exp(-0.5 * Math.log(2 * Math.PI) -\n                    Math.log(std) - Math.pow(x - mean, 2) / (2 * std * std));\n  },\n\n  cdf: function cdf(x, mean, std) {\n    return 0.5 * (1 + jStat.erf((x - mean) / Math.sqrt(2 * std * std)));\n  },\n\n  inv: function(p, mean, std) {\n    return -1.41421356237309505 * std * jStat.erfcinv(2 * p) + mean;\n  },\n\n  mean : function(mean/*, std*/) {\n    return mean;\n  },\n\n  median: function median(mean/*, std*/) {\n    return mean;\n  },\n\n  mode: function (mean/*, std*/) {\n    return mean;\n  },\n\n  sample: function sample(mean, std) {\n    return jStat.randn() * std + mean;\n  },\n\n  variance : function(mean, std) {\n    return std * std;\n  }\n});\n\n\n\n// extend pareto function with static methods\njStat.extend(jStat.pareto, {\n  pdf: function pdf(x, scale, shape) {\n    if (x < scale)\n      return 0;\n    return (shape * Math.pow(scale, shape)) / Math.pow(x, shape + 1);\n  },\n\n  cdf: function cdf(x, scale, shape) {\n    if (x < scale)\n      return 0;\n    return 1 - Math.pow(scale / x, shape);\n  },\n\n  inv: function inv(p, scale, shape) {\n    return scale / Math.pow(1 - p, 1 / shape);\n  },\n\n  mean: function mean(scale, shape) {\n    if (shape <= 1)\n      return undefined;\n    return (shape * Math.pow(scale, shape)) / (shape - 1);\n  },\n\n  median: function median(scale, shape) {\n    return scale * (shape * Math.SQRT2);\n  },\n\n  mode: function mode(scale/*, shape*/) {\n    return scale;\n  },\n\n  variance : function(scale, shape) {\n    if (shape <= 2)\n      return undefined;\n    return (scale*scale * shape) / (Math.pow(shape - 1, 2) * (shape - 2));\n  }\n});\n\n\n\n// extend studentt function with static methods\njStat.extend(jStat.studentt, {\n  pdf: function pdf(x, dof) {\n    dof = dof > 1e100 ? 1e100 : dof;\n    return (1/(Math.sqrt(dof) * jStat.betafn(0.5, dof/2))) *\n        Math.pow(1 + ((x * x) / dof), -((dof + 1) / 2));\n  },\n\n  cdf: function cdf(x, dof) {\n    var dof2 = dof / 2;\n    return jStat.ibeta((x + Math.sqrt(x * x + dof)) /\n                       (2 * Math.sqrt(x * x + dof)), dof2, dof2);\n  },\n\n  inv: function(p, dof) {\n    var x = jStat.ibetainv(2 * Math.min(p, 1 - p), 0.5 * dof, 0.5);\n    x = Math.sqrt(dof * (1 - x) / x);\n    return (p > 0.5) ? x : -x;\n  },\n\n  mean: function mean(dof) {\n    return (dof > 1) ? 0 : undefined;\n  },\n\n  median: function median(/*dof*/) {\n    return 0;\n  },\n\n  mode: function mode(/*dof*/) {\n    return 0;\n  },\n\n  sample: function sample(dof) {\n    return jStat.randn() * Math.sqrt(dof / (2 * jStat.randg(dof / 2)));\n  },\n\n  variance: function variance(dof) {\n    return (dof  > 2) ? dof / (dof - 2) : (dof > 1) ? Infinity : undefined;\n  }\n});\n\n\n\n// extend weibull function with static methods\njStat.extend(jStat.weibull, {\n  pdf: function pdf(x, scale, shape) {\n    if (x < 0 || scale < 0 || shape < 0)\n      return 0;\n    return (shape / scale) * Math.pow((x / scale), (shape - 1)) *\n        Math.exp(-(Math.pow((x / scale), shape)));\n  },\n\n  cdf: function cdf(x, scale, shape) {\n    return x < 0 ? 0 : 1 - Math.exp(-Math.pow((x / scale), shape));\n  },\n\n  inv: function(p, scale, shape) {\n    return scale * Math.pow(-Math.log(1 - p), 1 / shape);\n  },\n\n  mean : function(scale, shape) {\n    return scale * jStat.gammafn(1 + 1 / shape);\n  },\n\n  median: function median(scale, shape) {\n    return scale * Math.pow(Math.log(2), 1 / shape);\n  },\n\n  mode: function mode(scale, shape) {\n    if (shape <= 1)\n      return 0;\n    return scale * Math.pow((shape - 1) / shape, 1 / shape);\n  },\n\n  sample: function sample(scale, shape) {\n    return scale * Math.pow(-Math.log(jStat._random_fn()), 1 / shape);\n  },\n\n  variance: function variance(scale, shape) {\n    return scale * scale * jStat.gammafn(1 + 2 / shape) -\n        Math.pow(jStat.weibull.mean(scale, shape), 2);\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.uniform, {\n  pdf: function pdf(x, a, b) {\n    return (x < a || x > b) ? 0 : 1 / (b - a);\n  },\n\n  cdf: function cdf(x, a, b) {\n    if (x < a)\n      return 0;\n    else if (x < b)\n      return (x - a) / (b - a);\n    return 1;\n  },\n\n  inv: function(p, a, b) {\n    return a + (p * (b - a));\n  },\n\n  mean: function mean(a, b) {\n    return 0.5 * (a + b);\n  },\n\n  median: function median(a, b) {\n    return jStat.mean(a, b);\n  },\n\n  mode: function mode(/*a, b*/) {\n    throw new Error('mode is not yet implemented');\n  },\n\n  sample: function sample(a, b) {\n    return (a / 2 + b / 2) + (b / 2 - a / 2) * (2 * jStat._random_fn() - 1);\n  },\n\n  variance: function variance(a, b) {\n    return Math.pow(b - a, 2) / 12;\n  }\n});\n\n\n// Got this from http://www.math.ucla.edu/~tom/distributions/binomial.html\nfunction betinc(x, a, b, eps) {\n  var a0 = 0;\n  var b0 = 1;\n  var a1 = 1;\n  var b1 = 1;\n  var m9 = 0;\n  var a2 = 0;\n  var c9;\n\n  while (Math.abs((a1 - a2) / a1) > eps) {\n    a2 = a1;\n    c9 = -(a + m9) * (a + b + m9) * x / (a + 2 * m9) / (a + 2 * m9 + 1);\n    a0 = a1 + c9 * a0;\n    b0 = b1 + c9 * b0;\n    m9 = m9 + 1;\n    c9 = m9 * (b - m9) * x / (a + 2 * m9 - 1) / (a + 2 * m9);\n    a1 = a0 + c9 * a1;\n    b1 = b0 + c9 * b1;\n    a0 = a0 / b1;\n    b0 = b0 / b1;\n    a1 = a1 / b1;\n    b1 = 1;\n  }\n\n  return a1 / a;\n}\n\n\n// extend uniform function with static methods\njStat.extend(jStat.binomial, {\n  pdf: function pdf(k, n, p) {\n    return (p === 0 || p === 1) ?\n      ((n * p) === k ? 1 : 0) :\n      jStat.combination(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);\n  },\n\n  cdf: function cdf(x, n, p) {\n    var betacdf;\n    var eps = 1e-10;\n\n    if (x < 0)\n      return 0;\n    if (x >= n)\n      return 1;\n    if (p < 0 || p > 1 || n <= 0)\n      return NaN;\n\n    x = Math.floor(x);\n    var z = p;\n    var a = x + 1;\n    var b = n - x;\n    var s = a + b;\n    var bt = Math.exp(jStat.gammaln(s) - jStat.gammaln(b) -\n                      jStat.gammaln(a) + a * Math.log(z) + b * Math.log(1 - z));\n\n    if (z < (a + 1) / (s + 2))\n      betacdf = bt * betinc(z, a, b, eps);\n    else\n      betacdf = 1 - bt * betinc(1 - z, b, a, eps);\n\n    return Math.round((1 - betacdf) * (1 / eps)) / (1 / eps);\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.negbin, {\n  pdf: function pdf(k, r, p) {\n    if (k !== k >>> 0)\n      return false;\n    if (k < 0)\n      return 0;\n    return jStat.combination(k + r - 1, r - 1) *\n        Math.pow(1 - p, k) * Math.pow(p, r);\n  },\n\n  cdf: function cdf(x, r, p) {\n    var sum = 0,\n    k = 0;\n    if (x < 0) return 0;\n    for (; k <= x; k++) {\n      sum += jStat.negbin.pdf(k, r, p);\n    }\n    return sum;\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.hypgeom, {\n  pdf: function pdf(k, N, m, n) {\n    // Hypergeometric PDF.\n\n    // A simplification of the CDF algorithm below.\n\n    // k = number of successes drawn\n    // N = population size\n    // m = number of successes in population\n    // n = number of items drawn from population\n\n    if(k !== k | 0) {\n      return false;\n    } else if(k < 0 || k < m - (N - n)) {\n      // It's impossible to have this few successes drawn.\n      return 0;\n    } else if(k > n || k > m) {\n      // It's impossible to have this many successes drawn.\n      return 0;\n    } else if (m * 2 > N) {\n      // More than half the population is successes.\n\n      if(n * 2 > N) {\n        // More than half the population is sampled.\n\n        return jStat.hypgeom.pdf(N - m - n + k, N, N - m, N - n)\n      } else {\n        // Half or less of the population is sampled.\n\n        return jStat.hypgeom.pdf(n - k, N, N - m, n);\n      }\n\n    } else if(n * 2 > N) {\n      // Half or less is successes.\n\n      return jStat.hypgeom.pdf(m - k, N, m, N - n);\n\n    } else if(m < n) {\n      // We want to have the number of things sampled to be less than the\n      // successes available. So swap the definitions of successful and sampled.\n      return jStat.hypgeom.pdf(k, N, n, m);\n    } else {\n      // If we get here, half or less of the population was sampled, half or\n      // less of it was successes, and we had fewer sampled things than\n      // successes. Now we can do this complicated iterative algorithm in an\n      // efficient way.\n\n      // The basic premise of the algorithm is that we partially normalize our\n      // intermediate product to keep it in a numerically good region, and then\n      // finish the normalization at the end.\n\n      // This variable holds the scaled probability of the current number of\n      // successes.\n      var scaledPDF = 1;\n\n      // This keeps track of how much we have normalized.\n      var samplesDone = 0;\n\n      for(var i = 0; i < k; i++) {\n        // For every possible number of successes up to that observed...\n\n        while(scaledPDF > 1 && samplesDone < n) {\n          // Intermediate result is growing too big. Apply some of the\n          // normalization to shrink everything.\n\n          scaledPDF *= 1 - (m / (N - samplesDone));\n\n          // Say we've normalized by this sample already.\n          samplesDone++;\n        }\n\n        // Work out the partially-normalized hypergeometric PDF for the next\n        // number of successes\n        scaledPDF *= (n - i) * (m - i) / ((i + 1) * (N - m - n + i + 1));\n      }\n\n      for(; samplesDone < n; samplesDone++) {\n        // Apply all the rest of the normalization\n        scaledPDF *= 1 - (m / (N - samplesDone));\n      }\n\n      // Bound answer sanely before returning.\n      return Math.min(1, Math.max(0, scaledPDF));\n    }\n  },\n\n  cdf: function cdf(x, N, m, n) {\n    // Hypergeometric CDF.\n\n    // This algorithm is due to Prof. Thomas S. Ferguson, <tom@math.ucla.edu>,\n    // and comes from his hypergeometric test calculator at\n    // <http://www.math.ucla.edu/~tom/distributions/Hypergeometric.html>.\n\n    // x = number of successes drawn\n    // N = population size\n    // m = number of successes in population\n    // n = number of items drawn from population\n\n    if(x < 0 || x < m - (N - n)) {\n      // It's impossible to have this few successes drawn or fewer.\n      return 0;\n    } else if(x >= n || x >= m) {\n      // We will always have this many successes or fewer.\n      return 1;\n    } else if (m * 2 > N) {\n      // More than half the population is successes.\n\n      if(n * 2 > N) {\n        // More than half the population is sampled.\n\n        return jStat.hypgeom.cdf(N - m - n + x, N, N - m, N - n)\n      } else {\n        // Half or less of the population is sampled.\n\n        return 1 - jStat.hypgeom.cdf(n - x - 1, N, N - m, n);\n      }\n\n    } else if(n * 2 > N) {\n      // Half or less is successes.\n\n      return 1 - jStat.hypgeom.cdf(m - x - 1, N, m, N - n);\n\n    } else if(m < n) {\n      // We want to have the number of things sampled to be less than the\n      // successes available. So swap the definitions of successful and sampled.\n      return jStat.hypgeom.cdf(x, N, n, m);\n    } else {\n      // If we get here, half or less of the population was sampled, half or\n      // less of it was successes, and we had fewer sampled things than\n      // successes. Now we can do this complicated iterative algorithm in an\n      // efficient way.\n\n      // The basic premise of the algorithm is that we partially normalize our\n      // intermediate sum to keep it in a numerically good region, and then\n      // finish the normalization at the end.\n\n      // Holds the intermediate, scaled total CDF.\n      var scaledCDF = 1;\n\n      // This variable holds the scaled probability of the current number of\n      // successes.\n      var scaledPDF = 1;\n\n      // This keeps track of how much we have normalized.\n      var samplesDone = 0;\n\n      for(var i = 0; i < x; i++) {\n        // For every possible number of successes up to that observed...\n\n        while(scaledCDF > 1 && samplesDone < n) {\n          // Intermediate result is growing too big. Apply some of the\n          // normalization to shrink everything.\n\n          var factor = 1 - (m / (N - samplesDone));\n\n          scaledPDF *= factor;\n          scaledCDF *= factor;\n\n          // Say we've normalized by this sample already.\n          samplesDone++;\n        }\n\n        // Work out the partially-normalized hypergeometric PDF for the next\n        // number of successes\n        scaledPDF *= (n - i) * (m - i) / ((i + 1) * (N - m - n + i + 1));\n\n        // Add to the CDF answer.\n        scaledCDF += scaledPDF;\n      }\n\n      for(; samplesDone < n; samplesDone++) {\n        // Apply all the rest of the normalization\n        scaledCDF *= 1 - (m / (N - samplesDone));\n      }\n\n      // Bound answer sanely before returning.\n      return Math.min(1, Math.max(0, scaledCDF));\n    }\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.poisson, {\n  pdf: function pdf(k, l) {\n    if (l < 0 || (k % 1) !== 0 || k < 0) {\n      return 0;\n    }\n\n    return Math.pow(l, k) * Math.exp(-l) / jStat.factorial(k);\n  },\n\n  cdf: function cdf(x, l) {\n    var sumarr = [],\n    k = 0;\n    if (x < 0) return 0;\n    for (; k <= x; k++) {\n      sumarr.push(jStat.poisson.pdf(k, l));\n    }\n    return jStat.sum(sumarr);\n  },\n\n  mean : function(l) {\n    return l;\n  },\n\n  variance : function(l) {\n    return l;\n  },\n\n  sampleSmall: function sampleSmall(l) {\n    var p = 1, k = 0, L = Math.exp(-l);\n    do {\n      k++;\n      p *= jStat._random_fn();\n    } while (p > L);\n    return k - 1;\n  },\n\n  sampleLarge: function sampleLarge(l) {\n    var lam = l;\n    var k;\n    var U, V, slam, loglam, a, b, invalpha, vr, us;\n\n    slam = Math.sqrt(lam);\n    loglam = Math.log(lam);\n    b = 0.931 + 2.53 * slam;\n    a = -0.059 + 0.02483 * b;\n    invalpha = 1.1239 + 1.1328 / (b - 3.4);\n    vr = 0.9277 - 3.6224 / (b - 2);\n\n    while (1) {\n      U = Math.random() - 0.5;\n      V = Math.random();\n      us = 0.5 - Math.abs(U);\n      k = Math.floor((2 * a / us + b) * U + lam + 0.43);\n      if ((us >= 0.07) && (V <= vr)) {\n          return k;\n      }\n      if ((k < 0) || ((us < 0.013) && (V > us))) {\n          continue;\n      }\n      /* log(V) == log(0.0) ok here */\n      /* if U==0.0 so that us==0.0, log is ok since always returns */\n      if ((Math.log(V) + Math.log(invalpha) - Math.log(a / (us * us) + b)) <= (-lam + k * loglam - jStat.loggam(k + 1))) {\n          return k;\n      }\n    }\n  },\n\n  sample: function sample(l) {\n    if (l < 10)\n      return this.sampleSmall(l);\n    else\n      return this.sampleLarge(l);\n  }\n});\n\n// extend triangular function with static methods\njStat.extend(jStat.triangular, {\n  pdf: function pdf(x, a, b, c) {\n    if (b <= a || c < a || c > b) {\n      return NaN;\n    } else {\n      if (x < a || x > b) {\n        return 0;\n      } else if (x < c) {\n          return (2 * (x - a)) / ((b - a) * (c - a));\n      } else if (x === c) {\n          return (2 / (b - a));\n      } else { // x > c\n          return (2 * (b - x)) / ((b - a) * (b - c));\n      }\n    }\n  },\n\n  cdf: function cdf(x, a, b, c) {\n    if (b <= a || c < a || c > b)\n      return NaN;\n    if (x <= a)\n      return 0;\n    else if (x >= b)\n      return 1;\n    if (x <= c)\n      return Math.pow(x - a, 2) / ((b - a) * (c - a));\n    else // x > c\n      return 1 - Math.pow(b - x, 2) / ((b - a) * (b - c));\n  },\n\n  inv: function inv(p, a, b, c) {\n    if (b <= a || c < a || c > b) {\n      return NaN;\n    } else {\n      if (p <= ((c - a) / (b - a))) {\n        return a + (b - a) * Math.sqrt(p * ((c - a) / (b - a)));\n      } else { // p > ((c - a) / (b - a))\n        return a + (b - a) * (1 - Math.sqrt((1 - p) * (1 - ((c - a) / (b - a)))));\n      }\n    }\n  },\n\n  mean: function mean(a, b, c) {\n    return (a + b + c) / 3;\n  },\n\n  median: function median(a, b, c) {\n    if (c <= (a + b) / 2) {\n      return b - Math.sqrt((b - a) * (b - c)) / Math.sqrt(2);\n    } else if (c > (a + b) / 2) {\n      return a + Math.sqrt((b - a) * (c - a)) / Math.sqrt(2);\n    }\n  },\n\n  mode: function mode(a, b, c) {\n    return c;\n  },\n\n  sample: function sample(a, b, c) {\n    var u = jStat._random_fn();\n    if (u < ((c - a) / (b - a)))\n      return a + Math.sqrt(u * (b - a) * (c - a))\n    return b - Math.sqrt((1 - u) * (b - a) * (b - c));\n  },\n\n  variance: function variance(a, b, c) {\n    return (a * a + b * b + c * c - a * b - a * c - b * c) / 18;\n  }\n});\n\n\n// extend arcsine function with static methods\njStat.extend(jStat.arcsine, {\n  pdf: function pdf(x, a, b) {\n    if (b <= a) return NaN;\n\n    return (x <= a || x >= b) ? 0 :\n      (2 / Math.PI) *\n        Math.pow(Math.pow(b - a, 2) -\n                  Math.pow(2 * x - a - b, 2), -0.5);\n  },\n\n  cdf: function cdf(x, a, b) {\n    if (x < a)\n      return 0;\n    else if (x < b)\n      return (2 / Math.PI) * Math.asin(Math.sqrt((x - a)/(b - a)));\n    return 1;\n  },\n\n  inv: function(p, a, b) {\n    return a + (0.5 - 0.5 * Math.cos(Math.PI * p)) * (b - a);\n  },\n\n  mean: function mean(a, b) {\n    if (b <= a) return NaN;\n    return (a + b) / 2;\n  },\n\n  median: function median(a, b) {\n    if (b <= a) return NaN;\n    return (a + b) / 2;\n  },\n\n  mode: function mode(/*a, b*/) {\n    throw new Error('mode is not yet implemented');\n  },\n\n  sample: function sample(a, b) {\n    return ((a + b) / 2) + ((b - a) / 2) *\n      Math.sin(2 * Math.PI * jStat.uniform.sample(0, 1));\n  },\n\n  variance: function variance(a, b) {\n    if (b <= a) return NaN;\n    return Math.pow(b - a, 2) / 8;\n  }\n});\n\n\nfunction laplaceSign(x) { return x / Math.abs(x); }\n\njStat.extend(jStat.laplace, {\n  pdf: function pdf(x, mu, b) {\n    return (b <= 0) ? 0 : (Math.exp(-Math.abs(x - mu) / b)) / (2 * b);\n  },\n\n  cdf: function cdf(x, mu, b) {\n    if (b <= 0) { return 0; }\n\n    if(x < mu) {\n      return 0.5 * Math.exp((x - mu) / b);\n    } else {\n      return 1 - 0.5 * Math.exp(- (x - mu) / b);\n    }\n  },\n\n  mean: function(mu/*, b*/) {\n    return mu;\n  },\n\n  median: function(mu/*, b*/) {\n    return mu;\n  },\n\n  mode: function(mu/*, b*/) {\n    return mu;\n  },\n\n  variance: function(mu, b) {\n    return 2 * b * b;\n  },\n\n  sample: function sample(mu, b) {\n    var u = jStat._random_fn() - 0.5;\n\n    return mu - (b * laplaceSign(u) * Math.log(1 - (2 * Math.abs(u))));\n  }\n});\n\nfunction tukeyWprob(w, rr, cc) {\n  var nleg = 12;\n  var ihalf = 6;\n\n  var C1 = -30;\n  var C2 = -50;\n  var C3 = 60;\n  var bb   = 8;\n  var wlar = 3;\n  var wincr1 = 2;\n  var wincr2 = 3;\n  var xleg = [\n    0.981560634246719250690549090149,\n    0.904117256370474856678465866119,\n    0.769902674194304687036893833213,\n    0.587317954286617447296702418941,\n    0.367831498998180193752691536644,\n    0.125233408511468915472441369464\n  ];\n  var aleg = [\n    0.047175336386511827194615961485,\n    0.106939325995318430960254718194,\n    0.160078328543346226334652529543,\n    0.203167426723065921749064455810,\n    0.233492536538354808760849898925,\n    0.249147045813402785000562436043\n  ];\n\n  var qsqz = w * 0.5;\n\n  // if w >= 16 then the integral lower bound (occurs for c=20)\n  // is 0.99999999999995 so return a value of 1.\n\n  if (qsqz >= bb)\n    return 1.0;\n\n  // find (f(w/2) - 1) ^ cc\n  // (first term in integral of hartley's form).\n\n  var pr_w = 2 * jStat.normal.cdf(qsqz, 0, 1, 1, 0) - 1; // erf(qsqz / M_SQRT2)\n  // if pr_w ^ cc < 2e-22 then set pr_w = 0\n  if (pr_w >= Math.exp(C2 / cc))\n    pr_w = Math.pow(pr_w, cc);\n  else\n    pr_w = 0.0;\n\n  // if w is large then the second component of the\n  // integral is small, so fewer intervals are needed.\n\n  var wincr;\n  if (w > wlar)\n    wincr = wincr1;\n  else\n    wincr = wincr2;\n\n  // find the integral of second term of hartley's form\n  // for the integral of the range for equal-length\n  // intervals using legendre quadrature.  limits of\n  // integration are from (w/2, 8).  two or three\n  // equal-length intervals are used.\n\n  // blb and bub are lower and upper limits of integration.\n\n  var blb = qsqz;\n  var binc = (bb - qsqz) / wincr;\n  var bub = blb + binc;\n  var einsum = 0.0;\n\n  // integrate over each interval\n\n  var cc1 = cc - 1.0;\n  for (var wi = 1; wi <= wincr; wi++) {\n    var elsum = 0.0;\n    var a = 0.5 * (bub + blb);\n\n    // legendre quadrature with order = nleg\n\n    var b = 0.5 * (bub - blb);\n\n    for (var jj = 1; jj <= nleg; jj++) {\n      var j, xx;\n      if (ihalf < jj) {\n        j = (nleg - jj) + 1;\n        xx = xleg[j-1];\n      } else {\n        j = jj;\n        xx = -xleg[j-1];\n      }\n      var c = b * xx;\n      var ac = a + c;\n\n      // if exp(-qexpo/2) < 9e-14,\n      // then doesn't contribute to integral\n\n      var qexpo = ac * ac;\n      if (qexpo > C3)\n        break;\n\n      var pplus = 2 * jStat.normal.cdf(ac, 0, 1, 1, 0);\n      var pminus= 2 * jStat.normal.cdf(ac, w, 1, 1, 0);\n\n      // if rinsum ^ (cc-1) < 9e-14,\n      // then doesn't contribute to integral\n\n      var rinsum = (pplus * 0.5) - (pminus * 0.5);\n      if (rinsum >= Math.exp(C1 / cc1)) {\n        rinsum = (aleg[j-1] * Math.exp(-(0.5 * qexpo))) * Math.pow(rinsum, cc1);\n        elsum += rinsum;\n      }\n    }\n    elsum *= (((2.0 * b) * cc) / Math.sqrt(2 * Math.PI));\n    einsum += elsum;\n    blb = bub;\n    bub += binc;\n  }\n\n  // if pr_w ^ rr < 9e-14, then return 0\n  pr_w += einsum;\n  if (pr_w <= Math.exp(C1 / rr))\n    return 0;\n\n  pr_w = Math.pow(pr_w, rr);\n  if (pr_w >= 1) // 1 was iMax was eps\n    return 1;\n  return pr_w;\n}\n\nfunction tukeyQinv(p, c, v) {\n  var p0 = 0.322232421088;\n  var q0 = 0.993484626060e-01;\n  var p1 = -1.0;\n  var q1 = 0.588581570495;\n  var p2 = -0.342242088547;\n  var q2 = 0.531103462366;\n  var p3 = -0.204231210125;\n  var q3 = 0.103537752850;\n  var p4 = -0.453642210148e-04;\n  var q4 = 0.38560700634e-02;\n  var c1 = 0.8832;\n  var c2 = 0.2368;\n  var c3 = 1.214;\n  var c4 = 1.208;\n  var c5 = 1.4142;\n  var vmax = 120.0;\n\n  var ps = 0.5 - 0.5 * p;\n  var yi = Math.sqrt(Math.log(1.0 / (ps * ps)));\n  var t = yi + (((( yi * p4 + p3) * yi + p2) * yi + p1) * yi + p0)\n     / (((( yi * q4 + q3) * yi + q2) * yi + q1) * yi + q0);\n  if (v < vmax) t += (t * t * t + t) / v / 4.0;\n  var q = c1 - c2 * t;\n  if (v < vmax) q += -c3 / v + c4 * t / v;\n  return t * (q * Math.log(c - 1.0) + c5);\n}\n\njStat.extend(jStat.tukey, {\n  cdf: function cdf(q, nmeans, df) {\n    // Identical implementation as the R ptukey() function as of commit 68947\n    var rr = 1;\n    var cc = nmeans;\n\n    var nlegq = 16;\n    var ihalfq = 8;\n\n    var eps1 = -30.0;\n    var eps2 = 1.0e-14;\n    var dhaf  = 100.0;\n    var dquar = 800.0;\n    var deigh = 5000.0;\n    var dlarg = 25000.0;\n    var ulen1 = 1.0;\n    var ulen2 = 0.5;\n    var ulen3 = 0.25;\n    var ulen4 = 0.125;\n    var xlegq = [\n      0.989400934991649932596154173450,\n      0.944575023073232576077988415535,\n      0.865631202387831743880467897712,\n      0.755404408355003033895101194847,\n      0.617876244402643748446671764049,\n      0.458016777657227386342419442984,\n      0.281603550779258913230460501460,\n      0.950125098376374401853193354250e-1\n    ];\n    var alegq = [\n      0.271524594117540948517805724560e-1,\n      0.622535239386478928628438369944e-1,\n      0.951585116824927848099251076022e-1,\n      0.124628971255533872052476282192,\n      0.149595988816576732081501730547,\n      0.169156519395002538189312079030,\n      0.182603415044923588866763667969,\n      0.189450610455068496285396723208\n    ];\n\n    if (q <= 0)\n      return 0;\n\n    // df must be > 1\n    // there must be at least two values\n\n    if (df < 2 || rr < 1 || cc < 2) return NaN;\n\n    if (!Number.isFinite(q))\n      return 1;\n\n    if (df > dlarg)\n      return tukeyWprob(q, rr, cc);\n\n    // calculate leading constant\n\n    var f2 = df * 0.5;\n    var f2lf = ((f2 * Math.log(df)) - (df * Math.log(2))) - jStat.gammaln(f2);\n    var f21 = f2 - 1.0;\n\n    // integral is divided into unit, half-unit, quarter-unit, or\n    // eighth-unit length intervals depending on the value of the\n    // degrees of freedom.\n\n    var ff4 = df * 0.25;\n    var ulen;\n    if      (df <= dhaf)  ulen = ulen1;\n    else if (df <= dquar) ulen = ulen2;\n    else if (df <= deigh) ulen = ulen3;\n    else                  ulen = ulen4;\n\n    f2lf += Math.log(ulen);\n\n    // integrate over each subinterval\n\n    var ans = 0.0;\n\n    for (var i = 1; i <= 50; i++) {\n      var otsum = 0.0;\n\n      // legendre quadrature with order = nlegq\n      // nodes (stored in xlegq) are symmetric around zero.\n\n      var twa1 = (2 * i - 1) * ulen;\n\n      for (var jj = 1; jj <= nlegq; jj++) {\n        var j, t1;\n        if (ihalfq < jj) {\n          j = jj - ihalfq - 1;\n          t1 = (f2lf + (f21 * Math.log(twa1 + (xlegq[j] * ulen))))\n              - (((xlegq[j] * ulen) + twa1) * ff4);\n        } else {\n          j = jj - 1;\n          t1 = (f2lf + (f21 * Math.log(twa1 - (xlegq[j] * ulen))))\n              + (((xlegq[j] * ulen) - twa1) * ff4);\n        }\n\n        // if exp(t1) < 9e-14, then doesn't contribute to integral\n        var qsqz;\n        if (t1 >= eps1) {\n          if (ihalfq < jj) {\n            qsqz = q * Math.sqrt(((xlegq[j] * ulen) + twa1) * 0.5);\n          } else {\n            qsqz = q * Math.sqrt(((-(xlegq[j] * ulen)) + twa1) * 0.5);\n          }\n\n          // call wprob to find integral of range portion\n\n          var wprb = tukeyWprob(qsqz, rr, cc);\n          var rotsum = (wprb * alegq[j]) * Math.exp(t1);\n          otsum += rotsum;\n        }\n        // end legendre integral for interval i\n        // L200:\n      }\n\n      // if integral for interval i < 1e-14, then stop.\n      // However, in order to avoid small area under left tail,\n      // at least  1 / ulen  intervals are calculated.\n      if (i * ulen >= 1.0 && otsum <= eps2)\n        break;\n\n      // end of interval i\n      // L330:\n\n      ans += otsum;\n    }\n\n    if (otsum > eps2) { // not converged\n      throw new Error('tukey.cdf failed to converge');\n    }\n    if (ans > 1)\n      ans = 1;\n    return ans;\n  },\n\n  inv: function(p, nmeans, df) {\n    // Identical implementation as the R qtukey() function as of commit 68947\n    var rr = 1;\n    var cc = nmeans;\n\n    var eps = 0.0001;\n    var maxiter = 50;\n\n    // df must be > 1 ; there must be at least two values\n    if (df < 2 || rr < 1 || cc < 2) return NaN;\n\n    if (p < 0 || p > 1) return NaN;\n    if (p === 0) return 0;\n    if (p === 1) return Infinity;\n\n    // Initial value\n\n    var x0 = tukeyQinv(p, cc, df);\n\n    // Find prob(value < x0)\n\n    var valx0 = jStat.tukey.cdf(x0, nmeans, df) - p;\n\n    // Find the second iterate and prob(value < x1).\n    // If the first iterate has probability value\n    // exceeding p then second iterate is 1 less than\n    // first iterate; otherwise it is 1 greater.\n\n    var x1;\n    if (valx0 > 0.0)\n      x1 = Math.max(0.0, x0 - 1.0);\n    else\n      x1 = x0 + 1.0;\n    var valx1 = jStat.tukey.cdf(x1, nmeans, df) - p;\n\n    // Find new iterate\n\n    var ans;\n    for(var iter = 1; iter < maxiter; iter++) {\n      ans = x1 - ((valx1 * (x1 - x0)) / (valx1 - valx0));\n      valx0 = valx1;\n\n      // New iterate must be >= 0\n\n      x0 = x1;\n      if (ans < 0.0) {\n        ans = 0.0;\n        valx1 = -p;\n      }\n      // Find prob(value < new iterate)\n\n      valx1 = jStat.tukey.cdf(ans, nmeans, df) - p;\n      x1 = ans;\n\n      // If the difference between two successive\n      // iterates is less than eps, stop\n\n      var xabs = Math.abs(x1 - x0);\n      if (xabs < eps)\n        return ans;\n    }\n\n    throw new Error('tukey.inv failed to converge');\n  }\n});\n\n}(jStat, Math));\n/* Provides functions for the solution of linear system of equations, integration, extrapolation,\n * interpolation, eigenvalue problems, differential equations and PCA analysis. */\n\n(function(jStat, Math) {\n\nvar push = Array.prototype.push;\nvar isArray = jStat.utils.isArray;\n\nfunction isUsable(arg) {\n  return isArray(arg) || arg instanceof jStat;\n}\n\njStat.extend({\n\n  // add a vector/matrix to a vector/matrix or scalar\n  add: function add(arr, arg) {\n    // check if arg is a vector or scalar\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.map(arr, function(value, row, col) {\n        return value + arg[row][col];\n      });\n    }\n    return jStat.map(arr, function(value) { return value + arg; });\n  },\n\n  // subtract a vector or scalar from the vector\n  subtract: function subtract(arr, arg) {\n    // check if arg is a vector or scalar\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.map(arr, function(value, row, col) {\n        return value - arg[row][col] || 0;\n      });\n    }\n    return jStat.map(arr, function(value) { return value - arg; });\n  },\n\n  // matrix division\n  divide: function divide(arr, arg) {\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.multiply(arr, jStat.inv(arg));\n    }\n    return jStat.map(arr, function(value) { return value / arg; });\n  },\n\n  // matrix multiplication\n  multiply: function multiply(arr, arg) {\n    var row, col, nrescols, sum, nrow, ncol, res, rescols;\n    // eg: arr = 2 arg = 3 -> 6 for res[0][0] statement closure\n    if (arr.length === undefined && arg.length === undefined) {\n      return arr * arg;\n    }\n    nrow = arr.length,\n    ncol = arr[0].length,\n    res = jStat.zeros(nrow, nrescols = (isUsable(arg)) ? arg[0].length : ncol),\n    rescols = 0;\n    if (isUsable(arg)) {\n      for (; rescols < nrescols; rescols++) {\n        for (row = 0; row < nrow; row++) {\n          sum = 0;\n          for (col = 0; col < ncol; col++)\n          sum += arr[row][col] * arg[col][rescols];\n          res[row][rescols] = sum;\n        }\n      }\n      return (nrow === 1 && rescols === 1) ? res[0][0] : res;\n    }\n    return jStat.map(arr, function(value) { return value * arg; });\n  },\n\n  // outer([1,2,3],[4,5,6])\n  // ===\n  // [[1],[2],[3]] times [[4,5,6]]\n  // ->\n  // [[4,5,6],[8,10,12],[12,15,18]]\n  outer:function outer(A, B) {\n    return jStat.multiply(A.map(function(t){ return [t] }), [B]);\n  },\n\n\n  // Returns the dot product of two matricies\n  dot: function dot(arr, arg) {\n    if (!isUsable(arr[0])) arr = [ arr ];\n    if (!isUsable(arg[0])) arg = [ arg ];\n    // convert column to row vector\n    var left = (arr[0].length === 1 && arr.length !== 1) ? jStat.transpose(arr) : arr,\n    right = (arg[0].length === 1 && arg.length !== 1) ? jStat.transpose(arg) : arg,\n    res = [],\n    row = 0,\n    nrow = left.length,\n    ncol = left[0].length,\n    sum, col;\n    for (; row < nrow; row++) {\n      res[row] = [];\n      sum = 0;\n      for (col = 0; col < ncol; col++)\n      sum += left[row][col] * right[row][col];\n      res[row] = sum;\n    }\n    return (res.length === 1) ? res[0] : res;\n  },\n\n  // raise every element by a scalar\n  pow: function pow(arr, arg) {\n    return jStat.map(arr, function(value) { return Math.pow(value, arg); });\n  },\n\n  // exponentiate every element\n  exp: function exp(arr) {\n    return jStat.map(arr, function(value) { return Math.exp(value); });\n  },\n\n  // generate the natural log of every element\n  log: function exp(arr) {\n    return jStat.map(arr, function(value) { return Math.log(value); });\n  },\n\n  // generate the absolute values of the vector\n  abs: function abs(arr) {\n    return jStat.map(arr, function(value) { return Math.abs(value); });\n  },\n\n  // computes the p-norm of the vector\n  // In the case that a matrix is passed, uses the first row as the vector\n  norm: function norm(arr, p) {\n    var nnorm = 0,\n    i = 0;\n    // check the p-value of the norm, and set for most common case\n    if (isNaN(p)) p = 2;\n    // check if multi-dimensional array, and make vector correction\n    if (isUsable(arr[0])) arr = arr[0];\n    // vector norm\n    for (; i < arr.length; i++) {\n      nnorm += Math.pow(Math.abs(arr[i]), p);\n    }\n    return Math.pow(nnorm, 1 / p);\n  },\n\n  // computes the angle between two vectors in rads\n  // In case a matrix is passed, this uses the first row as the vector\n  angle: function angle(arr, arg) {\n    return Math.acos(jStat.dot(arr, arg) / (jStat.norm(arr) * jStat.norm(arg)));\n  },\n\n  // augment one matrix by another\n  // Note: this function returns a matrix, not a jStat object\n  aug: function aug(a, b) {\n    var newarr = [];\n    var i;\n    for (i = 0; i < a.length; i++) {\n      newarr.push(a[i].slice());\n    }\n    for (i = 0; i < newarr.length; i++) {\n      push.apply(newarr[i], b[i]);\n    }\n    return newarr;\n  },\n\n  // The inv() function calculates the inverse of a matrix\n  // Create the inverse by augmenting the matrix by the identity matrix of the\n  // appropriate size, and then use G-J elimination on the augmented matrix.\n  inv: function inv(a) {\n    var rows = a.length;\n    var cols = a[0].length;\n    var b = jStat.identity(rows, cols);\n    var c = jStat.gauss_jordan(a, b);\n    var result = [];\n    var i = 0;\n    var j;\n\n    //We need to copy the inverse portion to a new matrix to rid G-J artifacts\n    for (; i < rows; i++) {\n      result[i] = [];\n      for (j = cols; j < c[0].length; j++)\n        result[i][j - cols] = c[i][j];\n    }\n    return result;\n  },\n\n  // calculate the determinant of a matrix\n  det: function det(a) {\n    if (a.length === 2) {\n      return a[0][0] * a[1][1] - a[0][1] * a[1][0];\n    }\n\n    var determinant = 0;\n    for (var i = 0; i < a.length; i++) {\n      // build a sub matrix without column `i`\n      var submatrix = [];\n      for (var row = 1; row < a.length; row++) {\n        submatrix[row - 1] = [];\n        for (var col = 0; col < a.length; col++) {\n          if (col < i) {\n            submatrix[row - 1][col] = a[row][col];\n          } else if (col > i) {\n            submatrix[row - 1][col - 1] = a[row][col];\n          }\n        }\n      }\n\n      // alternate between + and - between determinants\n      var sign = i % 2 ? -1 : 1;\n      determinant += det(submatrix) * a[0][i] * sign;\n    }\n\n    return determinant\n  },\n\n  gauss_elimination: function gauss_elimination(a, b) {\n    var i = 0,\n    j = 0,\n    n = a.length,\n    m = a[0].length,\n    factor = 1,\n    sum = 0,\n    x = [],\n    maug, pivot, temp, k;\n    a = jStat.aug(a, b);\n    maug = a[0].length;\n    for(i = 0; i < n; i++) {\n      pivot = a[i][i];\n      j = i;\n      for (k = i + 1; k < m; k++) {\n        if (pivot < Math.abs(a[k][i])) {\n          pivot = a[k][i];\n          j = k;\n        }\n      }\n      if (j != i) {\n        for(k = 0; k < maug; k++) {\n          temp = a[i][k];\n          a[i][k] = a[j][k];\n          a[j][k] = temp;\n        }\n      }\n      for (j = i + 1; j < n; j++) {\n        factor = a[j][i] / a[i][i];\n        for(k = i; k < maug; k++) {\n          a[j][k] = a[j][k] - factor * a[i][k];\n        }\n      }\n    }\n    for (i = n - 1; i >= 0; i--) {\n      sum = 0;\n      for (j = i + 1; j<= n - 1; j++) {\n        sum = sum + x[j] * a[i][j];\n      }\n      x[i] =(a[i][maug - 1] - sum) / a[i][i];\n    }\n    return x;\n  },\n\n  gauss_jordan: function gauss_jordan(a, b) {\n    var m = jStat.aug(a, b);\n    var h = m.length;\n    var w = m[0].length;\n    var c = 0;\n    var x, y, y2;\n    // find max pivot\n    for (y = 0; y < h; y++) {\n      var maxrow = y;\n      for (y2 = y+1; y2 < h; y2++) {\n        if (Math.abs(m[y2][y]) > Math.abs(m[maxrow][y]))\n          maxrow = y2;\n      }\n      var tmp = m[y];\n      m[y] = m[maxrow];\n      m[maxrow] = tmp\n      for (y2 = y+1; y2 < h; y2++) {\n        c = m[y2][y] / m[y][y];\n        for (x = y; x < w; x++) {\n          m[y2][x] -= m[y][x] * c;\n        }\n      }\n    }\n    // backsubstitute\n    for (y = h-1; y >= 0; y--) {\n      c = m[y][y];\n      for (y2 = 0; y2 < y; y2++) {\n        for (x = w-1; x > y-1; x--) {\n          m[y2][x] -= m[y][x] * m[y2][y] / c;\n        }\n      }\n      m[y][y] /= c;\n      for (x = h; x < w; x++) {\n        m[y][x] /= c;\n      }\n    }\n    return m;\n  },\n\n  // solve equation\n  // Ax=b\n  // A is upper triangular matrix\n  // A=[[1,2,3],[0,4,5],[0,6,7]]\n  // b=[1,2,3]\n  // triaUpSolve(A,b) // -> [2.666,0.1666,1.666]\n  // if you use matrix style\n  // A=[[1,2,3],[0,4,5],[0,6,7]]\n  // b=[[1],[2],[3]]\n  // will return [[2.666],[0.1666],[1.666]]\n  triaUpSolve: function triaUpSolve(A, b) {\n    var size = A[0].length;\n    var x = jStat.zeros(1, size)[0];\n    var parts;\n    var matrix_mode = false;\n\n    if (b[0].length != undefined) {\n      b = b.map(function(i){ return i[0] });\n      matrix_mode = true;\n    }\n\n    jStat.arange(size - 1, -1, -1).forEach(function(i) {\n      parts = jStat.arange(i + 1, size).map(function(j) {\n        return x[j] * A[i][j];\n      });\n      x[i] = (b[i] - jStat.sum(parts)) / A[i][i];\n    });\n\n    if (matrix_mode)\n      return x.map(function(i){ return [i] });\n    return x;\n  },\n\n  triaLowSolve: function triaLowSolve(A, b) {\n    // like to triaUpSolve but A is lower triangular matrix\n    var size = A[0].length;\n    var x = jStat.zeros(1, size)[0];\n    var parts;\n\n    var matrix_mode=false;\n    if (b[0].length != undefined) {\n      b = b.map(function(i){ return i[0] });\n      matrix_mode = true;\n    }\n\n    jStat.arange(size).forEach(function(i) {\n      parts = jStat.arange(i).map(function(j) {\n        return A[i][j] * x[j];\n      });\n      x[i] = (b[i] - jStat.sum(parts)) / A[i][i];\n    })\n\n    if (matrix_mode)\n      return x.map(function(i){ return [i] });\n    return x;\n  },\n\n\n  // A -> [L,U]\n  // A=LU\n  // L is lower triangular matrix\n  // U is upper triangular matrix\n  lu: function lu(A) {\n    var size = A.length;\n    //var L=jStat.diagonal(jStat.ones(1,size)[0]);\n    var L = jStat.identity(size);\n    var R = jStat.zeros(A.length, A[0].length);\n    var parts;\n    jStat.arange(size).forEach(function(t) {\n      R[0][t] = A[0][t];\n    });\n    jStat.arange(1, size).forEach(function(l) {\n      jStat.arange(l).forEach(function(i) {\n        parts = jStat.arange(i).map(function(jj) {\n          return L[l][jj] * R[jj][i];\n        });\n        L[l][i] = (A[l][i] - jStat.sum(parts)) / R[i][i];\n      });\n      jStat.arange(l, size).forEach(function(j) {\n        parts = jStat.arange(l).map(function(jj) {\n          return L[l][jj] * R[jj][j];\n        });\n        R[l][j] = A[parts.length][j] - jStat.sum(parts);\n      });\n    });\n    return [L, R];\n  },\n\n  // A -> T\n  // A=TT'\n  // T is lower triangular matrix\n  cholesky: function cholesky(A) {\n    var size = A.length;\n    var T = jStat.zeros(A.length, A[0].length);\n    var parts;\n    jStat.arange(size).forEach(function(i) {\n      parts = jStat.arange(i).map(function(t) {\n        return Math.pow(T[i][t],2);\n      });\n      T[i][i] = Math.sqrt(A[i][i] - jStat.sum(parts));\n      jStat.arange(i + 1, size).forEach(function(j) {\n        parts = jStat.arange(i).map(function(t) {\n          return T[i][t] * T[j][t];\n        });\n        T[j][i] = (A[i][j] - jStat.sum(parts)) / T[i][i];\n      });\n    });\n    return T;\n  },\n\n\n  gauss_jacobi: function gauss_jacobi(a, b, x, r) {\n    var i = 0;\n    var j = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.multiply(jStat.inv(d), jStat.add(l, u)), -1);\n    c = jStat.multiply(jStat.inv(d), b);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk,xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i++;\n    }\n    return xk;\n  },\n\n  gauss_seidel: function gauss_seidel(a, b, x, r) {\n    var i = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var j, xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.multiply(jStat.inv(jStat.add(d, l)), u), -1);\n    c = jStat.multiply(jStat.inv(jStat.add(d, l)), b);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk, xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i = i + 1;\n    }\n    return xk;\n  },\n\n  SOR: function SOR(a, b, x, r, w) {\n    var i = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var j, xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.inv(jStat.add(d, jStat.multiply(l, w))),\n                       jStat.subtract(jStat.multiply(d, 1 - w),\n                                      jStat.multiply(u, w)));\n    c = jStat.multiply(jStat.multiply(jStat.inv(jStat.add(d,\n        jStat.multiply(l, w))), b), w);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk, xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i++;\n    }\n    return xk;\n  },\n\n  householder: function householder(a) {\n    var m = a.length;\n    var n = a[0].length;\n    var i = 0;\n    var w = [];\n    var p = [];\n    var alpha, r, k, j, factor;\n    for (; i < m - 1; i++) {\n      alpha = 0;\n      for (j = i + 1; j < n; j++)\n      alpha += (a[j][i] * a[j][i]);\n      factor = (a[i + 1][i] > 0) ? -1 : 1;\n      alpha = factor * Math.sqrt(alpha);\n      r = Math.sqrt((((alpha * alpha) - a[i + 1][i] * alpha) / 2));\n      w = jStat.zeros(m, 1);\n      w[i + 1][0] = (a[i + 1][i] - alpha) / (2 * r);\n      for (k = i + 2; k < m; k++) w[k][0] = a[k][i] / (2 * r);\n      p = jStat.subtract(jStat.identity(m, n),\n          jStat.multiply(jStat.multiply(w, jStat.transpose(w)), 2));\n      a = jStat.multiply(p, jStat.multiply(a, p));\n    }\n    return a;\n  },\n\n  // A -> [Q,R]\n  // Q is orthogonal matrix\n  // R is upper triangular\n  QR: (function() {\n    // x -> Q\n    // find a orthogonal matrix Q st.\n    // Qx=y\n    // y is [||x||,0,0,...]\n\n    // quick ref\n    var sum   = jStat.sum;\n    var range = jStat.arange;\n\n    function qr2(x) {\n      // quick impletation\n      // https://www.stat.wisc.edu/~larget/math496/qr.html\n\n      var n = x.length;\n      var p = x[0].length;\n\n      var r = jStat.zeros(p, p);\n      x = jStat.copy(x);\n\n      var i,j,k;\n      for(j = 0; j < p; j++){\n        r[j][j] = Math.sqrt(sum(range(n).map(function(i){\n          return x[i][j] * x[i][j];\n        })));\n        for(i = 0; i < n; i++){\n          x[i][j] = x[i][j] / r[j][j];\n        }\n        for(k = j+1; k < p; k++){\n          r[j][k] = sum(range(n).map(function(i){\n            return x[i][j] * x[i][k];\n          }));\n          for(i = 0; i < n; i++){\n            x[i][k] = x[i][k] - x[i][j]*r[j][k];\n          }\n        }\n      }\n      return [x, r];\n    }\n\n    return qr2;\n  }()),\n\n  lstsq: (function() {\n    // solve least squard problem for Ax=b as QR decomposition way if b is\n    // [[b1],[b2],[b3]] form will return [[x1],[x2],[x3]] array form solution\n    // else b is [b1,b2,b3] form will return [x1,x2,x3] array form solution\n    function R_I(A) {\n      A = jStat.copy(A);\n      var size = A.length;\n      var I = jStat.identity(size);\n      jStat.arange(size - 1, -1, -1).forEach(function(i) {\n        jStat.sliceAssign(\n            I, { row: i }, jStat.divide(jStat.slice(I, { row: i }), A[i][i]));\n        jStat.sliceAssign(\n            A, { row: i }, jStat.divide(jStat.slice(A, { row: i }), A[i][i]));\n        jStat.arange(i).forEach(function(j) {\n          var c = jStat.multiply(A[j][i], -1);\n          var Aj = jStat.slice(A, { row: j });\n          var cAi = jStat.multiply(jStat.slice(A, { row: i }), c);\n          jStat.sliceAssign(A, { row: j }, jStat.add(Aj, cAi));\n          var Ij = jStat.slice(I, { row: j });\n          var cIi = jStat.multiply(jStat.slice(I, { row: i }), c);\n          jStat.sliceAssign(I, { row: j }, jStat.add(Ij, cIi));\n        })\n      });\n      return I;\n    }\n\n    function qr_solve(A, b){\n      var array_mode = false;\n      if (b[0].length === undefined) {\n        // [c1,c2,c3] mode\n        b = b.map(function(x){ return [x] });\n        array_mode = true;\n      }\n      var QR = jStat.QR(A);\n      var Q = QR[0];\n      var R = QR[1];\n      var attrs = A[0].length;\n      var Q1 = jStat.slice(Q,{col:{end:attrs}});\n      var R1 = jStat.slice(R,{row:{end:attrs}});\n      var RI = R_I(R1);\n      var Q2 = jStat.transpose(Q1);\n\n      if(Q2[0].length === undefined){\n        Q2 = [Q2]; // The confusing jStat.multifly implementation threat nature process again.\n      }\n\n      var x = jStat.multiply(jStat.multiply(RI, Q2), b);\n\n      if(x.length === undefined){\n        x = [[x]]; // The confusing jStat.multifly implementation threat nature process again.\n      }\n\n\n      if (array_mode)\n        return x.map(function(i){ return i[0] });\n      return x;\n    }\n\n    return qr_solve;\n  }()),\n\n  jacobi: function jacobi(a) {\n    var condition = 1;\n    var n = a.length;\n    var e = jStat.identity(n, n);\n    var ev = [];\n    var b, i, j, p, q, maxim, theta, s;\n    // condition === 1 only if tolerance is not reached\n    while (condition === 1) {\n      maxim = a[0][1];\n      p = 0;\n      q = 1;\n      for (i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n          if (i != j) {\n            if (maxim < Math.abs(a[i][j])) {\n              maxim = Math.abs(a[i][j]);\n              p = i;\n              q = j;\n            }\n          }\n        }\n      }\n      if (a[p][p] === a[q][q])\n        theta = (a[p][q] > 0) ? Math.PI / 4 : -Math.PI / 4;\n      else\n        theta = Math.atan(2 * a[p][q] / (a[p][p] - a[q][q])) / 2;\n      s = jStat.identity(n, n);\n      s[p][p] = Math.cos(theta);\n      s[p][q] = -Math.sin(theta);\n      s[q][p] = Math.sin(theta);\n      s[q][q] = Math.cos(theta);\n      // eigen vector matrix\n      e = jStat.multiply(e, s);\n      b = jStat.multiply(jStat.multiply(jStat.inv(s), a), s);\n      a = b;\n      condition = 0;\n      for (i = 1; i < n; i++) {\n        for (j = 1; j < n; j++) {\n          if (i != j && Math.abs(a[i][j]) > 0.001) {\n            condition = 1;\n          }\n        }\n      }\n    }\n    for (i = 0; i < n; i++) ev.push(a[i][i]);\n    //returns both the eigenvalue and eigenmatrix\n    return [e, ev];\n  },\n\n  rungekutta: function rungekutta(f, h, p, t_j, u_j, order) {\n    var k1, k2, u_j1, k3, k4;\n    if (order === 2) {\n      while (t_j <= p) {\n        k1 = h * f(t_j, u_j);\n        k2 = h * f(t_j + h, u_j + k1);\n        u_j1 = u_j + (k1 + k2) / 2;\n        u_j = u_j1;\n        t_j = t_j + h;\n      }\n    }\n    if (order === 4) {\n      while (t_j <= p) {\n        k1 = h * f(t_j, u_j);\n        k2 = h * f(t_j + h / 2, u_j + k1 / 2);\n        k3 = h * f(t_j + h / 2, u_j + k2 / 2);\n        k4 = h * f(t_j +h, u_j + k3);\n        u_j1 = u_j + (k1 + 2 * k2 + 2 * k3 + k4) / 6;\n        u_j = u_j1;\n        t_j = t_j + h;\n      }\n    }\n    return u_j;\n  },\n\n  romberg: function romberg(f, a, b, order) {\n    var i = 0;\n    var h = (b - a) / 2;\n    var x = [];\n    var h1 = [];\n    var g = [];\n    var m, a1, j, k, I;\n    while (i < order / 2) {\n      I = f(a);\n      for (j = a, k = 0; j <= b; j = j + h, k++) x[k] = j;\n      m = x.length;\n      for (j = 1; j < m - 1; j++) {\n        I += (((j % 2) !== 0) ? 4 : 2) * f(x[j]);\n      }\n      I = (h / 3) * (I + f(b));\n      g[i] = I;\n      h /= 2;\n      i++;\n    }\n    a1 = g.length;\n    m = 1;\n    while (a1 !== 1) {\n      for (j = 0; j < a1 - 1; j++)\n      h1[j] = ((Math.pow(4, m)) * g[j + 1] - g[j]) / (Math.pow(4, m) - 1);\n      a1 = h1.length;\n      g = h1;\n      h1 = [];\n      m++;\n    }\n    return g;\n  },\n\n  richardson: function richardson(X, f, x, h) {\n    function pos(X, x) {\n      var i = 0;\n      var n = X.length;\n      var p;\n      for (; i < n; i++)\n        if (X[i] === x) p = i;\n      return p;\n    }\n    var h_min = Math.abs(x - X[pos(X, x) + 1]);\n    var i = 0;\n    var g = [];\n    var h1 = [];\n    var y1, y2, m, a, j;\n    while (h >= h_min) {\n      y1 = pos(X, x + h);\n      y2 = pos(X, x);\n      g[i] = (f[y1] - 2 * f[y2] + f[2 * y2 - y1]) / (h * h);\n      h /= 2;\n      i++;\n    }\n    a = g.length;\n    m = 1;\n    while (a != 1) {\n      for (j = 0; j < a - 1; j++)\n        h1[j] = ((Math.pow(4, m)) * g[j + 1] - g[j]) / (Math.pow(4, m) - 1);\n      a = h1.length;\n      g = h1;\n      h1 = [];\n      m++;\n    }\n    return g;\n  },\n\n  simpson: function simpson(f, a, b, n) {\n    var h = (b - a) / n;\n    var I = f(a);\n    var x = [];\n    var j = a;\n    var k = 0;\n    var i = 1;\n    var m;\n    for (; j <= b; j = j + h, k++)\n      x[k] = j;\n    m = x.length;\n    for (; i < m - 1; i++) {\n      I += ((i % 2 !== 0) ? 4 : 2) * f(x[i]);\n    }\n    return (h / 3) * (I + f(b));\n  },\n\n  hermite: function hermite(X, F, dF, value) {\n    var n = X.length;\n    var p = 0;\n    var i = 0;\n    var l = [];\n    var dl = [];\n    var A = [];\n    var B = [];\n    var j;\n    for (; i < n; i++) {\n      l[i] = 1;\n      for (j = 0; j < n; j++) {\n        if (i != j) l[i] *= (value - X[j]) / (X[i] - X[j]);\n      }\n      dl[i] = 0;\n      for (j = 0; j < n; j++) {\n        if (i != j) dl[i] += 1 / (X [i] - X[j]);\n      }\n      A[i] = (1 - 2 * (value - X[i]) * dl[i]) * (l[i] * l[i]);\n      B[i] = (value - X[i]) * (l[i] * l[i]);\n      p += (A[i] * F[i] + B[i] * dF[i]);\n    }\n    return p;\n  },\n\n  lagrange: function lagrange(X, F, value) {\n    var p = 0;\n    var i = 0;\n    var j, l;\n    var n = X.length;\n    for (; i < n; i++) {\n      l = F[i];\n      for (j = 0; j < n; j++) {\n        // calculating the lagrange polynomial L_i\n        if (i != j) l *= (value - X[j]) / (X[i] - X[j]);\n      }\n      // adding the lagrange polynomials found above\n      p += l;\n    }\n    return p;\n  },\n\n  cubic_spline: function cubic_spline(X, F, value) {\n    var n = X.length;\n    var i = 0, j;\n    var A = [];\n    var B = [];\n    var alpha = [];\n    var c = [];\n    var h = [];\n    var b = [];\n    var d = [];\n    for (; i < n - 1; i++)\n      h[i] = X[i + 1] - X[i];\n    alpha[0] = 0;\n    for (i = 1; i < n - 1; i++) {\n      alpha[i] = (3 / h[i]) * (F[i + 1] - F[i]) -\n          (3 / h[i-1]) * (F[i] - F[i-1]);\n    }\n    for (i = 1; i < n - 1; i++) {\n      A[i] = [];\n      B[i] = [];\n      A[i][i-1] = h[i-1];\n      A[i][i] = 2 * (h[i - 1] + h[i]);\n      A[i][i+1] = h[i];\n      B[i][0] = alpha[i];\n    }\n    c = jStat.multiply(jStat.inv(A), B);\n    for (j = 0; j < n - 1; j++) {\n      b[j] = (F[j + 1] - F[j]) / h[j] - h[j] * (c[j + 1][0] + 2 * c[j][0]) / 3;\n      d[j] = (c[j + 1][0] - c[j][0]) / (3 * h[j]);\n    }\n    for (j = 0; j < n; j++) {\n      if (X[j] > value) break;\n    }\n    j -= 1;\n    return F[j] + (value - X[j]) * b[j] + jStat.sq(value-X[j]) *\n        c[j] + (value - X[j]) * jStat.sq(value - X[j]) * d[j];\n  },\n\n  gauss_quadrature: function gauss_quadrature() {\n    throw new Error('gauss_quadrature not yet implemented');\n  },\n\n  PCA: function PCA(X) {\n    var m = X.length;\n    var n = X[0].length;\n    var i = 0;\n    var j, temp1;\n    var u = [];\n    var D = [];\n    var result = [];\n    var temp2 = [];\n    var Y = [];\n    var Bt = [];\n    var B = [];\n    var C = [];\n    var V = [];\n    var Vt = [];\n    for (i = 0; i < m; i++) {\n      u[i] = jStat.sum(X[i]) / n;\n    }\n    for (i = 0; i < n; i++) {\n      B[i] = [];\n      for(j = 0; j < m; j++) {\n        B[i][j] = X[j][i] - u[j];\n      }\n    }\n    B = jStat.transpose(B);\n    for (i = 0; i < m; i++) {\n      C[i] = [];\n      for (j = 0; j < m; j++) {\n        C[i][j] = (jStat.dot([B[i]], [B[j]])) / (n - 1);\n      }\n    }\n    result = jStat.jacobi(C);\n    V = result[0];\n    D = result[1];\n    Vt = jStat.transpose(V);\n    for (i = 0; i < D.length; i++) {\n      for (j = i; j < D.length; j++) {\n        if(D[i] < D[j])  {\n          temp1 = D[i];\n          D[i] = D[j];\n          D[j] = temp1;\n          temp2 = Vt[i];\n          Vt[i] = Vt[j];\n          Vt[j] = temp2;\n        }\n      }\n    }\n    Bt = jStat.transpose(B);\n    for (i = 0; i < m; i++) {\n      Y[i] = [];\n      for (j = 0; j < Bt.length; j++) {\n        Y[i][j] = jStat.dot([Vt[i]], [Bt[j]]);\n      }\n    }\n    return [X, D, Vt, Y];\n  }\n});\n\n// extend jStat.fn with methods that require one argument\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function(arg, func) {\n      var tmpthis = this;\n      // check for callback\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jStat.fn[passfunc].call(tmpthis, arg));\n        }, 15);\n        return this;\n      }\n      if (typeof jStat[passfunc](this, arg) === 'number')\n        return jStat[passfunc](this, arg);\n      else\n        return jStat(jStat[passfunc](this, arg));\n    };\n  }(funcs[i]));\n}('add divide multiply subtract dot pow exp log abs norm angle'.split(' ')));\n\n}(jStat, Math));\n(function(jStat, Math) {\n\nvar slice = [].slice;\nvar isNumber = jStat.utils.isNumber;\nvar isArray = jStat.utils.isArray;\n\n// flag==true denotes use of sample standard deviation\n// Z Statistics\njStat.extend({\n  // 2 different parameter lists:\n  // (value, mean, sd)\n  // (value, array, flag)\n  zscore: function zscore() {\n    var args = slice.call(arguments);\n    if (isNumber(args[1])) {\n      return (args[0] - args[1]) / args[2];\n    }\n    return (args[0] - jStat.mean(args[1])) / jStat.stdev(args[1], args[2]);\n  },\n\n  // 3 different paramter lists:\n  // (value, mean, sd, sides)\n  // (zscore, sides)\n  // (value, array, sides, flag)\n  ztest: function ztest() {\n    var args = slice.call(arguments);\n    var z;\n    if (isArray(args[1])) {\n      // (value, array, sides, flag)\n      z = jStat.zscore(args[0],args[1],args[3]);\n      return (args[2] === 1) ?\n        (jStat.normal.cdf(-Math.abs(z), 0, 1)) :\n        (jStat.normal.cdf(-Math.abs(z), 0, 1)*2);\n    } else {\n      if (args.length > 2) {\n        // (value, mean, sd, sides)\n        z = jStat.zscore(args[0],args[1],args[2]);\n        return (args[3] === 1) ?\n          (jStat.normal.cdf(-Math.abs(z),0,1)) :\n          (jStat.normal.cdf(-Math.abs(z),0,1)* 2);\n      } else {\n        // (zscore, sides)\n        z = args[0];\n        return (args[1] === 1) ?\n          (jStat.normal.cdf(-Math.abs(z),0,1)) :\n          (jStat.normal.cdf(-Math.abs(z),0,1)*2);\n      }\n    }\n  }\n});\n\njStat.extend(jStat.fn, {\n  zscore: function zscore(value, flag) {\n    return (value - this.mean()) / this.stdev(flag);\n  },\n\n  ztest: function ztest(value, sides, flag) {\n    var zscore = Math.abs(this.zscore(value, flag));\n    return (sides === 1) ?\n      (jStat.normal.cdf(-zscore, 0, 1)) :\n      (jStat.normal.cdf(-zscore, 0, 1) * 2);\n  }\n});\n\n// T Statistics\njStat.extend({\n  // 2 parameter lists\n  // (value, mean, sd, n)\n  // (value, array)\n  tscore: function tscore() {\n    var args = slice.call(arguments);\n    return (args.length === 4) ?\n      ((args[0] - args[1]) / (args[2] / Math.sqrt(args[3]))) :\n      ((args[0] - jStat.mean(args[1])) /\n       (jStat.stdev(args[1], true) / Math.sqrt(args[1].length)));\n  },\n\n  // 3 different paramter lists:\n  // (value, mean, sd, n, sides)\n  // (tscore, n, sides)\n  // (value, array, sides)\n  ttest: function ttest() {\n    var args = slice.call(arguments);\n    var tscore;\n    if (args.length === 5) {\n      tscore = Math.abs(jStat.tscore(args[0], args[1], args[2], args[3]));\n      return (args[4] === 1) ?\n        (jStat.studentt.cdf(-tscore, args[3]-1)) :\n        (jStat.studentt.cdf(-tscore, args[3]-1)*2);\n    }\n    if (isNumber(args[1])) {\n      tscore = Math.abs(args[0])\n      return (args[2] == 1) ?\n        (jStat.studentt.cdf(-tscore, args[1]-1)) :\n        (jStat.studentt.cdf(-tscore, args[1]-1) * 2);\n    }\n    tscore = Math.abs(jStat.tscore(args[0], args[1]))\n    return (args[2] == 1) ?\n      (jStat.studentt.cdf(-tscore, args[1].length-1)) :\n      (jStat.studentt.cdf(-tscore, args[1].length-1) * 2);\n  }\n});\n\njStat.extend(jStat.fn, {\n  tscore: function tscore(value) {\n    return (value - this.mean()) / (this.stdev(true) / Math.sqrt(this.cols()));\n  },\n\n  ttest: function ttest(value, sides) {\n    return (sides === 1) ?\n      (1 - jStat.studentt.cdf(Math.abs(this.tscore(value)), this.cols()-1)) :\n      (jStat.studentt.cdf(-Math.abs(this.tscore(value)), this.cols()-1)*2);\n  }\n});\n\n// F Statistics\njStat.extend({\n  // Paramter list is as follows:\n  // (array1, array2, array3, ...)\n  // or it is an array of arrays\n  // array of arrays conversion\n  anovafscore: function anovafscore() {\n    var args = slice.call(arguments),\n    expVar, sample, sampMean, sampSampMean, tmpargs, unexpVar, i, j;\n    if (args.length === 1) {\n      tmpargs = new Array(args[0].length);\n      for (i = 0; i < args[0].length; i++) {\n        tmpargs[i] = args[0][i];\n      }\n      args = tmpargs;\n    }\n    // Builds sample array\n    sample = new Array();\n    for (i = 0; i < args.length; i++) {\n      sample = sample.concat(args[i]);\n    }\n    sampMean = jStat.mean(sample);\n    // Computes the explained variance\n    expVar = 0;\n    for (i = 0; i < args.length; i++) {\n      expVar = expVar + args[i].length * Math.pow(jStat.mean(args[i]) - sampMean, 2);\n    }\n    expVar /= (args.length - 1);\n    // Computes unexplained variance\n    unexpVar = 0;\n    for (i = 0; i < args.length; i++) {\n      sampSampMean = jStat.mean(args[i]);\n      for (j = 0; j < args[i].length; j++) {\n        unexpVar += Math.pow(args[i][j] - sampSampMean, 2);\n      }\n    }\n    unexpVar /= (sample.length - args.length);\n    return expVar / unexpVar;\n  },\n\n  // 2 different paramter setups\n  // (array1, array2, array3, ...)\n  // (anovafscore, df1, df2)\n  anovaftest: function anovaftest() {\n    var args = slice.call(arguments),\n    df1, df2, n, i;\n    if (isNumber(args[0])) {\n      return 1 - jStat.centralF.cdf(args[0], args[1], args[2]);\n    }\n    var anovafscore = jStat.anovafscore(args);\n    df1 = args.length - 1;\n    n = 0;\n    for (i = 0; i < args.length; i++) {\n      n = n + args[i].length;\n    }\n    df2 = n - df1 - 1;\n    return 1 - jStat.centralF.cdf(anovafscore, df1, df2);\n  },\n\n  ftest: function ftest(fscore, df1, df2) {\n    return 1 - jStat.centralF.cdf(fscore, df1, df2);\n  }\n});\n\njStat.extend(jStat.fn, {\n  anovafscore: function anovafscore() {\n    return jStat.anovafscore(this.toArray());\n  },\n\n  anovaftes: function anovaftes() {\n    var n = 0;\n    var i;\n    for (i = 0; i < this.length; i++) {\n      n = n + this[i].length;\n    }\n    return jStat.ftest(this.anovafscore(), this.length - 1, n - this.length);\n  }\n});\n\n// Tukey's range test\njStat.extend({\n  // 2 parameter lists\n  // (mean1, mean2, n1, n2, sd)\n  // (array1, array2, sd)\n  qscore: function qscore() {\n    var args = slice.call(arguments);\n    var mean1, mean2, n1, n2, sd;\n    if (isNumber(args[0])) {\n        mean1 = args[0];\n        mean2 = args[1];\n        n1 = args[2];\n        n2 = args[3];\n        sd = args[4];\n    } else {\n        mean1 = jStat.mean(args[0]);\n        mean2 = jStat.mean(args[1]);\n        n1 = args[0].length;\n        n2 = args[1].length;\n        sd = args[2];\n    }\n    return Math.abs(mean1 - mean2) / (sd * Math.sqrt((1 / n1 + 1 / n2) / 2));\n  },\n\n  // 3 different parameter lists:\n  // (qscore, n, k)\n  // (mean1, mean2, n1, n2, sd, n, k)\n  // (array1, array2, sd, n, k)\n  qtest: function qtest() {\n    var args = slice.call(arguments);\n\n    var qscore;\n    if (args.length === 3) {\n      qscore = args[0];\n      args = args.slice(1);\n    } else if (args.length === 7) {\n      qscore = jStat.qscore(args[0], args[1], args[2], args[3], args[4]);\n      args = args.slice(5);\n    } else {\n      qscore = jStat.qscore(args[0], args[1], args[2]);\n      args = args.slice(3);\n    }\n\n    var n = args[0];\n    var k = args[1];\n\n    return 1 - jStat.tukey.cdf(qscore, k, n - k);\n  },\n\n  tukeyhsd: function tukeyhsd(arrays) {\n    var sd = jStat.pooledstdev(arrays);\n    var means = arrays.map(function (arr) {return jStat.mean(arr);});\n    var n = arrays.reduce(function (n, arr) {return n + arr.length;}, 0);\n\n    var results = [];\n    for (var i = 0; i < arrays.length; ++i) {\n        for (var j = i + 1; j < arrays.length; ++j) {\n            var p = jStat.qtest(means[i], means[j], arrays[i].length, arrays[j].length, sd, n, arrays.length);\n            results.push([[i, j], p]);\n        }\n    }\n\n    return results;\n  }\n});\n\n// Error Bounds\njStat.extend({\n  // 2 different parameter setups\n  // (value, alpha, sd, n)\n  // (value, alpha, array)\n  normalci: function normalci() {\n    var args = slice.call(arguments),\n    ans = new Array(2),\n    change;\n    if (args.length === 4) {\n      change = Math.abs(jStat.normal.inv(args[1] / 2, 0, 1) *\n                        args[2] / Math.sqrt(args[3]));\n    } else {\n      change = Math.abs(jStat.normal.inv(args[1] / 2, 0, 1) *\n                        jStat.stdev(args[2]) / Math.sqrt(args[2].length));\n    }\n    ans[0] = args[0] - change;\n    ans[1] = args[0] + change;\n    return ans;\n  },\n\n  // 2 different parameter setups\n  // (value, alpha, sd, n)\n  // (value, alpha, array)\n  tci: function tci() {\n    var args = slice.call(arguments),\n    ans = new Array(2),\n    change;\n    if (args.length === 4) {\n      change = Math.abs(jStat.studentt.inv(args[1] / 2, args[3] - 1) *\n                        args[2] / Math.sqrt(args[3]));\n    } else {\n      change = Math.abs(jStat.studentt.inv(args[1] / 2, args[2].length - 1) *\n                        jStat.stdev(args[2], true) / Math.sqrt(args[2].length));\n    }\n    ans[0] = args[0] - change;\n    ans[1] = args[0] + change;\n    return ans;\n  },\n\n  significant: function significant(pvalue, alpha) {\n    return pvalue < alpha;\n  }\n});\n\njStat.extend(jStat.fn, {\n  normalci: function normalci(value, alpha) {\n    return jStat.normalci(value, alpha, this.toArray());\n  },\n\n  tci: function tci(value, alpha) {\n    return jStat.tci(value, alpha, this.toArray());\n  }\n});\n\n// internal method for calculating the z-score for a difference of proportions test\nfunction differenceOfProportions(p1, n1, p2, n2) {\n  if (p1 > 1 || p2 > 1 || p1 <= 0 || p2 <= 0) {\n    throw new Error(\"Proportions should be greater than 0 and less than 1\")\n  }\n  var pooled = (p1 * n1 + p2 * n2) / (n1 + n2);\n  var se = Math.sqrt(pooled * (1 - pooled) * ((1/n1) + (1/n2)));\n  return (p1 - p2) / se;\n}\n\n// Difference of Proportions\njStat.extend(jStat.fn, {\n  oneSidedDifferenceOfProportions: function oneSidedDifferenceOfProportions(p1, n1, p2, n2) {\n    var z = differenceOfProportions(p1, n1, p2, n2);\n    return jStat.ztest(z, 1);\n  },\n\n  twoSidedDifferenceOfProportions: function twoSidedDifferenceOfProportions(p1, n1, p2, n2) {\n    var z = differenceOfProportions(p1, n1, p2, n2);\n    return jStat.ztest(z, 2);\n  }\n});\n\n}(jStat, Math));\njStat.models = (function(){\n  function sub_regress(exog) {\n    var var_count = exog[0].length;\n    var modelList = jStat.arange(var_count).map(function(endog_index) {\n      var exog_index =\n          jStat.arange(var_count).filter(function(i){return i!==endog_index});\n      return ols(jStat.col(exog, endog_index).map(function(x){ return x[0] }),\n                 jStat.col(exog, exog_index))\n    });\n    return modelList;\n  }\n\n  // do OLS model regress\n  // exog have include const columns ,it will not generate it .In fact, exog is\n  // \"design matrix\" look at\n  //https://en.wikipedia.org/wiki/Design_matrix\n  function ols(endog, exog) {\n    var nobs = endog.length;\n    var df_model = exog[0].length - 1;\n    var df_resid = nobs-df_model - 1;\n    var coef = jStat.lstsq(exog, endog);\n    var predict =\n        jStat.multiply(exog, coef.map(function(x) { return [x] }))\n            .map(function(p) { return p[0] });\n    var resid = jStat.subtract(endog, predict);\n    var ybar = jStat.mean(endog);\n    // constant cause problem\n    // var SST = jStat.sum(endog.map(function(y) {\n    //   return Math.pow(y-ybar,2);\n    // }));\n    var SSE = jStat.sum(predict.map(function(f) {\n      return Math.pow(f - ybar, 2);\n    }));\n    var SSR = jStat.sum(endog.map(function(y, i) {\n      return Math.pow(y - predict[i], 2);\n    }));\n    var SST = SSE + SSR;\n    var R2 = (SSE / SST);\n    return {\n        exog:exog,\n        endog:endog,\n        nobs:nobs,\n        df_model:df_model,\n        df_resid:df_resid,\n        coef:coef,\n        predict:predict,\n        resid:resid,\n        ybar:ybar,\n        SST:SST,\n        SSE:SSE,\n        SSR:SSR,\n        R2:R2\n    };\n  }\n\n  // H0: b_I=0\n  // H1: b_I!=0\n  function t_test(model) {\n    var subModelList = sub_regress(model.exog);\n    //var sigmaHat=jStat.stdev(model.resid);\n    var sigmaHat = Math.sqrt(model.SSR / (model.df_resid));\n    var seBetaHat = subModelList.map(function(mod) {\n      var SST = mod.SST;\n      var R2 = mod.R2;\n      return sigmaHat / Math.sqrt(SST * (1 - R2));\n    });\n    var tStatistic = model.coef.map(function(coef, i) {\n      return (coef - 0) / seBetaHat[i];\n    });\n    var pValue = tStatistic.map(function(t) {\n      var leftppf = jStat.studentt.cdf(t, model.df_resid);\n      return (leftppf > 0.5 ? 1 - leftppf : leftppf) * 2;\n    });\n    var c = jStat.studentt.inv(0.975, model.df_resid);\n    var interval95 = model.coef.map(function(coef, i) {\n      var d = c * seBetaHat[i];\n      return [coef - d, coef + d];\n    })\n    return {\n        se: seBetaHat,\n        t: tStatistic,\n        p: pValue,\n        sigmaHat: sigmaHat,\n        interval95: interval95\n    };\n  }\n\n  function F_test(model) {\n    var F_statistic =\n        (model.R2 / model.df_model) / ((1 - model.R2) / model.df_resid);\n    var fcdf = function(x, n1, n2) {\n      return jStat.beta.cdf(x / (n2 / n1 + x), n1 / 2, n2 / 2)\n    }\n    var pvalue = 1 - fcdf(F_statistic, model.df_model, model.df_resid);\n    return { F_statistic: F_statistic, pvalue: pvalue };\n  }\n\n  function ols_wrap(endog, exog) {\n    var model = ols(endog,exog);\n    var ttest = t_test(model);\n    var ftest = F_test(model);\n    // Provide the Wherry / Ezekiel / McNemar / Cohen Adjusted R^2\n    // Which matches the 'adjusted R^2' provided by R's lm package\n    var adjust_R2 =\n        1 - (1 - model.R2) * ((model.nobs - 1) / (model.df_resid));\n    model.t = ttest;\n    model.f = ftest;\n    model.adjust_R2 = adjust_R2;\n    return model;\n  }\n\n  return { ols: ols_wrap };\n})();\n//To regress, simply build X matrix\n//(append column of 1's) using\n//buildxmatrix and build the Y\n//matrix using buildymatrix\n//(simply the transpose)\n//and run regress.\n\n\n\n//Regressions\n\njStat.extend({\n  buildxmatrix: function buildxmatrix(){\n    //Parameters will be passed in as such\n    //(array1,array2,array3,...)\n    //as (x1,x2,x3,...)\n    //needs to be (1,x1,x2,x3,...)\n    var matrixRows = new Array(arguments.length);\n    for(var i=0;i<arguments.length;i++){\n      var array = [1];\n      matrixRows[i]= array.concat(arguments[i]);\n    }\n    return jStat(matrixRows);\n\n  },\n\n  builddxmatrix: function builddxmatrix() {\n    //Paramters will be passed in as such\n    //([array1,array2,...]\n    var matrixRows = new Array(arguments[0].length);\n    for(var i=0;i<arguments[0].length;i++){\n      var array = [1]\n      matrixRows[i]= array.concat(arguments[0][i]);\n    }\n    return jStat(matrixRows);\n\n  },\n\n  buildjxmatrix: function buildjxmatrix(jMat) {\n    //Builds from jStat Matrix\n    var pass = new Array(jMat.length)\n    for(var i=0;i<jMat.length;i++){\n      pass[i] = jMat[i];\n    }\n    return jStat.builddxmatrix(pass);\n\n  },\n\n  buildymatrix: function buildymatrix(array){\n    return jStat(array).transpose();\n  },\n\n  buildjymatrix: function buildjymatrix(jMat){\n    return jMat.transpose();\n  },\n\n  matrixmult: function matrixmult(A,B){\n    var i, j, k, result, sum;\n    if (A.cols() == B.rows()) {\n      if(B.rows()>1){\n        result = [];\n        for (i = 0; i < A.rows(); i++) {\n          result[i] = [];\n          for (j = 0; j < B.cols(); j++) {\n            sum = 0;\n            for (k = 0; k < A.cols(); k++) {\n              sum += A.toArray()[i][k] * B.toArray()[k][j];\n            }\n            result[i][j] = sum;\n          }\n        }\n        return jStat(result);\n      }\n      result = [];\n      for (i = 0; i < A.rows(); i++) {\n        result[i] = [];\n        for (j = 0; j < B.cols(); j++) {\n          sum = 0;\n          for (k = 0; k < A.cols(); k++) {\n            sum += A.toArray()[i][k] * B.toArray()[j];\n          }\n          result[i][j] = sum;\n        }\n      }\n      return jStat(result);\n    }\n  },\n\n  //regress and regresst to be fixed\n\n  regress: function regress(jMatX,jMatY){\n    //print(\"regressin!\");\n    //print(jMatX.toArray());\n    var innerinv = jStat.xtranspxinv(jMatX);\n    //print(innerinv);\n    var xtransp = jMatX.transpose();\n    var next = jStat.matrixmult(jStat(innerinv),xtransp);\n    return jStat.matrixmult(next,jMatY);\n\n  },\n\n  regresst: function regresst(jMatX,jMatY,sides){\n    var beta = jStat.regress(jMatX,jMatY);\n\n    var compile = {};\n    compile.anova = {};\n    var jMatYBar = jStat.jMatYBar(jMatX, beta);\n    compile.yBar = jMatYBar;\n    var yAverage = jMatY.mean();\n    compile.anova.residuals = jStat.residuals(jMatY, jMatYBar);\n\n    compile.anova.ssr = jStat.ssr(jMatYBar, yAverage);\n    compile.anova.msr = compile.anova.ssr / (jMatX[0].length - 1);\n\n    compile.anova.sse = jStat.sse(jMatY, jMatYBar);\n    compile.anova.mse =\n        compile.anova.sse / (jMatY.length - (jMatX[0].length - 1) - 1);\n\n    compile.anova.sst = jStat.sst(jMatY, yAverage);\n    compile.anova.mst = compile.anova.sst / (jMatY.length - 1);\n\n    compile.anova.r2 = 1 - (compile.anova.sse / compile.anova.sst);\n    if (compile.anova.r2 < 0) compile.anova.r2 = 0;\n\n    compile.anova.fratio = compile.anova.msr / compile.anova.mse;\n    compile.anova.pvalue =\n        jStat.anovaftest(compile.anova.fratio,\n                         jMatX[0].length - 1,\n                         jMatY.length - (jMatX[0].length - 1) - 1);\n\n    compile.anova.rmse = Math.sqrt(compile.anova.mse);\n\n    compile.anova.r2adj = 1 - (compile.anova.mse / compile.anova.mst);\n    if (compile.anova.r2adj < 0) compile.anova.r2adj = 0;\n\n    compile.stats = new Array(jMatX[0].length);\n    var covar = jStat.xtranspxinv(jMatX);\n    var sds, ts, ps;\n\n    for(var i=0; i<beta.length;i++){\n      sds=Math.sqrt(compile.anova.mse * Math.abs(covar[i][i]));\n      ts= Math.abs(beta[i] / sds);\n      ps= jStat.ttest(ts, jMatY.length - jMatX[0].length - 1, sides);\n\n      compile.stats[i]=[beta[i], sds, ts, ps];\n    }\n\n    compile.regress = beta;\n    return compile;\n  },\n\n  xtranspx: function xtranspx(jMatX){\n    return jStat.matrixmult(jMatX.transpose(),jMatX);\n  },\n\n\n  xtranspxinv: function xtranspxinv(jMatX){\n    var inner = jStat.matrixmult(jMatX.transpose(),jMatX);\n    var innerinv = jStat.inv(inner);\n    return innerinv;\n  },\n\n  jMatYBar: function jMatYBar(jMatX, beta) {\n    var yBar = jStat.matrixmult(jMatX, beta);\n    return new jStat(yBar);\n  },\n\n  residuals: function residuals(jMatY, jMatYBar) {\n    return jStat.matrixsubtract(jMatY, jMatYBar);\n  },\n\n  ssr: function ssr(jMatYBar, yAverage) {\n    var ssr = 0;\n    for(var i = 0; i < jMatYBar.length; i++) {\n      ssr += Math.pow(jMatYBar[i] - yAverage, 2);\n    }\n    return ssr;\n  },\n\n  sse: function sse(jMatY, jMatYBar) {\n    var sse = 0;\n    for(var i = 0; i < jMatY.length; i++) {\n      sse += Math.pow(jMatY[i] - jMatYBar[i], 2);\n    }\n    return sse;\n  },\n\n  sst: function sst(jMatY, yAverage) {\n    var sst = 0;\n    for(var i = 0; i < jMatY.length; i++) {\n      sst += Math.pow(jMatY[i] - yAverage, 2);\n    }\n    return sst;\n  },\n\n  matrixsubtract: function matrixsubtract(A,B){\n    var ans = new Array(A.length);\n    for(var i=0;i<A.length;i++){\n      ans[i] = new Array(A[i].length);\n      for(var j=0;j<A[i].length;j++){\n        ans[i][j]=A[i][j]-B[i][j];\n      }\n    }\n    return jStat(ans);\n  }\n});\n  // Make it compatible with previous version.\n  jStat.jStat = jStat;\n\n  return jStat;\n});\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.addNoneTerminalToCst = exports.addTerminalToCst = exports.setNodeLocationFull = exports.setNodeLocationOnlyOffset = void 0;\n/**\n * This nodeLocation tracking is not efficient and should only be used\n * when error recovery is enabled or the Token Vector contains virtual Tokens\n * (e.g, Python Indent/Outdent)\n * As it executes the calculation for every single terminal/nonTerminal\n * and does not rely on the fact the token vector is **sorted**\n */\nfunction setNodeLocationOnlyOffset(currNodeLocation, newLocationInfo) {\n    // First (valid) update for this cst node\n    if (isNaN(currNodeLocation.startOffset) === true) {\n        // assumption1: Token location information is either NaN or a valid number\n        // assumption2: Token location information is fully valid if it exist\n        // (both start/end offsets exist and are numbers).\n        currNodeLocation.startOffset = newLocationInfo.startOffset;\n        currNodeLocation.endOffset = newLocationInfo.endOffset;\n    }\n    // Once the startOffset has been updated with a valid number it should never receive\n    // any farther updates as the Token vector is sorted.\n    // We still have to check this this condition for every new possible location info\n    // because with error recovery enabled we may encounter invalid tokens (NaN location props)\n    else if (currNodeLocation.endOffset < newLocationInfo.endOffset === true) {\n        currNodeLocation.endOffset = newLocationInfo.endOffset;\n    }\n}\nexports.setNodeLocationOnlyOffset = setNodeLocationOnlyOffset;\n/**\n * This nodeLocation tracking is not efficient and should only be used\n * when error recovery is enabled or the Token Vector contains virtual Tokens\n * (e.g, Python Indent/Outdent)\n * As it executes the calculation for every single terminal/nonTerminal\n * and does not rely on the fact the token vector is **sorted**\n */\nfunction setNodeLocationFull(currNodeLocation, newLocationInfo) {\n    // First (valid) update for this cst node\n    if (isNaN(currNodeLocation.startOffset) === true) {\n        // assumption1: Token location information is either NaN or a valid number\n        // assumption2: Token location information is fully valid if it exist\n        // (all start/end props exist and are numbers).\n        currNodeLocation.startOffset = newLocationInfo.startOffset;\n        currNodeLocation.startColumn = newLocationInfo.startColumn;\n        currNodeLocation.startLine = newLocationInfo.startLine;\n        currNodeLocation.endOffset = newLocationInfo.endOffset;\n        currNodeLocation.endColumn = newLocationInfo.endColumn;\n        currNodeLocation.endLine = newLocationInfo.endLine;\n    }\n    // Once the start props has been updated with a valid number it should never receive\n    // any farther updates as the Token vector is sorted.\n    // We still have to check this this condition for every new possible location info\n    // because with error recovery enabled we may encounter invalid tokens (NaN location props)\n    else if (currNodeLocation.endOffset < newLocationInfo.endOffset === true) {\n        currNodeLocation.endOffset = newLocationInfo.endOffset;\n        currNodeLocation.endColumn = newLocationInfo.endColumn;\n        currNodeLocation.endLine = newLocationInfo.endLine;\n    }\n}\nexports.setNodeLocationFull = setNodeLocationFull;\nfunction addTerminalToCst(node, token, tokenTypeName) {\n    if (node.children[tokenTypeName] === undefined) {\n        node.children[tokenTypeName] = [token];\n    }\n    else {\n        node.children[tokenTypeName].push(token);\n    }\n}\nexports.addTerminalToCst = addTerminalToCst;\nfunction addNoneTerminalToCst(node, ruleName, ruleResult) {\n    if (node.children[ruleName] === undefined) {\n        node.children[ruleName] = [ruleResult];\n    }\n    else {\n        node.children[ruleName].push(ruleResult);\n    }\n}\nexports.addNoneTerminalToCst = addNoneTerminalToCst;\n//# sourceMappingURL=cst.js.map","\"use strict\";\n// Lookahead keys are 32Bit integers in the form\n// TTTTTTTT-ZZZZZZZZZZZZ-YYYY-XXXXXXXX\n// XXXX -> Occurrence Index bitmap.\n// YYYY -> DSL Method Type bitmap.\n// ZZZZZZZZZZZZZZZ -> Rule short Index bitmap.\n// TTTTTTTTT -> alternation alternative index bitmap\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getKeyForAutomaticLookahead = exports.AT_LEAST_ONE_SEP_IDX = exports.MANY_SEP_IDX = exports.AT_LEAST_ONE_IDX = exports.MANY_IDX = exports.OPTION_IDX = exports.OR_IDX = exports.BITS_FOR_ALT_IDX = exports.BITS_FOR_RULE_IDX = exports.BITS_FOR_OCCURRENCE_IDX = exports.BITS_FOR_METHOD_TYPE = void 0;\nexports.BITS_FOR_METHOD_TYPE = 4;\nexports.BITS_FOR_OCCURRENCE_IDX = 8;\nexports.BITS_FOR_RULE_IDX = 12;\n// TODO: validation, this means that there may at most 2^8 --> 256 alternatives for an alternation.\nexports.BITS_FOR_ALT_IDX = 8;\n// short string used as part of mapping keys.\n// being short improves the performance when composing KEYS for maps out of these\n// The 5 - 8 bits (16 possible values, are reserved for the DSL method indices)\nexports.OR_IDX = 1 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.OPTION_IDX = 2 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.MANY_IDX = 3 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.AT_LEAST_ONE_IDX = 4 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.MANY_SEP_IDX = 5 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.AT_LEAST_ONE_SEP_IDX = 6 << exports.BITS_FOR_OCCURRENCE_IDX;\n// this actually returns a number, but it is always used as a string (object prop key)\nfunction getKeyForAutomaticLookahead(ruleIdx, dslMethodIdx, occurrence) {\n    return occurrence | dslMethodIdx | ruleIdx;\n}\nexports.getKeyForAutomaticLookahead = getKeyForAutomaticLookahead;\nvar BITS_START_FOR_ALT_IDX = 32 - exports.BITS_FOR_ALT_IDX;\n//# sourceMappingURL=keys.js.map","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyMixins = void 0;\nfunction applyMixins(derivedCtor, baseCtors) {\n    baseCtors.forEach(function (baseCtor) {\n        var baseProto = baseCtor.prototype;\n        Object.getOwnPropertyNames(baseProto).forEach(function (propName) {\n            if (propName === \"constructor\") {\n                return;\n            }\n            var basePropDescriptor = Object.getOwnPropertyDescriptor(baseProto, propName);\n            // Handle Accessors\n            if (basePropDescriptor &&\n                (basePropDescriptor.get || basePropDescriptor.set)) {\n                Object.defineProperty(derivedCtor.prototype, propName, basePropDescriptor);\n            }\n            else {\n                derivedCtor.prototype[propName] = baseCtor.prototype[propName];\n            }\n        });\n    });\n}\nexports.applyMixins = applyMixins;\n//# sourceMappingURL=apply_mixins.js.map","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecognizerEngine = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar every_1 = __importDefault(require(\"lodash/every\"));\nvar uniq_1 = __importDefault(require(\"lodash/uniq\"));\nvar isObject_1 = __importDefault(require(\"lodash/isObject\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar keys_1 = require(\"../../grammar/keys\");\nvar exceptions_public_1 = require(\"../../exceptions_public\");\nvar lookahead_1 = require(\"../../grammar/lookahead\");\nvar interpreter_1 = require(\"../../grammar/interpreter\");\nvar parser_1 = require(\"../parser\");\nvar recoverable_1 = require(\"./recoverable\");\nvar tokens_public_1 = require(\"../../../scan/tokens_public\");\nvar tokens_1 = require(\"../../../scan/tokens\");\n/**\n * This trait is responsible for the runtime parsing engine\n * Used by the official API (recognizer_api.ts)\n */\nvar RecognizerEngine = /** @class */ (function () {\n    function RecognizerEngine() {\n    }\n    RecognizerEngine.prototype.initRecognizerEngine = function (tokenVocabulary, config) {\n        this.className = this.constructor.name;\n        // TODO: would using an ES6 Map or plain object be faster (CST building scenario)\n        this.shortRuleNameToFull = {};\n        this.fullRuleNameToShort = {};\n        this.ruleShortNameIdx = 256;\n        this.tokenMatcher = tokens_1.tokenStructuredMatcherNoCategories;\n        this.subruleIdx = 0;\n        this.definedRulesNames = [];\n        this.tokensMap = {};\n        this.isBackTrackingStack = [];\n        this.RULE_STACK = [];\n        this.RULE_OCCURRENCE_STACK = [];\n        this.gastProductionsCache = {};\n        if ((0, has_1.default)(config, \"serializedGrammar\")) {\n            throw Error(\"The Parser's configuration can no longer contain a <serializedGrammar> property.\\n\" +\n                \"\\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\\n\" +\n                \"\\tFor Further details.\");\n        }\n        if ((0, isArray_1.default)(tokenVocabulary)) {\n            // This only checks for Token vocabularies provided as arrays.\n            // That is good enough because the main objective is to detect users of pre-V4.0 APIs\n            // rather than all edge cases of empty Token vocabularies.\n            if ((0, isEmpty_1.default)(tokenVocabulary)) {\n                throw Error(\"A Token Vocabulary cannot be empty.\\n\" +\n                    \"\\tNote that the first argument for the parser constructor\\n\" +\n                    \"\\tis no longer a Token vector (since v4.0).\");\n            }\n            if (typeof tokenVocabulary[0].startOffset === \"number\") {\n                throw Error(\"The Parser constructor no longer accepts a token vector as the first argument.\\n\" +\n                    \"\\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\\n\" +\n                    \"\\tFor Further details.\");\n            }\n        }\n        if ((0, isArray_1.default)(tokenVocabulary)) {\n            this.tokensMap = (0, reduce_1.default)(tokenVocabulary, function (acc, tokType) {\n                acc[tokType.name] = tokType;\n                return acc;\n            }, {});\n        }\n        else if ((0, has_1.default)(tokenVocabulary, \"modes\") &&\n            (0, every_1.default)((0, flatten_1.default)((0, values_1.default)(tokenVocabulary.modes)), tokens_1.isTokenType)) {\n            var allTokenTypes_1 = (0, flatten_1.default)((0, values_1.default)(tokenVocabulary.modes));\n            var uniqueTokens = (0, uniq_1.default)(allTokenTypes_1);\n            this.tokensMap = (0, reduce_1.default)(uniqueTokens, function (acc, tokType) {\n                acc[tokType.name] = tokType;\n                return acc;\n            }, {});\n        }\n        else if ((0, isObject_1.default)(tokenVocabulary)) {\n            this.tokensMap = (0, clone_1.default)(tokenVocabulary);\n        }\n        else {\n            throw new Error(\"<tokensDictionary> argument must be An Array of Token constructors,\" +\n                \" A dictionary of Token constructors or an IMultiModeLexerDefinition\");\n        }\n        // always add EOF to the tokenNames -> constructors map. it is useful to assure all the input has been\n        // parsed with a clear error message (\"expecting EOF but found ...\")\n        this.tokensMap[\"EOF\"] = tokens_public_1.EOF;\n        var allTokenTypes = (0, has_1.default)(tokenVocabulary, \"modes\")\n            ? (0, flatten_1.default)((0, values_1.default)(tokenVocabulary.modes))\n            : (0, values_1.default)(tokenVocabulary);\n        var noTokenCategoriesUsed = (0, every_1.default)(allTokenTypes, function (tokenConstructor) {\n            return (0, isEmpty_1.default)(tokenConstructor.categoryMatches);\n        });\n        this.tokenMatcher = noTokenCategoriesUsed\n            ? tokens_1.tokenStructuredMatcherNoCategories\n            : tokens_1.tokenStructuredMatcher;\n        // Because ES2015+ syntax should be supported for creating Token classes\n        // We cannot assume that the Token classes were created using the \"extendToken\" utilities\n        // Therefore we must augment the Token classes both on Lexer initialization and on Parser initialization\n        (0, tokens_1.augmentTokenTypes)((0, values_1.default)(this.tokensMap));\n    };\n    RecognizerEngine.prototype.defineRule = function (ruleName, impl, config) {\n        if (this.selfAnalysisDone) {\n            throw Error(\"Grammar rule <\".concat(ruleName, \"> may not be defined after the 'performSelfAnalysis' method has been called'\\n\") +\n                \"Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.\");\n        }\n        var resyncEnabled = (0, has_1.default)(config, \"resyncEnabled\")\n            ? config.resyncEnabled // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_RULE_CONFIG.resyncEnabled;\n        var recoveryValueFunc = (0, has_1.default)(config, \"recoveryValueFunc\")\n            ? config.recoveryValueFunc // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_RULE_CONFIG.recoveryValueFunc;\n        // performance optimization: Use small integers as keys for the longer human readable \"full\" rule names.\n        // this greatly improves Map access time (as much as 8% for some performance benchmarks).\n        var shortName = this.ruleShortNameIdx << (keys_1.BITS_FOR_METHOD_TYPE + keys_1.BITS_FOR_OCCURRENCE_IDX);\n        this.ruleShortNameIdx++;\n        this.shortRuleNameToFull[shortName] = ruleName;\n        this.fullRuleNameToShort[ruleName] = shortName;\n        var invokeRuleWithTry;\n        // Micro optimization, only check the condition **once** on rule definition\n        // instead of **every single** rule invocation.\n        if (this.outputCst === true) {\n            invokeRuleWithTry = function invokeRuleWithTry() {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                try {\n                    this.ruleInvocationStateUpdate(shortName, ruleName, this.subruleIdx);\n                    impl.apply(this, args);\n                    var cst = this.CST_STACK[this.CST_STACK.length - 1];\n                    this.cstPostRule(cst);\n                    return cst;\n                }\n                catch (e) {\n                    return this.invokeRuleCatch(e, resyncEnabled, recoveryValueFunc);\n                }\n                finally {\n                    this.ruleFinallyStateUpdate();\n                }\n            };\n        }\n        else {\n            invokeRuleWithTry = function invokeRuleWithTryCst() {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                try {\n                    this.ruleInvocationStateUpdate(shortName, ruleName, this.subruleIdx);\n                    return impl.apply(this, args);\n                }\n                catch (e) {\n                    return this.invokeRuleCatch(e, resyncEnabled, recoveryValueFunc);\n                }\n                finally {\n                    this.ruleFinallyStateUpdate();\n                }\n            };\n        }\n        var wrappedGrammarRule = Object.assign(invokeRuleWithTry, { ruleName: ruleName, originalGrammarAction: impl });\n        return wrappedGrammarRule;\n    };\n    RecognizerEngine.prototype.invokeRuleCatch = function (e, resyncEnabledConfig, recoveryValueFunc) {\n        var isFirstInvokedRule = this.RULE_STACK.length === 1;\n        // note the reSync is always enabled for the first rule invocation, because we must always be able to\n        // reSync with EOF and just output some INVALID ParseTree\n        // during backtracking reSync recovery is disabled, otherwise we can't be certain the backtracking\n        // path is really the most valid one\n        var reSyncEnabled = resyncEnabledConfig && !this.isBackTracking() && this.recoveryEnabled;\n        if ((0, exceptions_public_1.isRecognitionException)(e)) {\n            var recogError = e;\n            if (reSyncEnabled) {\n                var reSyncTokType = this.findReSyncTokenType();\n                if (this.isInCurrentRuleReSyncSet(reSyncTokType)) {\n                    recogError.resyncedTokens = this.reSyncTo(reSyncTokType);\n                    if (this.outputCst) {\n                        var partialCstResult = this.CST_STACK[this.CST_STACK.length - 1];\n                        partialCstResult.recoveredNode = true;\n                        return partialCstResult;\n                    }\n                    else {\n                        return recoveryValueFunc(e);\n                    }\n                }\n                else {\n                    if (this.outputCst) {\n                        var partialCstResult = this.CST_STACK[this.CST_STACK.length - 1];\n                        partialCstResult.recoveredNode = true;\n                        recogError.partialCstResult = partialCstResult;\n                    }\n                    // to be handled Further up the call stack\n                    throw recogError;\n                }\n            }\n            else if (isFirstInvokedRule) {\n                // otherwise a Redundant input error will be created as well and we cannot guarantee that this is indeed the case\n                this.moveToTerminatedState();\n                // the parser should never throw one of its own errors outside its flow.\n                // even if error recovery is disabled\n                return recoveryValueFunc(e);\n            }\n            else {\n                // to be recovered Further up the call stack\n                throw recogError;\n            }\n        }\n        else {\n            // some other Error type which we don't know how to handle (for example a built in JavaScript Error)\n            throw e;\n        }\n    };\n    // Implementation of parsing DSL\n    RecognizerEngine.prototype.optionInternal = function (actionORMethodDef, occurrence) {\n        var key = this.getKeyForAutomaticLookahead(keys_1.OPTION_IDX, occurrence);\n        return this.optionInternalLogic(actionORMethodDef, occurrence, key);\n    };\n    RecognizerEngine.prototype.optionInternalLogic = function (actionORMethodDef, occurrence, key) {\n        var _this = this;\n        var lookAheadFunc = this.getLaFuncFromCache(key);\n        var action;\n        if (typeof actionORMethodDef !== \"function\") {\n            action = actionORMethodDef.DEF;\n            var predicate_1 = actionORMethodDef.GATE;\n            // predicate present\n            if (predicate_1 !== undefined) {\n                var orgLookaheadFunction_1 = lookAheadFunc;\n                lookAheadFunc = function () {\n                    return predicate_1.call(_this) && orgLookaheadFunction_1.call(_this);\n                };\n            }\n        }\n        else {\n            action = actionORMethodDef;\n        }\n        if (lookAheadFunc.call(this) === true) {\n            return action.call(this);\n        }\n        return undefined;\n    };\n    RecognizerEngine.prototype.atLeastOneInternal = function (prodOccurrence, actionORMethodDef) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.AT_LEAST_ONE_IDX, prodOccurrence);\n        return this.atLeastOneInternalLogic(prodOccurrence, actionORMethodDef, laKey);\n    };\n    RecognizerEngine.prototype.atLeastOneInternalLogic = function (prodOccurrence, actionORMethodDef, key) {\n        var _this = this;\n        var lookAheadFunc = this.getLaFuncFromCache(key);\n        var action;\n        if (typeof actionORMethodDef !== \"function\") {\n            action = actionORMethodDef.DEF;\n            var predicate_2 = actionORMethodDef.GATE;\n            // predicate present\n            if (predicate_2 !== undefined) {\n                var orgLookaheadFunction_2 = lookAheadFunc;\n                lookAheadFunc = function () {\n                    return predicate_2.call(_this) && orgLookaheadFunction_2.call(_this);\n                };\n            }\n        }\n        else {\n            action = actionORMethodDef;\n        }\n        if (lookAheadFunc.call(this) === true) {\n            var notStuck = this.doSingleRepetition(action);\n            while (lookAheadFunc.call(this) === true &&\n                notStuck === true) {\n                notStuck = this.doSingleRepetition(action);\n            }\n        }\n        else {\n            throw this.raiseEarlyExitException(prodOccurrence, lookahead_1.PROD_TYPE.REPETITION_MANDATORY, actionORMethodDef.ERR_MSG);\n        }\n        // note that while it may seem that this can cause an error because by using a recursive call to\n        // AT_LEAST_ONE we change the grammar to AT_LEAST_TWO, AT_LEAST_THREE ... , the possible recursive call\n        // from the tryInRepetitionRecovery(...) will only happen IFF there really are TWO/THREE/.... items.\n        // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n        this.attemptInRepetitionRecovery(this.atLeastOneInternal, [prodOccurrence, actionORMethodDef], lookAheadFunc, keys_1.AT_LEAST_ONE_IDX, prodOccurrence, interpreter_1.NextTerminalAfterAtLeastOneWalker);\n    };\n    RecognizerEngine.prototype.atLeastOneSepFirstInternal = function (prodOccurrence, options) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.AT_LEAST_ONE_SEP_IDX, prodOccurrence);\n        this.atLeastOneSepFirstInternalLogic(prodOccurrence, options, laKey);\n    };\n    RecognizerEngine.prototype.atLeastOneSepFirstInternalLogic = function (prodOccurrence, options, key) {\n        var _this = this;\n        var action = options.DEF;\n        var separator = options.SEP;\n        var firstIterationLookaheadFunc = this.getLaFuncFromCache(key);\n        // 1st iteration\n        if (firstIterationLookaheadFunc.call(this) === true) {\n            ;\n            action.call(this);\n            //  TODO: Optimization can move this function construction into \"attemptInRepetitionRecovery\"\n            //  because it is only needed in error recovery scenarios.\n            var separatorLookAheadFunc = function () {\n                return _this.tokenMatcher(_this.LA(1), separator);\n            };\n            // 2nd..nth iterations\n            while (this.tokenMatcher(this.LA(1), separator) === true) {\n                // note that this CONSUME will never enter recovery because\n                // the separatorLookAheadFunc checks that the separator really does exist.\n                this.CONSUME(separator);\n                action.call(this);\n            }\n            // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n            this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [\n                prodOccurrence,\n                separator,\n                separatorLookAheadFunc,\n                action,\n                interpreter_1.NextTerminalAfterAtLeastOneSepWalker\n            ], separatorLookAheadFunc, keys_1.AT_LEAST_ONE_SEP_IDX, prodOccurrence, interpreter_1.NextTerminalAfterAtLeastOneSepWalker);\n        }\n        else {\n            throw this.raiseEarlyExitException(prodOccurrence, lookahead_1.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR, options.ERR_MSG);\n        }\n    };\n    RecognizerEngine.prototype.manyInternal = function (prodOccurrence, actionORMethodDef) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.MANY_IDX, prodOccurrence);\n        return this.manyInternalLogic(prodOccurrence, actionORMethodDef, laKey);\n    };\n    RecognizerEngine.prototype.manyInternalLogic = function (prodOccurrence, actionORMethodDef, key) {\n        var _this = this;\n        var lookaheadFunction = this.getLaFuncFromCache(key);\n        var action;\n        if (typeof actionORMethodDef !== \"function\") {\n            action = actionORMethodDef.DEF;\n            var predicate_3 = actionORMethodDef.GATE;\n            // predicate present\n            if (predicate_3 !== undefined) {\n                var orgLookaheadFunction_3 = lookaheadFunction;\n                lookaheadFunction = function () {\n                    return predicate_3.call(_this) && orgLookaheadFunction_3.call(_this);\n                };\n            }\n        }\n        else {\n            action = actionORMethodDef;\n        }\n        var notStuck = true;\n        while (lookaheadFunction.call(this) === true && notStuck === true) {\n            notStuck = this.doSingleRepetition(action);\n        }\n        // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n        this.attemptInRepetitionRecovery(this.manyInternal, [prodOccurrence, actionORMethodDef], lookaheadFunction, keys_1.MANY_IDX, prodOccurrence, interpreter_1.NextTerminalAfterManyWalker, \n        // The notStuck parameter is only relevant when \"attemptInRepetitionRecovery\"\n        // is invoked from manyInternal, in the MANY_SEP case and AT_LEAST_ONE[_SEP]\n        // An infinite loop cannot occur as:\n        // - Either the lookahead is guaranteed to consume something (Single Token Separator)\n        // - AT_LEAST_ONE by definition is guaranteed to consume something (or error out).\n        notStuck);\n    };\n    RecognizerEngine.prototype.manySepFirstInternal = function (prodOccurrence, options) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.MANY_SEP_IDX, prodOccurrence);\n        this.manySepFirstInternalLogic(prodOccurrence, options, laKey);\n    };\n    RecognizerEngine.prototype.manySepFirstInternalLogic = function (prodOccurrence, options, key) {\n        var _this = this;\n        var action = options.DEF;\n        var separator = options.SEP;\n        var firstIterationLaFunc = this.getLaFuncFromCache(key);\n        // 1st iteration\n        if (firstIterationLaFunc.call(this) === true) {\n            action.call(this);\n            var separatorLookAheadFunc = function () {\n                return _this.tokenMatcher(_this.LA(1), separator);\n            };\n            // 2nd..nth iterations\n            while (this.tokenMatcher(this.LA(1), separator) === true) {\n                // note that this CONSUME will never enter recovery because\n                // the separatorLookAheadFunc checks that the separator really does exist.\n                this.CONSUME(separator);\n                // No need for checking infinite loop here due to consuming the separator.\n                action.call(this);\n            }\n            // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n            this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [\n                prodOccurrence,\n                separator,\n                separatorLookAheadFunc,\n                action,\n                interpreter_1.NextTerminalAfterManySepWalker\n            ], separatorLookAheadFunc, keys_1.MANY_SEP_IDX, prodOccurrence, interpreter_1.NextTerminalAfterManySepWalker);\n        }\n    };\n    RecognizerEngine.prototype.repetitionSepSecondInternal = function (prodOccurrence, separator, separatorLookAheadFunc, action, nextTerminalAfterWalker) {\n        while (separatorLookAheadFunc()) {\n            // note that this CONSUME will never enter recovery because\n            // the separatorLookAheadFunc checks that the separator really does exist.\n            this.CONSUME(separator);\n            action.call(this);\n        }\n        // we can only arrive to this function after an error\n        // has occurred (hence the name 'second') so the following\n        // IF will always be entered, its possible to remove it...\n        // however it is kept to avoid confusion and be consistent.\n        // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n        /* istanbul ignore else */\n        this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [\n            prodOccurrence,\n            separator,\n            separatorLookAheadFunc,\n            action,\n            nextTerminalAfterWalker\n        ], separatorLookAheadFunc, keys_1.AT_LEAST_ONE_SEP_IDX, prodOccurrence, nextTerminalAfterWalker);\n    };\n    RecognizerEngine.prototype.doSingleRepetition = function (action) {\n        var beforeIteration = this.getLexerPosition();\n        action.call(this);\n        var afterIteration = this.getLexerPosition();\n        // This boolean will indicate if this repetition progressed\n        // or if we are \"stuck\" (potential infinite loop in the repetition).\n        return afterIteration > beforeIteration;\n    };\n    RecognizerEngine.prototype.orInternal = function (altsOrOpts, occurrence) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.OR_IDX, occurrence);\n        var alts = (0, isArray_1.default)(altsOrOpts) ? altsOrOpts : altsOrOpts.DEF;\n        var laFunc = this.getLaFuncFromCache(laKey);\n        var altIdxToTake = laFunc.call(this, alts);\n        if (altIdxToTake !== undefined) {\n            var chosenAlternative = alts[altIdxToTake];\n            return chosenAlternative.ALT.call(this);\n        }\n        this.raiseNoAltException(occurrence, altsOrOpts.ERR_MSG);\n    };\n    RecognizerEngine.prototype.ruleFinallyStateUpdate = function () {\n        this.RULE_STACK.pop();\n        this.RULE_OCCURRENCE_STACK.pop();\n        // NOOP when cst is disabled\n        this.cstFinallyStateUpdate();\n        if (this.RULE_STACK.length === 0 && this.isAtEndOfInput() === false) {\n            var firstRedundantTok = this.LA(1);\n            var errMsg = this.errorMessageProvider.buildNotAllInputParsedMessage({\n                firstRedundant: firstRedundantTok,\n                ruleName: this.getCurrRuleFullName()\n            });\n            this.SAVE_ERROR(new exceptions_public_1.NotAllInputParsedException(errMsg, firstRedundantTok));\n        }\n    };\n    RecognizerEngine.prototype.subruleInternal = function (ruleToCall, idx, options) {\n        var ruleResult;\n        try {\n            var args = options !== undefined ? options.ARGS : undefined;\n            this.subruleIdx = idx;\n            ruleResult = ruleToCall.apply(this, args);\n            this.cstPostNonTerminal(ruleResult, options !== undefined && options.LABEL !== undefined\n                ? options.LABEL\n                : ruleToCall.ruleName);\n            return ruleResult;\n        }\n        catch (e) {\n            throw this.subruleInternalError(e, options, ruleToCall.ruleName);\n        }\n    };\n    RecognizerEngine.prototype.subruleInternalError = function (e, options, ruleName) {\n        if ((0, exceptions_public_1.isRecognitionException)(e) && e.partialCstResult !== undefined) {\n            this.cstPostNonTerminal(e.partialCstResult, options !== undefined && options.LABEL !== undefined\n                ? options.LABEL\n                : ruleName);\n            delete e.partialCstResult;\n        }\n        throw e;\n    };\n    RecognizerEngine.prototype.consumeInternal = function (tokType, idx, options) {\n        var consumedToken;\n        try {\n            var nextToken = this.LA(1);\n            if (this.tokenMatcher(nextToken, tokType) === true) {\n                this.consumeToken();\n                consumedToken = nextToken;\n            }\n            else {\n                this.consumeInternalError(tokType, nextToken, options);\n            }\n        }\n        catch (eFromConsumption) {\n            consumedToken = this.consumeInternalRecovery(tokType, idx, eFromConsumption);\n        }\n        this.cstPostTerminal(options !== undefined && options.LABEL !== undefined\n            ? options.LABEL\n            : tokType.name, consumedToken);\n        return consumedToken;\n    };\n    RecognizerEngine.prototype.consumeInternalError = function (tokType, nextToken, options) {\n        var msg;\n        var previousToken = this.LA(0);\n        if (options !== undefined && options.ERR_MSG) {\n            msg = options.ERR_MSG;\n        }\n        else {\n            msg = this.errorMessageProvider.buildMismatchTokenMessage({\n                expected: tokType,\n                actual: nextToken,\n                previous: previousToken,\n                ruleName: this.getCurrRuleFullName()\n            });\n        }\n        throw this.SAVE_ERROR(new exceptions_public_1.MismatchedTokenException(msg, nextToken, previousToken));\n    };\n    RecognizerEngine.prototype.consumeInternalRecovery = function (tokType, idx, eFromConsumption) {\n        // no recovery allowed during backtracking, otherwise backtracking may recover invalid syntax and accept it\n        // but the original syntax could have been parsed successfully without any backtracking + recovery\n        if (this.recoveryEnabled &&\n            // TODO: more robust checking of the exception type. Perhaps Typescript extending expressions?\n            eFromConsumption.name === \"MismatchedTokenException\" &&\n            !this.isBackTracking()) {\n            var follows = this.getFollowsForInRuleRecovery(tokType, idx);\n            try {\n                return this.tryInRuleRecovery(tokType, follows);\n            }\n            catch (eFromInRuleRecovery) {\n                if (eFromInRuleRecovery.name === recoverable_1.IN_RULE_RECOVERY_EXCEPTION) {\n                    // failed in RuleRecovery.\n                    // throw the original error in order to trigger reSync error recovery\n                    throw eFromConsumption;\n                }\n                else {\n                    throw eFromInRuleRecovery;\n                }\n            }\n        }\n        else {\n            throw eFromConsumption;\n        }\n    };\n    RecognizerEngine.prototype.saveRecogState = function () {\n        // errors is a getter which will clone the errors array\n        var savedErrors = this.errors;\n        var savedRuleStack = (0, clone_1.default)(this.RULE_STACK);\n        return {\n            errors: savedErrors,\n            lexerState: this.exportLexerState(),\n            RULE_STACK: savedRuleStack,\n            CST_STACK: this.CST_STACK\n        };\n    };\n    RecognizerEngine.prototype.reloadRecogState = function (newState) {\n        this.errors = newState.errors;\n        this.importLexerState(newState.lexerState);\n        this.RULE_STACK = newState.RULE_STACK;\n    };\n    RecognizerEngine.prototype.ruleInvocationStateUpdate = function (shortName, fullName, idxInCallingRule) {\n        this.RULE_OCCURRENCE_STACK.push(idxInCallingRule);\n        this.RULE_STACK.push(shortName);\n        // NOOP when cst is disabled\n        this.cstInvocationStateUpdate(fullName);\n    };\n    RecognizerEngine.prototype.isBackTracking = function () {\n        return this.isBackTrackingStack.length !== 0;\n    };\n    RecognizerEngine.prototype.getCurrRuleFullName = function () {\n        var shortName = this.getLastExplicitRuleShortName();\n        return this.shortRuleNameToFull[shortName];\n    };\n    RecognizerEngine.prototype.shortRuleNameToFullName = function (shortName) {\n        return this.shortRuleNameToFull[shortName];\n    };\n    RecognizerEngine.prototype.isAtEndOfInput = function () {\n        return this.tokenMatcher(this.LA(1), tokens_public_1.EOF);\n    };\n    RecognizerEngine.prototype.reset = function () {\n        this.resetLexerState();\n        this.subruleIdx = 0;\n        this.isBackTrackingStack = [];\n        this.errors = [];\n        this.RULE_STACK = [];\n        // TODO: extract a specific reset for TreeBuilder trait\n        this.CST_STACK = [];\n        this.RULE_OCCURRENCE_STACK = [];\n    };\n    return RecognizerEngine;\n}());\nexports.RecognizerEngine = RecognizerEngine;\n//# sourceMappingURL=recognizer_engine.js.map","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","/**\n * A specialized version of `_.every` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n */\nfunction arrayEvery(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (!predicate(array[index], index, array)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = arrayEvery;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TreeBuilder = void 0;\nvar cst_1 = require(\"../../cst/cst\");\nvar noop_1 = __importDefault(require(\"lodash/noop\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar keys_1 = __importDefault(require(\"lodash/keys\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar cst_visitor_1 = require(\"../../cst/cst_visitor\");\nvar parser_1 = require(\"../parser\");\n/**\n * This trait is responsible for the CST building logic.\n */\nvar TreeBuilder = /** @class */ (function () {\n    function TreeBuilder() {\n    }\n    TreeBuilder.prototype.initTreeBuilder = function (config) {\n        this.CST_STACK = [];\n        // outputCst is no longer exposed/defined in the pubic API\n        this.outputCst = config.outputCst;\n        this.nodeLocationTracking = (0, has_1.default)(config, \"nodeLocationTracking\")\n            ? config.nodeLocationTracking // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.nodeLocationTracking;\n        if (!this.outputCst) {\n            this.cstInvocationStateUpdate = noop_1.default;\n            this.cstFinallyStateUpdate = noop_1.default;\n            this.cstPostTerminal = noop_1.default;\n            this.cstPostNonTerminal = noop_1.default;\n            this.cstPostRule = noop_1.default;\n        }\n        else {\n            if (/full/i.test(this.nodeLocationTracking)) {\n                if (this.recoveryEnabled) {\n                    this.setNodeLocationFromToken = cst_1.setNodeLocationFull;\n                    this.setNodeLocationFromNode = cst_1.setNodeLocationFull;\n                    this.cstPostRule = noop_1.default;\n                    this.setInitialNodeLocation = this.setInitialNodeLocationFullRecovery;\n                }\n                else {\n                    this.setNodeLocationFromToken = noop_1.default;\n                    this.setNodeLocationFromNode = noop_1.default;\n                    this.cstPostRule = this.cstPostRuleFull;\n                    this.setInitialNodeLocation = this.setInitialNodeLocationFullRegular;\n                }\n            }\n            else if (/onlyOffset/i.test(this.nodeLocationTracking)) {\n                if (this.recoveryEnabled) {\n                    this.setNodeLocationFromToken = cst_1.setNodeLocationOnlyOffset;\n                    this.setNodeLocationFromNode = cst_1.setNodeLocationOnlyOffset;\n                    this.cstPostRule = noop_1.default;\n                    this.setInitialNodeLocation =\n                        this.setInitialNodeLocationOnlyOffsetRecovery;\n                }\n                else {\n                    this.setNodeLocationFromToken = noop_1.default;\n                    this.setNodeLocationFromNode = noop_1.default;\n                    this.cstPostRule = this.cstPostRuleOnlyOffset;\n                    this.setInitialNodeLocation =\n                        this.setInitialNodeLocationOnlyOffsetRegular;\n                }\n            }\n            else if (/none/i.test(this.nodeLocationTracking)) {\n                this.setNodeLocationFromToken = noop_1.default;\n                this.setNodeLocationFromNode = noop_1.default;\n                this.cstPostRule = noop_1.default;\n                this.setInitialNodeLocation = noop_1.default;\n            }\n            else {\n                throw Error(\"Invalid <nodeLocationTracking> config option: \\\"\".concat(config.nodeLocationTracking, \"\\\"\"));\n            }\n        }\n    };\n    TreeBuilder.prototype.setInitialNodeLocationOnlyOffsetRecovery = function (cstNode) {\n        cstNode.location = {\n            startOffset: NaN,\n            endOffset: NaN\n        };\n    };\n    TreeBuilder.prototype.setInitialNodeLocationOnlyOffsetRegular = function (cstNode) {\n        cstNode.location = {\n            // without error recovery the starting Location of a new CstNode is guaranteed\n            // To be the next Token's startOffset (for valid inputs).\n            // For invalid inputs there won't be any CSTOutput so this potential\n            // inaccuracy does not matter\n            startOffset: this.LA(1).startOffset,\n            endOffset: NaN\n        };\n    };\n    TreeBuilder.prototype.setInitialNodeLocationFullRecovery = function (cstNode) {\n        cstNode.location = {\n            startOffset: NaN,\n            startLine: NaN,\n            startColumn: NaN,\n            endOffset: NaN,\n            endLine: NaN,\n            endColumn: NaN\n        };\n    };\n    /**\n       *  @see setInitialNodeLocationOnlyOffsetRegular for explanation why this work\n  \n       * @param cstNode\n       */\n    TreeBuilder.prototype.setInitialNodeLocationFullRegular = function (cstNode) {\n        var nextToken = this.LA(1);\n        cstNode.location = {\n            startOffset: nextToken.startOffset,\n            startLine: nextToken.startLine,\n            startColumn: nextToken.startColumn,\n            endOffset: NaN,\n            endLine: NaN,\n            endColumn: NaN\n        };\n    };\n    TreeBuilder.prototype.cstInvocationStateUpdate = function (fullRuleName) {\n        var cstNode = {\n            name: fullRuleName,\n            children: Object.create(null)\n        };\n        this.setInitialNodeLocation(cstNode);\n        this.CST_STACK.push(cstNode);\n    };\n    TreeBuilder.prototype.cstFinallyStateUpdate = function () {\n        this.CST_STACK.pop();\n    };\n    TreeBuilder.prototype.cstPostRuleFull = function (ruleCstNode) {\n        // casts to `required<CstNodeLocation>` are safe because `cstPostRuleFull` should only be invoked when full location is enabled\n        var prevToken = this.LA(0);\n        var loc = ruleCstNode.location;\n        // If this condition is true it means we consumed at least one Token\n        // In this CstNode.\n        if (loc.startOffset <= prevToken.startOffset === true) {\n            loc.endOffset = prevToken.endOffset;\n            loc.endLine = prevToken.endLine;\n            loc.endColumn = prevToken.endColumn;\n        }\n        // \"empty\" CstNode edge case\n        else {\n            loc.startOffset = NaN;\n            loc.startLine = NaN;\n            loc.startColumn = NaN;\n        }\n    };\n    TreeBuilder.prototype.cstPostRuleOnlyOffset = function (ruleCstNode) {\n        var prevToken = this.LA(0);\n        // `location' is not null because `cstPostRuleOnlyOffset` will only be invoked when location tracking is enabled.\n        var loc = ruleCstNode.location;\n        // If this condition is true it means we consumed at least one Token\n        // In this CstNode.\n        if (loc.startOffset <= prevToken.startOffset === true) {\n            loc.endOffset = prevToken.endOffset;\n        }\n        // \"empty\" CstNode edge case\n        else {\n            loc.startOffset = NaN;\n        }\n    };\n    TreeBuilder.prototype.cstPostTerminal = function (key, consumedToken) {\n        var rootCst = this.CST_STACK[this.CST_STACK.length - 1];\n        (0, cst_1.addTerminalToCst)(rootCst, consumedToken, key);\n        // This is only used when **both** error recovery and CST Output are enabled.\n        this.setNodeLocationFromToken(rootCst.location, consumedToken);\n    };\n    TreeBuilder.prototype.cstPostNonTerminal = function (ruleCstResult, ruleName) {\n        var preCstNode = this.CST_STACK[this.CST_STACK.length - 1];\n        (0, cst_1.addNoneTerminalToCst)(preCstNode, ruleName, ruleCstResult);\n        // This is only used when **both** error recovery and CST Output are enabled.\n        this.setNodeLocationFromNode(preCstNode.location, ruleCstResult.location);\n    };\n    TreeBuilder.prototype.getBaseCstVisitorConstructor = function () {\n        if ((0, isUndefined_1.default)(this.baseCstVisitorConstructor)) {\n            var newBaseCstVisitorConstructor = (0, cst_visitor_1.createBaseSemanticVisitorConstructor)(this.className, (0, keys_1.default)(this.gastProductionsCache));\n            this.baseCstVisitorConstructor = newBaseCstVisitorConstructor;\n            return newBaseCstVisitorConstructor;\n        }\n        return this.baseCstVisitorConstructor;\n    };\n    TreeBuilder.prototype.getBaseCstVisitorConstructorWithDefaults = function () {\n        if ((0, isUndefined_1.default)(this.baseCstVisitorWithDefaultsConstructor)) {\n            var newConstructor = (0, cst_visitor_1.createBaseVisitorConstructorWithDefaults)(this.className, (0, keys_1.default)(this.gastProductionsCache), this.getBaseCstVisitorConstructor());\n            this.baseCstVisitorWithDefaultsConstructor = newConstructor;\n            return newConstructor;\n        }\n        return this.baseCstVisitorWithDefaultsConstructor;\n    };\n    TreeBuilder.prototype.getLastExplicitRuleShortName = function () {\n        var ruleStack = this.RULE_STACK;\n        return ruleStack[ruleStack.length - 1];\n    };\n    TreeBuilder.prototype.getPreviousExplicitRuleShortName = function () {\n        var ruleStack = this.RULE_STACK;\n        return ruleStack[ruleStack.length - 2];\n    };\n    TreeBuilder.prototype.getLastExplicitRuleOccurrenceIndex = function () {\n        var occurrenceStack = this.RULE_OCCURRENCE_STACK;\n        return occurrenceStack[occurrenceStack.length - 1];\n    };\n    return TreeBuilder;\n}());\nexports.TreeBuilder = TreeBuilder;\n//# sourceMappingURL=tree_builder.js.map","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseSlice = require('./_baseSlice'),\n    toInteger = require('./toInteger');\n\n/**\n * Creates a slice of `array` with `n` elements dropped from the end.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=1] The number of elements to drop.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.dropRight([1, 2, 3]);\n * // => [1, 2]\n *\n * _.dropRight([1, 2, 3], 2);\n * // => [1]\n *\n * _.dropRight([1, 2, 3], 5);\n * // => []\n *\n * _.dropRight([1, 2, 3], 0);\n * // => [1, 2, 3]\n */\nfunction dropRight(array, n, guard) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  n = (guard || n === undefined) ? 1 : toInteger(n);\n  n = length - n;\n  return baseSlice(array, 0, n < 0 ? 0 : n);\n}\n\nmodule.exports = dropRight;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n *\n * // Combining several predicates using `_.overEvery` or `_.overSome`.\n * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n * // => objects for ['fred', 'barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ErrorHandler = void 0;\nvar exceptions_public_1 = require(\"../../exceptions_public\");\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar lookahead_1 = require(\"../../grammar/lookahead\");\nvar parser_1 = require(\"../parser\");\n/**\n * Trait responsible for runtime parsing errors.\n */\nvar ErrorHandler = /** @class */ (function () {\n    function ErrorHandler() {\n    }\n    ErrorHandler.prototype.initErrorHandler = function (config) {\n        this._errors = [];\n        this.errorMessageProvider = (0, has_1.default)(config, \"errorMessageProvider\")\n            ? config.errorMessageProvider // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.errorMessageProvider;\n    };\n    ErrorHandler.prototype.SAVE_ERROR = function (error) {\n        if ((0, exceptions_public_1.isRecognitionException)(error)) {\n            error.context = {\n                ruleStack: this.getHumanReadableRuleStack(),\n                ruleOccurrenceStack: (0, clone_1.default)(this.RULE_OCCURRENCE_STACK)\n            };\n            this._errors.push(error);\n            return error;\n        }\n        else {\n            throw Error(\"Trying to save an Error which is not a RecognitionException\");\n        }\n    };\n    Object.defineProperty(ErrorHandler.prototype, \"errors\", {\n        get: function () {\n            return (0, clone_1.default)(this._errors);\n        },\n        set: function (newErrors) {\n            this._errors = newErrors;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // TODO: consider caching the error message computed information\n    ErrorHandler.prototype.raiseEarlyExitException = function (occurrence, prodType, userDefinedErrMsg) {\n        var ruleName = this.getCurrRuleFullName();\n        var ruleGrammar = this.getGAstProductions()[ruleName];\n        var lookAheadPathsPerAlternative = (0, lookahead_1.getLookaheadPathsForOptionalProd)(occurrence, ruleGrammar, prodType, this.maxLookahead);\n        var insideProdPaths = lookAheadPathsPerAlternative[0];\n        var actualTokens = [];\n        for (var i = 1; i <= this.maxLookahead; i++) {\n            actualTokens.push(this.LA(i));\n        }\n        var msg = this.errorMessageProvider.buildEarlyExitMessage({\n            expectedIterationPaths: insideProdPaths,\n            actual: actualTokens,\n            previous: this.LA(0),\n            customUserDescription: userDefinedErrMsg,\n            ruleName: ruleName\n        });\n        throw this.SAVE_ERROR(new exceptions_public_1.EarlyExitException(msg, this.LA(1), this.LA(0)));\n    };\n    // TODO: consider caching the error message computed information\n    ErrorHandler.prototype.raiseNoAltException = function (occurrence, errMsgTypes) {\n        var ruleName = this.getCurrRuleFullName();\n        var ruleGrammar = this.getGAstProductions()[ruleName];\n        // TODO: getLookaheadPathsForOr can be slow for large enough maxLookahead and certain grammars, consider caching ?\n        var lookAheadPathsPerAlternative = (0, lookahead_1.getLookaheadPathsForOr)(occurrence, ruleGrammar, this.maxLookahead);\n        var actualTokens = [];\n        for (var i = 1; i <= this.maxLookahead; i++) {\n            actualTokens.push(this.LA(i));\n        }\n        var previousToken = this.LA(0);\n        var errMsg = this.errorMessageProvider.buildNoViableAltMessage({\n            expectedPathsPerAlt: lookAheadPathsPerAlternative,\n            actual: actualTokens,\n            previous: previousToken,\n            customUserDescription: errMsgTypes,\n            ruleName: this.getCurrRuleFullName()\n        });\n        throw this.SAVE_ERROR(new exceptions_public_1.NoViableAltException(errMsg, this.LA(1), previousToken));\n    };\n    return ErrorHandler;\n}());\nexports.ErrorHandler = ErrorHandler;\n//# sourceMappingURL=error_handler.js.map","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray'),\n    negate = require('./negate');\n\n/**\n * The opposite of `_.filter`; this method returns the elements of `collection`\n * that `predicate` does **not** return truthy for.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.filter\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': true }\n * ];\n *\n * _.reject(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.reject(users, { 'age': 40, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.reject(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.reject(users, 'active');\n * // => objects for ['barney']\n */\nfunction reject(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, negate(baseIteratee(predicate, 3)));\n}\n\nmodule.exports = reject;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attemptInRepetitionRecovery = exports.Recoverable = exports.InRuleRecoveryException = exports.IN_RULE_RECOVERY_EXCEPTION = exports.EOF_FOLLOW_KEY = void 0;\nvar tokens_public_1 = require(\"../../../scan/tokens_public\");\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar dropRight_1 = __importDefault(require(\"lodash/dropRight\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar find_1 = __importDefault(require(\"lodash/find\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar exceptions_public_1 = require(\"../../exceptions_public\");\nvar constants_1 = require(\"../../constants\");\nvar parser_1 = require(\"../parser\");\nexports.EOF_FOLLOW_KEY = {};\nexports.IN_RULE_RECOVERY_EXCEPTION = \"InRuleRecoveryException\";\nvar InRuleRecoveryException = /** @class */ (function (_super) {\n    __extends(InRuleRecoveryException, _super);\n    function InRuleRecoveryException(message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = exports.IN_RULE_RECOVERY_EXCEPTION;\n        return _this;\n    }\n    return InRuleRecoveryException;\n}(Error));\nexports.InRuleRecoveryException = InRuleRecoveryException;\n/**\n * This trait is responsible for the error recovery and fault tolerant logic\n */\nvar Recoverable = /** @class */ (function () {\n    function Recoverable() {\n    }\n    Recoverable.prototype.initRecoverable = function (config) {\n        this.firstAfterRepMap = {};\n        this.resyncFollows = {};\n        this.recoveryEnabled = (0, has_1.default)(config, \"recoveryEnabled\")\n            ? config.recoveryEnabled // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.recoveryEnabled;\n        // performance optimization, NOOP will be inlined which\n        // effectively means that this optional feature does not exist\n        // when not used.\n        if (this.recoveryEnabled) {\n            this.attemptInRepetitionRecovery = attemptInRepetitionRecovery;\n        }\n    };\n    Recoverable.prototype.getTokenToInsert = function (tokType) {\n        var tokToInsert = (0, tokens_public_1.createTokenInstance)(tokType, \"\", NaN, NaN, NaN, NaN, NaN, NaN);\n        tokToInsert.isInsertedInRecovery = true;\n        return tokToInsert;\n    };\n    Recoverable.prototype.canTokenTypeBeInsertedInRecovery = function (tokType) {\n        return true;\n    };\n    Recoverable.prototype.canTokenTypeBeDeletedInRecovery = function (tokType) {\n        return true;\n    };\n    Recoverable.prototype.tryInRepetitionRecovery = function (grammarRule, grammarRuleArgs, lookAheadFunc, expectedTokType) {\n        var _this = this;\n        // TODO: can the resyncTokenType be cached?\n        var reSyncTokType = this.findReSyncTokenType();\n        var savedLexerState = this.exportLexerState();\n        var resyncedTokens = [];\n        var passedResyncPoint = false;\n        var nextTokenWithoutResync = this.LA(1);\n        var currToken = this.LA(1);\n        var generateErrorMessage = function () {\n            var previousToken = _this.LA(0);\n            // we are preemptively re-syncing before an error has been detected, therefor we must reproduce\n            // the error that would have been thrown\n            var msg = _this.errorMessageProvider.buildMismatchTokenMessage({\n                expected: expectedTokType,\n                actual: nextTokenWithoutResync,\n                previous: previousToken,\n                ruleName: _this.getCurrRuleFullName()\n            });\n            var error = new exceptions_public_1.MismatchedTokenException(msg, nextTokenWithoutResync, _this.LA(0));\n            // the first token here will be the original cause of the error, this is not part of the resyncedTokens property.\n            error.resyncedTokens = (0, dropRight_1.default)(resyncedTokens);\n            _this.SAVE_ERROR(error);\n        };\n        while (!passedResyncPoint) {\n            // re-synced to a point where we can safely exit the repetition/\n            if (this.tokenMatcher(currToken, expectedTokType)) {\n                generateErrorMessage();\n                return; // must return here to avoid reverting the inputIdx\n            }\n            else if (lookAheadFunc.call(this)) {\n                // we skipped enough tokens so we can resync right back into another iteration of the repetition grammar rule\n                generateErrorMessage();\n                // recursive invocation in other to support multiple re-syncs in the same top level repetition grammar rule\n                grammarRule.apply(this, grammarRuleArgs);\n                return; // must return here to avoid reverting the inputIdx\n            }\n            else if (this.tokenMatcher(currToken, reSyncTokType)) {\n                passedResyncPoint = true;\n            }\n            else {\n                currToken = this.SKIP_TOKEN();\n                this.addToResyncTokens(currToken, resyncedTokens);\n            }\n        }\n        // we were unable to find a CLOSER point to resync inside the Repetition, reset the state.\n        // The parsing exception we were trying to prevent will happen in the NEXT parsing step. it may be handled by\n        // \"between rules\" resync recovery later in the flow.\n        this.importLexerState(savedLexerState);\n    };\n    Recoverable.prototype.shouldInRepetitionRecoveryBeTried = function (expectTokAfterLastMatch, nextTokIdx, notStuck) {\n        // Edge case of arriving from a MANY repetition which is stuck\n        // Attempting recovery in this case could cause an infinite loop\n        if (notStuck === false) {\n            return false;\n        }\n        // no need to recover, next token is what we expect...\n        if (this.tokenMatcher(this.LA(1), expectTokAfterLastMatch)) {\n            return false;\n        }\n        // error recovery is disabled during backtracking as it can make the parser ignore a valid grammar path\n        // and prefer some backtracking path that includes recovered errors.\n        if (this.isBackTracking()) {\n            return false;\n        }\n        // if we can perform inRule recovery (single token insertion or deletion) we always prefer that recovery algorithm\n        // because if it works, it makes the least amount of changes to the input stream (greedy algorithm)\n        //noinspection RedundantIfStatementJS\n        if (this.canPerformInRuleRecovery(expectTokAfterLastMatch, this.getFollowsForInRuleRecovery(expectTokAfterLastMatch, nextTokIdx))) {\n            return false;\n        }\n        return true;\n    };\n    // Error Recovery functionality\n    Recoverable.prototype.getFollowsForInRuleRecovery = function (tokType, tokIdxInRule) {\n        var grammarPath = this.getCurrentGrammarPath(tokType, tokIdxInRule);\n        var follows = this.getNextPossibleTokenTypes(grammarPath);\n        return follows;\n    };\n    Recoverable.prototype.tryInRuleRecovery = function (expectedTokType, follows) {\n        if (this.canRecoverWithSingleTokenInsertion(expectedTokType, follows)) {\n            var tokToInsert = this.getTokenToInsert(expectedTokType);\n            return tokToInsert;\n        }\n        if (this.canRecoverWithSingleTokenDeletion(expectedTokType)) {\n            var nextTok = this.SKIP_TOKEN();\n            this.consumeToken();\n            return nextTok;\n        }\n        throw new InRuleRecoveryException(\"sad sad panda\");\n    };\n    Recoverable.prototype.canPerformInRuleRecovery = function (expectedToken, follows) {\n        return (this.canRecoverWithSingleTokenInsertion(expectedToken, follows) ||\n            this.canRecoverWithSingleTokenDeletion(expectedToken));\n    };\n    Recoverable.prototype.canRecoverWithSingleTokenInsertion = function (expectedTokType, follows) {\n        var _this = this;\n        if (!this.canTokenTypeBeInsertedInRecovery(expectedTokType)) {\n            return false;\n        }\n        // must know the possible following tokens to perform single token insertion\n        if ((0, isEmpty_1.default)(follows)) {\n            return false;\n        }\n        var mismatchedTok = this.LA(1);\n        var isMisMatchedTokInFollows = (0, find_1.default)(follows, function (possibleFollowsTokType) {\n            return _this.tokenMatcher(mismatchedTok, possibleFollowsTokType);\n        }) !== undefined;\n        return isMisMatchedTokInFollows;\n    };\n    Recoverable.prototype.canRecoverWithSingleTokenDeletion = function (expectedTokType) {\n        if (!this.canTokenTypeBeDeletedInRecovery(expectedTokType)) {\n            return false;\n        }\n        var isNextTokenWhatIsExpected = this.tokenMatcher(this.LA(2), expectedTokType);\n        return isNextTokenWhatIsExpected;\n    };\n    Recoverable.prototype.isInCurrentRuleReSyncSet = function (tokenTypeIdx) {\n        var followKey = this.getCurrFollowKey();\n        var currentRuleReSyncSet = this.getFollowSetFromFollowKey(followKey);\n        return (0, includes_1.default)(currentRuleReSyncSet, tokenTypeIdx);\n    };\n    Recoverable.prototype.findReSyncTokenType = function () {\n        var allPossibleReSyncTokTypes = this.flattenFollowSet();\n        // this loop will always terminate as EOF is always in the follow stack and also always (virtually) in the input\n        var nextToken = this.LA(1);\n        var k = 2;\n        while (true) {\n            var foundMatch = (0, find_1.default)(allPossibleReSyncTokTypes, function (resyncTokType) {\n                var canMatch = (0, tokens_public_1.tokenMatcher)(nextToken, resyncTokType);\n                return canMatch;\n            });\n            if (foundMatch !== undefined) {\n                return foundMatch;\n            }\n            nextToken = this.LA(k);\n            k++;\n        }\n    };\n    Recoverable.prototype.getCurrFollowKey = function () {\n        // the length is at least one as we always add the ruleName to the stack before invoking the rule.\n        if (this.RULE_STACK.length === 1) {\n            return exports.EOF_FOLLOW_KEY;\n        }\n        var currRuleShortName = this.getLastExplicitRuleShortName();\n        var currRuleIdx = this.getLastExplicitRuleOccurrenceIndex();\n        var prevRuleShortName = this.getPreviousExplicitRuleShortName();\n        return {\n            ruleName: this.shortRuleNameToFullName(currRuleShortName),\n            idxInCallingRule: currRuleIdx,\n            inRule: this.shortRuleNameToFullName(prevRuleShortName)\n        };\n    };\n    Recoverable.prototype.buildFullFollowKeyStack = function () {\n        var _this = this;\n        var explicitRuleStack = this.RULE_STACK;\n        var explicitOccurrenceStack = this.RULE_OCCURRENCE_STACK;\n        return (0, map_1.default)(explicitRuleStack, function (ruleName, idx) {\n            if (idx === 0) {\n                return exports.EOF_FOLLOW_KEY;\n            }\n            return {\n                ruleName: _this.shortRuleNameToFullName(ruleName),\n                idxInCallingRule: explicitOccurrenceStack[idx],\n                inRule: _this.shortRuleNameToFullName(explicitRuleStack[idx - 1])\n            };\n        });\n    };\n    Recoverable.prototype.flattenFollowSet = function () {\n        var _this = this;\n        var followStack = (0, map_1.default)(this.buildFullFollowKeyStack(), function (currKey) {\n            return _this.getFollowSetFromFollowKey(currKey);\n        });\n        return (0, flatten_1.default)(followStack);\n    };\n    Recoverable.prototype.getFollowSetFromFollowKey = function (followKey) {\n        if (followKey === exports.EOF_FOLLOW_KEY) {\n            return [tokens_public_1.EOF];\n        }\n        var followName = followKey.ruleName + followKey.idxInCallingRule + constants_1.IN + followKey.inRule;\n        return this.resyncFollows[followName];\n    };\n    // It does not make any sense to include a virtual EOF token in the list of resynced tokens\n    // as EOF does not really exist and thus does not contain any useful information (line/column numbers)\n    Recoverable.prototype.addToResyncTokens = function (token, resyncTokens) {\n        if (!this.tokenMatcher(token, tokens_public_1.EOF)) {\n            resyncTokens.push(token);\n        }\n        return resyncTokens;\n    };\n    Recoverable.prototype.reSyncTo = function (tokType) {\n        var resyncedTokens = [];\n        var nextTok = this.LA(1);\n        while (this.tokenMatcher(nextTok, tokType) === false) {\n            nextTok = this.SKIP_TOKEN();\n            this.addToResyncTokens(nextTok, resyncedTokens);\n        }\n        // the last token is not part of the error.\n        return (0, dropRight_1.default)(resyncedTokens);\n    };\n    Recoverable.prototype.attemptInRepetitionRecovery = function (prodFunc, args, lookaheadFunc, dslMethodIdx, prodOccurrence, nextToksWalker, notStuck) {\n        // by default this is a NO-OP\n        // The actual implementation is with the function(not method) below\n    };\n    Recoverable.prototype.getCurrentGrammarPath = function (tokType, tokIdxInRule) {\n        var pathRuleStack = this.getHumanReadableRuleStack();\n        var pathOccurrenceStack = (0, clone_1.default)(this.RULE_OCCURRENCE_STACK);\n        var grammarPath = {\n            ruleStack: pathRuleStack,\n            occurrenceStack: pathOccurrenceStack,\n            lastTok: tokType,\n            lastTokOccurrence: tokIdxInRule\n        };\n        return grammarPath;\n    };\n    Recoverable.prototype.getHumanReadableRuleStack = function () {\n        var _this = this;\n        return (0, map_1.default)(this.RULE_STACK, function (currShortName) {\n            return _this.shortRuleNameToFullName(currShortName);\n        });\n    };\n    return Recoverable;\n}());\nexports.Recoverable = Recoverable;\nfunction attemptInRepetitionRecovery(prodFunc, args, lookaheadFunc, dslMethodIdx, prodOccurrence, nextToksWalker, notStuck) {\n    var key = this.getKeyForAutomaticLookahead(dslMethodIdx, prodOccurrence);\n    var firstAfterRepInfo = this.firstAfterRepMap[key];\n    if (firstAfterRepInfo === undefined) {\n        var currRuleName = this.getCurrRuleFullName();\n        var ruleGrammar = this.getGAstProductions()[currRuleName];\n        var walker = new nextToksWalker(ruleGrammar, prodOccurrence);\n        firstAfterRepInfo = walker.startWalking();\n        this.firstAfterRepMap[key] = firstAfterRepInfo;\n    }\n    var expectTokAfterLastMatch = firstAfterRepInfo.token;\n    var nextTokIdx = firstAfterRepInfo.occurrence;\n    var isEndOfRule = firstAfterRepInfo.isEndOfRule;\n    // special edge case of a TOP most repetition after which the input should END.\n    // this will force an attempt for inRule recovery in that scenario.\n    if (this.RULE_STACK.length === 1 &&\n        isEndOfRule &&\n        expectTokAfterLastMatch === undefined) {\n        expectTokAfterLastMatch = tokens_public_1.EOF;\n        nextTokIdx = 1;\n    }\n    // We don't have anything to re-sync to...\n    // this condition was extracted from `shouldInRepetitionRecoveryBeTried` to act as a type-guard\n    if (expectTokAfterLastMatch === undefined || nextTokIdx === undefined) {\n        return;\n    }\n    if (this.shouldInRepetitionRecoveryBeTried(expectTokAfterLastMatch, nextTokIdx, notStuck)) {\n        // TODO: performance optimization: instead of passing the original args here, we modify\n        // the args param (or create a new one) and make sure the lookahead func is explicitly provided\n        // to avoid searching the cache for it once more.\n        this.tryInRepetitionRecovery(prodFunc, args, lookaheadFunc, expectTokAfterLastMatch);\n    }\n}\nexports.attemptInRepetitionRecovery = attemptInRepetitionRecovery;\n//# sourceMappingURL=recoverable.js.map","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","import { Cell } from \"../Cell\";\nimport { CellEvent } from \"../Cell/CellEvent\";\nimport { EventDispatcher } from \"../Utility/EventDispatcher\";\nimport { DependencyBuilder } from \"./DependencyBuilder\";\nimport { CellRegistry } from \"../Sheet/CellRegistry\";\n\nexport class DependencyTree {\n\n    protected depTree : Record<string, Cell> = {};\n    protected cellRegistry : CellRegistry;\n\n    constructor(\n        cellRegistry : CellRegistry,\n        private dispatcher : EventDispatcher,\n        private builder : DependencyBuilder\n    ) {\n        this.cellRegistry = cellRegistry;\n        this.buildTree();\n        this.dispatcher.listen(CellEvent.FORMULA_CHANGED, this._updateGraph.bind(this));\n    }\n\n    private buildTree() {\n        // Build the dependency tree from cell registry\n        this.cellRegistry.each((cell: Cell) => {\n            if (cell.formula) {\n                this.depTree[cell.address] = cell;\n            }\n        });\n    }\n\n    private _updateGraph(event: any)\n    {\n        // Rebuild the tree when a formula changes\n        this.buildTree();\n    }\n\n    markAsDirty(cell : Cell) {\n        if (this.depTree[cell.address]) {\n            this.depTree[cell.address].markAsDirty();\n\n            // Recursively mark dependents as dirty\n            const dependents = this.depTree[cell.address].getDependents();\n            for (const address in dependents) {\n                this.markAsDirty(dependents[address]);\n            }\n        }\n    }\n\n    /**\n     * Topologically sort object tree into array based on depth level\n     *\n     * a -\n     *    |- c -\n     * b -      | - e -\n     *       d -        | - g\n     *                  |\n     *              f -\n     *\n     * to\n     *\n     * a | c | e | g\n     * b | d | f |\n     */\n    topologicalSort() : Array<Array<Cell>> {\n        const levels: Array<Array<Cell>> = [];\n        const visited = new Set<string>();\n        const cellLevels = new Map<string, number>();\n\n        // Calculate level for each cell based on its precedents\n        const calculateLevel = (cell: Cell): number => {\n            if (cellLevels.has(cell.address)) {\n                return cellLevels.get(cell.address)!;\n            }\n\n            const precedents = cell.getPrecedents();\n            if (!precedents || Object.keys(precedents).length === 0) {\n                // No precedents, this is a leaf node (level 0)\n                cellLevels.set(cell.address, 0);\n                return 0;\n            }\n\n            // Find the maximum level among precedents\n            let maxLevel = -1;\n            for (const address in precedents) {\n                const precedent = precedents[address];\n                if (precedent) {\n                    const precedentLevel = calculateLevel(precedent);\n                    if (precedentLevel > maxLevel) {\n                        maxLevel = precedentLevel;\n                    }\n                }\n            }\n\n            const level = maxLevel + 1;\n            cellLevels.set(cell.address, level);\n            return level;\n        };\n\n        // Calculate levels for all cells with formulas\n        this.cellRegistry.each((cell: Cell) => {\n            if (cell.formula && !visited.has(cell.address)) {\n                calculateLevel(cell);\n            }\n        });\n\n        // Group cells by level (only include cells with formulas)\n        cellLevels.forEach((level, address) => {\n            const cell = this.cellRegistry.get(address);\n            // Only include cells that have formulas\n            if (cell && cell.formula) {\n                if (!levels[level]) {\n                    levels[level] = [];\n                }\n                levels[level].push(cell);\n            }\n        });\n\n        return levels;\n    }\n\n    /**\n     * Flatten dependency graph into a flat array in topological order\n     * Returns cells in the order they should be calculated\n     * @returns Array of cells in topological order\n     */\n    flattenToTopology(): Cell[] {\n        const levels = this.topologicalSort();\n        const result: Cell[] = [];\n\n        // Flatten the 2D array of levels into a 1D array\n        for (const level of levels) {\n            if (level) { // Skip undefined levels\n                result.push(...level);\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Get the depth level of the tree\n     */\n    getDepth() : number {\n        return this._getDepth(this.depTree);\n    }\n\n    private _getDepth(tree : Record<string, Cell>) : number {\n        let max = 0;\n\n        for (const key in tree) {\n            const cell = tree[key];\n\n            if (cell.getDependents()) {\n                const depth = this._getDepth(cell.getDependents());\n\n                if (depth > max) {\n                    max = depth;\n                }\n            }\n        }\n\n        return max + 1;\n    }\n\n}","import { Cell } from \"../Cell\";\nimport { CellRegistry } from \"../Sheet/CellRegistry\";\nimport { EventDispatcher } from \"../Utility/EventDispatcher\";\nimport { DependencyTree } from \"./DependencyTree\";\nimport { Workbook } from \"../Workbook\";\n\nexport class DependencyBuilder {\n    private patterns : Record<string, RegExp> = {\n        remoteColumnRange   : /\\#?[A-Za-z0-9_]+\\s*!\\s*[A-Za-z]+\\s*:\\s*[A-Za-z]+/g,\n        remoteRowRange      : /\\#?[A-Za-z0-9_]+\\s*!\\s*[0-9]+\\s*:\\s*[0-9]+/g,\n        remoteCellRange     : /\\#?[A-Za-z0-9_]+\\s*!\\s*[A-Za-z]+[0-9]+\\s*:\\s*[A-Za-z]+[0-9]+/g,\n        remoteCell          : /\\#?[A-Za-z0-9_]+\\s*!\\s*[A-Za-z]+[0-9]+/g,\n        columnRange         : /[A-Za-z]+\\s*:\\s*[A-Za-z]+/g,\n        rowRange            : /[0-9]+\\s*:\\s*[0-9]+/g,\n        cellRange           : /[A-Za-z]+[0-9]+\\s*:\\s*[A-Za-z]+[0-9]+/g,\n        cell                : /[A-Z]+[0-9]+/g,\n        namedRange          : /[A-Za-z_][A-Za-z0-9_\\.]*/g\n    };\n\n    private workbook?: Workbook;\n\n    constructor() {\n\n    }\n\n    setWorkbook(workbook: Workbook) {\n        this.workbook = workbook;\n    }\n\n    build(cells : CellRegistry, sheet?: any) : DependencyTree {\n        // Build dependencies for each cell\n        cells.each((cell : Cell) => {\n            if (cell.formula) {\n                const { localDeps, remoteDeps } = this.getFormulaDependencies(cell.formula);\n\n                // Resolve local addresses to actual Cell objects\n                const dependencies: Record<string, Cell> = {};\n                for (const address in localDeps) {\n                    const precedentCell = cells.get(address);\n                    if (precedentCell) {\n                        dependencies[address] = precedentCell;\n                    }\n                }\n\n                // Set precedents for this cell\n                cell.setPrecedents(dependencies);\n\n                // Set this cell as dependent for each local precedent\n                for (const address in dependencies) {\n                    const precedentCell = dependencies[address];\n                    if (precedentCell) {\n                        precedentCell.addDependent(cell);\n                    }\n                }\n\n                // Handle remote (cross-sheet) dependencies\n                if (this.workbook) {\n                    for (const remoteRef in remoteDeps) {\n                        const { sheetName, cellAddress } = this.parseRemoteReference(remoteRef);\n                        try {\n                            const remoteSheet = this.workbook.getSheet(sheetName);\n                            if (remoteSheet) {\n                                const remoteCellObj = remoteSheet.getCellDirect(cellAddress);\n                                if (remoteCellObj) {\n                                    // Add this cell as a remote dependent of the precedent cell\n                                    remoteCellObj.addRemoteDependent(cell);\n                                }\n                            }\n                        } catch (e) {\n                            // Sheet might not exist yet\n                        }\n                    }\n                }\n            }\n        });\n\n        return new DependencyTree(cells, new EventDispatcher, this);\n    }\n\n    public parseRemoteReference(remoteRef: string): { sheetName: string, cellAddress: string } {\n        // Remove # prefix if present\n        const cleanRef = remoteRef.replace(/^#/, '').trim();\n        const parts = cleanRef.split('!');\n        return {\n            sheetName: parts[0].trim(),\n            cellAddress: parts[1].trim()\n        };\n    }\n\n    public getFormulaDependencies(formula : string) : { localDeps: Record<string, boolean>, remoteDeps: Record<string, boolean> } {\n        const localDeps: Record<string, boolean> = {};\n        const remoteDeps: Record<string, boolean> = {};\n\n        // Remove leading '=' if present\n        let cleanFormula = formula.startsWith('=') ? formula.substring(1) : formula;\n\n        // Process patterns in order, replacing matched portions to prevent overlapping matches\n        // Order matters: match more specific patterns first (e.g., ranges before individual cells)\n\n        // 1. Remote column ranges: #Sheet1!A:C\n        const remoteColumnMatches = cleanFormula.match(this.patterns.remoteColumnRange);\n        if (remoteColumnMatches) {\n            remoteColumnMatches.forEach(match => {\n                remoteDeps[match.trim()] = true;\n            });\n            cleanFormula = cleanFormula.replace(this.patterns.remoteColumnRange, '');\n        }\n\n        // 2. Remote row ranges: #Sheet1!1:3\n        const remoteRowMatches = cleanFormula.match(this.patterns.remoteRowRange);\n        if (remoteRowMatches) {\n            remoteRowMatches.forEach(match => {\n                remoteDeps[match.trim()] = true;\n            });\n            cleanFormula = cleanFormula.replace(this.patterns.remoteRowRange, '');\n        }\n\n        // 3. Remote cell ranges: #Sheet1!A1:B3\n        const remoteCellRangeMatches = cleanFormula.match(this.patterns.remoteCellRange);\n        if (remoteCellRangeMatches) {\n            remoteCellRangeMatches.forEach(match => {\n                const [sheetPart, rangePart] = match.split('!');\n                // Expand range into individual cells and add with sheet name\n                const addresses = this.expandCellRange(rangePart.trim());\n                addresses.forEach(addr => {\n                    remoteDeps[sheetPart + '!' + addr] = true;\n                });\n            });\n            cleanFormula = cleanFormula.replace(this.patterns.remoteCellRange, '');\n        }\n\n        // 4. Remote cells: #Sheet1!A1\n        const remoteCellMatches = cleanFormula.match(this.patterns.remoteCell);\n        if (remoteCellMatches) {\n            remoteCellMatches.forEach(match => {\n                remoteDeps[match.trim()] = true;\n            });\n            cleanFormula = cleanFormula.replace(this.patterns.remoteCell, '');\n        }\n\n        // 5. Cell ranges: A1:B3\n        const cellRangeMatches = cleanFormula.match(this.patterns.cellRange);\n        if (cellRangeMatches) {\n            cellRangeMatches.forEach(match => {\n                // Expand range into individual cells\n                const addresses = this.expandCellRange(match);\n                addresses.forEach(addr => {\n                    localDeps[addr] = true;\n                });\n            });\n            cleanFormula = cleanFormula.replace(this.patterns.cellRange, '');\n        }\n\n        // 6. Individual cells: A1, B2, etc.\n        const cellMatches = cleanFormula.match(this.patterns.cell);\n        if (cellMatches) {\n            cellMatches.forEach(match => {\n                // Filter out function names and keywords\n                if (!this.isFunctionOrKeyword(match)) {\n                    localDeps[match] = true;\n                }\n            });\n        }\n\n        // 7. Named ranges: Resolve named ranges to their underlying cell references\n        // After removing all other patterns, check remaining identifiers against named ranges\n        if (this.workbook) {\n            // Extract potential named range identifiers (words that aren't functions)\n            const identifierMatches = cleanFormula.match(/[A-Za-z_][A-Za-z0-9_\\.]*/g);\n            if (identifierMatches) {\n                identifierMatches.forEach(identifier => {\n                    // Skip if it's a function or keyword\n                    if (this.isFunctionOrKeyword(identifier)) {\n                        return;\n                    }\n\n                    // Check if it's a named range\n                    if (this.workbook!.nameManager.has(identifier)) {\n                        const reference = this.workbook!.nameManager.getReference(identifier);\n                        if (reference) {\n                            // Check if it's a remote reference (contains !)\n                            if (reference.includes('!')) {\n                                // It's a cross-sheet reference\n                                remoteDeps[reference] = true;\n                            } else {\n                                // Parse the reference to extract cell addresses\n                                if (reference.includes(':')) {\n                                    // It's a range\n                                    const addresses = this.expandCellRange(reference);\n                                    addresses.forEach(addr => {\n                                        localDeps[addr] = true;\n                                    });\n                                } else if (/^[A-Z]+[0-9]+$/.test(reference)) {\n                                    // It's a single cell\n                                    localDeps[reference] = true;\n                                }\n                            }\n                        }\n                    }\n                });\n            }\n        }\n\n        // Note: Column ranges (A:A) and row ranges (1:1) are dynamic dependencies\n        // and should be handled separately as they don't have fixed precedents\n\n        return { localDeps, remoteDeps };\n    }\n\n    private isFunctionOrKeyword(text: string): boolean {\n        const keywords = [\n            'SUM', 'AVERAGE', 'MAX', 'MIN', 'COUNT', 'IF', 'AND', 'OR',\n            'VLOOKUP', 'HLOOKUP', 'INDEX', 'MATCH', 'CONCATENATE',\n            'TRUE', 'FALSE', 'NULL'\n        ];\n        return keywords.includes(text.toUpperCase());\n    }\n\n    /**\n     * Extract cell addresses from a cell range (e.g., \"A1:B3\")\n     * Handles reverse ranges like \"B2:A1\" by normalizing them\n     */\n    private expandCellRange(range: string): string[] {\n        const [start, end] = range.split(':');\n        const addresses: string[] = [];\n\n        const startColMatch = start.match(/[A-Z]+/);\n        const startRowMatch = start.match(/\\d+/);\n        const endColMatch = end.match(/[A-Z]+/);\n        const endRowMatch = end.match(/\\d+/);\n\n        if (!startColMatch || !startRowMatch || !endColMatch || !endRowMatch) {\n            return [];\n        }\n\n        const startCol = startColMatch[0];\n        const startRow = parseInt(startRowMatch[0]);\n        const endCol = endColMatch[0];\n        const endRow = parseInt(endRowMatch[0]);\n\n        const colToNum = (col: string) => {\n            let num = 0;\n            for (let i = 0; i < col.length; i++) {\n                num = num * 26 + (col.charCodeAt(i) - 64);\n            }\n            return num;\n        };\n\n        const numToCol = (num: number) => {\n            let col = '';\n            while (num > 0) {\n                const remainder = (num - 1) % 26;\n                col = String.fromCharCode(65 + remainder) + col;\n                num = Math.floor((num - 1) / 26);\n            }\n            return col;\n        };\n\n        const startColNum = colToNum(startCol);\n        const endColNum = colToNum(endCol);\n\n        // Normalize range to handle reverse ranges (B2:A1 -> A1:B2)\n        const minRow = Math.min(startRow, endRow);\n        const maxRow = Math.max(startRow, endRow);\n        const minCol = Math.min(startColNum, endColNum);\n        const maxCol = Math.max(startColNum, endColNum);\n\n        for (let row = minRow; row <= maxRow; row++) {\n            for (let col = minCol; col <= maxCol; col++) {\n                addresses.push(numToCol(col) + row);\n            }\n        }\n\n        return addresses;\n    }\n}","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeProduction = exports.serializeGrammar = exports.Terminal = exports.Alternation = exports.RepetitionWithSeparator = exports.Repetition = exports.RepetitionMandatoryWithSeparator = exports.RepetitionMandatory = exports.Option = exports.Alternative = exports.Rule = exports.NonTerminal = exports.AbstractProduction = void 0;\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar isString_1 = __importDefault(require(\"lodash/isString\"));\nvar isRegExp_1 = __importDefault(require(\"lodash/isRegExp\"));\nvar pickBy_1 = __importDefault(require(\"lodash/pickBy\"));\nvar assign_1 = __importDefault(require(\"lodash/assign\"));\n// TODO: duplicated code to avoid extracting another sub-package -- how to avoid?\nfunction tokenLabel(tokType) {\n    if (hasTokenLabel(tokType)) {\n        return tokType.LABEL;\n    }\n    else {\n        return tokType.name;\n    }\n}\n// TODO: duplicated code to avoid extracting another sub-package -- how to avoid?\nfunction hasTokenLabel(obj) {\n    return (0, isString_1.default)(obj.LABEL) && obj.LABEL !== \"\";\n}\nvar AbstractProduction = /** @class */ (function () {\n    function AbstractProduction(_definition) {\n        this._definition = _definition;\n    }\n    Object.defineProperty(AbstractProduction.prototype, \"definition\", {\n        get: function () {\n            return this._definition;\n        },\n        set: function (value) {\n            this._definition = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AbstractProduction.prototype.accept = function (visitor) {\n        visitor.visit(this);\n        (0, forEach_1.default)(this.definition, function (prod) {\n            prod.accept(visitor);\n        });\n    };\n    return AbstractProduction;\n}());\nexports.AbstractProduction = AbstractProduction;\nvar NonTerminal = /** @class */ (function (_super) {\n    __extends(NonTerminal, _super);\n    function NonTerminal(options) {\n        var _this = _super.call(this, []) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    Object.defineProperty(NonTerminal.prototype, \"definition\", {\n        get: function () {\n            if (this.referencedRule !== undefined) {\n                return this.referencedRule.definition;\n            }\n            return [];\n        },\n        set: function (definition) {\n            // immutable\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NonTerminal.prototype.accept = function (visitor) {\n        visitor.visit(this);\n        // don't visit children of a reference, we will get cyclic infinite loops if we do so\n    };\n    return NonTerminal;\n}(AbstractProduction));\nexports.NonTerminal = NonTerminal;\nvar Rule = /** @class */ (function (_super) {\n    __extends(Rule, _super);\n    function Rule(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.orgText = \"\";\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Rule;\n}(AbstractProduction));\nexports.Rule = Rule;\nvar Alternative = /** @class */ (function (_super) {\n    __extends(Alternative, _super);\n    function Alternative(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.ignoreAmbiguities = false;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Alternative;\n}(AbstractProduction));\nexports.Alternative = Alternative;\nvar Option = /** @class */ (function (_super) {\n    __extends(Option, _super);\n    function Option(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Option;\n}(AbstractProduction));\nexports.Option = Option;\nvar RepetitionMandatory = /** @class */ (function (_super) {\n    __extends(RepetitionMandatory, _super);\n    function RepetitionMandatory(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionMandatory;\n}(AbstractProduction));\nexports.RepetitionMandatory = RepetitionMandatory;\nvar RepetitionMandatoryWithSeparator = /** @class */ (function (_super) {\n    __extends(RepetitionMandatoryWithSeparator, _super);\n    function RepetitionMandatoryWithSeparator(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionMandatoryWithSeparator;\n}(AbstractProduction));\nexports.RepetitionMandatoryWithSeparator = RepetitionMandatoryWithSeparator;\nvar Repetition = /** @class */ (function (_super) {\n    __extends(Repetition, _super);\n    function Repetition(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Repetition;\n}(AbstractProduction));\nexports.Repetition = Repetition;\nvar RepetitionWithSeparator = /** @class */ (function (_super) {\n    __extends(RepetitionWithSeparator, _super);\n    function RepetitionWithSeparator(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionWithSeparator;\n}(AbstractProduction));\nexports.RepetitionWithSeparator = RepetitionWithSeparator;\nvar Alternation = /** @class */ (function (_super) {\n    __extends(Alternation, _super);\n    function Alternation(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        _this.ignoreAmbiguities = false;\n        _this.hasPredicates = false;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    Object.defineProperty(Alternation.prototype, \"definition\", {\n        get: function () {\n            return this._definition;\n        },\n        set: function (value) {\n            this._definition = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Alternation;\n}(AbstractProduction));\nexports.Alternation = Alternation;\nvar Terminal = /** @class */ (function () {\n    function Terminal(options) {\n        this.idx = 1;\n        (0, assign_1.default)(this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n    }\n    Terminal.prototype.accept = function (visitor) {\n        visitor.visit(this);\n    };\n    return Terminal;\n}());\nexports.Terminal = Terminal;\nfunction serializeGrammar(topRules) {\n    return (0, map_1.default)(topRules, serializeProduction);\n}\nexports.serializeGrammar = serializeGrammar;\nfunction serializeProduction(node) {\n    function convertDefinition(definition) {\n        return (0, map_1.default)(definition, serializeProduction);\n    }\n    /* istanbul ignore else */\n    if (node instanceof NonTerminal) {\n        var serializedNonTerminal = {\n            type: \"NonTerminal\",\n            name: node.nonTerminalName,\n            idx: node.idx\n        };\n        if ((0, isString_1.default)(node.label)) {\n            serializedNonTerminal.label = node.label;\n        }\n        return serializedNonTerminal;\n    }\n    else if (node instanceof Alternative) {\n        return {\n            type: \"Alternative\",\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Option) {\n        return {\n            type: \"Option\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionMandatory) {\n        return {\n            type: \"RepetitionMandatory\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionMandatoryWithSeparator) {\n        return {\n            type: \"RepetitionMandatoryWithSeparator\",\n            idx: node.idx,\n            separator: (serializeProduction(new Terminal({ terminalType: node.separator }))),\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionWithSeparator) {\n        return {\n            type: \"RepetitionWithSeparator\",\n            idx: node.idx,\n            separator: (serializeProduction(new Terminal({ terminalType: node.separator }))),\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Repetition) {\n        return {\n            type: \"Repetition\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Alternation) {\n        return {\n            type: \"Alternation\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Terminal) {\n        var serializedTerminal = {\n            type: \"Terminal\",\n            name: node.terminalType.name,\n            label: tokenLabel(node.terminalType),\n            idx: node.idx\n        };\n        if ((0, isString_1.default)(node.label)) {\n            serializedTerminal.terminalLabel = node.label;\n        }\n        var pattern = node.terminalType.PATTERN;\n        if (node.terminalType.PATTERN) {\n            serializedTerminal.pattern = (0, isRegExp_1.default)(pattern)\n                ? pattern.source\n                : pattern;\n        }\n        return serializedTerminal;\n    }\n    else if (node instanceof Rule) {\n        return {\n            type: \"Rule\",\n            name: node.name,\n            orgText: node.orgText,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.serializeProduction = serializeProduction;\n//# sourceMappingURL=model.js.map","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.areTokenCategoriesNotUsed = exports.isStrictPrefixOfPath = exports.containsPath = exports.getLookaheadPathsForOptionalProd = exports.getLookaheadPathsForOr = exports.lookAheadSequenceFromAlternatives = exports.buildSingleAlternativeLookaheadFunction = exports.buildAlternativesLookAheadFunc = exports.buildLookaheadFuncForOptionalProd = exports.buildLookaheadFuncForOr = exports.getLookaheadPaths = exports.getProdType = exports.PROD_TYPE = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar every_1 = __importDefault(require(\"lodash/every\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar interpreter_1 = require(\"./interpreter\");\nvar rest_1 = require(\"./rest\");\nvar tokens_1 = require(\"../../scan/tokens\");\nvar gast_1 = require(\"@chevrotain/gast\");\nvar gast_2 = require(\"@chevrotain/gast\");\nvar PROD_TYPE;\n(function (PROD_TYPE) {\n    PROD_TYPE[PROD_TYPE[\"OPTION\"] = 0] = \"OPTION\";\n    PROD_TYPE[PROD_TYPE[\"REPETITION\"] = 1] = \"REPETITION\";\n    PROD_TYPE[PROD_TYPE[\"REPETITION_MANDATORY\"] = 2] = \"REPETITION_MANDATORY\";\n    PROD_TYPE[PROD_TYPE[\"REPETITION_MANDATORY_WITH_SEPARATOR\"] = 3] = \"REPETITION_MANDATORY_WITH_SEPARATOR\";\n    PROD_TYPE[PROD_TYPE[\"REPETITION_WITH_SEPARATOR\"] = 4] = \"REPETITION_WITH_SEPARATOR\";\n    PROD_TYPE[PROD_TYPE[\"ALTERNATION\"] = 5] = \"ALTERNATION\";\n})(PROD_TYPE = exports.PROD_TYPE || (exports.PROD_TYPE = {}));\nfunction getProdType(prod) {\n    /* istanbul ignore else */\n    if (prod instanceof gast_1.Option || prod === \"Option\") {\n        return PROD_TYPE.OPTION;\n    }\n    else if (prod instanceof gast_1.Repetition || prod === \"Repetition\") {\n        return PROD_TYPE.REPETITION;\n    }\n    else if (prod instanceof gast_1.RepetitionMandatory ||\n        prod === \"RepetitionMandatory\") {\n        return PROD_TYPE.REPETITION_MANDATORY;\n    }\n    else if (prod instanceof gast_1.RepetitionMandatoryWithSeparator ||\n        prod === \"RepetitionMandatoryWithSeparator\") {\n        return PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR;\n    }\n    else if (prod instanceof gast_1.RepetitionWithSeparator ||\n        prod === \"RepetitionWithSeparator\") {\n        return PROD_TYPE.REPETITION_WITH_SEPARATOR;\n    }\n    else if (prod instanceof gast_1.Alternation || prod === \"Alternation\") {\n        return PROD_TYPE.ALTERNATION;\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.getProdType = getProdType;\nfunction getLookaheadPaths(options) {\n    var occurrence = options.occurrence, rule = options.rule, prodType = options.prodType, maxLookahead = options.maxLookahead;\n    var type = getProdType(prodType);\n    if (type === PROD_TYPE.ALTERNATION) {\n        return getLookaheadPathsForOr(occurrence, rule, maxLookahead);\n    }\n    else {\n        return getLookaheadPathsForOptionalProd(occurrence, rule, type, maxLookahead);\n    }\n}\nexports.getLookaheadPaths = getLookaheadPaths;\nfunction buildLookaheadFuncForOr(occurrence, ruleGrammar, maxLookahead, hasPredicates, dynamicTokensEnabled, laFuncBuilder) {\n    var lookAheadPaths = getLookaheadPathsForOr(occurrence, ruleGrammar, maxLookahead);\n    var tokenMatcher = areTokenCategoriesNotUsed(lookAheadPaths)\n        ? tokens_1.tokenStructuredMatcherNoCategories\n        : tokens_1.tokenStructuredMatcher;\n    return laFuncBuilder(lookAheadPaths, hasPredicates, tokenMatcher, dynamicTokensEnabled);\n}\nexports.buildLookaheadFuncForOr = buildLookaheadFuncForOr;\n/**\n *  When dealing with an Optional production (OPTION/MANY/2nd iteration of AT_LEAST_ONE/...) we need to compare\n *  the lookahead \"inside\" the production and the lookahead immediately \"after\" it in the same top level rule (context free).\n *\n *  Example: given a production:\n *  ABC(DE)?DF\n *\n *  The optional '(DE)?' should only be entered if we see 'DE'. a single Token 'D' is not sufficient to distinguish between the two\n *  alternatives.\n *\n *  @returns A Lookahead function which will return true IFF the parser should parse the Optional production.\n */\nfunction buildLookaheadFuncForOptionalProd(occurrence, ruleGrammar, k, dynamicTokensEnabled, prodType, lookaheadBuilder) {\n    var lookAheadPaths = getLookaheadPathsForOptionalProd(occurrence, ruleGrammar, prodType, k);\n    var tokenMatcher = areTokenCategoriesNotUsed(lookAheadPaths)\n        ? tokens_1.tokenStructuredMatcherNoCategories\n        : tokens_1.tokenStructuredMatcher;\n    return lookaheadBuilder(lookAheadPaths[0], tokenMatcher, dynamicTokensEnabled);\n}\nexports.buildLookaheadFuncForOptionalProd = buildLookaheadFuncForOptionalProd;\nfunction buildAlternativesLookAheadFunc(alts, hasPredicates, tokenMatcher, dynamicTokensEnabled) {\n    var numOfAlts = alts.length;\n    var areAllOneTokenLookahead = (0, every_1.default)(alts, function (currAlt) {\n        return (0, every_1.default)(currAlt, function (currPath) {\n            return currPath.length === 1;\n        });\n    });\n    // This version takes into account the predicates as well.\n    if (hasPredicates) {\n        /**\n         * @returns {number} - The chosen alternative index\n         */\n        return function (orAlts) {\n            // unfortunately the predicates must be extracted every single time\n            // as they cannot be cached due to references to parameters(vars) which are no longer valid.\n            // note that in the common case of no predicates, no cpu time will be wasted on this (see else block)\n            var predicates = (0, map_1.default)(orAlts, function (currAlt) { return currAlt.GATE; });\n            for (var t = 0; t < numOfAlts; t++) {\n                var currAlt = alts[t];\n                var currNumOfPaths = currAlt.length;\n                var currPredicate = predicates[t];\n                if (currPredicate !== undefined && currPredicate.call(this) === false) {\n                    // if the predicate does not match there is no point in checking the paths\n                    continue;\n                }\n                nextPath: for (var j = 0; j < currNumOfPaths; j++) {\n                    var currPath = currAlt[j];\n                    var currPathLength = currPath.length;\n                    for (var i = 0; i < currPathLength; i++) {\n                        var nextToken = this.LA(i + 1);\n                        if (tokenMatcher(nextToken, currPath[i]) === false) {\n                            // mismatch in current path\n                            // try the next pth\n                            continue nextPath;\n                        }\n                    }\n                    // found a full path that matches.\n                    // this will also work for an empty ALT as the loop will be skipped\n                    return t;\n                }\n                // none of the paths for the current alternative matched\n                // try the next alternative\n            }\n            // none of the alternatives could be matched\n            return undefined;\n        };\n    }\n    else if (areAllOneTokenLookahead && !dynamicTokensEnabled) {\n        // optimized (common) case of all the lookaheads paths requiring only\n        // a single token lookahead. These Optimizations cannot work if dynamically defined Tokens are used.\n        var singleTokenAlts = (0, map_1.default)(alts, function (currAlt) {\n            return (0, flatten_1.default)(currAlt);\n        });\n        var choiceToAlt_1 = (0, reduce_1.default)(singleTokenAlts, function (result, currAlt, idx) {\n            (0, forEach_1.default)(currAlt, function (currTokType) {\n                if (!(0, has_1.default)(result, currTokType.tokenTypeIdx)) {\n                    result[currTokType.tokenTypeIdx] = idx;\n                }\n                (0, forEach_1.default)(currTokType.categoryMatches, function (currExtendingType) {\n                    if (!(0, has_1.default)(result, currExtendingType)) {\n                        result[currExtendingType] = idx;\n                    }\n                });\n            });\n            return result;\n        }, {});\n        /**\n         * @returns {number} - The chosen alternative index\n         */\n        return function () {\n            var nextToken = this.LA(1);\n            return choiceToAlt_1[nextToken.tokenTypeIdx];\n        };\n    }\n    else {\n        // optimized lookahead without needing to check the predicates at all.\n        // this causes code duplication which is intentional to improve performance.\n        /**\n         * @returns {number} - The chosen alternative index\n         */\n        return function () {\n            for (var t = 0; t < numOfAlts; t++) {\n                var currAlt = alts[t];\n                var currNumOfPaths = currAlt.length;\n                nextPath: for (var j = 0; j < currNumOfPaths; j++) {\n                    var currPath = currAlt[j];\n                    var currPathLength = currPath.length;\n                    for (var i = 0; i < currPathLength; i++) {\n                        var nextToken = this.LA(i + 1);\n                        if (tokenMatcher(nextToken, currPath[i]) === false) {\n                            // mismatch in current path\n                            // try the next pth\n                            continue nextPath;\n                        }\n                    }\n                    // found a full path that matches.\n                    // this will also work for an empty ALT as the loop will be skipped\n                    return t;\n                }\n                // none of the paths for the current alternative matched\n                // try the next alternative\n            }\n            // none of the alternatives could be matched\n            return undefined;\n        };\n    }\n}\nexports.buildAlternativesLookAheadFunc = buildAlternativesLookAheadFunc;\nfunction buildSingleAlternativeLookaheadFunction(alt, tokenMatcher, dynamicTokensEnabled) {\n    var areAllOneTokenLookahead = (0, every_1.default)(alt, function (currPath) {\n        return currPath.length === 1;\n    });\n    var numOfPaths = alt.length;\n    // optimized (common) case of all the lookaheads paths requiring only\n    // a single token lookahead.\n    if (areAllOneTokenLookahead && !dynamicTokensEnabled) {\n        var singleTokensTypes = (0, flatten_1.default)(alt);\n        if (singleTokensTypes.length === 1 &&\n            (0, isEmpty_1.default)(singleTokensTypes[0].categoryMatches)) {\n            var expectedTokenType = singleTokensTypes[0];\n            var expectedTokenUniqueKey_1 = expectedTokenType.tokenTypeIdx;\n            return function () {\n                return this.LA(1).tokenTypeIdx === expectedTokenUniqueKey_1;\n            };\n        }\n        else {\n            var choiceToAlt_2 = (0, reduce_1.default)(singleTokensTypes, function (result, currTokType, idx) {\n                result[currTokType.tokenTypeIdx] = true;\n                (0, forEach_1.default)(currTokType.categoryMatches, function (currExtendingType) {\n                    result[currExtendingType] = true;\n                });\n                return result;\n            }, []);\n            return function () {\n                var nextToken = this.LA(1);\n                return choiceToAlt_2[nextToken.tokenTypeIdx] === true;\n            };\n        }\n    }\n    else {\n        return function () {\n            nextPath: for (var j = 0; j < numOfPaths; j++) {\n                var currPath = alt[j];\n                var currPathLength = currPath.length;\n                for (var i = 0; i < currPathLength; i++) {\n                    var nextToken = this.LA(i + 1);\n                    if (tokenMatcher(nextToken, currPath[i]) === false) {\n                        // mismatch in current path\n                        // try the next pth\n                        continue nextPath;\n                    }\n                }\n                // found a full path that matches.\n                return true;\n            }\n            // none of the paths matched\n            return false;\n        };\n    }\n}\nexports.buildSingleAlternativeLookaheadFunction = buildSingleAlternativeLookaheadFunction;\nvar RestDefinitionFinderWalker = /** @class */ (function (_super) {\n    __extends(RestDefinitionFinderWalker, _super);\n    function RestDefinitionFinderWalker(topProd, targetOccurrence, targetProdType) {\n        var _this = _super.call(this) || this;\n        _this.topProd = topProd;\n        _this.targetOccurrence = targetOccurrence;\n        _this.targetProdType = targetProdType;\n        return _this;\n    }\n    RestDefinitionFinderWalker.prototype.startWalking = function () {\n        this.walk(this.topProd);\n        return this.restDef;\n    };\n    RestDefinitionFinderWalker.prototype.checkIsTarget = function (node, expectedProdType, currRest, prevRest) {\n        if (node.idx === this.targetOccurrence &&\n            this.targetProdType === expectedProdType) {\n            this.restDef = currRest.concat(prevRest);\n            return true;\n        }\n        // performance optimization, do not iterate over the entire Grammar ast after we have found the target\n        return false;\n    };\n    RestDefinitionFinderWalker.prototype.walkOption = function (optionProd, currRest, prevRest) {\n        if (!this.checkIsTarget(optionProd, PROD_TYPE.OPTION, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, optionProd, currRest, prevRest);\n        }\n    };\n    RestDefinitionFinderWalker.prototype.walkAtLeastOne = function (atLeastOneProd, currRest, prevRest) {\n        if (!this.checkIsTarget(atLeastOneProd, PROD_TYPE.REPETITION_MANDATORY, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, atLeastOneProd, currRest, prevRest);\n        }\n    };\n    RestDefinitionFinderWalker.prototype.walkAtLeastOneSep = function (atLeastOneSepProd, currRest, prevRest) {\n        if (!this.checkIsTarget(atLeastOneSepProd, PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, atLeastOneSepProd, currRest, prevRest);\n        }\n    };\n    RestDefinitionFinderWalker.prototype.walkMany = function (manyProd, currRest, prevRest) {\n        if (!this.checkIsTarget(manyProd, PROD_TYPE.REPETITION, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, manyProd, currRest, prevRest);\n        }\n    };\n    RestDefinitionFinderWalker.prototype.walkManySep = function (manySepProd, currRest, prevRest) {\n        if (!this.checkIsTarget(manySepProd, PROD_TYPE.REPETITION_WITH_SEPARATOR, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, manySepProd, currRest, prevRest);\n        }\n    };\n    return RestDefinitionFinderWalker;\n}(rest_1.RestWalker));\n/**\n * Returns the definition of a target production in a top level level rule.\n */\nvar InsideDefinitionFinderVisitor = /** @class */ (function (_super) {\n    __extends(InsideDefinitionFinderVisitor, _super);\n    function InsideDefinitionFinderVisitor(targetOccurrence, targetProdType, targetRef) {\n        var _this = _super.call(this) || this;\n        _this.targetOccurrence = targetOccurrence;\n        _this.targetProdType = targetProdType;\n        _this.targetRef = targetRef;\n        _this.result = [];\n        return _this;\n    }\n    InsideDefinitionFinderVisitor.prototype.checkIsTarget = function (node, expectedProdName) {\n        if (node.idx === this.targetOccurrence &&\n            this.targetProdType === expectedProdName &&\n            (this.targetRef === undefined || node === this.targetRef)) {\n            this.result = node.definition;\n        }\n    };\n    InsideDefinitionFinderVisitor.prototype.visitOption = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.OPTION);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitRepetition = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.REPETITION);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitRepetitionMandatory = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.REPETITION_MANDATORY);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitRepetitionMandatoryWithSeparator = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitRepetitionWithSeparator = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.REPETITION_WITH_SEPARATOR);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitAlternation = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.ALTERNATION);\n    };\n    return InsideDefinitionFinderVisitor;\n}(gast_2.GAstVisitor));\nfunction initializeArrayOfArrays(size) {\n    var result = new Array(size);\n    for (var i = 0; i < size; i++) {\n        result[i] = [];\n    }\n    return result;\n}\n/**\n * A sort of hash function between a Path in the grammar and a string.\n * Note that this returns multiple \"hashes\" to support the scenario of token categories.\n * -  A single path with categories may match multiple **actual** paths.\n */\nfunction pathToHashKeys(path) {\n    var keys = [\"\"];\n    for (var i = 0; i < path.length; i++) {\n        var tokType = path[i];\n        var longerKeys = [];\n        for (var j = 0; j < keys.length; j++) {\n            var currShorterKey = keys[j];\n            longerKeys.push(currShorterKey + \"_\" + tokType.tokenTypeIdx);\n            for (var t = 0; t < tokType.categoryMatches.length; t++) {\n                var categoriesKeySuffix = \"_\" + tokType.categoryMatches[t];\n                longerKeys.push(currShorterKey + categoriesKeySuffix);\n            }\n        }\n        keys = longerKeys;\n    }\n    return keys;\n}\n/**\n * Imperative style due to being called from a hot spot\n */\nfunction isUniquePrefixHash(altKnownPathsKeys, searchPathKeys, idx) {\n    for (var currAltIdx = 0; currAltIdx < altKnownPathsKeys.length; currAltIdx++) {\n        // We only want to test vs the other alternatives\n        if (currAltIdx === idx) {\n            continue;\n        }\n        var otherAltKnownPathsKeys = altKnownPathsKeys[currAltIdx];\n        for (var searchIdx = 0; searchIdx < searchPathKeys.length; searchIdx++) {\n            var searchKey = searchPathKeys[searchIdx];\n            if (otherAltKnownPathsKeys[searchKey] === true) {\n                return false;\n            }\n        }\n    }\n    // None of the SearchPathKeys were found in any of the other alternatives\n    return true;\n}\nfunction lookAheadSequenceFromAlternatives(altsDefs, k) {\n    var partialAlts = (0, map_1.default)(altsDefs, function (currAlt) {\n        return (0, interpreter_1.possiblePathsFrom)([currAlt], 1);\n    });\n    var finalResult = initializeArrayOfArrays(partialAlts.length);\n    var altsHashes = (0, map_1.default)(partialAlts, function (currAltPaths) {\n        var dict = {};\n        (0, forEach_1.default)(currAltPaths, function (item) {\n            var keys = pathToHashKeys(item.partialPath);\n            (0, forEach_1.default)(keys, function (currKey) {\n                dict[currKey] = true;\n            });\n        });\n        return dict;\n    });\n    var newData = partialAlts;\n    // maxLookahead loop\n    for (var pathLength = 1; pathLength <= k; pathLength++) {\n        var currDataset = newData;\n        newData = initializeArrayOfArrays(currDataset.length);\n        var _loop_1 = function (altIdx) {\n            var currAltPathsAndSuffixes = currDataset[altIdx];\n            // paths in current alternative loop\n            for (var currPathIdx = 0; currPathIdx < currAltPathsAndSuffixes.length; currPathIdx++) {\n                var currPathPrefix = currAltPathsAndSuffixes[currPathIdx].partialPath;\n                var suffixDef = currAltPathsAndSuffixes[currPathIdx].suffixDef;\n                var prefixKeys = pathToHashKeys(currPathPrefix);\n                var isUnique = isUniquePrefixHash(altsHashes, prefixKeys, altIdx);\n                // End of the line for this path.\n                if (isUnique || (0, isEmpty_1.default)(suffixDef) || currPathPrefix.length === k) {\n                    var currAltResult = finalResult[altIdx];\n                    // TODO: Can we implement a containsPath using Maps/Dictionaries?\n                    if (containsPath(currAltResult, currPathPrefix) === false) {\n                        currAltResult.push(currPathPrefix);\n                        // Update all new  keys for the current path.\n                        for (var j = 0; j < prefixKeys.length; j++) {\n                            var currKey = prefixKeys[j];\n                            altsHashes[altIdx][currKey] = true;\n                        }\n                    }\n                }\n                // Expand longer paths\n                else {\n                    var newPartialPathsAndSuffixes = (0, interpreter_1.possiblePathsFrom)(suffixDef, pathLength + 1, currPathPrefix);\n                    newData[altIdx] = newData[altIdx].concat(newPartialPathsAndSuffixes);\n                    // Update keys for new known paths\n                    (0, forEach_1.default)(newPartialPathsAndSuffixes, function (item) {\n                        var prefixKeys = pathToHashKeys(item.partialPath);\n                        (0, forEach_1.default)(prefixKeys, function (key) {\n                            altsHashes[altIdx][key] = true;\n                        });\n                    });\n                }\n            }\n        };\n        // alternatives loop\n        for (var altIdx = 0; altIdx < currDataset.length; altIdx++) {\n            _loop_1(altIdx);\n        }\n    }\n    return finalResult;\n}\nexports.lookAheadSequenceFromAlternatives = lookAheadSequenceFromAlternatives;\nfunction getLookaheadPathsForOr(occurrence, ruleGrammar, k, orProd) {\n    var visitor = new InsideDefinitionFinderVisitor(occurrence, PROD_TYPE.ALTERNATION, orProd);\n    ruleGrammar.accept(visitor);\n    return lookAheadSequenceFromAlternatives(visitor.result, k);\n}\nexports.getLookaheadPathsForOr = getLookaheadPathsForOr;\nfunction getLookaheadPathsForOptionalProd(occurrence, ruleGrammar, prodType, k) {\n    var insideDefVisitor = new InsideDefinitionFinderVisitor(occurrence, prodType);\n    ruleGrammar.accept(insideDefVisitor);\n    var insideDef = insideDefVisitor.result;\n    var afterDefWalker = new RestDefinitionFinderWalker(ruleGrammar, occurrence, prodType);\n    var afterDef = afterDefWalker.startWalking();\n    var insideFlat = new gast_1.Alternative({ definition: insideDef });\n    var afterFlat = new gast_1.Alternative({ definition: afterDef });\n    return lookAheadSequenceFromAlternatives([insideFlat, afterFlat], k);\n}\nexports.getLookaheadPathsForOptionalProd = getLookaheadPathsForOptionalProd;\nfunction containsPath(alternative, searchPath) {\n    compareOtherPath: for (var i = 0; i < alternative.length; i++) {\n        var otherPath = alternative[i];\n        if (otherPath.length !== searchPath.length) {\n            continue;\n        }\n        for (var j = 0; j < otherPath.length; j++) {\n            var searchTok = searchPath[j];\n            var otherTok = otherPath[j];\n            var matchingTokens = searchTok === otherTok ||\n                otherTok.categoryMatchesMap[searchTok.tokenTypeIdx] !== undefined;\n            if (matchingTokens === false) {\n                continue compareOtherPath;\n            }\n        }\n        return true;\n    }\n    return false;\n}\nexports.containsPath = containsPath;\nfunction isStrictPrefixOfPath(prefix, other) {\n    return (prefix.length < other.length &&\n        (0, every_1.default)(prefix, function (tokType, idx) {\n            var otherTokType = other[idx];\n            return (tokType === otherTokType ||\n                otherTokType.categoryMatchesMap[tokType.tokenTypeIdx]);\n        }));\n}\nexports.isStrictPrefixOfPath = isStrictPrefixOfPath;\nfunction areTokenCategoriesNotUsed(lookAheadPaths) {\n    return (0, every_1.default)(lookAheadPaths, function (singleAltPaths) {\n        return (0, every_1.default)(singleAltPaths, function (singlePath) {\n            return (0, every_1.default)(singlePath, function (token) { return (0, isEmpty_1.default)(token.categoryMatches); });\n        });\n    });\n}\nexports.areTokenCategoriesNotUsed = areTokenCategoriesNotUsed;\n//# sourceMappingURL=lookahead.js.map","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toFastProperties = exports.timer = exports.PRINT_ERROR = exports.PRINT_WARNING = void 0;\nvar print_1 = require(\"./print\");\nObject.defineProperty(exports, \"PRINT_WARNING\", { enumerable: true, get: function () { return print_1.PRINT_WARNING; } });\nObject.defineProperty(exports, \"PRINT_ERROR\", { enumerable: true, get: function () { return print_1.PRINT_ERROR; } });\nvar timer_1 = require(\"./timer\");\nObject.defineProperty(exports, \"timer\", { enumerable: true, get: function () { return timer_1.timer; } });\nvar to_fast_properties_1 = require(\"./to-fast-properties\");\nObject.defineProperty(exports, \"toFastProperties\", { enumerable: true, get: function () { return to_fast_properties_1.toFastProperties; } });\n//# sourceMappingURL=api.js.map","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tokenMatcher = exports.createTokenInstance = exports.EOF = exports.createToken = exports.hasTokenLabel = exports.tokenName = exports.tokenLabel = void 0;\nvar isString_1 = __importDefault(require(\"lodash/isString\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar lexer_public_1 = require(\"./lexer_public\");\nvar tokens_1 = require(\"./tokens\");\nfunction tokenLabel(tokType) {\n    if (hasTokenLabel(tokType)) {\n        return tokType.LABEL;\n    }\n    else {\n        return tokType.name;\n    }\n}\nexports.tokenLabel = tokenLabel;\nfunction tokenName(tokType) {\n    return tokType.name;\n}\nexports.tokenName = tokenName;\nfunction hasTokenLabel(obj) {\n    return (0, isString_1.default)(obj.LABEL) && obj.LABEL !== \"\";\n}\nexports.hasTokenLabel = hasTokenLabel;\nvar PARENT = \"parent\";\nvar CATEGORIES = \"categories\";\nvar LABEL = \"label\";\nvar GROUP = \"group\";\nvar PUSH_MODE = \"push_mode\";\nvar POP_MODE = \"pop_mode\";\nvar LONGER_ALT = \"longer_alt\";\nvar LINE_BREAKS = \"line_breaks\";\nvar START_CHARS_HINT = \"start_chars_hint\";\nfunction createToken(config) {\n    return createTokenInternal(config);\n}\nexports.createToken = createToken;\nfunction createTokenInternal(config) {\n    var pattern = config.pattern;\n    var tokenType = {};\n    tokenType.name = config.name;\n    if (!(0, isUndefined_1.default)(pattern)) {\n        tokenType.PATTERN = pattern;\n    }\n    if ((0, has_1.default)(config, PARENT)) {\n        throw (\"The parent property is no longer supported.\\n\" +\n            \"See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.\");\n    }\n    if ((0, has_1.default)(config, CATEGORIES)) {\n        // casting to ANY as this will be fixed inside `augmentTokenTypes``\n        tokenType.CATEGORIES = config[CATEGORIES];\n    }\n    (0, tokens_1.augmentTokenTypes)([tokenType]);\n    if ((0, has_1.default)(config, LABEL)) {\n        tokenType.LABEL = config[LABEL];\n    }\n    if ((0, has_1.default)(config, GROUP)) {\n        tokenType.GROUP = config[GROUP];\n    }\n    if ((0, has_1.default)(config, POP_MODE)) {\n        tokenType.POP_MODE = config[POP_MODE];\n    }\n    if ((0, has_1.default)(config, PUSH_MODE)) {\n        tokenType.PUSH_MODE = config[PUSH_MODE];\n    }\n    if ((0, has_1.default)(config, LONGER_ALT)) {\n        tokenType.LONGER_ALT = config[LONGER_ALT];\n    }\n    if ((0, has_1.default)(config, LINE_BREAKS)) {\n        tokenType.LINE_BREAKS = config[LINE_BREAKS];\n    }\n    if ((0, has_1.default)(config, START_CHARS_HINT)) {\n        tokenType.START_CHARS_HINT = config[START_CHARS_HINT];\n    }\n    return tokenType;\n}\nexports.EOF = createToken({ name: \"EOF\", pattern: lexer_public_1.Lexer.NA });\n(0, tokens_1.augmentTokenTypes)([exports.EOF]);\nfunction createTokenInstance(tokType, image, startOffset, endOffset, startLine, endLine, startColumn, endColumn) {\n    return {\n        image: image,\n        startOffset: startOffset,\n        endOffset: endOffset,\n        startLine: startLine,\n        endLine: endLine,\n        startColumn: startColumn,\n        endColumn: endColumn,\n        tokenTypeIdx: tokType.tokenTypeIdx,\n        tokenType: tokType\n    };\n}\nexports.createTokenInstance = createTokenInstance;\nfunction tokenMatcher(token, tokType) {\n    return (0, tokens_1.tokenStructuredMatcher)(token, tokType);\n}\nexports.tokenMatcher = tokenMatcher;\n//# sourceMappingURL=tokens_public.js.map","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","var baseIsRegExp = require('./_baseIsRegExp'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsRegExp = nodeUtil && nodeUtil.isRegExp;\n\n/**\n * Checks if `value` is classified as a `RegExp` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n * @example\n *\n * _.isRegExp(/abc/);\n * // => true\n *\n * _.isRegExp('/abc/');\n * // => false\n */\nvar isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\nmodule.exports = isRegExp;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateMissingCstMethods = exports.validateVisitor = exports.CstVisitorDefinitionError = exports.createBaseVisitorConstructorWithDefaults = exports.createBaseSemanticVisitorConstructor = exports.defaultVisit = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar compact_1 = __importDefault(require(\"lodash/compact\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar filter_1 = __importDefault(require(\"lodash/filter\"));\nvar keys_1 = __importDefault(require(\"lodash/keys\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar lang_extensions_1 = require(\"../../lang/lang_extensions\");\nfunction defaultVisit(ctx, param) {\n    var childrenNames = (0, keys_1.default)(ctx);\n    var childrenNamesLength = childrenNames.length;\n    for (var i = 0; i < childrenNamesLength; i++) {\n        var currChildName = childrenNames[i];\n        var currChildArray = ctx[currChildName];\n        var currChildArrayLength = currChildArray.length;\n        for (var j = 0; j < currChildArrayLength; j++) {\n            var currChild = currChildArray[j];\n            // distinction between Tokens Children and CstNode children\n            if (currChild.tokenTypeIdx === undefined) {\n                this[currChild.name](currChild.children, param);\n            }\n        }\n    }\n    // defaultVisit does not support generic out param\n}\nexports.defaultVisit = defaultVisit;\nfunction createBaseSemanticVisitorConstructor(grammarName, ruleNames) {\n    var derivedConstructor = function () { };\n    // can be overwritten according to:\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/\n    // name?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fname\n    (0, lang_extensions_1.defineNameProp)(derivedConstructor, grammarName + \"BaseSemantics\");\n    var semanticProto = {\n        visit: function (cstNode, param) {\n            // enables writing more concise visitor methods when CstNode has only a single child\n            if ((0, isArray_1.default)(cstNode)) {\n                // A CST Node's children dictionary can never have empty arrays as values\n                // If a key is defined there will be at least one element in the corresponding value array.\n                cstNode = cstNode[0];\n            }\n            // enables passing optional CstNodes concisely.\n            if ((0, isUndefined_1.default)(cstNode)) {\n                return undefined;\n            }\n            return this[cstNode.name](cstNode.children, param);\n        },\n        validateVisitor: function () {\n            var semanticDefinitionErrors = validateVisitor(this, ruleNames);\n            if (!(0, isEmpty_1.default)(semanticDefinitionErrors)) {\n                var errorMessages = (0, map_1.default)(semanticDefinitionErrors, function (currDefError) { return currDefError.msg; });\n                throw Error(\"Errors Detected in CST Visitor <\".concat(this.constructor.name, \">:\\n\\t\") +\n                    \"\".concat(errorMessages.join(\"\\n\\n\").replace(/\\n/g, \"\\n\\t\")));\n            }\n        }\n    };\n    derivedConstructor.prototype = semanticProto;\n    derivedConstructor.prototype.constructor = derivedConstructor;\n    derivedConstructor._RULE_NAMES = ruleNames;\n    return derivedConstructor;\n}\nexports.createBaseSemanticVisitorConstructor = createBaseSemanticVisitorConstructor;\nfunction createBaseVisitorConstructorWithDefaults(grammarName, ruleNames, baseConstructor) {\n    var derivedConstructor = function () { };\n    // can be overwritten according to:\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/\n    // name?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fname\n    (0, lang_extensions_1.defineNameProp)(derivedConstructor, grammarName + \"BaseSemanticsWithDefaults\");\n    var withDefaultsProto = Object.create(baseConstructor.prototype);\n    (0, forEach_1.default)(ruleNames, function (ruleName) {\n        withDefaultsProto[ruleName] = defaultVisit;\n    });\n    derivedConstructor.prototype = withDefaultsProto;\n    derivedConstructor.prototype.constructor = derivedConstructor;\n    return derivedConstructor;\n}\nexports.createBaseVisitorConstructorWithDefaults = createBaseVisitorConstructorWithDefaults;\nvar CstVisitorDefinitionError;\n(function (CstVisitorDefinitionError) {\n    CstVisitorDefinitionError[CstVisitorDefinitionError[\"REDUNDANT_METHOD\"] = 0] = \"REDUNDANT_METHOD\";\n    CstVisitorDefinitionError[CstVisitorDefinitionError[\"MISSING_METHOD\"] = 1] = \"MISSING_METHOD\";\n})(CstVisitorDefinitionError = exports.CstVisitorDefinitionError || (exports.CstVisitorDefinitionError = {}));\nfunction validateVisitor(visitorInstance, ruleNames) {\n    var missingErrors = validateMissingCstMethods(visitorInstance, ruleNames);\n    return missingErrors;\n}\nexports.validateVisitor = validateVisitor;\nfunction validateMissingCstMethods(visitorInstance, ruleNames) {\n    var missingRuleNames = (0, filter_1.default)(ruleNames, function (currRuleName) {\n        return (0, isFunction_1.default)(visitorInstance[currRuleName]) === false;\n    });\n    var errors = (0, map_1.default)(missingRuleNames, function (currRuleName) {\n        return {\n            msg: \"Missing visitor method: <\".concat(currRuleName, \"> on \").concat((visitorInstance.constructor.name), \" CST Visitor.\"),\n            type: CstVisitorDefinitionError.MISSING_METHOD,\n            methodName: currRuleName\n        };\n    });\n    return (0, compact_1.default)(errors);\n}\nexports.validateMissingCstMethods = validateMissingCstMethods;\n//# sourceMappingURL=cst_visitor.js.map","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","var arrayEvery = require('./_arrayEvery'),\n    baseEvery = require('./_baseEvery'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Checks if `predicate` returns truthy for **all** elements of `collection`.\n * Iteration is stopped once `predicate` returns falsey. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * **Note:** This method returns `true` for\n * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n * elements of empty collections.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n * @example\n *\n * _.every([true, 1, null, 'yes'], Boolean);\n * // => false\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.every(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.every(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.every(users, 'active');\n * // => false\n */\nfunction every(collection, predicate, guard) {\n  var func = isArray(collection) ? arrayEvery : baseEvery;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = every;\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var baseIndexOf = require('./_baseIndexOf'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    toInteger = require('./toInteger'),\n    values = require('./values');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\nmodule.exports = includes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateGrammar = exports.resolveGrammar = void 0;\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar defaults_1 = __importDefault(require(\"lodash/defaults\"));\nvar resolver_1 = require(\"../resolver\");\nvar checks_1 = require(\"../checks\");\nvar errors_public_1 = require(\"../../errors_public\");\nfunction resolveGrammar(options) {\n    var actualOptions = (0, defaults_1.default)(options, {\n        errMsgProvider: errors_public_1.defaultGrammarResolverErrorProvider\n    });\n    var topRulesTable = {};\n    (0, forEach_1.default)(options.rules, function (rule) {\n        topRulesTable[rule.name] = rule;\n    });\n    return (0, resolver_1.resolveGrammar)(topRulesTable, actualOptions.errMsgProvider);\n}\nexports.resolveGrammar = resolveGrammar;\nfunction validateGrammar(options) {\n    options = (0, defaults_1.default)(options, {\n        errMsgProvider: errors_public_1.defaultGrammarValidatorErrorProvider\n    });\n    return (0, checks_1.validateGrammar)(options.rules, options.tokenTypes, options.errMsgProvider, options.grammarName);\n}\nexports.validateGrammar = validateGrammar;\n//# sourceMappingURL=gast_resolver_public.js.map","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3475);\n"],"names":["baseGetAllKeys","getSymbols","keys","module","exports","object","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","index","length","this","clear","entry","set","prototype","get","has","assocIndexOf","splice","Array","key","data","__data__","pop","call","size","MapCache","memoize","func","resolver","TypeError","memoized","args","arguments","apply","cache","result","Cache","extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","String","__","constructor","create","__importDefault","mod","__esModule","defineProperty","value","EarlyExitException","NotAllInputParsedException","NoViableAltException","MismatchedTokenException","isRecognitionException","includes_1","MISMATCHED_TOKEN_EXCEPTION","NO_VIABLE_ALT_EXCEPTION","EARLY_EXIT_EXCEPTION","NOT_ALL_INPUT_PARSED_EXCEPTION","RECOGNITION_EXCEPTION_NAMES","freeze","error","default","name","RecognitionException","_super","message","token","_newTarget","_this","resyncedTokens","Error","captureStackTrace","previousToken","Lexer","LexerDefinitionErrorType","lexer_1","noop_1","isEmpty_1","isArray_1","last_1","reject_1","map_1","forEach_1","keys_1","isUndefined_1","identity_1","assign_1","reduce_1","clone_1","utils_1","tokens_1","lexer_errors_public_1","reg_exp_parser_1","DEFAULT_LEXER_CONFIG","deferDefinitionErrorsHandling","positionTracking","lineTerminatorsPattern","lineTerminatorCharacters","ensureOptimizations","safeMode","errorMessageProvider","defaultLexerErrorProvider","traceInitPerf","skipValidations","recoveryEnabled","lexerDefinition","config","lexerDefinitionErrors","lexerDefinitionWarning","patternIdxToConfig","charCodeToPatternIdxToConfig","modes","emptyGroups","trackStartLines","trackEndLines","hasCustom","canModeBeOptimized","TRACE_INIT","phaseDesc","phaseImpl","traceInitIndent","indent","join","traceInitMaxIdent","console","log","concat","_a","timer","time","traceMethod","warn","traceInitVal","Infinity","actualDefinition","hasOnlySingleMode","LineTerminatorOptimizedTester","test","defaultMode","DEFAULT_MODE","performRuntimeChecks","performWarningRuntimeChecks","currModeValue","currModeName","currTokType","allModeNames","currModDef","currModName","currAnalyzeResult_1","push","validatePatterns","augmentTokenTypes","analyzeTokenTypes","tracer","canBeOptimized","allErrMessagesString","warningDescriptor","PRINT_WARNING","SUPPORT_STICKY","chopInput","match","matchWithTest","updateLastIndex","matchWithExec","handleModes","computeNewColumn","updateTokenEndLineColumnLocation","createTokenInstance","createFullToken","createStartOnlyToken","createOffsetOnlyToken","addToken","addTokenUsingPush","handlePayload","handlePayloadWithCustom","addTokenUsingMemberAccess","handlePayloadNoCustom","unOptimizedModes","cannotBeOptimized","modeName","clearRegExpParserCache","toFastProperties","tokenize","text","initialMode","tokenizeInternal","i","j","k","matchAltImage","longerAlt","matchedImage","payload","altPayload","imageLength","group","tokType","newToken","errLength","msg","getPossiblePatterns","orgText","orgLength","offset","matchedTokensIndex","guessedNumberOfTokens","Math","floor","matchedTokens","errors","line","undefined","column","groups","cloneEmptyGroups","trackLines","lineTerminatorPattern","currModePatternsLength","currCharCodeToPatternIdxToConfig","modeStack","emptyArray","getPossiblePatternsSlow","getPossiblePatternsOptimized","charCode","optimizedCharIdx","charCodeToOptimizedIndex","possiblePatterns","currConfig","pop_mode","popToken","tokenType","PUSH_MODE","msg_1","buildUnableToPopLexerModeMessage","startOffset","startLine","startColumn","image","newMode","modeCanBeOptimized","push_mode","nextCharCode","charCodeAt","chosenPatternIdxToConfig","chosenPatternsLength","currPattern","pattern","singleCharCode","short","isCustom","exec","longerAltLength","longerAltConfig","longerAltPattern","tokenTypeIdx","canLineTerminator","numOfLTsInMatch","foundTerminator","lastLTEndOffset","lastIndex","errorStartOffset","errorLine","errorColumn","foundResyncPoint","currConfig_1","buildUnexpectedCharactersMessage","tokens","pushMode","substring","regExp","newLastIndex","lastLTIdx","lastCharIsLT","fixForEndingInLT","endLine","endColumn","oldColumn","endOffset","tokenVector","tokenToAdd","regExpArray","SKIPPED","NA","baseIsEqualDeep","isObjectLike","baseIsEqual","other","bitmask","customizer","stack","getMapData","map","forEach","reIsUint","type","getRegExpAst","regexp_to_ast_1","regExpAstCache","regExpParser","RegExpParser","regExpStr","toString","regExpAst","fullText","charAt","__assign","assign","t","s","n","checkPrefixAlternativesAmbiguities","validateSomeNonEmptyLookaheadPath","validateTooManyAlts","RepetitionCollector","validateAmbiguousAlternationAlternatives","validateEmptyOrAlternative","getFirstNoneTerminal","validateNoLeftRecursion","validateRuleIsOverridden","validateRuleDoesNotAlreadyExist","OccurrenceValidationCollector","identifyProductionForDuplicates","validateGrammar","validateLookahead","first_1","drop_1","flatten_1","filter_1","difference_1","groupBy_1","pickBy_1","values_1","flatMap_1","parser_1","gast_1","lookahead_1","interpreter_1","gast_2","gast_3","dropRight_1","compact_1","prod","getProductionDslName","idx","getExtraProductionArgument","Terminal","terminalType","NonTerminal","nonTerminalName","options","lookaheadValidationErrorMessages","lookaheadStrategy","validate","rules","tokenTypes","grammarName","errorMessage","ParserDefinitionErrorType","CUSTOM_LOOKAHEAD_VALIDATION","topLevels","errMsgProvider","duplicateErrors","currTopLevel","topLevelRule","collectorVisitor","accept","allRuleProductions","allProductions","productionGroups","duplicates","currGroup","currDuplicates","firstProd","buildDuplicateFoundError","dslName","defError","DUPLICATE_PRODUCTIONS","ruleName","occurrence","param","parameter","validateDuplicateProductions","termsNamespaceConflictErrors","tokenNames","currToken","currRule","currRuleName","errMsg","buildNamespaceConflictError","CONFLICT_TOKENS_RULES_NAMESPACE","checkTerminalAndNoneTerminalsNameSpace","tooManyAltsErrors","curRule","duplicateRulesError","visitNonTerminal","subrule","visitOption","option","visitRepetitionWithSeparator","manySep","visitRepetitionMandatory","atLeastOne","visitRepetitionMandatoryWithSeparator","atLeastOneSep","visitRepetition","many","visitAlternation","or","visitTerminal","terminal","GAstVisitor","rule","allRules","className","buildDuplicateRuleNameError","DUPLICATE_RULE_NAME","definition","referencedRule","Alternative","Option","RepetitionMandatory","RepetitionMandatoryWithSeparator","RepetitionWithSeparator","Repetition","Alternation","currSubDef","isFirstOptional","isOptionalProd","hasMore","rest","definedRulesNames","INVALID_RULE_OVERRIDE","topRule","path","nextNonTerminals","buildLeftRecursionError","leftRecursionPath","LEFT_RECURSION","validNextSteps","errorsFromNextSteps","currRefRule","newPath","OrCollector","alternations","node","orCollector","ors","currOr","exceptLast","currAlternative","currAltIdx","possibleFirstInAlt","nextPossibleTokensAfter","tokenStructuredMatcher","buildEmptyAlternationError","alternation","emptyChoiceIdx","NONE_LAST_EMPTY_ALT","alternative","globalMaxLookahead","ignoreAmbiguities","currOccurrence","actualMaxLookahead","maxLookahead","alternatives","getLookaheadPathsForOr","altsAmbiguityErrors","foundAmbiguousPaths","identicalAmbiguities","currAlt","currPath","altsCurrPathAppearsIn","currOtherAlt","currOtherAltIdx","containsPath","alts","currAmbDescriptor","ambgIndices","buildAlternationAmbiguityError","ambiguityIndices","prefixPath","AMBIGUOUS_ALTS","checkAlternativesAmbiguities","altsPrefixAmbiguityErrors","buildTooManyAlternativesError","TOO_MANY_ALTS","pathsAndIndices","currPathsAndIdx","currPathAndIdx","targetIdx","targetPath","prefixAmbiguitiesPathsAndIndices","searchPathAndIdx","isStrictPrefixOfPath","currAmbPathAndIdx","buildAlternationPrefixAmbiguityError","AMBIGUOUS_PREFIX_ALTS","topLevelRules","currTopRule","currProd","prodType","getProdType","pathsInsideProduction","getLookaheadPathsForOptionalProd","buildEmptyRepetitionError","repetition","NO_NON_EMPTY_LOOKAHEAD","arrayMap","props","baseProperty","basePropertyDeep","isKey","toKey","ContentAssist","initContentAssist","computeContentAssist","startRuleName","precedingInput","startRuleGast","gastProductionsCache","tokenMatcher","getNextPossibleTokenTypes","grammarPath","topRuleName","ruleStack","topProduction","getGAstProductions","NextAfterTokenWalker","startWalking","baseHasIn","hasPath","baseFor","iteratee","Symbol","objectProto","nativeObjectToString","symToStringTag","toStringTag","isOwn","tag","unmasked","e","getAllKeys","equalFunc","isPartial","objProps","objLength","objStacked","othStacked","skipCtor","objValue","othValue","compared","objCtor","othCtor","baseTimes","isArguments","isArray","isBuffer","isIndex","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","isObject","isStrictComparable","arrayReduce","baseEach","baseIteratee","baseReduce","collection","accumulator","initAccum","defaultGrammarValidatorErrorProvider","defaultGrammarResolverErrorProvider","defaultParserErrorProvider","tokens_public_1","buildMismatchTokenMessage","expected","actual","expectedMsg","previous","hasTokenLabel","tokenLabel","buildNotAllInputParsedMessage","firstRedundant","buildNoViableAltMessage","expectedPathsPerAlt","customUserDescription","errPrefix","errSuffix","allLookAheadPaths","currAltPaths","nextValidTokenSequences","currTokenType","nextValidSequenceItems","itemMsg","buildEarlyExitMessage","expectedIterationPaths","buildRuleNotFoundError","undefinedRule","duplicateProds","topLevelName","duplicateProd","extraArgument","hasExplicitIndex","replace","pathMsg","currTok","currtok","currMessage","buildTokenNameError","pathNames","leftRecursivePath","buildInvalidRuleNameError","Rule","array","baseForOwn","createBaseEach","predicate","LexerAdapter","initLexerAdapter","tokVector","tokVectorLength","currIdx","newInput","selfAnalysisDone","reset","enumerable","configurable","SKIP_TOKEN","consumeToken","LA","END_OF_FILE","howMuch","soughtIdx","exportLexerState","importLexerState","newState","resetLexerState","moveToTerminatedState","getLexerPosition","Map","pairs","LARGE_ARRAY_SIZE","baseRest","isIterateeCall","assigner","sources","guard","source","thisArg","nativeCreate","getNative","string","split","basePickBy","getAllKeysIn","prop","RecognizerApi","exceptions_public_1","errors_public_1","checks_1","ACTION","impl","consume","consumeInternal","ruleToCall","subruleInternal","actionORMethodDef","optionInternal","altsOrOpts","orInternal","manyInternal","atLeastOneInternal","CONSUME","CONSUME1","CONSUME2","CONSUME3","CONSUME4","CONSUME5","CONSUME6","CONSUME7","CONSUME8","CONSUME9","SUBRULE","SUBRULE1","SUBRULE2","SUBRULE3","SUBRULE4","SUBRULE5","SUBRULE6","SUBRULE7","SUBRULE8","SUBRULE9","OPTION","OPTION1","OPTION2","OPTION3","OPTION4","OPTION5","OPTION6","OPTION7","OPTION8","OPTION9","OR","OR1","OR2","OR3","OR4","OR5","OR6","OR7","OR8","OR9","MANY","MANY1","MANY2","MANY3","MANY4","MANY5","MANY6","MANY7","MANY8","MANY9","MANY_SEP","manySepFirstInternal","MANY_SEP1","MANY_SEP2","MANY_SEP3","MANY_SEP4","MANY_SEP5","MANY_SEP6","MANY_SEP7","MANY_SEP8","MANY_SEP9","AT_LEAST_ONE","AT_LEAST_ONE1","AT_LEAST_ONE2","AT_LEAST_ONE3","AT_LEAST_ONE4","AT_LEAST_ONE5","AT_LEAST_ONE6","AT_LEAST_ONE7","AT_LEAST_ONE8","AT_LEAST_ONE9","AT_LEAST_ONE_SEP","atLeastOneSepFirstInternal","AT_LEAST_ONE_SEP1","AT_LEAST_ONE_SEP2","AT_LEAST_ONE_SEP3","AT_LEAST_ONE_SEP4","AT_LEAST_ONE_SEP5","AT_LEAST_ONE_SEP6","AT_LEAST_ONE_SEP7","AT_LEAST_ONE_SEP8","AT_LEAST_ONE_SEP9","RULE","implementation","DEFAULT_RULE_CONFIG","definitionErrors","ruleImplementation","defineRule","OVERRIDE_RULE","ruleErrors","BACKTRACK","grammarRule","isBackTrackingStack","orgState","saveRecogState","reloadRecogState","getSerializedGastProductions","serializeGrammar","version_1","VERSION","CstParser","EmbeddedActionsParser","EMPTY_ALT","lexer_public_1","createToken","EOF","tokenName","getLookaheadPaths","llk_lookahead_1","LLkLookaheadStrategy","serializeProduction","cst_dts_gen_1","generateCstDts","render_public_1","createSyntaxDiagramsCode","baseGetTag","baseHas","toFinite","remainder","hashClear","hashDelete","hashGet","hashHas","hashSet","Hash","start","Date","getTime","val","baseIndexOf","toInteger","nativeMax","max","fromIndex","stringToPath","assignValue","baseAssignValue","isNew","newValue","Stack","matchData","noCustomizer","srcValue","COMPARE_PARTIAL_FLAG","reWhitespace","memoizeCapped","rePropName","reEscapeChar","number","quote","subString","nativeNow","now","count","lastCalled","stamp","remaining","CellEvent","cloneArrayBuffer","typedArray","isDeep","buffer","byteOffset","Uint8Array","eq","equalArrays","mapToArray","setToArray","symbolProto","symbolValueOf","valueOf","byteLength","convert","stacked","arrayAggregator","baseAggregator","setter","initializer","isArrayLike","findIndexFunc","iterable","createAggregator","groupBy","rsAstralRange","rsAstral","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsModifier","rsOptVar","rsSeq","rsSymbol","reUnicode","RegExp","collectMethods","LooksAhead","has_1","initLooksAhead","dynamicTokensEnabled","DEFAULT_PARSER_CONFIG","lookAheadFuncsCache","preComputeLookaheadFunctions","repetitionMandatory","repetitionMandatoryWithSeparator","repetitionWithSeparator","prodIdx","laFunc","buildLookaheadForAlternation","prodOccurrence","hasPredicates","getKeyForAutomaticLookahead","fullRuleNameToShort","OR_IDX","setLaFuncCache","computeLookaheadFunc","MANY_IDX","OPTION_IDX","AT_LEAST_ONE_IDX","AT_LEAST_ONE_SEP_IDX","MANY_SEP_IDX","prodKey","prodMaxLookahead","dslMethodName","buildLookaheadForOptional","dslMethodIdx","currRuleShortName","getLastExplicitRuleShortName","getLaFuncFromCache","DslMethodsCollectorVisitor","dslMethods","PerformanceTracer","initPerformanceTracer","userTraceInitPerf","traceIsNumber","baseKeys","getTag","isPrototype","firstForTerminal","firstForBranching","firstForSequence","first","uniq_1","isSequenceProd","isBranchingProd","currSubProd","firstSet","seq","nextSubProdIdx","hasInnerProdsRemaining","isLastInnerProdOptional","allAlternativesFirsts","innerProd","arrayPush","keysFunc","symbolsFunc","copyObject","PRINT_ERROR","GastRecorder","some_1","isFunction_1","RECORDING_NULL_OBJECT","description","HANDLE_SEPARATOR","MAX_METHOD_IDX","pow","BITS_FOR_OCCURRENCE_IDX","RFT","RECORDING_PHASE_TOKEN","RECORDING_PHASE_CSTNODE","children","initGastRecorder","recordingProdStack","RECORDING_PHASE","enableRecording","_loop_1","arg1","arg2","consumeInternalRecord","subruleInternalRecord","optionInternalRecord","orInternalRecord","manyInternalRecord","manySepFirstInternalRecord","atLeastOneInternalRecord","atLeastOneSepFirstInternalRecord","ACTION_RECORD","BACKTRACK_RECORD","LA_RECORD","disableRecording","that","topLevelRuleRecord","def","newTopLevelRule","originalError","KNOWN_RECORDER_ERROR","mutabilityError","recordProd","recordOrProd","assertMethodIdxIsValid","getIdxSuffix","JSON","stringify","prevProd","newNoneTerminal","label","LABEL","outputCst","hasShortKeyProperty","prodConstructor","mainProdArg","handleSep","grammarAction","DEF","newProd","separator","SEP","MAX_LOOKAHEAD","hasOptions","newOrProd","IGNORE_AMBIGUITIES","GATE","currAltFlat","ALT","arraySome","baseSome","baseIsArguments","propertyIsEnumerable","self","saveState","input","groupIdx","restoreState","consumeChar","disjunction","flags","loc","begin","end","global","ignoreCase","multiLine","unicode","sticky","isRegExpFlag","popChar","addFlag","peekChar","terms","isTerm","term","isAssertion","assertion","atom","ASSERT_EXISTS","ASSERT_NEVER_REACH_HERE","quantifier","isBacktracking","range","atLeast","atMost","integerIncludingZero","isDigit","greedy","dotAll","atomEscape","characterClass","isPatternCharacter","patternCharacter","isQuantifier","complement","cc","decimalEscapeAtom","characterClassEscape","controlEscapeAtom","controlLetterEscapeAtom","nulCharacterAtom","hexEscapeSequenceAtom","regExpUnicodeEscapeSequenceAtom","identityEscapeAtom","positiveInteger","digitsCharCodes","whitespaceCodes","wordCharCodes","escapeCode","letter","toUpperCase","parseHexDigits","classPatternCharacterAtom","isClassAtom","from","classAtom","isRangeDash","to","insertToSet","classEscape","capturing","groupAst","decimalPatternNoZero","decimalPattern","parseInt","nextChar","isAtom","prevState","howMany","hexString","hexChar","hexDigitPattern","char","item","subItem","flagObj","flagKey","obj","BaseRegExpVisitor","visitChildren","child","visit","subChild","visitPattern","visitFlags","visitDisjunction","visitAlternative","visitStartAnchor","visitEndAnchor","visitWordBoundary","visitNonWordBoundary","visitLookahead","visitNegativeLookahead","visitCharacter","visitSet","visitGroup","visitGroupBackReference","visitQuantifier","castSlice","hasUnicode","stringToArray","methodName","strSymbols","chr","trailing","slice","fromRight","getRawTag","objectToString","baseClone","isKeyable","Promise","baseSetToString","setToString","shortOut","nativeKeysIn","isProto","isTokenType","hasExtendingTokensTypesMapProperty","hasExtendingTokensTypesProperty","hasCategoriesProperty","singleAssignCategoriesToksMap","assignCategoriesMapProp","assignCategoriesTokensProp","assignTokenDefaultProps","expandCategories","tokenIdxToClass","tokenShortNameIdx","tokenStructuredMatcherNoCategories","categories","searching","CATEGORIES","newCategories","categoryMatches","categoryMatchesMap","nextNode","pathNode","nextCategory","tokInstance","tokConstructor","instanceType","isParent","tokenTypesAndParents","isFlattenable","baseFlatten","depth","isStrict","RestWalker","walk","prevRest","subProd","currRest","walkProdRef","walkTerminal","walkFlat","walkOption","walkAtLeastOne","walkAtLeastOneSep","walkManySep","walkMany","walkOr","refProd","flatProd","fullOrRest","optionProd","atLeastOneProd","fullAtLeastOneRest","atLeastOneSepProd","fullAtLeastOneSepRest","restForRepetitionWithSeparator","manyProd","fullManyRest","manySepProd","fullManySepRest","orProd","alt","prodWrapper","repSepProd","castPath","nested","reFlags","regexp","baseToString","model_1","generate_1","defaultOptions","includeVisitorInterface","visitorInterfaceName","productions","effectiveOptions","model","buildModel","genDts","root","freeExports","nodeType","freeModule","Buffer","allocUnsafe","copy","getSymbolsIn","keysIn","baseUniq","visitor_1","helpers_1","Plus","Minus","Mult","Div","LParen","RParen","Comma","RowRange","NumberLiteral","longer_alt","Variable","SheetName","CellRange","CellRef","StringLiteral","Concat","FunctionName","WhiteSpace","GreaterThan","LessThan","GreaterThanEqual","LessThanEqual","Equal","NotEqual","IfFunction","TrueKeyword","FalseKeyword","NullKeyword","ArrayRowSep","RangeIntersect","ErrorConstant","IfErrorFunction","IfsFunction","SwitchFunction","LCurly","RCurly","ColumnRange","Power","allTokens","CalxTokens","CalxLexer","CalxParser","super","comparisonExpression","atomicExpression","$","arrayFormula","expression","additionExpression","concatenationExpression","multiplicationExpression","exponentiationExpression","unaryExpression","ifFunctionCall","functionCall","ifErrorFunctionCall","ifsFunctionCall","switchFunctionCall","arrayRow","performSelfAnalysis","parse","inputText","lexResult","cst","ErrorType","ArrayResult","values","rows","cols","getValue","row","col","isSingleValue","getSingleValue","toFlatArray","fromVerticalArray","v","fromHorizontalArray","from2DArray","normalized","newRow","fromSingleValue","parserInstance","CalxInterpreter","getBaseCstVisitorConstructorWithDefaults","validateVisitor","setContext","context","yy","getContext","ctx","separators","sort","a","currentRow","expressions","exp","left","lhs","rhs","right","operators","rightValue","operator","arrayOperation","operation","isError","leftArray","rightArray","resultLength","leftVal","min","rightVal","Number","str","ref","sheetName","resolveVariable","resolveCellReference","resolveCellRange","resolveRowRange","resolveColumnRange","condition","isTruthy","whenTrue","whenFalse","funcName","expr","callFunction","excelEpoch","msPerDay","getFunction","executeBuiltInFunction","isErrorValue","valueIfError","conditions","results","arrayExpression","getNamedRange","workbook","nameManager","getVariable","getCellValue","getCellRange","getRowRange","getColumnRange","includes","reduce","sum","flattenAndSum","isNaN","flattenedArray","flattenArray","filter","arrayMax","arrayMin","every","some","arr","flat","parseInput","cleanInput","startsWith","parseCst","ERROR","Range","sheet","address","_cells","_address","parseAddress","loadCells","cleanAddress","addr","_startAddress","trim","_endAddress","isSingleCell","cell","getCellDirect","expandRange","cells","startCol","startRow","endCol","endRow","startColNum","colToNum","endColNum","minRow","maxRow","minCol","maxCol","numToCol","getValues","setValuesFromArray","formula","cellIndex","rowData","setValues","toArray","calculate","columns","each","callback","find","getCellAt","getCellAtPosition","num","fromCharCode","getRange","SheetEvent","SheetState","DataType","DateUtil","serialToDate","serialDate","epochDate","ms","MS_PER_DAY","dateToSerial","date","isValidSerialDate","fromComponents","year","month","day","toComponents","getFullYear","getMonth","getDate","weekday","getDay","hours","getHours","minutes","getMinutes","seconds","getSeconds","toISOString","fromISOString","isoString","today","setHours","EXCEL_EPOCH","Cell","_type","NUMBER","_rules","precedents","dependents","remotePrecedents","remoteDependents","dynamicPrecedents","_dirty","_calculated","_hasRemotePrecedents","_hasRemoteDependents","_hasDynamicPrecedents","_isArrayAnchor","init","mount","el","dispatcher","dispatch","ELEMENT_MOUNTED","isEmpty","rawValue","_computed","_value","_formula","eval","handleArrayResult","valueChanged","CALCULATED","_markDependentsAsDirty","autoCalculate","_recalculateDependents","arrayResult","_arrayResult","checkSpillRange","spillArray","SPILL","getCellCoordinates","r","c","targetAddress","coordinatesToAddress","targetCell","getCell","_spillRange","colStr","isArrayAnchor","getSpillRange","setFormat","format","getFormat","setFormatter","formatter","getFormattedValue","isCalculated","isDirty","markAsDirty","isNumeric","parseFloat","oldFormula","updateDynamicPrecedents","FORMULA_CHANGED","newFormula","oldPrecedents","getPrecedents","precedent","removeDependent","rebuildDependencies","builder","setWorkbook","localDeps","remoteDeps","getFormulaDependencies","dependencies","precedentCell","addDependent","setPrecedents","remoteRef","cellAddress","parseRemoteReference","targetSheet","getSheet","addRemoteDependent","addRemotePrecedent","parsed","BOOLEAN","DATE","DATETIME","TIME","TEXT","trimmed","upperValue","parts","VALUE_CHANGED","invalidateDynamicDependents","recalculateDirtyCells","getDependents","dependent","getStringValue","getNumericValue","getDateValue","getSerialDateValue","setDateValue","setSerialDateValue","getFormattedDate","isDate","addPrecedent","setDependents","columnRanges","rowRanges","columnPattern","rowPattern","beforeMatch","hasDynamicPrecedents","dependsOnColumn","colNum","columnToNumber","dependsOnRow","CellRegistry","event","add","CELL_ADDED","remove","CELL_REMOVED","CELL_CREATED","all","filtered","numToStr","round","strToNum","chars","base","indexOf","getCellsInRange","regex","rangeStart","rangeEnd","boundaries","cellRange","isValidBinary","strRepeat","qty","repeat","unique","initial","arrayMerge","objectToArray","trimEmptyCell","rangeToTable","alphaPattern","numPattern","arrayTable","resultTable","colLength","resultRow","rowLength","transposeTable","table","newTable","translateFormula","cellRowOffset","cellColOffset","translated","col1Abs","col1","row1Abs","row1","col2Abs","col2","row2Abs","row2","col1Num","row1Num","newRow1Num","newStart","col2Num","row2Num","newRow2Num","colAbs","rowAbs","rowNum","newRowNum","updateMovedReferences","oldStartCol","oldStartRow","oldEndCol","oldEndRow","newStartCol","newStartRow","newEndCol","newEndRow","oldStartColNum","oldEndColNum","newStartColNum","newEndColNum","oldMinRow","oldMaxRow","oldMinCol","oldMaxCol","newMinRow","newMaxRow","newMinCol","newMaxCol","rangeMinCol","rangeMaxCol","rangeMinRow","rangeMaxRow","newCol1","newCol2","Sheet","EventDispatcher","_states","calculation","CALCULATION_IDLE","_variables","_autoCalculate","_id","_generateId","random","wasAutoCalculate","element","setAttribute","id","_el","ELEMENT_ATTACHED","listen","withoutEvent","pauseListener","_depTree","calculationOrder","topologicalSort","level","resumeListener","requestCalculate","depAddress","cellAddr","createCell","setActiveSheet","parser","buildDependencyTree","DependencyBuilder","build","setVariable","getCellRangeValues","startColMatch","startRowMatch","endColMatch","endRowMatch","getRowRangeValues","allCells","rowMatch","getColumnRangeValues","colMatch","loadArray","anchor","anchorMatch","anchorCol","anchorRow","anchorColNum","formulaRowOffset","formulaColOffset","rowIdx","colIdx","translatedFormula","moveRange","srcRange","dstAddress","srcParts","srcStart","srcEnd","srcStartCol","srcStartRow","srcEndCol","srcEndRow","dstCleaned","dstStartCol","dstStartRow","srcStartColNum","srcEndColNum","colCount","abs","rowCount","dstStartColNum","dstEndColNum","dstEndRow","dstEndCol","rowOffset","colOffset","srcCellAddresses","cellData","srcAddr","srcColMatch","srcRowMatch","srcCol","dstRow","dstAddr","existingCell","updatedFormula","copyRange","srcCell","nil","div0","na","flattenShallow","aIsArray","bIsArray","isFlat","flatten","argument","argsToArray","arrayEach","numbers","cleanFloat","power","parseBool","bool","up","parseNumber","parseString","parseNumberArray","len","parseDate","serial","utc_days","date_info","fractional_day","total_seconds","days","getUTCDate","getUTCMonth","getUTCFullYear","serialNumberToDate","parseDateArray","anyError","isDefined","arg","anyIsError","anyIsString","arrayValuesToNumbers","d1900","UTC","WEEK_STARTS","WEEK_TYPES","WEEKEND_TYPES","DATEDIF","start_date","end_date","unit","start_date_year","start_date_month","start_date_day","end_date_year","end_date_month","end_date_day","YEARFRAC","DAYS","setFullYear","setMonth","DATEVALUE","date_text","DAY","serial_number","startOfDay","newDate","DAYS360","method","sm","sd","ed","em","smd","emd","EDATE","months","EOMONTH","HOUR","INTERVAL","second","hour","sec","ISOWEEKNUM","setDate","yearStart","ceil","MINUTE","MONTH","NETWORKDAYS","holidays","INTL","NOW","SECOND","minute","TIMEVALUE","time_text","TODAY","WEEKDAY","return_type","WEEKNUM","week_start","jan","inc","WORKDAY","YEAR","isLeapYear","daysBetween","basis","sy","ey","feb29Between","date1","date2","year1","mar1year1","year2","mar1year2","ylength","years","average","addOn","weekend","isMask","maskDays","maskIndex","maskRegex","h","total","getTimezoneOffset","getUTCDay","dec","holiday","defaultOperator","validSymbols","_TOKEN_TYPE_OPERATOR","_TOKEN_TYPE_LITERAL","SUPPORTED_TOKENS","TOKEN_TYPE_OPERATOR","TOKEN_TYPE_LITERAL","literalValue","analyzedTokens","castValueToCorrectType","unshift","analyzeTokens","expressionLength","cursorIndex","processedValue","processedSymbol","tokenizeExpression","compute","evaluate","CELL","INFO","ISBLANK","ISBINARY","ISERR","value$1","isFinite","ISERROR","ISEVEN","ISFORMULA","ISLOGICAL","ISNA","ISNONTEXT","ISNUMBER","ISODD","ISREF","ISTEXT","N","SHEET","SHEETS","TYPE","CHOOSE","COLUMN","reference","COLUMNS","HLOOKUP","lookup_value","table_array","row_index_num","range_lookup","VLOOKUP","matrix","INDEX","row_num","column_num","someError","isOneDimensionRange","LOOKUP","result_array","isNumberLookup","localeCompare","MATCH","lookup_array","match_type","indexValue","lookupValueStr","toLowerCase","ROWS","TRANSPOSE","UNIQUE","hasElement","col_index_num","exactMatchOnly","error_val","SQRT2PI","AVEDEV","flatArgumentsDefined","subtract","AVERAGE","AVERAGEA","AVERAGEIF","criteria","average_range","average_count","isWildcard","tokenizedCriteria","AVERAGEIFS","criteriaLength","isMeetCondition","computedResult","BETA","x","alpha","beta","cumulative","cdf","pdf","probability","inv","BINOM","number_s","trials","probability_s","DIST","RANGE","number_s2","COMBIN","INV","CHISQ","deg_freedom","RT","TEST","actual_range","expected_range","tmp","dof","xsqr","Pi","PI","sqrt","ChiSq","CONFIDENCE","CORREL","array1","array2","COUNT","COUNTA","flatArguments","COUNTBLANK","COUNTIN","blanks","COUNTIF","matches","COUNTIFS","COUNTUNIQUE","NORM","standard_dev","T","COVARIANCE","DEVSQ","mean","P","mean1","mean2","S","EXPON","lambda","F","FISHER","FISHERINV","y","e2y","FORECAST","known_ys","known_xs","xmean","ymean","den","FREQUENCY","data_array","bins_array","GAMMA","GAMMALN","GAUSS","z","GEOMEAN","GROWTH","known_y","known_x","new_x","use_const","avg_x","avg_y","avg_xy","avg_xx","new_y","HARMEAN","deg_freedom1","deg_freedom2","sumOfSquares","x1","SUM","x2","PRECISE","HYPGEOM","INTERCEPT","KURT","sigma","LARGE","LINEST","m","LOGEST","sample_s","number_sample","population_s","number_pop","M","LOGNORM","MAX","MAXA","MEDIAN","MIN","MINA","MODE","currentItem","maxItems","MULT","NEGBINOM","number_f","PEARSON","den1","den2","PERCENTILE","l","fl","PERCENTRANK","PERMUT","number_chosen","FACT","PERMUTATIONA","PHI","EXC","significance","uniques","INC","POISSON","PROB","x_range","prob_range","lower_limit","upper_limit","sorted","QUARTILE","quart","RANK","ROW","RSQ","SKEW","SLOPE","SMALL","STANDARDIZE","AVG","order","EQ","m2","m3","STDEV","STDEVA","VARA","STDEVPA","VARPA","STEYX","lft","VAR","T$1","TREND","new_xs","linest","TRIMMEAN","percent","FLOOR","mean_x","mean_y","s_x","s_y","WEIBULL","Z","ABS","ACOS","acos","ACOSH","ACOT","atan","ACOTH","AGGREGATE","function_num","ref1","ref2","PRODUCT","SNGL","ARABIC","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I","ASIN","asin","ASINH","ATAN","ATAN2","x_num","y_num","atan2","ATANH","BASE","radix","min_length","anyError$1","CEILING","mode","precision","ROUND","COMBINA","COS","cos","COSH","COT","tan","COTH","e2","CSC","sin","CSCH","DECIMAL","DEGREES","angle","EVEN","EXP","MATH","MEMOIZED_FACT","FACTDOUBLE","GCD","r0","ri","INT","ISO","LCM","o","LN","LN10","LN2","LOG10E","LOG2E","LOG","LOG10","MOD","divisor","modulus","MROUND","multiple","MULTINOMIAL","ODD","temp","E","POWER","QUOTIENT","numerator","denominator","RADIANS","RAND","RANDBETWEEN","bottom","top","ROMAN","digits","roman","num_digits","ROUNDDOWN","ROUNDUP","SEC","SECH","SERIESSUM","coefficients","SIGN","SIN","SINH","SQRT","SQRTPI","SQRT1_2","SQRT2","SUBTOTAL","ADD","num1","num2","MINUS","DIVIDE","dividend","MULTIPLY","factor1","factor2","GT","GTE","LT","LTE","value1","value2","NE","POW","exponent","inner_result","SUMIF","sum_range","sumValue","SUMIFS","shift","criterias","valueToTest","SUMPRODUCT","arrays","product","_i","_ij","_ij_arg","_i_arg","SUMSQ","SUMX2MY2","array_x","array_y","SUMX2PY2","SUMXMY2","TAN","TANH","TRUNC","ASC","BAHTTEXT","CHAR","CLEAN","CODE","CONCATENATE","trueFound","falseFound","CONCAT","DBCS","DOLLAR","decimals","style","currency","minimumFractionDigits","maximumFractionDigits","formattedNumber","toLocaleString","EXACT","text1","text2","FIND","find_text","within_text","start_num","found_index","FIXED","no_commas","factor","toFixed","HTML2TEXT","LEFT","num_chars","LEN","LOWER","MID","NUMBERVALUE","decimal_separator","group_separator","PRONETIC","PROPER","txt","substr","REGEXEXTRACT","regular_expression","REGEXMATCH","full","REGEXREPLACE","replacement","REPLACE","old_text","new_text","REPT","number_times","RIGHT","SEARCH","foundAt","SPLIT","SUBSTITUTE","instance_num","currencySymbol","isPercent","endsWith","TEXTJOIN","delimiter","ignore_empty","flatArgs","textToJoin","chunks","TRIM","UNICHAR","UNICODE","UPPER","VALUE","output","isValidBinaryNumber","BESSELI","bessel","besseli","BESSELJ","besselj","BESSELK","besselk","BESSELY","bessely","BIN2DEC","stringified","BIN2HEX","places","BIN2OCT","BITAND","number1","number2","BITLSHIFT","shift_amount","BITOR","BITRSHIFT","BITXOR","COMPLEX","real_num","i_num","suffix","sign","CONVERT","from_unit","to_unit","units","binary_prefixes","Yi","Zi","Ei","Ti","Gi","Mi","ki","unit_prefixes","Y","G","u","f","base_from_unit","base_to_unit","from_multiplier","to_multiplier","from_binary_prefix","from_unit_prefix","to_binary_prefix","to_unit_prefix","DEC2BIN","DEC2HEX","DEC2OCT","DELTA","ERF","ERFC","GESTEP","step","HEX2BIN","negative","decimal","HEX2DEC","HEX2OCT","IMABS","inumber","IMREAL","IMAGINARY","plus","minus","last","IMARGUMENT","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMDIV","IMSIN","inumber1","inumber2","unit1","unit2","IMEXP","IMLN","IMLOG10","IMLOG2","IMPOWER","IMPRODUCT","IMSEC","IMSECH","IMSINH","IMSQRT","IMCSC","IMCSCH","IMSUB","IMSUM","IMTAN","OCT2BIN","OCT2DEC","OCT2HEX","BETADIST","BETAINV","BINOMDIST","CEILINGMATH","CEILINGPRECISE","CHIDIST","CHIDISTRT","CHIINV","CHIINVRT","CHITEST","COVAR","COVARIANCEP","COVARIANCES","CRITBINOM","ERFCPRECISE","ERFPRECISE","EXPONDIST","FDIST","FDISTRT","FINV","FINVRT","FLOORMATH","FLOORPRECISE","FTEST","GAMMADIST","GAMMAINV","GAMMALNPRECISE","HYPGEOMDIST","LOGINV","LOGNORMDIST","LOGNORMINV","MODEMULT","MODESNGL","NEGBINOMDIST","NETWORKDAYSINTL","NORMDIST","NORMINV","NORMSDIST","NORMSINV","PERCENTILEEXC","PERCENTILEINC","PERCENTRANKEXC","PERCENTRANKINC","POISSONDIST","QUARTILEEXC","QUARTILEINC","RANKAVG","RANKEQ","SKEWP","STDEVP","STDEVS","TDIST","TDISTRT","TINV","TTEST","VARP","VARS","WEIBULLDIST","WORKDAYINTL","ZTEST","compact","FINDFIELD","database","title","findResultIndex","maxCriteriaLength","currentCriteriaResult","hasMatchingCriteria","criteriaField","DAVERAGE","field","resultIndexes","targetFields","DCOUNT","targetValues","DCOUNTA","DGET","DMAX","maxValue","DMIN","minValue","DPRODUCT","DSTDEV","DSTDEVP","DSUM","DVAR","DVARP","validDate","ensureDate","ACCRINT","issue","first_interest","settlement","rate","par","frequency","ACCRINTM","AMORDEGRC","AMORLINC","COUPDAYBS","COUPDAYS","COUPDAYSNC","COUPNCD","COUPNUM","COUPPCD","CUMIPMT","nper","pv","start_period","end_period","payment","PMT","interest","FV","CUMPRINC","principal","DB","cost","salvage","life","period","current","ceiling","DDB","DISC","DOLLARDE","fractional_dollar","fraction","DOLLARFR","decimal_dollar","DURATION","EFFECT","nominal_rate","npery","FVSCHEDULE","schedule","future","INTRATE","IPMT","per","fv","IRR","guess","irrResult","dates","irrResultDeriv","frac","positive","newRate","epsRate","resultValue","resultRate","contLoop","ISPMT","MDURATION","MIRR","finance_rate","reinvest_rate","payments","incomes","NPV","NOMINAL","effect_rate","NPER","pmt","ODDFPRICE","ODDFYIELD","ODDLPRICE","ODDLYIELD","PDURATION","PPMT","PRICE","PRICEDISC","PRICEMAT","PV","RATE","epsMax","dy","df","RECEIVED","RRI","SLN","SYD","TBILLEQ","maturity","discount","TBILLPRICE","TBILLYIELD","pr","VDB","XIRR","XNPV","YIELD","YIELDDISC","YIELDMAT","AND","FALSE","IF","logical_test","value_if_true","value_if_false","IFS","IFERROR","value_if_error","IFNA","value_if_na","NOT","logical","TRUE","XOR","SWITCH","targetValue","argc","switchCount","switchSatisfied","hasDefaultClause","defaultClause","FLATTEN","ARGS2ARRAY","REFERENCE","opening","JOIN","NUMBERS","FormulaJSWrapper","upperName","Calx","formulae","sequenceFunction","bind","sortFunction","filterFunction","uniqueFunction","fn","sortIndex","sortOrder","byCol","arr2D","aVal","bVal","include","ifEmpty","include1D","includeVal","exactlyOnce","was1D","seen","convertArg","isDynamicArrayFunction","getAvailableFunctions","hasFunction","SharedContext","sheets","_formulaJSWrapper","activeSheet","addSheet","resolve","NameManager","_nameRegistry","_workbook","define","comment","isValidName","getReference","namedRange","getActiveSheet","getSheets","sheetNames","getAll","Comparator","equal","notEqual","lessThan","greaterThan","lessEqualThan","greaterEqualThan","createParser","interpreter","globalFormatterRegistry","cleaned","inputStr","hasPercent","integer","globalStyleFormatterRegistry","color","zero","Workbook","_elements","Set","_eventListeners","_formatters","_styleFormatters","_sheets","_parser","_dispatcher","_nameManager","isValidCellAddress","_deps","_depsBuilder","hydrateObj","attachElement","detachElement","delete","_removeElementListeners","_addElementListener","eventName","handler","target","listeners","removeEventListener","registerFormatter","registerStyleFormatter","getFormatter","getStyleFormatter","registerGlobalFormatter","registerGlobalStyleFormatter","getGlobalFormatter","destroy","createSheet","loadData","cellKey","exportJSON","variables","createFromData","sharedContext","utility","comparator","createFromElement","elements","NodeList","varName","hasSheetStructure","getAttribute","flatData","convertedData","_processDataAttributes","_setupEventListeners","_updateAllCells","calxCounter","querySelectorAll","autoAddress","dataType","tagName","initialValue","defaultValue","textContent","typeMap","focusHandler","cellRef","blurHandler","formattedValue","changeHandler","rawInput","isReadonly","readOnly","readonly","hasFormula","parsedValue","inputHandler","addEventListener","globalDoc","globalThis","document","activeElement","dataFormat","cellFormat","displayValue","_applyStyleFormatter","styleFormatterName","styleFormatter","css","property","setFormula","setFormulae","createWorkbook","createWorkbookFromData","createWorkbookFromElement","createInterpreter","every_1","alreadyVisited","AbstractProduction","nativeKeys","overArg","stubFalse","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","baseIsMatch","getMatchData","matchesStrictComparable","resIndex","symbol","baseSlice","asciiToArray","unicodeToArray","SetCache","arrayIncludes","arrayIncludesWith","baseUnary","cacheHas","isCommon","valuesLength","outer","computed","valuesIndex","GastRefResolverVisitor","resolveGrammar","refResolver","resolveRefs","nameToTopRule","UNRESOLVED_SUBRULE_REF","unresolvedRefName","identity","nodeAny","visitRule","trimmedEndIndex","reTrimStart","transform","possiblePathsFrom","NextTerminalAfterAtLeastOneSepWalker","NextTerminalAfterAtLeastOneWalker","NextTerminalAfterManySepWalker","NextTerminalAfterManyWalker","AbstractNextTerminalAfterProductionWalker","AbstractNextPossibleTokensWalker","rest_1","first_2","topProd","possibleTokTypes","nextProductionName","nextProductionOccurrence","found","isAtEndOfPath","reverse","occurrenceStack","updateExpectedNext","fullRest","nextTerminalName","nextTerminalOccurrence","lastTok","lastTokOccurrence","restProd","isEndOfRule","firstAfterMany","firstAfterManySep","firstAfterAtLeastOne","atleastOneSepProd","firstAfterfirstAfterAtLeastOneSep","expandTopLevelRule","currRuleStack","currOccurrenceStack","newRuleStack","newCurrOccurrenceStack","targetDef","maxLength","getAlternativesForProd","newDef","partialPath","suffixDef","initialDef","tokMatcher","maxLookAhead","EXIT_NON_TERMINAL","EXIT_NON_TERMINAL_ARR","EXIT_ALTERNATIVE","foundCompletePath","tokenVectorLength","minimalAlternativesIndex","possiblePaths","currDef","nextPath","nextIdx","nextTokenType","nextTokenOccurrence","newOccurrenceStack","nextPathWithout","nextPathWith","secondIteration","separatorGast","nthRepetition","currAltPath","noop","createSet","defineNameProp","nameValue","writable","arrayFilter","stubArray","nativeGetSymbols","getOwnPropertySymbols","defaults","propsIndex","propsLength","baseFindIndex","factory","BESSEL","version","_horner","_bessel_iter","f0","f1","tdx","f2","_bessel_wrap","bessel0","bessel1","nonzero","NaN","W","b0_a1a","b0_a2a","b0_a1b","b0_a2b","b1_a1a","b1_a2a","b1_a1b","b1_a2b","b0_a","b0_b","b1_a","b1_b","a1","a2","xx","ret","jsum","bjp","bj","bjm","tox","bip","bi","bim","DO_NOT_EXPORT_BESSEL","freeGlobal","g","isFunction","isLength","typedArrayTags","IN","minOptimizationVal","buildLineBreakIssueMessage","isShortPattern","isCustomPattern","addStickyFlag","addStartOfInput","findUnreachablePatterns","findModesThatDoNotExist","findInvalidGroupType","findDuplicatePatterns","findUnsupportedFlags","findStartOfInputAnchor","findEmptyMatchRegExps","findEndOfInputAnchor","findInvalidPatterns","findMissingPatterns","enableSticky","disableSticky","MODES","indexOf_1","isString_1","find_1","isRegExp_1","defaults_1","reg_exp_1","PATTERN","tokenTypesWithMissingPattern","currType","MISSING_PATTERN","valid","tokenTypesWithInvalidPattern","INVALID_PATTERN","onlyRelevantTypes","useSticky","debug","action","charCodeToOptimizedIdxMap","initCharCodeToOptimizedIndexMap","allTransformedPatterns","patternIdxToType","patternIdxToGroup","patternIdxToLongerAltIdxArr","patternIdxToPushMode","patternIdxToPopMode","patternIdxToCanLineTerminator","patternIdxToIsCustom","patternIdxToShort","regExpSource","escapedRegExpString","wrappedRegExp","clazz","groupName","GROUP","longerAltType","LONGER_ALT","lineTerminatorCharCodes","getCharCodes","LINE_BREAKS","checkLineBreaksIssues","canMatchCharCode","acc","optimizedIdx","addToMapOfArrays","START_CHARS_HINT","lastOptimizedIdx_1","charOrInt","currOptimizedIdx","failedOptimizationPrefixMsg","optimizedCodes","getOptimizedStartCodesIndices","code","validModesNames","missingResult","invalidResult","validTokenTypes","withRegExpPatterns","validateRegExpPattern","end_of_input","EndAnchorFinder","invalidRegex","regexpAst","endAnchorVisitor","EOI_ANCHOR_FOUND","matchesEmptyString","EMPTY_MATCH_PATTERN","start_of_input","StartAnchorFinder","startAnchorVisitor","SOI_ANCHOR_FOUND","invalidFlags","multiline","UNSUPPORTED_FLAGS_FOUND","identicalPatterns","outerType","innerType","duplicatePatterns","currIdenticalSet","setOfIdentical","tokenTypeNames","dupPatternSrc","DUPLICATE_PATTERNS_FOUND","invalidTypes","INVALID_GROUP_TYPE_FOUND","validModes","invalidModes","PUSH_MODE_DOES_NOT_EXIST","canBeTested","metaChars","testIdx","testTokenType","UNREACHABLE_PATTERN","IDENTIFY_TERMINATOR","CUSTOM_LINE_BREAK","details","charsOrCodes","numOrString","MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE","MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY","MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST","LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED","currLongerAlt","MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE","warnings","hasAnyLineBreak","allTokenTypes","concreteTokenTypes","terminatorCharCodes","currIssue","NO_LINE_BREAKS_FLAGS","clonedResult","groupKeys","currKey","currGroupValue","isMasked","toSource","reIsHostCtor","funcProto","Function","funcToString","reIsNative","baseMap","baseMatches","baseMatchesProperty","coreJsData","Ctor","baseCreate","getPrototype","eachFunc","DataView","_listeners","_isEventPaused","listener","addListener","hasListener","removeListener","listenerArray","eventData","__spreadArray","pack","ar","leftRecursionErrors","emptyAltErrors","validateEmptyOrAlternatives","ambiguousAltsErrors","emptyRepetitionErrors","buildLookaheadFuncForOr","buildAlternativesLookAheadFunc","buildLookaheadFuncForOptionalProd","buildSingleAlternativeLookaheadFunction","seenIndex","upperFirst","createCaseFirst","WeakMap","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","ctorString","baseValues","spreadableSymbol","isConcatSpreadable","arrLength","othLength","arrStacked","arrValue","othIndex","arrayLikeKeys","grammar","_b","_c","resourceBase","_d","freeProcess","process","nodeUtil","require","types","binding","generator","CstNodeDefinitionGenerator","rawElements","visitEach","grouped","propertyName","properties","allNullable","canBeNull","propertyType","optional","visitEachAndOverrideWith","getType","override","production","kind","baseIsNative","baseIsNaN","strictIndexOf","createAssigner","dataView","buildInProdFollowPrefix","buildBetweenProdsFollowPrefix","computeAllProdsFollows","ResyncFollowsWalker","constants_1","follows","followName","t_in_topProd_follows","inner","occurenceInParent","topProductions","reSyncFollows","currRefsFollow","firstCharOptimizedIndices","complementErrorMessage","ast","addOptimizedIdxToResult","rangeCode","minUnOptVal","maxUnOptVal","minOptIdx","maxOptIdx","currOptIdx","isOptionalQuantifier","isWholeOptional","upperChar","lowerChar","handleIgnoreCase","findCode","setNode","targetCharCodes","codeOrRange","range_1","targetCode","msgSuffix","CharCodeFinder","charCodes","charCodeFinder","baseDifference","isArrayLikeObject","difference","toBecomeFast","FakeConstructor","fakeInstance","fakeAccess","bar","Parser","follow_1","gast_resolver_public_1","recoverable_1","looksahead_1","tree_builder_1","lexer_adapter_1","recognizer_api_1","recognizer_engine_1","error_handler_1","context_assist_1","gast_recorder_1","perf_tracer_1","apply_mixins_1","nodeLocationTracking","recoveryValueFunc","resyncEnabled","tokenVocabulary","initErrorHandler","initRecognizerEngine","initRecoverable","initTreeBuilder","defErrorsMsgs","recordedRuleGast","originalGrammarAction","resolverErrors","validationErrors","tokensMap","lookaheadValidationErrors","allFollows","resyncFollows","initialize","DEFER_DEFINITION_ERRORS_HANDLING","applyMixins","Recoverable","TreeBuilder","RecognizerEngine","ErrorHandler","configClone","upperFirst_1","getTypeString","getNodeInterfaceName","getNodeChildrenTypeName","nodes","contentParts","nodeCstInterface","nodeInterfaceName","childrenTypeName","genNodeInterface","nodeChildrenInterface","typeName","typeNames","buildTypeString","genChildProperty","genNodeChildrenType","genCstNodeTypes","genVisitorFunction","jStat","calcRdx","isNumber","_init","retZero","retOne","retIdent","utils","toVector","_random_fn","setRandom","extend","dimensions","rowa","submat","arange","ind","cola","diag","nrow","res","antidiag","transpose","objArr","toAlter","ncol","cumreduce","alter","zeros","ones","rand","symmetric","cnt","hival","rl","_slice","list","rcSlice","colSlice","rowSlice","sliceAssign","A","B","nl","ml","diagonal","diagArray","mat","jProto","funcs","passfunc","setTimeout","ascNum","clip","sumsqrd","sumsqerr","sumrow","low","high","hash","_arr","meansqerr","geomean","logs","meanOfLogs","median","arrlen","cumsum","cumprod","diff","diffs","arrLen","rank","distinctNumbers","numberCounts","sortedDistinctNumbers","numberRanks","currentRank","maxCount","numMaxCount","mode_arr","variance","flag","pooledvariance","samples","deviation","dev","stdev","pooledstdev","meandev","meddev","coeffvar","quartiles","quantiles","quantilesArray","alphap","betap","aleph","gamma","sortedArray","quantileVals","percentile","exclusive","realIndex","percentileOfScore","score","counter","strict","histogram","binCnt","binWidth","bins","covariance","arr1","arr2","arr1Len","sq_dev","corrcoeff","spearmancoeff","stanMoment","mu","skewSum","skewness","kurtosis","fullbool","tmpthis","callbackFunction","argsToPass","curriedFunction","vector","gammaln","cof","ser","loggam","x0","xp","gl","gl0","gammafn","yi","q","fact","xden","xnum","gammap","lowRegGamma","an","aln","ap","del","ITMAX","factorialln","factorial","combination","combinationln","permutation","betafn","betaln","betacf","aa","fpmin","qab","qap","qam","gammapinv","pp","lna1","afac","gln","erf","ty","isneg","dd","erfc","erfcinv","err","ibetainv","lna","lnb","al","w","b1","ibeta","bt","randn","randg","shape","oalph","betinc","eps","c9","a0","b0","m9","tukeyWprob","rr","xleg","aleg","qsqz","wincr","pr_w","normal","blb","binc","bub","einsum","cc1","wi","elsum","jj","ac","qexpo","rinsum","newthis","sample","vals","fnfunc","centralF","df1","df2","binomial","cauchy","local","scale","chisquare","exponential","invgamma","kumaraswamy","lognormal","noncentralt","ncp","studentt","tol","flip","prob","lastvalue","std","pareto","dof2","weibull","uniform","betacdf","negbin","hypgeom","scaledPDF","samplesDone","scaledCDF","poisson","sumarr","sampleSmall","sampleLarge","U","slam","loglam","invalpha","vr","us","lam","triangular","arcsine","laplace","tukey","nmeans","xlegq","alegq","ulen","f2lf","f21","ff4","ans","otsum","twa1","t1","ps","tukeyQinv","valx0","valx1","iter","isUsable","divide","multiply","nrescols","rescols","dot","norm","nnorm","aug","newarr","gauss_jordan","det","determinant","submatrix","gauss_elimination","maug","pivot","y2","maxrow","triaUpSolve","matrix_mode","triaLowSolve","lu","R","cholesky","gauss_jacobi","xv","xk","gauss_seidel","SOR","householder","QR","lstsq","array_mode","Q","attrs","Q1","RI","Aj","cAi","Ij","cIi","R_I","Q2","jacobi","maxim","theta","ev","rungekutta","t_j","u_j","k1","k2","k3","romberg","h1","richardson","pos","y1","h_min","simpson","hermite","dF","dl","lagrange","cubic_spline","sq","gauss_quadrature","PCA","temp1","Bt","temp2","Vt","differenceOfProportions","p1","n1","p2","n2","pooled","zscore","ztest","sides","tscore","ttest","anovafscore","expVar","sampMean","sampSampMean","tmpargs","unexpVar","anovaftest","ftest","fscore","anovaftes","qscore","qtest","tukeyhsd","means","normalci","change","tci","significant","pvalue","oneSidedDifferenceOfProportions","twoSidedDifferenceOfProportions","models","ols","endog","exog","nobs","df_model","df_resid","coef","predict","resid","ybar","SSE","SSR","SST","R2","t_test","var_count","subModelList","endog_index","exog_index","sigmaHat","seBetaHat","tStatistic","pValue","leftppf","interval95","se","F_statistic","F_test","adjust_R2","buildxmatrix","matrixRows","builddxmatrix","buildjxmatrix","jMat","pass","buildymatrix","buildjymatrix","matrixmult","regress","jMatX","jMatY","innerinv","xtranspxinv","xtransp","next","regresst","compile","jMatYBar","yBar","yAverage","anova","residuals","ssr","msr","sse","mse","sst","mst","r2","fratio","rmse","r2adj","stats","sds","ts","covar","xtranspx","matrixsubtract","createBaseFor","otherArgs","addNoneTerminalToCst","addTerminalToCst","setNodeLocationFull","setNodeLocationOnlyOffset","currNodeLocation","newLocationInfo","tokenTypeName","ruleResult","BITS_FOR_ALT_IDX","BITS_FOR_RULE_IDX","BITS_FOR_METHOD_TYPE","ruleIdx","equalByTag","equalObjects","argsTag","arrayTag","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsTypedArray","nodeIsTypedArray","derivedCtor","baseCtors","baseCtor","baseProto","getOwnPropertyNames","propName","basePropDescriptor","getOwnPropertyDescriptor","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","isObject_1","shortRuleNameToFull","ruleShortNameIdx","subruleIdx","RULE_STACK","RULE_OCCURRENCE_STACK","allTokenTypes_1","uniqueTokens","noTokenCategoriesUsed","tokenConstructor","invokeRuleWithTry","shortName","ruleInvocationStateUpdate","CST_STACK","cstPostRule","invokeRuleCatch","ruleFinallyStateUpdate","resyncEnabledConfig","isFirstInvokedRule","reSyncEnabled","isBackTracking","recogError","partialCstResult","reSyncTokType","findReSyncTokenType","isInCurrentRuleReSyncSet","reSyncTo","recoveredNode","optionInternalLogic","lookAheadFunc","predicate_1","orgLookaheadFunction_1","laKey","atLeastOneInternalLogic","predicate_2","orgLookaheadFunction_2","raiseEarlyExitException","PROD_TYPE","REPETITION_MANDATORY","ERR_MSG","notStuck","doSingleRepetition","attemptInRepetitionRecovery","atLeastOneSepFirstInternalLogic","REPETITION_MANDATORY_WITH_SEPARATOR","separatorLookAheadFunc","repetitionSepSecondInternal","manyInternalLogic","lookaheadFunction","predicate_3","orgLookaheadFunction_3","manySepFirstInternalLogic","nextTerminalAfterWalker","beforeIteration","altIdxToTake","raiseNoAltException","cstFinallyStateUpdate","isAtEndOfInput","firstRedundantTok","getCurrRuleFullName","SAVE_ERROR","ARGS","cstPostNonTerminal","subruleInternalError","consumedToken","nextToken","consumeInternalError","eFromConsumption","consumeInternalRecovery","cstPostTerminal","getFollowsForInRuleRecovery","tryInRuleRecovery","eFromInRuleRecovery","IN_RULE_RECOVERY_EXCEPTION","savedErrors","savedRuleStack","lexerState","fullName","idxInCallingRule","cstInvocationStateUpdate","shortRuleNameToFullName","stackClear","stackDelete","stackGet","stackHas","stackSet","baseKeysIn","baseGet","uid","maskSrcKey","IE_PROTO","createFind","toNumber","INFINITY","baseSet","paths","cst_1","cst_visitor_1","setNodeLocationFromToken","setNodeLocationFromNode","setInitialNodeLocation","setInitialNodeLocationFullRecovery","cstPostRuleFull","setInitialNodeLocationFullRegular","setInitialNodeLocationOnlyOffsetRecovery","cstPostRuleOnlyOffset","setInitialNodeLocationOnlyOffsetRegular","cstNode","location","fullRuleName","ruleCstNode","prevToken","rootCst","ruleCstResult","preCstNode","getBaseCstVisitorConstructor","baseCstVisitorConstructor","newBaseCstVisitorConstructor","createBaseSemanticVisitorConstructor","baseCstVisitorWithDefaultsConstructor","newConstructor","createBaseVisitorConstructorWithDefaults","getPreviousExplicitRuleShortName","getLastExplicitRuleOccurrenceIndex","isSymbol","symbolToString","baseFilter","baseIsMap","nodeIsMap","isMap","_errors","getHumanReadableRuleStack","ruleOccurrenceStack","newErrors","userDefinedErrMsg","ruleGrammar","insideProdPaths","actualTokens","errMsgTypes","lookAheadPathsPerAlternative","hasIn","negate","InRuleRecoveryException","EOF_FOLLOW_KEY","firstAfterRepMap","getTokenToInsert","tokToInsert","isInsertedInRecovery","canTokenTypeBeInsertedInRecovery","canTokenTypeBeDeletedInRecovery","tryInRepetitionRecovery","grammarRuleArgs","expectedTokType","savedLexerState","passedResyncPoint","nextTokenWithoutResync","generateErrorMessage","addToResyncTokens","shouldInRepetitionRecoveryBeTried","expectTokAfterLastMatch","nextTokIdx","canPerformInRuleRecovery","tokIdxInRule","getCurrentGrammarPath","canRecoverWithSingleTokenInsertion","canRecoverWithSingleTokenDeletion","nextTok","expectedToken","mismatchedTok","possibleFollowsTokType","followKey","getCurrFollowKey","currentRuleReSyncSet","getFollowSetFromFollowKey","allPossibleReSyncTokTypes","flattenFollowSet","foundMatch","resyncTokType","currRuleIdx","prevRuleShortName","inRule","buildFullFollowKeyStack","explicitRuleStack","explicitOccurrenceStack","followStack","resyncTokens","prodFunc","lookaheadFunc","nextToksWalker","currShortName","firstAfterRepInfo","DependencyTree","cellRegistry","depTree","buildTree","_updateGraph","levels","visited","cellLevels","calculateLevel","maxLevel","precedentLevel","flattenToTopology","getDepth","_getDepth","tree","patterns","remoteColumnRange","remoteRowRange","remoteCellRange","remoteCell","columnRange","rowRange","remoteSheet","remoteCellObj","cleanFormula","remoteColumnMatches","remoteRowMatches","remoteCellRangeMatches","sheetPart","rangePart","expandCellRange","remoteCellMatches","cellRangeMatches","cellMatches","isFunctionOrKeyword","identifierMatches","identifier","addresses","baseIsSet","nodeIsSet","isSet","_definition","visitor","convertDefinition","serializedNonTerminal","serializedTerminal","terminalLabel","topRules","reIsDeepProp","reIsPlainProp","areTokenCategoriesNotUsed","lookAheadSequenceFromAlternatives","REPETITION","REPETITION_WITH_SEPARATOR","ALTERNATION","laFuncBuilder","lookAheadPaths","lookaheadBuilder","numOfAlts","areAllOneTokenLookahead","orAlts","predicates","currNumOfPaths","currPredicate","currPathLength","singleTokenAlts","choiceToAlt_1","currExtendingType","numOfPaths","singleTokensTypes","expectedTokenUniqueKey_1","choiceToAlt_2","RestDefinitionFinderWalker","targetOccurrence","targetProdType","restDef","checkIsTarget","expectedProdType","InsideDefinitionFinderVisitor","targetRef","expectedProdName","initializeArrayOfArrays","pathToHashKeys","longerKeys","currShorterKey","categoriesKeySuffix","isUniquePrefixHash","altKnownPathsKeys","searchPathKeys","otherAltKnownPathsKeys","searchIdx","altsDefs","partialAlts","finalResult","altsHashes","dict","newData","pathLength","currDataset","altIdx","currAltPathsAndSuffixes","currPathIdx","currPathPrefix","prefixKeys","currAltResult","newPartialPathsAndSuffixes","insideDefVisitor","insideDef","afterDef","searchPath","compareOtherPath","otherPath","searchTok","otherTok","singleAltPaths","singlePath","prefix","otherTokType","setCacheAdd","setCacheHas","getPrototypeOf","print_1","timer_1","to_fast_properties_1","overRest","freeSelf","hasFunc","objectCreate","proto","baseTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","POP_MODE","createTokenInternal","constant","baseIsRegExp","nodeIsRegExp","isRegExp","arrayBuffer","validateMissingCstMethods","CstVisitorDefinitionError","defaultVisit","lang_extensions_1","childrenNames","childrenNamesLength","currChildArray","currChildArrayLength","currChild","visitorInstance","ruleNames","missingRuleNames","MISSING_METHOD","derivedConstructor","semanticDefinitionErrors","errorMessages","currDefError","_RULE_NAMES","baseConstructor","withDefaultsProto","reHasUnicode","arrayEvery","baseEvery","castFunction","isString","resolver_1","actualOptions","topRulesTable","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","initCloneArray","initCloneByTag","initCloneObject","funcTag","cloneableTags","isFull","isFunc","subValue","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","window","nmd","__webpack_exports__"],"sourceRoot":""}